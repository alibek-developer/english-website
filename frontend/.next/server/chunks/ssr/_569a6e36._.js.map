{"version":3,"sources":["../../../../../node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs","../../../../../node_modules/framer-motion/dist/es/components/AnimatePresence/PresenceChild.mjs","../../../../../node_modules/framer-motion/dist/es/components/AnimatePresence/PopChild.mjs","../../../../../node_modules/framer-motion/dist/es/utils/use-composed-ref.mjs","../../../../../node_modules/framer-motion/dist/es/components/AnimatePresence/utils.mjs","../../../../../node_modules/%40radix-ui/react-toast/src/toast.tsx","../../../../../node_modules/%40clerk/nextjs/dist/esm/client-boundary/controlComponents.js","../../../../../node_modules/%40clerk/clerk-react/dist/errors.mjs","../../../../../node_modules/%40clerk/nextjs/dist/esm/client-boundary/hooks.js","../../../../../node_modules/%40swc/helpers/cjs/_interop_require_default.cjs","../../../../../node_modules/next/src/shared/lib/lazy-dynamic/dynamic-bailout-to-csr.tsx","../../../../../node_modules/next/src/shared/lib/encode-uri-path.ts","../../../../../node_modules/next/src/shared/lib/lazy-dynamic/preload-chunks.tsx","../../../../../node_modules/next/src/shared/lib/lazy-dynamic/loadable.tsx","../../../../../node_modules/next/src/shared/lib/app-dynamic.tsx","../../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/head-manager-context.ts","../../../../../node_modules/next/src/client/set-attributes-from-props.ts","../../../../../node_modules/next/src/client/request-idle-callback.ts","../../../../../node_modules/next/src/client/script.tsx","../../../../../node_modules/next/script.js","../../../../../node_modules/%40clerk/nextjs/dist/esm/app-router/client/ClerkProvider.js","../../../../../node_modules/%40clerk/nextjs/dist/esm/app-router/data%3Ac900a4%20%3Ctext/javascript%3E","../../../../../node_modules/%40clerk/nextjs/dist/esm/app-router/client/useAwaitablePush.js","../../../../../node_modules/%40clerk/nextjs/dist/esm/app-router/client/useAwaitableReplace.js","../../../../../node_modules/%40clerk/nextjs/dist/esm/utils/clerk-js-script.js","../../../../../node_modules/%40clerk/nextjs/dist/esm/utils/mergeNextClerkPropsWithEnv.js","../../../../../node_modules/%40clerk/nextjs/dist/esm/utils/removeBasePath.js","../../../../../node_modules/%40clerk/nextjs/dist/esm/utils/router-telemetry.js","../../../../../node_modules/%40clerk/shared/src/logger.ts","../../../../../node_modules/%40clerk/nextjs/src/client-boundary/hooks/useSafeLayoutEffect.tsx","../../../../../node_modules/%40clerk/nextjs/src/client-boundary/NextOptionsContext.tsx","../../../../../node_modules/%40clerk/nextjs/dist/esm/client-boundary/hooks/useSafeLayoutEffect.js","../../../../../node_modules/%40clerk/nextjs/dist/esm/client-boundary/NextOptionsContext.js","../../../../../node_modules/%40clerk/nextjs/src/utils/removeBasePath.ts","../../../../../node_modules/%40clerk/nextjs/dist/esm/app-router/client/useInternalNavFun.js","../../../../../node_modules/%40clerk/nextjs/src/app-router/client/ClerkProvider.tsx","../../../../../node_modules/next/src/shared/lib/router/utils/querystring.ts","../../../../../node_modules/next/src/shared/lib/router/utils/format-url.ts","../../../../../node_modules/next/src/client/use-merged-ref.ts","../../../../../node_modules/next/src/shared/lib/utils.ts","../../../../../node_modules/next/src/shared/lib/router/utils/parse-path.ts","../../../../../node_modules/next/src/shared/lib/router/utils/add-path-prefix.ts","../../../../../node_modules/next/src/shared/lib/router/utils/remove-trailing-slash.ts","../../../../../node_modules/next/src/client/normalize-trailing-slash.ts","../../../../../node_modules/next/src/client/add-base-path.ts","../../../../../node_modules/next/src/shared/lib/utils/warn-once.ts","../../../../../node_modules/next/src/client/components/segment-cache/types.ts","../../../../../node_modules/next/src/client/components/segment-cache/cache-key.ts","../../../../../node_modules/next/src/shared/lib/app-router-types.ts","../../../../../node_modules/next/src/client/components/match-segments.ts","../../../../../node_modules/next/src/client/components/app-router-headers.ts","../../../../../node_modules/next/src/shared/lib/segment-cache/segment-value-encoding.ts","../../../../../node_modules/next/src/client/route-params.ts","../../../../../node_modules/next/src/client/components/router-reducer/create-href-from-url.ts","../../../../../node_modules/next/src/client/flight-data-helpers.ts","../../../../../node_modules/next/src/client/app-build-id.ts","../../../../../node_modules/next/src/shared/lib/hash.ts","../../../../../node_modules/next/src/shared/lib/router/utils/cache-busting-search-param.ts","../../../../../node_modules/next/src/client/components/router-reducer/set-cache-busting-search-param.ts","../../../../../node_modules/next/src/client/components/router-reducer/fetch-server-response.ts","../../../../../node_modules/next/src/client/components/segment-cache/lru.ts","../../../../../node_modules/next/src/client/components/segment-cache/cache-map.ts","../../../../../node_modules/next/src/client/components/segment-cache/vary-path.ts","../../../../../node_modules/next/src/shared/lib/page-path/ensure-leading-slash.ts","../../../../../node_modules/next/src/shared/lib/router/utils/app-paths.ts","../../../../../node_modules/next/src/shared/lib/router/utils/interception-routes.ts","../../../../../node_modules/next/src/client/components/router-reducer/compute-changed-path.ts","../../../../../node_modules/next/src/client/components/router-reducer/handle-mutable.ts","../../../../../node_modules/next/src/client/components/router-reducer/create-router-cache-key.ts","../../../../../node_modules/next/src/client/components/router-reducer/is-navigating-to-new-root-layout.ts","../../../../../node_modules/next/src/client/components/router-reducer/ppr-navigations.ts","../../../../../node_modules/next/src/client/components/segment-cache/navigation.ts","../../../../../node_modules/next/src/client/components/router-reducer/reducers/navigate-reducer.ts","../../../../../node_modules/next/src/shared/lib/segment-cache/output-export-prefetch-encoding.ts","../../../../../node_modules/next/src/client/components/segment-cache/cache.ts","../../../../../node_modules/next/src/client/components/segment-cache/scheduler.ts","../../../../../node_modules/next/src/client/components/links.ts","../../../../../node_modules/next/src/shared/lib/router/utils/path-has-prefix.ts","../../../../../node_modules/next/src/client/has-base-path.ts","../../../../../node_modules/next/src/shared/lib/router/utils/is-local-url.ts","../../../../../node_modules/next/src/shared/lib/utils/error-once.ts","../../../../../node_modules/next/src/client/app-dir/link.tsx","../../../../../frontend/src/hooks/useTheme.tsx","../../../../../frontend/src/components/ui/button.tsx","../../../../../node_modules/clsx/dist/clsx.mjs","../../../../../node_modules/zustand/esm/vanilla.mjs","../../../../../node_modules/zustand/esm/middleware.mjs","../../../../../frontend/app/components/NextNavigation.tsx","../../../../../frontend/src/components/ThemeToggle.tsx","../../../../../node_modules/tailwind-merge/src/lib/utils.ts","../../../../../node_modules/zustand/esm/react.mjs","../../../../../frontend/src/utils/index.ts","../../../../../node_modules/lucide-react/src/defaultAttributes.ts","../../../../../node_modules/shared/src/utils.ts","../../../../../node_modules/lucide-react/src/icons/x.ts","../../../../../node_modules/lucide-react/src/icons/sun.ts","../../../../../node_modules/lucide-react/src/icons/moon.ts","../../../../../node_modules/lucide-react/src/icons/globe.ts","../../../../../node_modules/lucide-react/src/icons/menu.ts","../../../../../frontend/src/hooks/useLanguage.tsx","../../../../../node_modules/lucide-react/src/Icon.ts","../../../../../node_modules/lucide-react/src/createLucideIcon.ts","../../../../../node_modules/class-variance-authority/dist/index.mjs","../../../../../node_modules/tailwind-merge/src/lib/class-group-utils.ts","../../../../../node_modules/tailwind-merge/src/lib/lru-cache.ts","../../../../../node_modules/tailwind-merge/src/lib/parse-class-name.ts","../../../../../node_modules/tailwind-merge/src/lib/sort-modifiers.ts","../../../../../node_modules/tailwind-merge/src/lib/config-utils.ts","../../../../../node_modules/tailwind-merge/src/lib/merge-classlist.ts","../../../../../node_modules/tailwind-merge/src/lib/tw-join.ts","../../../../../node_modules/tailwind-merge/src/lib/create-tailwind-merge.ts","../../../../../node_modules/tailwind-merge/src/lib/from-theme.ts","../../../../../node_modules/tailwind-merge/src/lib/validators.ts","../../../../../node_modules/tailwind-merge/src/lib/default-config.ts","../../../../../node_modules/tailwind-merge/src/lib/merge-configs.ts","../../../../../node_modules/tailwind-merge/src/lib/extend-tailwind-merge.ts","../../../../../node_modules/tailwind-merge/src/lib/tw-merge.ts","../../../../../frontend/app/providers.tsx","../../../../../node_modules/%40tanstack/query-core/build/modern/queryClient.js","../../../../../node_modules/%40tanstack/query-core/build/modern/infiniteQueryBehavior.js","../../../../../node_modules/%40tanstack/query-core/build/modern/mutationCache.js","../../../../../node_modules/%40tanstack/query-core/build/modern/queryCache.js"],"sourcesContent":["\"use client\";\nimport { jsx, Fragment } from 'react/jsx-runtime';\nimport { useMemo, useRef, useState, useContext } from 'react';\nimport { LayoutGroupContext } from '../../context/LayoutGroupContext.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.mjs';\nimport { PresenceChild } from './PresenceChild.mjs';\nimport { usePresence } from './use-presence.mjs';\nimport { onlyElements, getChildKey } from './utils.mjs';\n\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\nconst AnimatePresence = ({ children, custom, initial = true, onExitComplete, presenceAffectsLayout = true, mode = \"sync\", propagate = false, anchorX = \"left\", root }) => {\n    const [isParentPresent, safeToRemove] = usePresence(propagate);\n    /**\n     * Filter any children that aren't ReactElements. We can only track components\n     * between renders with a props.key.\n     */\n    const presentChildren = useMemo(() => onlyElements(children), [children]);\n    /**\n     * Track the keys of the currently rendered children. This is used to\n     * determine which children are exiting.\n     */\n    const presentKeys = propagate && !isParentPresent ? [] : presentChildren.map(getChildKey);\n    /**\n     * If `initial={false}` we only want to pass this to components in the first render.\n     */\n    const isInitialRender = useRef(true);\n    /**\n     * A ref containing the currently present children. When all exit animations\n     * are complete, we use this to re-render the component with the latest children\n     * *committed* rather than the latest children *rendered*.\n     */\n    const pendingPresentChildren = useRef(presentChildren);\n    /**\n     * Track which exiting children have finished animating out.\n     */\n    const exitComplete = useConstant(() => new Map());\n    /**\n     * Save children to render as React state. To ensure this component is concurrent-safe,\n     * we check for exiting children via an effect.\n     */\n    const [diffedChildren, setDiffedChildren] = useState(presentChildren);\n    const [renderedChildren, setRenderedChildren] = useState(presentChildren);\n    useIsomorphicLayoutEffect(() => {\n        isInitialRender.current = false;\n        pendingPresentChildren.current = presentChildren;\n        /**\n         * Update complete status of exiting children.\n         */\n        for (let i = 0; i < renderedChildren.length; i++) {\n            const key = getChildKey(renderedChildren[i]);\n            if (!presentKeys.includes(key)) {\n                if (exitComplete.get(key) !== true) {\n                    exitComplete.set(key, false);\n                }\n            }\n            else {\n                exitComplete.delete(key);\n            }\n        }\n    }, [renderedChildren, presentKeys.length, presentKeys.join(\"-\")]);\n    const exitingChildren = [];\n    if (presentChildren !== diffedChildren) {\n        let nextChildren = [...presentChildren];\n        /**\n         * Loop through all the currently rendered components and decide which\n         * are exiting.\n         */\n        for (let i = 0; i < renderedChildren.length; i++) {\n            const child = renderedChildren[i];\n            const key = getChildKey(child);\n            if (!presentKeys.includes(key)) {\n                nextChildren.splice(i, 0, child);\n                exitingChildren.push(child);\n            }\n        }\n        /**\n         * If we're in \"wait\" mode, and we have exiting children, we want to\n         * only render these until they've all exited.\n         */\n        if (mode === \"wait\" && exitingChildren.length) {\n            nextChildren = exitingChildren;\n        }\n        setRenderedChildren(onlyElements(nextChildren));\n        setDiffedChildren(presentChildren);\n        /**\n         * Early return to ensure once we've set state with the latest diffed\n         * children, we can immediately re-render.\n         */\n        return null;\n    }\n    if (process.env.NODE_ENV !== \"production\" &&\n        mode === \"wait\" &&\n        renderedChildren.length > 1) {\n        console.warn(`You're attempting to animate multiple children within AnimatePresence, but its mode is set to \"wait\". This will lead to odd visual behaviour.`);\n    }\n    /**\n     * If we've been provided a forceRender function by the LayoutGroupContext,\n     * we can use it to force a re-render amongst all surrounding components once\n     * all components have finished animating out.\n     */\n    const { forceRender } = useContext(LayoutGroupContext);\n    return (jsx(Fragment, { children: renderedChildren.map((child) => {\n            const key = getChildKey(child);\n            const isPresent = propagate && !isParentPresent\n                ? false\n                : presentChildren === renderedChildren ||\n                    presentKeys.includes(key);\n            const onExit = () => {\n                if (exitComplete.has(key)) {\n                    exitComplete.set(key, true);\n                }\n                else {\n                    return;\n                }\n                let isEveryExitComplete = true;\n                exitComplete.forEach((isExitComplete) => {\n                    if (!isExitComplete)\n                        isEveryExitComplete = false;\n                });\n                if (isEveryExitComplete) {\n                    forceRender?.();\n                    setRenderedChildren(pendingPresentChildren.current);\n                    propagate && safeToRemove?.();\n                    onExitComplete && onExitComplete();\n                }\n            };\n            return (jsx(PresenceChild, { isPresent: isPresent, initial: !isInitialRender.current || initial\n                    ? undefined\n                    : false, custom: custom, presenceAffectsLayout: presenceAffectsLayout, mode: mode, root: root, onExitComplete: isPresent ? undefined : onExit, anchorX: anchorX, children: child }, key));\n        }) }));\n};\n\nexport { AnimatePresence };\n","\"use client\";\nimport { jsx } from 'react/jsx-runtime';\nimport * as React from 'react';\nimport { useId, useMemo } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { PopChild } from './PopChild.mjs';\n\nconst PresenceChild = ({ children, initial, isPresent, onExitComplete, custom, presenceAffectsLayout, mode, anchorX, root }) => {\n    const presenceChildren = useConstant(newChildrenMap);\n    const id = useId();\n    let isReusedContext = true;\n    let context = useMemo(() => {\n        isReusedContext = false;\n        return {\n            id,\n            initial,\n            isPresent,\n            custom,\n            onExitComplete: (childId) => {\n                presenceChildren.set(childId, true);\n                for (const isComplete of presenceChildren.values()) {\n                    if (!isComplete)\n                        return; // can stop searching when any is incomplete\n                }\n                onExitComplete && onExitComplete();\n            },\n            register: (childId) => {\n                presenceChildren.set(childId, false);\n                return () => presenceChildren.delete(childId);\n            },\n        };\n    }, [isPresent, presenceChildren, onExitComplete]);\n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    if (presenceAffectsLayout && isReusedContext) {\n        context = { ...context };\n    }\n    useMemo(() => {\n        presenceChildren.forEach((_, key) => presenceChildren.set(key, false));\n    }, [isPresent]);\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(() => {\n        !isPresent &&\n            !presenceChildren.size &&\n            onExitComplete &&\n            onExitComplete();\n    }, [isPresent]);\n    if (mode === \"popLayout\") {\n        children = (jsx(PopChild, { isPresent: isPresent, anchorX: anchorX, root: root, children: children }));\n    }\n    return (jsx(PresenceContext.Provider, { value: context, children: children }));\n};\nfunction newChildrenMap() {\n    return new Map();\n}\n\nexport { PresenceChild };\n","\"use client\";\nimport { jsx } from 'react/jsx-runtime';\nimport { isHTMLElement } from 'motion-dom';\nimport * as React from 'react';\nimport { useId, useRef, useContext, useInsertionEffect } from 'react';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.mjs';\nimport { useComposedRefs } from '../../utils/use-composed-ref.mjs';\n\n/**\n * Measurement functionality has to be within a separate component\n * to leverage snapshot lifecycle.\n */\nclass PopChildMeasure extends React.Component {\n    getSnapshotBeforeUpdate(prevProps) {\n        const element = this.props.childRef.current;\n        if (element && prevProps.isPresent && !this.props.isPresent) {\n            const parent = element.offsetParent;\n            const parentWidth = isHTMLElement(parent)\n                ? parent.offsetWidth || 0\n                : 0;\n            const size = this.props.sizeRef.current;\n            size.height = element.offsetHeight || 0;\n            size.width = element.offsetWidth || 0;\n            size.top = element.offsetTop;\n            size.left = element.offsetLeft;\n            size.right = parentWidth - size.width - size.left;\n        }\n        return null;\n    }\n    /**\n     * Required with getSnapshotBeforeUpdate to stop React complaining.\n     */\n    componentDidUpdate() { }\n    render() {\n        return this.props.children;\n    }\n}\nfunction PopChild({ children, isPresent, anchorX, root }) {\n    const id = useId();\n    const ref = useRef(null);\n    const size = useRef({\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n        right: 0,\n    });\n    const { nonce } = useContext(MotionConfigContext);\n    const composedRef = useComposedRefs(ref, children?.ref);\n    /**\n     * We create and inject a style block so we can apply this explicit\n     * sizing in a non-destructive manner by just deleting the style block.\n     *\n     * We can't apply size via render as the measurement happens\n     * in getSnapshotBeforeUpdate (post-render), likewise if we apply the\n     * styles directly on the DOM node, we might be overwriting\n     * styles set via the style prop.\n     */\n    useInsertionEffect(() => {\n        const { width, height, top, left, right } = size.current;\n        if (isPresent || !ref.current || !width || !height)\n            return;\n        const x = anchorX === \"left\" ? `left: ${left}` : `right: ${right}`;\n        ref.current.dataset.motionPopId = id;\n        const style = document.createElement(\"style\");\n        if (nonce)\n            style.nonce = nonce;\n        const parent = root ?? document.head;\n        parent.appendChild(style);\n        if (style.sheet) {\n            style.sheet.insertRule(`\n          [data-motion-pop-id=\"${id}\"] {\n            position: absolute !important;\n            width: ${width}px !important;\n            height: ${height}px !important;\n            ${x}px !important;\n            top: ${top}px !important;\n          }\n        `);\n        }\n        return () => {\n            if (parent.contains(style)) {\n                parent.removeChild(style);\n            }\n        };\n    }, [isPresent]);\n    return (jsx(PopChildMeasure, { isPresent: isPresent, childRef: ref, sizeRef: size, children: React.cloneElement(children, { ref: composedRef }) }));\n}\n\nexport { PopChild };\n","import * as React from 'react';\n\n/**\n * Taken from https://github.com/radix-ui/primitives/blob/main/packages/react/compose-refs/src/compose-refs.tsx\n */\n/**\n * Set a given ref to a given value\n * This utility takes care of different types of refs: callback refs and RefObject(s)\n */\nfunction setRef(ref, value) {\n    if (typeof ref === \"function\") {\n        return ref(value);\n    }\n    else if (ref !== null && ref !== undefined) {\n        ref.current = value;\n    }\n}\n/**\n * A utility to compose multiple refs together\n * Accepts callback refs and RefObject(s)\n */\nfunction composeRefs(...refs) {\n    return (node) => {\n        let hasCleanup = false;\n        const cleanups = refs.map((ref) => {\n            const cleanup = setRef(ref, node);\n            if (!hasCleanup && typeof cleanup === \"function\") {\n                hasCleanup = true;\n            }\n            return cleanup;\n        });\n        // React <19 will log an error to the console if a callback ref returns a\n        // value. We don't use ref cleanups internally so this will only happen if a\n        // user's ref callback returns a value, which we only expect if they are\n        // using the cleanup functionality added in React 19.\n        if (hasCleanup) {\n            return () => {\n                for (let i = 0; i < cleanups.length; i++) {\n                    const cleanup = cleanups[i];\n                    if (typeof cleanup === \"function\") {\n                        cleanup();\n                    }\n                    else {\n                        setRef(refs[i], null);\n                    }\n                }\n            };\n        }\n    };\n}\n/**\n * A custom hook that composes multiple refs\n * Accepts callback refs and RefObject(s)\n */\nfunction useComposedRefs(...refs) {\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    return React.useCallback(composeRefs(...refs), refs);\n}\n\nexport { useComposedRefs };\n","import { Children, isValidElement } from 'react';\n\nconst getChildKey = (child) => child.key || \"\";\nfunction onlyElements(children) {\n    const filtered = [];\n    // We use forEach here instead of map as map mutates the component key by preprending `.$`\n    Children.forEach(children, (child) => {\n        if (isValidElement(child))\n            filtered.push(child);\n    });\n    return filtered;\n}\n\nexport { getChildKey, onlyElements };\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { createCollection } from '@radix-ui/react-collection';\nimport { createContextScope } from '@radix-ui/react-context';\nimport * as DismissableLayer from '@radix-ui/react-dismissable-layer';\nimport { Portal } from '@radix-ui/react-portal';\nimport { Presence } from '@radix-ui/react-presence';\nimport { Primitive, dispatchDiscreteCustomEvent } from '@radix-ui/react-primitive';\nimport { useCallbackRef } from '@radix-ui/react-use-callback-ref';\nimport { useControllableState } from '@radix-ui/react-use-controllable-state';\nimport { useLayoutEffect } from '@radix-ui/react-use-layout-effect';\nimport { VisuallyHidden } from '@radix-ui/react-visually-hidden';\n\nimport type { Scope } from '@radix-ui/react-context';\n\n/* -------------------------------------------------------------------------------------------------\n * ToastProvider\n * -----------------------------------------------------------------------------------------------*/\n\nconst PROVIDER_NAME = 'ToastProvider';\n\nconst [Collection, useCollection, createCollectionScope] = createCollection<ToastElement>('Toast');\n\ntype SwipeDirection = 'up' | 'down' | 'left' | 'right';\ntype ToastProviderContextValue = {\n  label: string;\n  duration: number;\n  swipeDirection: SwipeDirection;\n  swipeThreshold: number;\n  toastCount: number;\n  viewport: ToastViewportElement | null;\n  onViewportChange(viewport: ToastViewportElement): void;\n  onToastAdd(): void;\n  onToastRemove(): void;\n  isFocusedToastEscapeKeyDownRef: React.MutableRefObject<boolean>;\n  isClosePausedRef: React.MutableRefObject<boolean>;\n};\n\ntype ScopedProps<P> = P & { __scopeToast?: Scope };\nconst [createToastContext, createToastScope] = createContextScope('Toast', [createCollectionScope]);\nconst [ToastProviderProvider, useToastProviderContext] =\n  createToastContext<ToastProviderContextValue>(PROVIDER_NAME);\n\ninterface ToastProviderProps {\n  children?: React.ReactNode;\n  /**\n   * An author-localized label for each toast. Used to help screen reader users\n   * associate the interruption with a toast.\n   * @defaultValue 'Notification'\n   */\n  label?: string;\n  /**\n   * Time in milliseconds that each toast should remain visible for.\n   * @defaultValue 5000\n   */\n  duration?: number;\n  /**\n   * Direction of pointer swipe that should close the toast.\n   * @defaultValue 'right'\n   */\n  swipeDirection?: SwipeDirection;\n  /**\n   * Distance in pixels that the swipe must pass before a close is triggered.\n   * @defaultValue 50\n   */\n  swipeThreshold?: number;\n}\n\nconst ToastProvider: React.FC<ToastProviderProps> = (props: ScopedProps<ToastProviderProps>) => {\n  const {\n    __scopeToast,\n    label = 'Notification',\n    duration = 5000,\n    swipeDirection = 'right',\n    swipeThreshold = 50,\n    children,\n  } = props;\n  const [viewport, setViewport] = React.useState<ToastViewportElement | null>(null);\n  const [toastCount, setToastCount] = React.useState(0);\n  const isFocusedToastEscapeKeyDownRef = React.useRef(false);\n  const isClosePausedRef = React.useRef(false);\n\n  if (!label.trim()) {\n    console.error(\n      `Invalid prop \\`label\\` supplied to \\`${PROVIDER_NAME}\\`. Expected non-empty \\`string\\`.`\n    );\n  }\n\n  return (\n    <Collection.Provider scope={__scopeToast}>\n      <ToastProviderProvider\n        scope={__scopeToast}\n        label={label}\n        duration={duration}\n        swipeDirection={swipeDirection}\n        swipeThreshold={swipeThreshold}\n        toastCount={toastCount}\n        viewport={viewport}\n        onViewportChange={setViewport}\n        onToastAdd={React.useCallback(() => setToastCount((prevCount) => prevCount + 1), [])}\n        onToastRemove={React.useCallback(() => setToastCount((prevCount) => prevCount - 1), [])}\n        isFocusedToastEscapeKeyDownRef={isFocusedToastEscapeKeyDownRef}\n        isClosePausedRef={isClosePausedRef}\n      >\n        {children}\n      </ToastProviderProvider>\n    </Collection.Provider>\n  );\n};\n\nToastProvider.displayName = PROVIDER_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * ToastViewport\n * -----------------------------------------------------------------------------------------------*/\n\nconst VIEWPORT_NAME = 'ToastViewport';\nconst VIEWPORT_DEFAULT_HOTKEY = ['F8'];\nconst VIEWPORT_PAUSE = 'toast.viewportPause';\nconst VIEWPORT_RESUME = 'toast.viewportResume';\n\ntype ToastViewportElement = React.ComponentRef<typeof Primitive.ol>;\ntype PrimitiveOrderedListProps = React.ComponentPropsWithoutRef<typeof Primitive.ol>;\ninterface ToastViewportProps extends PrimitiveOrderedListProps {\n  /**\n   * The keys to use as the keyboard shortcut that will move focus to the toast viewport.\n   * @defaultValue ['F8']\n   */\n  hotkey?: string[];\n  /**\n   * An author-localized label for the toast viewport to provide context for screen reader users\n   * when navigating page landmarks. The available `{hotkey}` placeholder will be replaced for you.\n   * @defaultValue 'Notifications ({hotkey})'\n   */\n  label?: string;\n}\n\nconst ToastViewport = React.forwardRef<ToastViewportElement, ToastViewportProps>(\n  (props: ScopedProps<ToastViewportProps>, forwardedRef) => {\n    const {\n      __scopeToast,\n      hotkey = VIEWPORT_DEFAULT_HOTKEY,\n      label = 'Notifications ({hotkey})',\n      ...viewportProps\n    } = props;\n    const context = useToastProviderContext(VIEWPORT_NAME, __scopeToast);\n    const getItems = useCollection(__scopeToast);\n    const wrapperRef = React.useRef<HTMLDivElement>(null);\n    const headFocusProxyRef = React.useRef<FocusProxyElement>(null);\n    const tailFocusProxyRef = React.useRef<FocusProxyElement>(null);\n    const ref = React.useRef<ToastViewportElement>(null);\n    const composedRefs = useComposedRefs(forwardedRef, ref, context.onViewportChange);\n    const hotkeyLabel = hotkey.join('+').replace(/Key/g, '').replace(/Digit/g, '');\n    const hasToasts = context.toastCount > 0;\n\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        // we use `event.code` as it is consistent regardless of meta keys that were pressed.\n        // for example, `event.key` for `Control+Alt+t` is `\u2020` and `t !== \u2020`\n        const isHotkeyPressed =\n          hotkey.length !== 0 && hotkey.every((key) => (event as any)[key] || event.code === key);\n        if (isHotkeyPressed) ref.current?.focus();\n      };\n      document.addEventListener('keydown', handleKeyDown);\n      return () => document.removeEventListener('keydown', handleKeyDown);\n    }, [hotkey]);\n\n    React.useEffect(() => {\n      const wrapper = wrapperRef.current;\n      const viewport = ref.current;\n      if (hasToasts && wrapper && viewport) {\n        const handlePause = () => {\n          if (!context.isClosePausedRef.current) {\n            const pauseEvent = new CustomEvent(VIEWPORT_PAUSE);\n            viewport.dispatchEvent(pauseEvent);\n            context.isClosePausedRef.current = true;\n          }\n        };\n\n        const handleResume = () => {\n          if (context.isClosePausedRef.current) {\n            const resumeEvent = new CustomEvent(VIEWPORT_RESUME);\n            viewport.dispatchEvent(resumeEvent);\n            context.isClosePausedRef.current = false;\n          }\n        };\n\n        const handleFocusOutResume = (event: FocusEvent) => {\n          const isFocusMovingOutside = !wrapper.contains(event.relatedTarget as HTMLElement);\n          if (isFocusMovingOutside) handleResume();\n        };\n\n        const handlePointerLeaveResume = () => {\n          const isFocusInside = wrapper.contains(document.activeElement);\n          if (!isFocusInside) handleResume();\n        };\n\n        // Toasts are not in the viewport React tree so we need to bind DOM events\n        wrapper.addEventListener('focusin', handlePause);\n        wrapper.addEventListener('focusout', handleFocusOutResume);\n        wrapper.addEventListener('pointermove', handlePause);\n        wrapper.addEventListener('pointerleave', handlePointerLeaveResume);\n        window.addEventListener('blur', handlePause);\n        window.addEventListener('focus', handleResume);\n        return () => {\n          wrapper.removeEventListener('focusin', handlePause);\n          wrapper.removeEventListener('focusout', handleFocusOutResume);\n          wrapper.removeEventListener('pointermove', handlePause);\n          wrapper.removeEventListener('pointerleave', handlePointerLeaveResume);\n          window.removeEventListener('blur', handlePause);\n          window.removeEventListener('focus', handleResume);\n        };\n      }\n    }, [hasToasts, context.isClosePausedRef]);\n\n    const getSortedTabbableCandidates = React.useCallback(\n      ({ tabbingDirection }: { tabbingDirection: 'forwards' | 'backwards' }) => {\n        const toastItems = getItems();\n        const tabbableCandidates = toastItems.map((toastItem) => {\n          const toastNode = toastItem.ref.current!;\n          const toastTabbableCandidates = [toastNode, ...getTabbableCandidates(toastNode)];\n          return tabbingDirection === 'forwards'\n            ? toastTabbableCandidates\n            : toastTabbableCandidates.reverse();\n        });\n        return (\n          tabbingDirection === 'forwards' ? tabbableCandidates.reverse() : tabbableCandidates\n        ).flat();\n      },\n      [getItems]\n    );\n\n    React.useEffect(() => {\n      const viewport = ref.current;\n      // We programmatically manage tabbing as we are unable to influence\n      // the source order with portals, this allows us to reverse the\n      // tab order so that it runs from most recent toast to least\n      if (viewport) {\n        const handleKeyDown = (event: KeyboardEvent) => {\n          const isMetaKey = event.altKey || event.ctrlKey || event.metaKey;\n          const isTabKey = event.key === 'Tab' && !isMetaKey;\n\n          if (isTabKey) {\n            const focusedElement = document.activeElement;\n            const isTabbingBackwards = event.shiftKey;\n            const targetIsViewport = event.target === viewport;\n\n            // If we're back tabbing after jumping to the viewport then we simply\n            // proxy focus out to the preceding document\n            if (targetIsViewport && isTabbingBackwards) {\n              headFocusProxyRef.current?.focus();\n              return;\n            }\n\n            const tabbingDirection = isTabbingBackwards ? 'backwards' : 'forwards';\n            const sortedCandidates = getSortedTabbableCandidates({ tabbingDirection });\n            const index = sortedCandidates.findIndex((candidate) => candidate === focusedElement);\n            if (focusFirst(sortedCandidates.slice(index + 1))) {\n              event.preventDefault();\n            } else {\n              // If we can't focus that means we're at the edges so we\n              // proxy to the corresponding exit point and let the browser handle\n              // tab/shift+tab keypress and implicitly pass focus to the next valid element in the document\n              isTabbingBackwards\n                ? headFocusProxyRef.current?.focus()\n                : tailFocusProxyRef.current?.focus();\n            }\n          }\n        };\n\n        // Toasts are not in the viewport React tree so we need to bind DOM events\n        viewport.addEventListener('keydown', handleKeyDown);\n        return () => viewport.removeEventListener('keydown', handleKeyDown);\n      }\n    }, [getItems, getSortedTabbableCandidates]);\n\n    return (\n      <DismissableLayer.Branch\n        ref={wrapperRef}\n        role=\"region\"\n        aria-label={label.replace('{hotkey}', hotkeyLabel)}\n        // Ensure virtual cursor from landmarks menus triggers focus/blur for pause/resume\n        tabIndex={-1}\n        // incase list has size when empty (e.g. padding), we remove pointer events so\n        // it doesn't prevent interactions with page elements that it overlays\n        style={{ pointerEvents: hasToasts ? undefined : 'none' }}\n      >\n        {hasToasts && (\n          <FocusProxy\n            ref={headFocusProxyRef}\n            onFocusFromOutsideViewport={() => {\n              const tabbableCandidates = getSortedTabbableCandidates({\n                tabbingDirection: 'forwards',\n              });\n              focusFirst(tabbableCandidates);\n            }}\n          />\n        )}\n        {/**\n         * tabindex on the the list so that it can be focused when items are removed. we focus\n         * the list instead of the viewport so it announces number of items remaining.\n         */}\n        <Collection.Slot scope={__scopeToast}>\n          <Primitive.ol tabIndex={-1} {...viewportProps} ref={composedRefs} />\n        </Collection.Slot>\n        {hasToasts && (\n          <FocusProxy\n            ref={tailFocusProxyRef}\n            onFocusFromOutsideViewport={() => {\n              const tabbableCandidates = getSortedTabbableCandidates({\n                tabbingDirection: 'backwards',\n              });\n              focusFirst(tabbableCandidates);\n            }}\n          />\n        )}\n      </DismissableLayer.Branch>\n    );\n  }\n);\n\nToastViewport.displayName = VIEWPORT_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\nconst FOCUS_PROXY_NAME = 'ToastFocusProxy';\n\ntype FocusProxyElement = React.ComponentRef<typeof VisuallyHidden>;\ntype VisuallyHiddenProps = React.ComponentPropsWithoutRef<typeof VisuallyHidden>;\ninterface FocusProxyProps extends VisuallyHiddenProps {\n  onFocusFromOutsideViewport(): void;\n}\n\nconst FocusProxy = React.forwardRef<FocusProxyElement, ScopedProps<FocusProxyProps>>(\n  (props, forwardedRef) => {\n    const { __scopeToast, onFocusFromOutsideViewport, ...proxyProps } = props;\n    const context = useToastProviderContext(FOCUS_PROXY_NAME, __scopeToast);\n\n    return (\n      <VisuallyHidden\n        tabIndex={0}\n        {...proxyProps}\n        ref={forwardedRef}\n        // Avoid page scrolling when focus is on the focus proxy\n        style={{ position: 'fixed' }}\n        onFocus={(event) => {\n          const prevFocusedElement = event.relatedTarget as HTMLElement | null;\n          const isFocusFromOutsideViewport = !context.viewport?.contains(prevFocusedElement);\n          if (isFocusFromOutsideViewport) onFocusFromOutsideViewport();\n        }}\n      />\n    );\n  }\n);\n\nFocusProxy.displayName = FOCUS_PROXY_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * Toast\n * -----------------------------------------------------------------------------------------------*/\n\nconst TOAST_NAME = 'Toast';\nconst TOAST_SWIPE_START = 'toast.swipeStart';\nconst TOAST_SWIPE_MOVE = 'toast.swipeMove';\nconst TOAST_SWIPE_CANCEL = 'toast.swipeCancel';\nconst TOAST_SWIPE_END = 'toast.swipeEnd';\n\ntype ToastElement = ToastImplElement;\ninterface ToastProps extends Omit<ToastImplProps, keyof ToastImplPrivateProps> {\n  open?: boolean;\n  defaultOpen?: boolean;\n  onOpenChange?(open: boolean): void;\n  /**\n   * Used to force mounting when more control is needed. Useful when\n   * controlling animation with React animation libraries.\n   */\n  forceMount?: true;\n}\n\nconst Toast = React.forwardRef<ToastElement, ToastProps>(\n  (props: ScopedProps<ToastProps>, forwardedRef) => {\n    const { forceMount, open: openProp, defaultOpen, onOpenChange, ...toastProps } = props;\n    const [open, setOpen] = useControllableState({\n      prop: openProp,\n      defaultProp: defaultOpen ?? true,\n      onChange: onOpenChange,\n      caller: TOAST_NAME,\n    });\n    return (\n      <Presence present={forceMount || open}>\n        <ToastImpl\n          open={open}\n          {...toastProps}\n          ref={forwardedRef}\n          onClose={() => setOpen(false)}\n          onPause={useCallbackRef(props.onPause)}\n          onResume={useCallbackRef(props.onResume)}\n          onSwipeStart={composeEventHandlers(props.onSwipeStart, (event) => {\n            event.currentTarget.setAttribute('data-swipe', 'start');\n          })}\n          onSwipeMove={composeEventHandlers(props.onSwipeMove, (event) => {\n            const { x, y } = event.detail.delta;\n            event.currentTarget.setAttribute('data-swipe', 'move');\n            event.currentTarget.style.setProperty('--radix-toast-swipe-move-x', `${x}px`);\n            event.currentTarget.style.setProperty('--radix-toast-swipe-move-y', `${y}px`);\n          })}\n          onSwipeCancel={composeEventHandlers(props.onSwipeCancel, (event) => {\n            event.currentTarget.setAttribute('data-swipe', 'cancel');\n            event.currentTarget.style.removeProperty('--radix-toast-swipe-move-x');\n            event.currentTarget.style.removeProperty('--radix-toast-swipe-move-y');\n            event.currentTarget.style.removeProperty('--radix-toast-swipe-end-x');\n            event.currentTarget.style.removeProperty('--radix-toast-swipe-end-y');\n          })}\n          onSwipeEnd={composeEventHandlers(props.onSwipeEnd, (event) => {\n            const { x, y } = event.detail.delta;\n            event.currentTarget.setAttribute('data-swipe', 'end');\n            event.currentTarget.style.removeProperty('--radix-toast-swipe-move-x');\n            event.currentTarget.style.removeProperty('--radix-toast-swipe-move-y');\n            event.currentTarget.style.setProperty('--radix-toast-swipe-end-x', `${x}px`);\n            event.currentTarget.style.setProperty('--radix-toast-swipe-end-y', `${y}px`);\n            setOpen(false);\n          })}\n        />\n      </Presence>\n    );\n  }\n);\n\nToast.displayName = TOAST_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\ntype SwipeEvent = { currentTarget: EventTarget & ToastElement } & Omit<\n  CustomEvent<{ originalEvent: React.PointerEvent; delta: { x: number; y: number } }>,\n  'currentTarget'\n>;\n\nconst [ToastInteractiveProvider, useToastInteractiveContext] = createToastContext(TOAST_NAME, {\n  onClose() {},\n});\n\ntype ToastImplElement = React.ComponentRef<typeof Primitive.li>;\ntype DismissableLayerProps = React.ComponentPropsWithoutRef<typeof DismissableLayer.Root>;\ntype ToastImplPrivateProps = { open: boolean; onClose(): void };\ntype PrimitiveListItemProps = React.ComponentPropsWithoutRef<typeof Primitive.li>;\ninterface ToastImplProps extends ToastImplPrivateProps, PrimitiveListItemProps {\n  type?: 'foreground' | 'background';\n  /**\n   * Time in milliseconds that toast should remain visible for. Overrides value\n   * given to `ToastProvider`.\n   */\n  duration?: number;\n  onEscapeKeyDown?: DismissableLayerProps['onEscapeKeyDown'];\n  onPause?(): void;\n  onResume?(): void;\n  onSwipeStart?(event: SwipeEvent): void;\n  onSwipeMove?(event: SwipeEvent): void;\n  onSwipeCancel?(event: SwipeEvent): void;\n  onSwipeEnd?(event: SwipeEvent): void;\n}\n\nconst ToastImpl = React.forwardRef<ToastImplElement, ToastImplProps>(\n  (props: ScopedProps<ToastImplProps>, forwardedRef) => {\n    const {\n      __scopeToast,\n      type = 'foreground',\n      duration: durationProp,\n      open,\n      onClose,\n      onEscapeKeyDown,\n      onPause,\n      onResume,\n      onSwipeStart,\n      onSwipeMove,\n      onSwipeCancel,\n      onSwipeEnd,\n      ...toastProps\n    } = props;\n    const context = useToastProviderContext(TOAST_NAME, __scopeToast);\n    const [node, setNode] = React.useState<ToastImplElement | null>(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setNode(node));\n    const pointerStartRef = React.useRef<{ x: number; y: number } | null>(null);\n    const swipeDeltaRef = React.useRef<{ x: number; y: number } | null>(null);\n    const duration = durationProp || context.duration;\n    const closeTimerStartTimeRef = React.useRef(0);\n    const closeTimerRemainingTimeRef = React.useRef(duration);\n    const closeTimerRef = React.useRef(0);\n    const { onToastAdd, onToastRemove } = context;\n    const handleClose = useCallbackRef(() => {\n      // focus viewport if focus is within toast to read the remaining toast\n      // count to SR users and ensure focus isn't lost\n      const isFocusInToast = node?.contains(document.activeElement);\n      if (isFocusInToast) context.viewport?.focus();\n      onClose();\n    });\n\n    const startTimer = React.useCallback(\n      (duration: number) => {\n        if (!duration || duration === Infinity) return;\n        window.clearTimeout(closeTimerRef.current);\n        closeTimerStartTimeRef.current = new Date().getTime();\n        closeTimerRef.current = window.setTimeout(handleClose, duration);\n      },\n      [handleClose]\n    );\n\n    React.useEffect(() => {\n      const viewport = context.viewport;\n      if (viewport) {\n        const handleResume = () => {\n          startTimer(closeTimerRemainingTimeRef.current);\n          onResume?.();\n        };\n        const handlePause = () => {\n          const elapsedTime = new Date().getTime() - closeTimerStartTimeRef.current;\n          closeTimerRemainingTimeRef.current = closeTimerRemainingTimeRef.current - elapsedTime;\n          window.clearTimeout(closeTimerRef.current);\n          onPause?.();\n        };\n        viewport.addEventListener(VIEWPORT_PAUSE, handlePause);\n        viewport.addEventListener(VIEWPORT_RESUME, handleResume);\n        return () => {\n          viewport.removeEventListener(VIEWPORT_PAUSE, handlePause);\n          viewport.removeEventListener(VIEWPORT_RESUME, handleResume);\n        };\n      }\n    }, [context.viewport, duration, onPause, onResume, startTimer]);\n\n    // start timer when toast opens or duration changes.\n    // we include `open` in deps because closed !== unmounted when animating\n    // so it could reopen before being completely unmounted\n    React.useEffect(() => {\n      if (open && !context.isClosePausedRef.current) startTimer(duration);\n    }, [open, duration, context.isClosePausedRef, startTimer]);\n\n    React.useEffect(() => {\n      onToastAdd();\n      return () => onToastRemove();\n    }, [onToastAdd, onToastRemove]);\n\n    const announceTextContent = React.useMemo(() => {\n      return node ? getAnnounceTextContent(node) : null;\n    }, [node]);\n\n    if (!context.viewport) return null;\n\n    return (\n      <>\n        {announceTextContent && (\n          <ToastAnnounce\n            __scopeToast={__scopeToast}\n            // Toasts are always role=status to avoid stuttering issues with role=alert in SRs.\n            role=\"status\"\n            aria-live={type === 'foreground' ? 'assertive' : 'polite'}\n          >\n            {announceTextContent}\n          </ToastAnnounce>\n        )}\n\n        <ToastInteractiveProvider scope={__scopeToast} onClose={handleClose}>\n          {ReactDOM.createPortal(\n            <Collection.ItemSlot scope={__scopeToast}>\n              <DismissableLayer.Root\n                asChild\n                onEscapeKeyDown={composeEventHandlers(onEscapeKeyDown, () => {\n                  if (!context.isFocusedToastEscapeKeyDownRef.current) handleClose();\n                  context.isFocusedToastEscapeKeyDownRef.current = false;\n                })}\n              >\n                <Primitive.li\n                  tabIndex={0}\n                  data-state={open ? 'open' : 'closed'}\n                  data-swipe-direction={context.swipeDirection}\n                  {...toastProps}\n                  ref={composedRefs}\n                  style={{ userSelect: 'none', touchAction: 'none', ...props.style }}\n                  onKeyDown={composeEventHandlers(props.onKeyDown, (event) => {\n                    if (event.key !== 'Escape') return;\n                    onEscapeKeyDown?.(event.nativeEvent);\n                    if (!event.nativeEvent.defaultPrevented) {\n                      context.isFocusedToastEscapeKeyDownRef.current = true;\n                      handleClose();\n                    }\n                  })}\n                  onPointerDown={composeEventHandlers(props.onPointerDown, (event) => {\n                    if (event.button !== 0) return;\n                    pointerStartRef.current = { x: event.clientX, y: event.clientY };\n                  })}\n                  onPointerMove={composeEventHandlers(props.onPointerMove, (event) => {\n                    if (!pointerStartRef.current) return;\n                    const x = event.clientX - pointerStartRef.current.x;\n                    const y = event.clientY - pointerStartRef.current.y;\n                    const hasSwipeMoveStarted = Boolean(swipeDeltaRef.current);\n                    const isHorizontalSwipe = ['left', 'right'].includes(context.swipeDirection);\n                    const clamp = ['left', 'up'].includes(context.swipeDirection)\n                      ? Math.min\n                      : Math.max;\n                    const clampedX = isHorizontalSwipe ? clamp(0, x) : 0;\n                    const clampedY = !isHorizontalSwipe ? clamp(0, y) : 0;\n                    const moveStartBuffer = event.pointerType === 'touch' ? 10 : 2;\n                    const delta = { x: clampedX, y: clampedY };\n                    const eventDetail = { originalEvent: event, delta };\n                    if (hasSwipeMoveStarted) {\n                      swipeDeltaRef.current = delta;\n                      handleAndDispatchCustomEvent(TOAST_SWIPE_MOVE, onSwipeMove, eventDetail, {\n                        discrete: false,\n                      });\n                    } else if (isDeltaInDirection(delta, context.swipeDirection, moveStartBuffer)) {\n                      swipeDeltaRef.current = delta;\n                      handleAndDispatchCustomEvent(TOAST_SWIPE_START, onSwipeStart, eventDetail, {\n                        discrete: false,\n                      });\n                      (event.target as HTMLElement).setPointerCapture(event.pointerId);\n                    } else if (Math.abs(x) > moveStartBuffer || Math.abs(y) > moveStartBuffer) {\n                      // User is swiping in wrong direction so we disable swipe gesture\n                      // for the current pointer down interaction\n                      pointerStartRef.current = null;\n                    }\n                  })}\n                  onPointerUp={composeEventHandlers(props.onPointerUp, (event) => {\n                    const delta = swipeDeltaRef.current;\n                    const target = event.target as HTMLElement;\n                    if (target.hasPointerCapture(event.pointerId)) {\n                      target.releasePointerCapture(event.pointerId);\n                    }\n                    swipeDeltaRef.current = null;\n                    pointerStartRef.current = null;\n                    if (delta) {\n                      const toast = event.currentTarget;\n                      const eventDetail = { originalEvent: event, delta };\n                      if (\n                        isDeltaInDirection(delta, context.swipeDirection, context.swipeThreshold)\n                      ) {\n                        handleAndDispatchCustomEvent(TOAST_SWIPE_END, onSwipeEnd, eventDetail, {\n                          discrete: true,\n                        });\n                      } else {\n                        handleAndDispatchCustomEvent(\n                          TOAST_SWIPE_CANCEL,\n                          onSwipeCancel,\n                          eventDetail,\n                          {\n                            discrete: true,\n                          }\n                        );\n                      }\n                      // Prevent click event from triggering on items within the toast when\n                      // pointer up is part of a swipe gesture\n                      toast.addEventListener('click', (event) => event.preventDefault(), {\n                        once: true,\n                      });\n                    }\n                  })}\n                />\n              </DismissableLayer.Root>\n            </Collection.ItemSlot>,\n            context.viewport\n          )}\n        </ToastInteractiveProvider>\n      </>\n    );\n  }\n);\n\n/* -----------------------------------------------------------------------------------------------*/\n\ninterface ToastAnnounceProps\n  extends Omit<React.ComponentPropsWithoutRef<'div'>, 'children'>,\n    ScopedProps<{ children: string[] }> {}\n\nconst ToastAnnounce: React.FC<ToastAnnounceProps> = (props: ScopedProps<ToastAnnounceProps>) => {\n  const { __scopeToast, children, ...announceProps } = props;\n  const context = useToastProviderContext(TOAST_NAME, __scopeToast);\n  const [renderAnnounceText, setRenderAnnounceText] = React.useState(false);\n  const [isAnnounced, setIsAnnounced] = React.useState(false);\n\n  // render text content in the next frame to ensure toast is announced in NVDA\n  useNextFrame(() => setRenderAnnounceText(true));\n\n  // cleanup after announcing\n  React.useEffect(() => {\n    const timer = window.setTimeout(() => setIsAnnounced(true), 1000);\n    return () => window.clearTimeout(timer);\n  }, []);\n\n  return isAnnounced ? null : (\n    <Portal asChild>\n      <VisuallyHidden {...announceProps}>\n        {renderAnnounceText && (\n          <>\n            {context.label} {children}\n          </>\n        )}\n      </VisuallyHidden>\n    </Portal>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * ToastTitle\n * -----------------------------------------------------------------------------------------------*/\n\nconst TITLE_NAME = 'ToastTitle';\n\ntype ToastTitleElement = React.ComponentRef<typeof Primitive.div>;\ntype PrimitiveDivProps = React.ComponentPropsWithoutRef<typeof Primitive.div>;\ninterface ToastTitleProps extends PrimitiveDivProps {}\n\nconst ToastTitle = React.forwardRef<ToastTitleElement, ToastTitleProps>(\n  (props: ScopedProps<ToastTitleProps>, forwardedRef) => {\n    const { __scopeToast, ...titleProps } = props;\n    return <Primitive.div {...titleProps} ref={forwardedRef} />;\n  }\n);\n\nToastTitle.displayName = TITLE_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * ToastDescription\n * -----------------------------------------------------------------------------------------------*/\n\nconst DESCRIPTION_NAME = 'ToastDescription';\n\ntype ToastDescriptionElement = React.ComponentRef<typeof Primitive.div>;\ninterface ToastDescriptionProps extends PrimitiveDivProps {}\n\nconst ToastDescription = React.forwardRef<ToastDescriptionElement, ToastDescriptionProps>(\n  (props: ScopedProps<ToastDescriptionProps>, forwardedRef) => {\n    const { __scopeToast, ...descriptionProps } = props;\n    return <Primitive.div {...descriptionProps} ref={forwardedRef} />;\n  }\n);\n\nToastDescription.displayName = DESCRIPTION_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * ToastAction\n * -----------------------------------------------------------------------------------------------*/\n\nconst ACTION_NAME = 'ToastAction';\n\ntype ToastActionElement = ToastCloseElement;\ninterface ToastActionProps extends ToastCloseProps {\n  /**\n   * A short description for an alternate way to carry out the action. For screen reader users\n   * who will not be able to navigate to the button easily/quickly.\n   * @example <ToastAction altText=\"Goto account settings to upgrade\">Upgrade</ToastAction>\n   * @example <ToastAction altText=\"Undo (Alt+U)\">Undo</ToastAction>\n   */\n  altText: string;\n}\n\nconst ToastAction = React.forwardRef<ToastActionElement, ToastActionProps>(\n  (props: ScopedProps<ToastActionProps>, forwardedRef) => {\n    const { altText, ...actionProps } = props;\n\n    if (!altText.trim()) {\n      console.error(\n        `Invalid prop \\`altText\\` supplied to \\`${ACTION_NAME}\\`. Expected non-empty \\`string\\`.`\n      );\n      return null;\n    }\n\n    return (\n      <ToastAnnounceExclude altText={altText} asChild>\n        <ToastClose {...actionProps} ref={forwardedRef} />\n      </ToastAnnounceExclude>\n    );\n  }\n);\n\nToastAction.displayName = ACTION_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * ToastClose\n * -----------------------------------------------------------------------------------------------*/\n\nconst CLOSE_NAME = 'ToastClose';\n\ntype ToastCloseElement = React.ComponentRef<typeof Primitive.button>;\ntype PrimitiveButtonProps = React.ComponentPropsWithoutRef<typeof Primitive.button>;\ninterface ToastCloseProps extends PrimitiveButtonProps {}\n\nconst ToastClose = React.forwardRef<ToastCloseElement, ToastCloseProps>(\n  (props: ScopedProps<ToastCloseProps>, forwardedRef) => {\n    const { __scopeToast, ...closeProps } = props;\n    const interactiveContext = useToastInteractiveContext(CLOSE_NAME, __scopeToast);\n\n    return (\n      <ToastAnnounceExclude asChild>\n        <Primitive.button\n          type=\"button\"\n          {...closeProps}\n          ref={forwardedRef}\n          onClick={composeEventHandlers(props.onClick, interactiveContext.onClose)}\n        />\n      </ToastAnnounceExclude>\n    );\n  }\n);\n\nToastClose.displayName = CLOSE_NAME;\n\n/* ---------------------------------------------------------------------------------------------- */\n\ntype ToastAnnounceExcludeElement = React.ComponentRef<typeof Primitive.div>;\ninterface ToastAnnounceExcludeProps extends PrimitiveDivProps {\n  altText?: string;\n}\n\nconst ToastAnnounceExclude = React.forwardRef<\n  ToastAnnounceExcludeElement,\n  ToastAnnounceExcludeProps\n>((props: ScopedProps<ToastAnnounceExcludeProps>, forwardedRef) => {\n  const { __scopeToast, altText, ...announceExcludeProps } = props;\n\n  return (\n    <Primitive.div\n      data-radix-toast-announce-exclude=\"\"\n      data-radix-toast-announce-alt={altText || undefined}\n      {...announceExcludeProps}\n      ref={forwardedRef}\n    />\n  );\n});\n\nfunction getAnnounceTextContent(container: HTMLElement) {\n  const textContent: string[] = [];\n  const childNodes = Array.from(container.childNodes);\n\n  childNodes.forEach((node) => {\n    if (node.nodeType === node.TEXT_NODE && node.textContent) textContent.push(node.textContent);\n    if (isHTMLElement(node)) {\n      const isHidden = node.ariaHidden || node.hidden || node.style.display === 'none';\n      const isExcluded = node.dataset.radixToastAnnounceExclude === '';\n\n      if (!isHidden) {\n        if (isExcluded) {\n          const altText = node.dataset.radixToastAnnounceAlt;\n          if (altText) textContent.push(altText);\n        } else {\n          textContent.push(...getAnnounceTextContent(node));\n        }\n      }\n    }\n  });\n\n  // We return a collection of text rather than a single concatenated string.\n  // This allows SR VO to naturally pause break between nodes while announcing.\n  return textContent;\n}\n\n/* ---------------------------------------------------------------------------------------------- */\n\nfunction handleAndDispatchCustomEvent<\n  E extends CustomEvent,\n  ReactEvent extends React.SyntheticEvent,\n>(\n  name: string,\n  handler: ((event: E) => void) | undefined,\n  detail: { originalEvent: ReactEvent } & (E extends CustomEvent<infer D> ? D : never),\n  { discrete }: { discrete: boolean }\n) {\n  const currentTarget = detail.originalEvent.currentTarget as HTMLElement;\n  const event = new CustomEvent(name, { bubbles: true, cancelable: true, detail });\n  if (handler) currentTarget.addEventListener(name, handler as EventListener, { once: true });\n\n  if (discrete) {\n    dispatchDiscreteCustomEvent(currentTarget, event);\n  } else {\n    currentTarget.dispatchEvent(event);\n  }\n}\n\nconst isDeltaInDirection = (\n  delta: { x: number; y: number },\n  direction: SwipeDirection,\n  threshold = 0\n) => {\n  const deltaX = Math.abs(delta.x);\n  const deltaY = Math.abs(delta.y);\n  const isDeltaX = deltaX > deltaY;\n  if (direction === 'left' || direction === 'right') {\n    return isDeltaX && deltaX > threshold;\n  } else {\n    return !isDeltaX && deltaY > threshold;\n  }\n};\n\nfunction useNextFrame(callback = () => {}) {\n  const fn = useCallbackRef(callback);\n  useLayoutEffect(() => {\n    let raf1 = 0;\n    let raf2 = 0;\n    raf1 = window.requestAnimationFrame(() => (raf2 = window.requestAnimationFrame(fn)));\n    return () => {\n      window.cancelAnimationFrame(raf1);\n      window.cancelAnimationFrame(raf2);\n    };\n  }, [fn]);\n}\n\nfunction isHTMLElement(node: any): node is HTMLElement {\n  return node.nodeType === node.ELEMENT_NODE;\n}\n\n/**\n * Returns a list of potential tabbable candidates.\n *\n * NOTE: This is only a close approximation. For example it doesn't take into account cases like when\n * elements are not visible. This cannot be worked out easily by just reading a property, but rather\n * necessitate runtime knowledge (computed styles, etc). We deal with these cases separately.\n *\n * See: https://developer.mozilla.org/en-US/docs/Web/API/TreeWalker\n * Credit: https://github.com/discord/focus-layers/blob/master/src/util/wrapFocus.tsx#L1\n */\nfunction getTabbableCandidates(container: HTMLElement) {\n  const nodes: HTMLElement[] = [];\n  const walker = document.createTreeWalker(container, NodeFilter.SHOW_ELEMENT, {\n    acceptNode: (node: any) => {\n      const isHiddenInput = node.tagName === 'INPUT' && node.type === 'hidden';\n      if (node.disabled || node.hidden || isHiddenInput) return NodeFilter.FILTER_SKIP;\n      // `.tabIndex` is not the same as the `tabindex` attribute. It works on the\n      // runtime's understanding of tabbability, so this automatically accounts\n      // for any kind of element that could be tabbed to.\n      return node.tabIndex >= 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n    },\n  });\n  while (walker.nextNode()) nodes.push(walker.currentNode as HTMLElement);\n  // we do not take into account the order of nodes with positive `tabIndex` as it\n  // hinders accessibility to have tab order different from visual order.\n  return nodes;\n}\n\nfunction focusFirst(candidates: HTMLElement[]) {\n  const previouslyFocusedElement = document.activeElement;\n  return candidates.some((candidate) => {\n    // if focus is already where we want to go, we don't want to keep going through the candidates\n    if (candidate === previouslyFocusedElement) return true;\n    candidate.focus();\n    return document.activeElement !== previouslyFocusedElement;\n  });\n}\n\nconst Provider = ToastProvider;\nconst Viewport = ToastViewport;\nconst Root = Toast;\nconst Title = ToastTitle;\nconst Description = ToastDescription;\nconst Action = ToastAction;\nconst Close = ToastClose;\n\nexport {\n  createToastScope,\n  //\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastAction,\n  ToastClose,\n  //\n  Provider,\n  Viewport,\n  Root,\n  Title,\n  Description,\n  Action,\n  Close,\n};\nexport type {\n  ToastProviderProps,\n  ToastViewportProps,\n  ToastProps,\n  ToastTitleProps,\n  ToastDescriptionProps,\n  ToastActionProps,\n  ToastCloseProps,\n};\n","\"use client\";\nimport \"../chunk-BUSYA2B4.js\";\nimport {\n  ClerkLoaded,\n  ClerkLoading,\n  ClerkDegraded,\n  ClerkFailed,\n  SignedOut,\n  SignedIn,\n  Protect,\n  RedirectToSignIn,\n  RedirectToSignUp,\n  RedirectToTasks,\n  RedirectToUserProfile,\n  AuthenticateWithRedirectCallback,\n  RedirectToCreateOrganization,\n  RedirectToOrganizationProfile\n} from \"@clerk/clerk-react\";\nimport { MultisessionAppSupport } from \"@clerk/clerk-react/internal\";\nexport {\n  AuthenticateWithRedirectCallback,\n  ClerkDegraded,\n  ClerkFailed,\n  ClerkLoaded,\n  ClerkLoading,\n  MultisessionAppSupport,\n  Protect,\n  RedirectToCreateOrganization,\n  RedirectToOrganizationProfile,\n  RedirectToSignIn,\n  RedirectToSignUp,\n  RedirectToTasks,\n  RedirectToUserProfile,\n  SignedIn,\n  SignedOut\n};\n//# sourceMappingURL=controlComponents.js.map","import \"./chunk-OANWQR3B.mjs\";\n\n// src/errors.ts\nimport {\n  isClerkAPIResponseError,\n  isClerkRuntimeError,\n  isEmailLinkError,\n  isKnownError,\n  isMetamaskError,\n  isReverificationCancelledError,\n  EmailLinkErrorCode,\n  EmailLinkErrorCodeStatus\n} from \"@clerk/shared/error\";\nexport {\n  EmailLinkErrorCode,\n  EmailLinkErrorCodeStatus,\n  isClerkAPIResponseError,\n  isClerkRuntimeError,\n  isEmailLinkError,\n  isKnownError,\n  isMetamaskError,\n  isReverificationCancelledError\n};\n//# sourceMappingURL=errors.mjs.map","\"use client\";\nimport \"../chunk-BUSYA2B4.js\";\nimport {\n  useClerk,\n  useEmailLink,\n  useOrganization,\n  useOrganizationList,\n  useSession,\n  useSessionList,\n  useSignIn,\n  useSignUp,\n  useUser,\n  useReverification\n} from \"@clerk/clerk-react\";\nimport {\n  isClerkAPIResponseError,\n  isClerkRuntimeError,\n  isEmailLinkError,\n  isKnownError,\n  isMetamaskError,\n  isReverificationCancelledError,\n  EmailLinkErrorCode,\n  EmailLinkErrorCodeStatus\n} from \"@clerk/clerk-react/errors\";\nimport { usePromisifiedAuth } from \"./PromisifiedAuthProvider\";\nexport {\n  EmailLinkErrorCode,\n  EmailLinkErrorCodeStatus,\n  isClerkAPIResponseError,\n  isClerkRuntimeError,\n  isEmailLinkError,\n  isKnownError,\n  isMetamaskError,\n  isReverificationCancelledError,\n  usePromisifiedAuth as useAuth,\n  useClerk,\n  useEmailLink,\n  useOrganization,\n  useOrganizationList,\n  useReverification,\n  useSession,\n  useSessionList,\n  useSignIn,\n  useSignUp,\n  useUser\n};\n//# sourceMappingURL=hooks.js.map","\"use strict\";\n\nfunction _interop_require_default(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\nexports._ = _interop_require_default;\n","'use client'\n\nimport type { ReactElement } from 'react'\nimport { BailoutToCSRError } from './bailout-to-csr'\n\ninterface BailoutToCSRProps {\n  reason: string\n  children: ReactElement\n}\n\n/**\n * If rendered on the server, this component throws an error\n * to signal Next.js that it should bail out to client-side rendering instead.\n */\nexport function BailoutToCSR({ reason, children }: BailoutToCSRProps) {\n  if (typeof window === 'undefined') {\n    throw new BailoutToCSRError(reason)\n  }\n\n  return children\n}\n","export function encodeURIPath(file: string) {\n  return file\n    .split('/')\n    .map((p) => encodeURIComponent(p))\n    .join('/')\n}\n","'use client'\n\nimport { preload } from 'react-dom'\n\nimport { workAsyncStorage } from '../../../server/app-render/work-async-storage.external'\nimport { encodeURIPath } from '../encode-uri-path'\n\nexport function PreloadChunks({\n  moduleIds,\n}: {\n  moduleIds: string[] | undefined\n}) {\n  // Early return in client compilation and only load requestStore on server side\n  if (typeof window !== 'undefined') {\n    return null\n  }\n\n  const workStore = workAsyncStorage.getStore()\n  if (workStore === undefined) {\n    return null\n  }\n\n  const allFiles = []\n\n  // Search the current dynamic call unique key id in react loadable manifest,\n  // and find the corresponding CSS files to preload\n  if (workStore.reactLoadableManifest && moduleIds) {\n    const manifest = workStore.reactLoadableManifest\n    for (const key of moduleIds) {\n      if (!manifest[key]) continue\n      const chunks = manifest[key].files\n      allFiles.push(...chunks)\n    }\n  }\n\n  if (allFiles.length === 0) {\n    return null\n  }\n\n  const dplId = process.env.NEXT_DEPLOYMENT_ID\n    ? `?dpl=${process.env.NEXT_DEPLOYMENT_ID}`\n    : ''\n\n  return (\n    <>\n      {allFiles.map((chunk) => {\n        const href = `${workStore.assetPrefix}/_next/${encodeURIPath(chunk)}${dplId}`\n        const isCss = chunk.endsWith('.css')\n        // If it's stylesheet we use `precedence` o help hoist with React Float.\n        // For stylesheets we actually need to render the CSS because nothing else is going to do it so it needs to be part of the component tree.\n        // The `preload` for stylesheet is not optional.\n        if (isCss) {\n          return (\n            <link\n              key={chunk}\n              // @ts-ignore\n              precedence=\"dynamic\"\n              href={href}\n              rel=\"stylesheet\"\n              as=\"style\"\n              nonce={workStore.nonce}\n            />\n          )\n        } else {\n          // If it's script we use ReactDOM.preload to preload the resources\n          preload(href, {\n            as: 'script',\n            fetchPriority: 'low',\n            nonce: workStore.nonce,\n          })\n          return null\n        }\n      })}\n    </>\n  )\n}\n","import { Suspense, Fragment, lazy } from 'react'\nimport { BailoutToCSR } from './dynamic-bailout-to-csr'\nimport type { ComponentModule } from './types'\nimport { PreloadChunks } from './preload-chunks'\n\n// Normalize loader to return the module as form { default: Component } for `React.lazy`.\n// Also for backward compatible since next/dynamic allows to resolve a component directly with loader\n// Client component reference proxy need to be converted to a module.\nfunction convertModule<P>(\n  mod: React.ComponentType<P> | ComponentModule<P> | undefined\n): {\n  default: React.ComponentType<P>\n} {\n  // Check \"default\" prop before accessing it, as it could be client reference proxy that could break it reference.\n  // Cases:\n  // mod: { default: Component }\n  // mod: Component\n  // mod: { default: proxy(Component) }\n  // mod: proxy(Component)\n  const hasDefault = mod && 'default' in mod\n  return {\n    default: hasDefault\n      ? (mod as ComponentModule<P>).default\n      : (mod as React.ComponentType<P>),\n  }\n}\n\nconst defaultOptions = {\n  loader: () => Promise.resolve(convertModule(() => null)),\n  loading: null,\n  ssr: true,\n}\n\ninterface LoadableOptions {\n  loader?: () => Promise<React.ComponentType<any> | ComponentModule<any>>\n  loading?: React.ComponentType<any> | null\n  ssr?: boolean\n  modules?: string[]\n}\n\nfunction Loadable(options: LoadableOptions) {\n  const opts = { ...defaultOptions, ...options }\n  const Lazy = lazy(() => opts.loader().then(convertModule))\n  const Loading = opts.loading\n\n  function LoadableComponent(props: any) {\n    const fallbackElement = Loading ? (\n      <Loading isLoading={true} pastDelay={true} error={null} />\n    ) : null\n\n    // If it's non-SSR or provided a loading component, wrap it in a suspense boundary\n    const hasSuspenseBoundary = !opts.ssr || !!opts.loading\n    const Wrap = hasSuspenseBoundary ? Suspense : Fragment\n    const wrapProps = hasSuspenseBoundary ? { fallback: fallbackElement } : {}\n    const children = opts.ssr ? (\n      <>\n        {/* During SSR, we need to preload the CSS from the dynamic component to avoid flash of unstyled content */}\n        {typeof window === 'undefined' ? (\n          <PreloadChunks moduleIds={opts.modules} />\n        ) : null}\n        <Lazy {...props} />\n      </>\n    ) : (\n      <BailoutToCSR reason=\"next/dynamic\">\n        <Lazy {...props} />\n      </BailoutToCSR>\n    )\n\n    return <Wrap {...wrapProps}>{children}</Wrap>\n  }\n\n  LoadableComponent.displayName = 'LoadableComponent'\n\n  return LoadableComponent\n}\n\nexport default Loadable\n","import type React from 'react'\nimport type { JSX } from 'react'\nimport Loadable from './lazy-dynamic/loadable'\n\nimport type {\n  LoadableGeneratedOptions,\n  DynamicOptionsLoadingProps,\n  Loader,\n  LoaderComponent,\n} from './lazy-dynamic/types'\n\nexport {\n  type LoadableGeneratedOptions,\n  type DynamicOptionsLoadingProps,\n  type Loader,\n  type LoaderComponent,\n}\n\nexport type DynamicOptions<P = {}> = LoadableGeneratedOptions & {\n  loading?: () => JSX.Element | null\n  loader?: Loader<P>\n  loadableGenerated?: LoadableGeneratedOptions\n  modules?: string[]\n  ssr?: boolean\n}\n\nexport type LoadableOptions<P = {}> = DynamicOptions<P>\n\nexport type LoadableFn<P = {}> = (\n  opts: LoadableOptions<P>\n) => React.ComponentType<P>\n\nexport type LoadableComponent<P = {}> = React.ComponentType<P>\n\nexport default function dynamic<P = {}>(\n  dynamicOptions: DynamicOptions<P> | Loader<P>,\n  options?: DynamicOptions<P>\n): React.ComponentType<P> {\n  const loadableOptions: LoadableOptions<P> = {}\n\n  if (typeof dynamicOptions === 'function') {\n    loadableOptions.loader = dynamicOptions\n  }\n\n  const mergedOptions = {\n    ...loadableOptions,\n    ...options,\n  }\n\n  return Loadable({\n    ...mergedOptions,\n    modules: mergedOptions.loadableGenerated?.modules,\n  })\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HeadManagerContext\n","const DOMAttributeNames: Record<string, string> = {\n  acceptCharset: 'accept-charset',\n  className: 'class',\n  htmlFor: 'for',\n  httpEquiv: 'http-equiv',\n  noModule: 'noModule',\n}\n\nconst ignoreProps = [\n  'onLoad',\n  'onReady',\n  'dangerouslySetInnerHTML',\n  'children',\n  'onError',\n  'strategy',\n  'stylesheets',\n]\n\nfunction isBooleanScriptAttribute(\n  attr: string\n): attr is 'async' | 'defer' | 'noModule' {\n  return ['async', 'defer', 'noModule'].includes(attr)\n}\n\nexport function setAttributesFromProps(el: HTMLElement, props: object) {\n  for (const [p, value] of Object.entries(props)) {\n    if (!props.hasOwnProperty(p)) continue\n    if (ignoreProps.includes(p)) continue\n\n    // we don't render undefined props to the DOM\n    if (value === undefined) {\n      continue\n    }\n\n    const attr = DOMAttributeNames[p] || p.toLowerCase()\n\n    if (el.tagName === 'SCRIPT' && isBooleanScriptAttribute(attr)) {\n      // Correctly assign boolean script attributes\n      // https://github.com/vercel/next.js/pull/20748\n      ;(el as HTMLScriptElement)[attr] = !!value\n    } else {\n      el.setAttribute(attr, String(value))\n    }\n\n    // Remove falsy non-zero boolean attributes so they are correctly interpreted\n    // (e.g. if we set them to false, this coerces to the string \"false\", which the browser interprets as true)\n    if (\n      value === false ||\n      (el.tagName === 'SCRIPT' &&\n        isBooleanScriptAttribute(attr) &&\n        (!value || value === 'false'))\n    ) {\n      // Call setAttribute before, as we need to set and unset the attribute to override force async:\n      // https://html.spec.whatwg.org/multipage/scripting.html#script-force-async\n      el.setAttribute(attr, '')\n      el.removeAttribute(attr)\n    }\n  }\n}\n","export const requestIdleCallback =\n  (typeof self !== 'undefined' &&\n    self.requestIdleCallback &&\n    self.requestIdleCallback.bind(window)) ||\n  function (cb: IdleRequestCallback): number {\n    let start = Date.now()\n    return self.setTimeout(function () {\n      cb({\n        didTimeout: false,\n        timeRemaining: function () {\n          return Math.max(0, 50 - (Date.now() - start))\n        },\n      })\n    }, 1)\n  }\n\nexport const cancelIdleCallback =\n  (typeof self !== 'undefined' &&\n    self.cancelIdleCallback &&\n    self.cancelIdleCallback.bind(window)) ||\n  function (id: number) {\n    return clearTimeout(id)\n  }\n","'use client'\n\nimport ReactDOM from 'react-dom'\nimport React, { useEffect, useContext, useRef, type JSX } from 'react'\nimport type { ScriptHTMLAttributes } from 'react'\nimport { HeadManagerContext } from '../shared/lib/head-manager-context.shared-runtime'\nimport { setAttributesFromProps } from './set-attributes-from-props'\nimport { requestIdleCallback } from './request-idle-callback'\n\nconst ScriptCache = new Map()\nconst LoadCache = new Set()\n\nexport interface ScriptProps extends ScriptHTMLAttributes<HTMLScriptElement> {\n  strategy?: 'afterInteractive' | 'lazyOnload' | 'beforeInteractive' | 'worker'\n  id?: string\n  onLoad?: (e: any) => void\n  onReady?: () => void | null\n  onError?: (e: any) => void\n  children?: React.ReactNode\n  stylesheets?: string[]\n}\n\n/**\n * @deprecated Use `ScriptProps` instead.\n */\nexport type Props = ScriptProps\n\nconst insertStylesheets = (stylesheets: string[]) => {\n  // Case 1: Styles for afterInteractive/lazyOnload with appDir injected via handleClientScriptLoad\n  //\n  // Using ReactDOM.preinit to feature detect appDir and inject styles\n  // Stylesheets might have already been loaded if initialized with Script component\n  // Re-inject styles here to handle scripts loaded via handleClientScriptLoad\n  // ReactDOM.preinit handles dedup and ensures the styles are loaded only once\n  if (ReactDOM.preinit) {\n    stylesheets.forEach((stylesheet: string) => {\n      ReactDOM.preinit(stylesheet, { as: 'style' })\n    })\n\n    return\n  }\n\n  // Case 2: Styles for afterInteractive/lazyOnload with pages injected via handleClientScriptLoad\n  //\n  // We use this function to load styles when appdir is not detected\n  // TODO: Use React float APIs to load styles once available for pages dir\n  if (typeof window !== 'undefined') {\n    let head = document.head\n    stylesheets.forEach((stylesheet: string) => {\n      let link = document.createElement('link')\n\n      link.type = 'text/css'\n      link.rel = 'stylesheet'\n      link.href = stylesheet\n\n      head.appendChild(link)\n    })\n  }\n}\n\nconst loadScript = (props: ScriptProps): void => {\n  const {\n    src,\n    id,\n    onLoad = () => {},\n    onReady = null,\n    dangerouslySetInnerHTML,\n    children = '',\n    strategy = 'afterInteractive',\n    onError,\n    stylesheets,\n  } = props\n\n  const cacheKey = id || src\n\n  // Script has already loaded\n  if (cacheKey && LoadCache.has(cacheKey)) {\n    return\n  }\n\n  // Contents of this script are already loading/loaded\n  if (ScriptCache.has(src)) {\n    LoadCache.add(cacheKey)\n    // It is possible that multiple `next/script` components all have same \"src\", but has different \"onLoad\"\n    // This is to make sure the same remote script will only load once, but \"onLoad\" are executed in order\n    ScriptCache.get(src).then(onLoad, onError)\n    return\n  }\n\n  /** Execute after the script first loaded */\n  const afterLoad = () => {\n    // Run onReady for the first time after load event\n    if (onReady) {\n      onReady()\n    }\n    // add cacheKey to LoadCache when load successfully\n    LoadCache.add(cacheKey)\n  }\n\n  const el = document.createElement('script')\n\n  const loadPromise = new Promise<void>((resolve, reject) => {\n    el.addEventListener('load', function (e) {\n      resolve()\n      if (onLoad) {\n        onLoad.call(this, e)\n      }\n      afterLoad()\n    })\n    el.addEventListener('error', function (e) {\n      reject(e)\n    })\n  }).catch(function (e) {\n    if (onError) {\n      onError(e)\n    }\n  })\n\n  if (dangerouslySetInnerHTML) {\n    // Casting since lib.dom.d.ts doesn't have TrustedHTML yet.\n    el.innerHTML = (dangerouslySetInnerHTML.__html as string) || ''\n\n    afterLoad()\n  } else if (children) {\n    el.textContent =\n      typeof children === 'string'\n        ? children\n        : Array.isArray(children)\n          ? children.join('')\n          : ''\n\n    afterLoad()\n  } else if (src) {\n    el.src = src\n    // do not add cacheKey into LoadCache for remote script here\n    // cacheKey will be added to LoadCache when it is actually loaded (see loadPromise above)\n\n    ScriptCache.set(src, loadPromise)\n  }\n\n  setAttributesFromProps(el, props)\n\n  if (strategy === 'worker') {\n    el.setAttribute('type', 'text/partytown')\n  }\n\n  el.setAttribute('data-nscript', strategy)\n\n  // Load styles associated with this script\n  if (stylesheets) {\n    insertStylesheets(stylesheets)\n  }\n\n  document.body.appendChild(el)\n}\n\nexport function handleClientScriptLoad(props: ScriptProps) {\n  const { strategy = 'afterInteractive' } = props\n  if (strategy === 'lazyOnload') {\n    window.addEventListener('load', () => {\n      requestIdleCallback(() => loadScript(props))\n    })\n  } else {\n    loadScript(props)\n  }\n}\n\nfunction loadLazyScript(props: ScriptProps) {\n  if (document.readyState === 'complete') {\n    requestIdleCallback(() => loadScript(props))\n  } else {\n    window.addEventListener('load', () => {\n      requestIdleCallback(() => loadScript(props))\n    })\n  }\n}\n\nfunction addBeforeInteractiveToCache() {\n  const scripts = [\n    ...document.querySelectorAll('[data-nscript=\"beforeInteractive\"]'),\n    ...document.querySelectorAll('[data-nscript=\"beforePageRender\"]'),\n  ]\n  scripts.forEach((script) => {\n    const cacheKey = script.id || script.getAttribute('src')\n    LoadCache.add(cacheKey)\n  })\n}\n\nexport function initScriptLoader(scriptLoaderItems: ScriptProps[]) {\n  scriptLoaderItems.forEach(handleClientScriptLoad)\n  addBeforeInteractiveToCache()\n}\n\n/**\n * Load a third-party scripts in an optimized way.\n *\n * Read more: [Next.js Docs: `next/script`](https://nextjs.org/docs/app/api-reference/components/script)\n */\nfunction Script(props: ScriptProps): JSX.Element | null {\n  const {\n    id,\n    src = '',\n    onLoad = () => {},\n    onReady = null,\n    strategy = 'afterInteractive',\n    onError,\n    stylesheets,\n    ...restProps\n  } = props\n\n  // Context is available only during SSR\n  let { updateScripts, scripts, getIsSsr, appDir, nonce } =\n    useContext(HeadManagerContext)\n\n  // if a nonce is explicitly passed to the script tag, favor that over the automatic handling\n  nonce = restProps.nonce || nonce\n\n  /**\n   * - First mount:\n   *   1. The useEffect for onReady executes\n   *   2. hasOnReadyEffectCalled.current is false, but the script hasn't loaded yet (not in LoadCache)\n   *      onReady is skipped, set hasOnReadyEffectCalled.current to true\n   *   3. The useEffect for loadScript executes\n   *   4. hasLoadScriptEffectCalled.current is false, loadScript executes\n   *      Once the script is loaded, the onLoad and onReady will be called by then\n   *   [If strict mode is enabled / is wrapped in <OffScreen /> component]\n   *   5. The useEffect for onReady executes again\n   *   6. hasOnReadyEffectCalled.current is true, so entire effect is skipped\n   *   7. The useEffect for loadScript executes again\n   *   8. hasLoadScriptEffectCalled.current is true, so entire effect is skipped\n   *\n   * - Second mount:\n   *   1. The useEffect for onReady executes\n   *   2. hasOnReadyEffectCalled.current is false, but the script has already loaded (found in LoadCache)\n   *      onReady is called, set hasOnReadyEffectCalled.current to true\n   *   3. The useEffect for loadScript executes\n   *   4. The script is already loaded, loadScript bails out\n   *   [If strict mode is enabled / is wrapped in <OffScreen /> component]\n   *   5. The useEffect for onReady executes again\n   *   6. hasOnReadyEffectCalled.current is true, so entire effect is skipped\n   *   7. The useEffect for loadScript executes again\n   *   8. hasLoadScriptEffectCalled.current is true, so entire effect is skipped\n   */\n  const hasOnReadyEffectCalled = useRef(false)\n\n  useEffect(() => {\n    const cacheKey = id || src\n    if (!hasOnReadyEffectCalled.current) {\n      // Run onReady if script has loaded before but component is re-mounted\n      if (onReady && cacheKey && LoadCache.has(cacheKey)) {\n        onReady()\n      }\n\n      hasOnReadyEffectCalled.current = true\n    }\n  }, [onReady, id, src])\n\n  const hasLoadScriptEffectCalled = useRef(false)\n\n  useEffect(() => {\n    if (!hasLoadScriptEffectCalled.current) {\n      if (strategy === 'afterInteractive') {\n        loadScript(props)\n      } else if (strategy === 'lazyOnload') {\n        loadLazyScript(props)\n      }\n\n      hasLoadScriptEffectCalled.current = true\n    }\n  }, [props, strategy])\n\n  if (strategy === 'beforeInteractive' || strategy === 'worker') {\n    if (updateScripts) {\n      scripts[strategy] = (scripts[strategy] || []).concat([\n        {\n          id,\n          src,\n          onLoad,\n          onReady,\n          onError,\n          ...restProps,\n          nonce,\n        },\n      ])\n      updateScripts(scripts)\n    } else if (getIsSsr && getIsSsr()) {\n      // Script has already loaded during SSR\n      LoadCache.add(id || src)\n    } else if (getIsSsr && !getIsSsr()) {\n      loadScript({\n        ...props,\n        nonce,\n      })\n    }\n  }\n\n  // For the app directory, we need React Float to preload these scripts.\n  if (appDir) {\n    // Injecting stylesheets here handles beforeInteractive and worker scripts correctly\n    // For other strategies injecting here ensures correct stylesheet order\n    // ReactDOM.preinit handles loading the styles in the correct order,\n    // also ensures the stylesheet is loaded only once and in a consistent manner\n    //\n    // Case 1: Styles for beforeInteractive/worker with appDir - handled here\n    // Case 2: Styles for beforeInteractive/worker with pages dir - Not handled yet\n    // Case 3: Styles for afterInteractive/lazyOnload with appDir - handled here\n    // Case 4: Styles for afterInteractive/lazyOnload with pages dir - handled in insertStylesheets function\n    if (stylesheets) {\n      stylesheets.forEach((styleSrc) => {\n        ReactDOM.preinit(styleSrc, { as: 'style' })\n      })\n    }\n\n    // Before interactive scripts need to be loaded by Next.js' runtime instead\n    // of native <script> tags, because they no longer have `defer`.\n    if (strategy === 'beforeInteractive') {\n      if (!src) {\n        // For inlined scripts, we put the content in `children`.\n        if (restProps.dangerouslySetInnerHTML) {\n          // Casting since lib.dom.d.ts doesn't have TrustedHTML yet.\n          restProps.children = restProps.dangerouslySetInnerHTML\n            .__html as string\n          delete restProps.dangerouslySetInnerHTML\n        }\n\n        return (\n          <script\n            nonce={nonce}\n            dangerouslySetInnerHTML={{\n              __html: `(self.__next_s=self.__next_s||[]).push(${JSON.stringify([\n                0,\n                { ...restProps, id },\n              ])})`,\n            }}\n          />\n        )\n      } else {\n        // @ts-ignore\n        ReactDOM.preload(\n          src,\n          restProps.integrity\n            ? {\n                as: 'script',\n                integrity: restProps.integrity,\n                nonce,\n                crossOrigin: restProps.crossOrigin,\n              }\n            : { as: 'script', nonce, crossOrigin: restProps.crossOrigin }\n        )\n        return (\n          <script\n            nonce={nonce}\n            dangerouslySetInnerHTML={{\n              __html: `(self.__next_s=self.__next_s||[]).push(${JSON.stringify([\n                src,\n                { ...restProps, id },\n              ])})`,\n            }}\n          />\n        )\n      }\n    } else if (strategy === 'afterInteractive') {\n      if (src) {\n        // @ts-ignore\n        ReactDOM.preload(\n          src,\n          restProps.integrity\n            ? {\n                as: 'script',\n                integrity: restProps.integrity,\n                nonce,\n                crossOrigin: restProps.crossOrigin,\n              }\n            : { as: 'script', nonce, crossOrigin: restProps.crossOrigin }\n        )\n      }\n    }\n  }\n\n  return null\n}\n\nObject.defineProperty(Script, '__nextScript', { value: true })\n\nexport default Script\n","module.exports = require('./dist/client/script')\n","\"use client\";\nimport \"../../chunk-BUSYA2B4.js\";\nimport { ClerkProvider as ReactClerkProvider } from \"@clerk/clerk-react\";\nimport { inBrowser } from \"@clerk/shared/browser\";\nimport { logger } from \"@clerk/shared/logger\";\nimport dynamic from \"next/dynamic\";\nimport { useRouter } from \"next/navigation\";\nimport nextPackage from \"next/package.json\";\nimport React, { useEffect, useTransition } from \"react\";\nimport { useSafeLayoutEffect } from \"../../client-boundary/hooks/useSafeLayoutEffect\";\nimport { ClerkNextOptionsProvider, useClerkNextOptions } from \"../../client-boundary/NextOptionsContext\";\nimport { ClerkJSScript } from \"../../utils/clerk-js-script\";\nimport { canUseKeyless } from \"../../utils/feature-flags\";\nimport { mergeNextClerkPropsWithEnv } from \"../../utils/mergeNextClerkPropsWithEnv\";\nimport { RouterTelemetry } from \"../../utils/router-telemetry\";\nimport { isNextWithUnstableServerActions } from \"../../utils/sdk-versions\";\nimport { detectKeylessEnvDriftAction } from \"../keyless-actions\";\nimport { invalidateCacheAction } from \"../server-actions\";\nimport { useAwaitablePush } from \"./useAwaitablePush\";\nimport { useAwaitableReplace } from \"./useAwaitableReplace\";\nconst LazyCreateKeylessApplication = dynamic(\n  () => import(\"./keyless-creator-reader.js\").then((m) => m.KeylessCreatorOrReader)\n);\nconst NextClientClerkProvider = (props) => {\n  if (isNextWithUnstableServerActions) {\n    const deprecationWarning = `Clerk:\nYour current Next.js version (${nextPackage.version}) will be deprecated in the next major release of \"@clerk/nextjs\". Please upgrade to next@14.1.0 or later.`;\n    if (inBrowser()) {\n      logger.warnOnce(deprecationWarning);\n    } else {\n      logger.logOnce(`\n\\x1B[43m----------\n${deprecationWarning}\n----------\\x1B[0m\n`);\n    }\n  }\n  const { __unstable_invokeMiddlewareOnAuthStateChange = true, children } = props;\n  const router = useRouter();\n  const push = useAwaitablePush();\n  const replace = useAwaitableReplace();\n  const [isPending, startTransition] = useTransition();\n  useSafeLayoutEffect(() => {\n    if (canUseKeyless) {\n      void detectKeylessEnvDriftAction();\n    }\n  }, []);\n  const isNested = Boolean(useClerkNextOptions());\n  if (isNested) {\n    return props.children;\n  }\n  useEffect(() => {\n    var _a;\n    if (!isPending) {\n      (_a = window.__clerk_internal_invalidateCachePromise) == null ? void 0 : _a.call(window);\n    }\n  }, [isPending]);\n  useSafeLayoutEffect(() => {\n    window.__unstable__onBeforeSetActive = (intent) => {\n      return new Promise((resolve) => {\n        var _a;\n        window.__clerk_internal_invalidateCachePromise = resolve;\n        const nextVersion = ((_a = window == null ? void 0 : window.next) == null ? void 0 : _a.version) || \"\";\n        if (nextVersion.startsWith(\"13\")) {\n          startTransition(() => {\n            router.refresh();\n          });\n        } else if ((nextVersion.startsWith(\"15\") || nextVersion.startsWith(\"16\")) && intent === \"sign-out\") {\n          resolve();\n        } else {\n          void invalidateCacheAction().then(() => resolve());\n        }\n      });\n    };\n    window.__unstable__onAfterSetActive = () => {\n      if (__unstable_invokeMiddlewareOnAuthStateChange) {\n        return router.refresh();\n      }\n    };\n  }, []);\n  const mergedProps = mergeNextClerkPropsWithEnv({\n    ...props,\n    // @ts-expect-error Error because of the stricter types of internal `push`\n    routerPush: push,\n    // @ts-expect-error Error because of the stricter types of internal `replace`\n    routerReplace: replace\n  });\n  return /* @__PURE__ */ React.createElement(ClerkNextOptionsProvider, { options: mergedProps }, /* @__PURE__ */ React.createElement(ReactClerkProvider, { ...mergedProps }, /* @__PURE__ */ React.createElement(RouterTelemetry, null), /* @__PURE__ */ React.createElement(ClerkJSScript, { router: \"app\" }), children));\n};\nconst ClientClerkProvider = (props) => {\n  const { children, disableKeyless = false, ...rest } = props;\n  const safePublishableKey = mergeNextClerkPropsWithEnv(rest).publishableKey;\n  if (safePublishableKey || !canUseKeyless || disableKeyless) {\n    return /* @__PURE__ */ React.createElement(NextClientClerkProvider, { ...rest }, children);\n  }\n  return /* @__PURE__ */ React.createElement(LazyCreateKeylessApplication, null, /* @__PURE__ */ React.createElement(NextClientClerkProvider, { ...rest }, children));\n};\nexport {\n  ClientClerkProvider\n};\n//# sourceMappingURL=ClerkProvider.js.map","/* __next_internal_action_entry_do_not_use__ [{\"7f1553e99508b80578b44e1adbe634f2f97a7ca2e0\":\"invalidateCacheAction\"},\"node_modules/@clerk/nextjs/dist/esm/app-router/server-actions.js\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var invalidateCacheAction=/*#__PURE__*/createServerReference(\"7f1553e99508b80578b44e1adbe634f2f97a7ca2e0\",callServer,void 0,findSourceMapURL,\"invalidateCacheAction\");","\"use client\";\nimport \"../../chunk-BUSYA2B4.js\";\nimport { useRouter } from \"next/navigation\";\nimport { useInternalNavFun } from \"./useInternalNavFun\";\nconst useAwaitablePush = () => {\n  const router = useRouter();\n  return useInternalNavFun({\n    windowNav: typeof window !== \"undefined\" ? window.history.pushState.bind(window.history) : void 0,\n    routerNav: router.push.bind(router),\n    name: \"push\"\n  });\n};\nexport {\n  useAwaitablePush\n};\n//# sourceMappingURL=useAwaitablePush.js.map","\"use client\";\nimport \"../../chunk-BUSYA2B4.js\";\nimport { useRouter } from \"next/navigation\";\nimport { useInternalNavFun } from \"./useInternalNavFun\";\nconst useAwaitableReplace = () => {\n  const router = useRouter();\n  return useInternalNavFun({\n    windowNav: typeof window !== \"undefined\" ? window.history.replaceState.bind(window.history) : void 0,\n    routerNav: router.replace.bind(router),\n    name: \"replace\"\n  });\n};\nexport {\n  useAwaitableReplace\n};\n//# sourceMappingURL=useAwaitableReplace.js.map","import \"../chunk-BUSYA2B4.js\";\nimport { useClerk } from \"@clerk/clerk-react\";\nimport { buildClerkJsScriptAttributes, clerkJsScriptUrl } from \"@clerk/clerk-react/internal\";\nimport NextScript from \"next/script\";\nimport React from \"react\";\nimport { useClerkNextOptions } from \"../client-boundary/NextOptionsContext\";\nfunction ClerkJSScript(props) {\n  const { publishableKey, clerkJSUrl, clerkJSVersion, clerkJSVariant, nonce } = useClerkNextOptions();\n  const { domain, proxyUrl } = useClerk();\n  if (!publishableKey) {\n    return null;\n  }\n  const options = {\n    domain,\n    proxyUrl,\n    publishableKey,\n    clerkJSUrl,\n    clerkJSVersion,\n    clerkJSVariant,\n    nonce\n  };\n  const scriptUrl = clerkJsScriptUrl(options);\n  const Script = props.router === \"app\" ? \"script\" : NextScript;\n  return /* @__PURE__ */ React.createElement(\n    Script,\n    {\n      src: scriptUrl,\n      \"data-clerk-js-script\": true,\n      async: true,\n      defer: props.router === \"pages\" ? false : void 0,\n      crossOrigin: \"anonymous\",\n      strategy: props.router === \"pages\" ? \"beforeInteractive\" : void 0,\n      ...buildClerkJsScriptAttributes(options)\n    }\n  );\n}\nexport {\n  ClerkJSScript\n};\n//# sourceMappingURL=clerk-js-script.js.map","import \"../chunk-BUSYA2B4.js\";\nimport { isTruthy } from \"@clerk/shared/underscore\";\nimport { SDK_METADATA } from \"../server/constants\";\nconst mergeNextClerkPropsWithEnv = (props) => {\n  var _a;\n  return {\n    ...props,\n    publishableKey: props.publishableKey || process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY || \"\",\n    clerkJSUrl: props.clerkJSUrl || process.env.NEXT_PUBLIC_CLERK_JS_URL,\n    clerkJSVersion: props.clerkJSVersion || process.env.NEXT_PUBLIC_CLERK_JS_VERSION,\n    proxyUrl: props.proxyUrl || process.env.NEXT_PUBLIC_CLERK_PROXY_URL || \"\",\n    domain: props.domain || process.env.NEXT_PUBLIC_CLERK_DOMAIN || \"\",\n    isSatellite: props.isSatellite || isTruthy(process.env.NEXT_PUBLIC_CLERK_IS_SATELLITE),\n    signInUrl: props.signInUrl || process.env.NEXT_PUBLIC_CLERK_SIGN_IN_URL || \"\",\n    signUpUrl: props.signUpUrl || process.env.NEXT_PUBLIC_CLERK_SIGN_UP_URL || \"\",\n    signInForceRedirectUrl: props.signInForceRedirectUrl || process.env.NEXT_PUBLIC_CLERK_SIGN_IN_FORCE_REDIRECT_URL || \"\",\n    signUpForceRedirectUrl: props.signUpForceRedirectUrl || process.env.NEXT_PUBLIC_CLERK_SIGN_UP_FORCE_REDIRECT_URL || \"\",\n    signInFallbackRedirectUrl: props.signInFallbackRedirectUrl || process.env.NEXT_PUBLIC_CLERK_SIGN_IN_FALLBACK_REDIRECT_URL || \"\",\n    signUpFallbackRedirectUrl: props.signUpFallbackRedirectUrl || process.env.NEXT_PUBLIC_CLERK_SIGN_UP_FALLBACK_REDIRECT_URL || \"\",\n    afterSignInUrl: props.afterSignInUrl || process.env.NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL || \"\",\n    afterSignUpUrl: props.afterSignUpUrl || process.env.NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL || \"\",\n    newSubscriptionRedirectUrl: props.newSubscriptionRedirectUrl || process.env.NEXT_PUBLIC_CLERK_CHECKOUT_CONTINUE_URL || \"\",\n    telemetry: (_a = props.telemetry) != null ? _a : {\n      disabled: isTruthy(process.env.NEXT_PUBLIC_CLERK_TELEMETRY_DISABLED),\n      debug: isTruthy(process.env.NEXT_PUBLIC_CLERK_TELEMETRY_DEBUG)\n    },\n    sdkMetadata: SDK_METADATA\n  };\n};\nexport {\n  mergeNextClerkPropsWithEnv\n};\n//# sourceMappingURL=mergeNextClerkPropsWithEnv.js.map","import \"../chunk-BUSYA2B4.js\";\nfunction removeBasePath(to) {\n  let destination = to;\n  const basePath = process.env.__NEXT_ROUTER_BASEPATH;\n  if (basePath && destination.startsWith(basePath)) {\n    destination = destination.slice(basePath.length);\n  }\n  return destination;\n}\nexport {\n  removeBasePath\n};\n//# sourceMappingURL=removeBasePath.js.map","import \"../chunk-BUSYA2B4.js\";\nimport { eventFrameworkMetadata } from \"@clerk/shared/telemetry\";\nimport { useClerk } from \"../client-boundary/hooks\";\nimport { usePagesRouter } from \"../client-boundary/hooks/usePagesRouter\";\nconst RouterTelemetry = () => {\n  var _a, _b;\n  const clerk = useClerk();\n  const { pagesRouter } = usePagesRouter();\n  (_b = clerk.telemetry) == null ? void 0 : _b.record(\n    eventFrameworkMetadata({\n      router: pagesRouter ? \"pages\" : \"app\",\n      ...((_a = globalThis == null ? void 0 : globalThis.next) == null ? void 0 : _a.version) ? { nextjsVersion: globalThis.next.version } : {}\n    })\n  );\n  return null;\n};\nexport {\n  RouterTelemetry\n};\n//# sourceMappingURL=router-telemetry.js.map","const loggedMessages: Set<string> = new Set();\n\nexport const logger = {\n  /**\n   * A custom logger that ensures messages are logged only once.\n   * Reduces noise and duplicated messages when logs are in a hot codepath.\n   */\n  warnOnce: (msg: string) => {\n    if (loggedMessages.has(msg)) {\n      return;\n    }\n\n    loggedMessages.add(msg);\n    console.warn(msg);\n  },\n  logOnce: (msg: string) => {\n    if (loggedMessages.has(msg)) {\n      return;\n    }\n\n    console.log(msg);\n    loggedMessages.add(msg);\n  },\n};\n","import React from 'react';\n\n// TODO: Import from shared once [JS-118] is done\nexport const useSafeLayoutEffect = typeof window !== 'undefined' ? React.useLayoutEffect : React.useEffect;\n","import React from 'react';\n\nimport type { NextClerkProviderProps } from '../types';\n\ntype ClerkNextContextValue = Partial<Omit<NextClerkProviderProps, 'children'>>;\n\nconst ClerkNextOptionsCtx = React.createContext<{ value: ClerkNextContextValue } | undefined>(undefined);\nClerkNextOptionsCtx.displayName = 'ClerkNextOptionsCtx';\n\nconst useClerkNextOptions = () => {\n  const ctx = React.useContext(ClerkNextOptionsCtx) as { value: ClerkNextContextValue };\n  return ctx?.value;\n};\n\nconst ClerkNextOptionsProvider = (\n  props: React.PropsWithChildren<{ options: ClerkNextContextValue }>,\n): React.JSX.Element => {\n  const { children, options } = props;\n  return <ClerkNextOptionsCtx.Provider value={{ value: options }}>{children}</ClerkNextOptionsCtx.Provider>;\n};\n\nexport { ClerkNextOptionsProvider, useClerkNextOptions };\n","import \"../../chunk-BUSYA2B4.js\";\nimport React from \"react\";\nconst useSafeLayoutEffect = typeof window !== \"undefined\" ? React.useLayoutEffect : React.useEffect;\nexport {\n  useSafeLayoutEffect\n};\n//# sourceMappingURL=useSafeLayoutEffect.js.map","import \"../chunk-BUSYA2B4.js\";\nimport React from \"react\";\nconst ClerkNextOptionsCtx = React.createContext(void 0);\nClerkNextOptionsCtx.displayName = \"ClerkNextOptionsCtx\";\nconst useClerkNextOptions = () => {\n  const ctx = React.useContext(ClerkNextOptionsCtx);\n  return ctx == null ? void 0 : ctx.value;\n};\nconst ClerkNextOptionsProvider = (props) => {\n  const { children, options } = props;\n  return /* @__PURE__ */ React.createElement(ClerkNextOptionsCtx.Provider, { value: { value: options } }, children);\n};\nexport {\n  ClerkNextOptionsProvider,\n  useClerkNextOptions\n};\n//# sourceMappingURL=NextOptionsContext.js.map","/**\n * Removes the Next.js basePath from the provided destination if set.\n * @param to Destination route to navigate to\n * @returns Destination without basePath, if set\n */\nexport function removeBasePath(to: string): string {\n  let destination = to;\n  const basePath = process.env.__NEXT_ROUTER_BASEPATH;\n  if (basePath && destination.startsWith(basePath)) {\n    destination = destination.slice(basePath.length);\n  }\n\n  return destination;\n}\n","import \"../../chunk-BUSYA2B4.js\";\nimport { usePathname } from \"next/navigation\";\nimport { useCallback, useEffect, useTransition } from \"react\";\nimport { removeBasePath } from \"../../utils/removeBasePath\";\nconst getClerkNavigationObject = (name) => {\n  var _a, _b, _c;\n  (_a = window.__clerk_internal_navigations) != null ? _a : window.__clerk_internal_navigations = {};\n  (_c = (_b = window.__clerk_internal_navigations)[name]) != null ? _c : _b[name] = {};\n  return window.__clerk_internal_navigations[name];\n};\nconst useInternalNavFun = (props) => {\n  const { windowNav, routerNav, name } = props;\n  const pathname = usePathname();\n  const [isPending, startTransition] = useTransition();\n  if (windowNav) {\n    getClerkNavigationObject(name).fun = (to, opts) => {\n      return new Promise((res) => {\n        var _a, _b, _c;\n        (_b = (_a = getClerkNavigationObject(name)).promisesBuffer) != null ? _b : _a.promisesBuffer = [];\n        (_c = getClerkNavigationObject(name).promisesBuffer) == null ? void 0 : _c.push(res);\n        startTransition(() => {\n          var _a2, _b2, _c2;\n          if (((_a2 = opts == null ? void 0 : opts.__internal_metadata) == null ? void 0 : _a2.navigationType) === \"internal\") {\n            const state = ((_c2 = (_b2 = window.next) == null ? void 0 : _b2.version) != null ? _c2 : \"\") < \"14.1.0\" ? history.state : null;\n            windowNav(state, \"\", to);\n          } else {\n            routerNav(removeBasePath(to));\n          }\n        });\n      });\n    };\n  }\n  const flushPromises = () => {\n    var _a;\n    (_a = getClerkNavigationObject(name).promisesBuffer) == null ? void 0 : _a.forEach((resolve) => resolve());\n    getClerkNavigationObject(name).promisesBuffer = [];\n  };\n  useEffect(() => {\n    flushPromises();\n    return flushPromises;\n  }, []);\n  useEffect(() => {\n    if (!isPending) {\n      flushPromises();\n    }\n  }, [pathname, isPending]);\n  return useCallback((to, metadata) => {\n    return getClerkNavigationObject(name).fun(to, metadata);\n  }, []);\n};\nexport {\n  useInternalNavFun\n};\n//# sourceMappingURL=useInternalNavFun.js.map","'use client';\nimport { ClerkProvider as ReactClerkProvider } from '@clerk/clerk-react';\nimport { inBrowser } from '@clerk/shared/browser';\nimport { logger } from '@clerk/shared/logger';\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/navigation';\nimport nextPackage from 'next/package.json';\nimport React, { useEffect, useTransition } from 'react';\n\nimport { useSafeLayoutEffect } from '../../client-boundary/hooks/useSafeLayoutEffect';\nimport { ClerkNextOptionsProvider, useClerkNextOptions } from '../../client-boundary/NextOptionsContext';\nimport type { NextClerkProviderProps } from '../../types';\nimport { ClerkJSScript } from '../../utils/clerk-js-script';\nimport { canUseKeyless } from '../../utils/feature-flags';\nimport { mergeNextClerkPropsWithEnv } from '../../utils/mergeNextClerkPropsWithEnv';\nimport { RouterTelemetry } from '../../utils/router-telemetry';\nimport { isNextWithUnstableServerActions } from '../../utils/sdk-versions';\nimport { detectKeylessEnvDriftAction } from '../keyless-actions';\nimport { invalidateCacheAction } from '../server-actions';\nimport { useAwaitablePush } from './useAwaitablePush';\nimport { useAwaitableReplace } from './useAwaitableReplace';\n\n/**\n * LazyCreateKeylessApplication should only be loaded if the conditions below are met.\n * Note: Using lazy() with Suspense instead of dynamic is not possible as React will throw a hydration error when `ClerkProvider` wraps `<html><body>...`\n */\nconst LazyCreateKeylessApplication = dynamic(() =>\n  import('./keyless-creator-reader.js').then(m => m.KeylessCreatorOrReader),\n);\n\nconst NextClientClerkProvider = (props: NextClerkProviderProps) => {\n  if (isNextWithUnstableServerActions) {\n    const deprecationWarning = `Clerk:\\nYour current Next.js version (${nextPackage.version}) will be deprecated in the next major release of \"@clerk/nextjs\". Please upgrade to next@14.1.0 or later.`;\n    if (inBrowser()) {\n      logger.warnOnce(deprecationWarning);\n    } else {\n      logger.logOnce(`\\n\\x1b[43m----------\\n${deprecationWarning}\\n----------\\x1b[0m\\n`);\n    }\n  }\n\n  const { __unstable_invokeMiddlewareOnAuthStateChange = true, children } = props;\n  const router = useRouter();\n  const push = useAwaitablePush();\n  const replace = useAwaitableReplace();\n  const [isPending, startTransition] = useTransition();\n\n  // Call drift detection on mount (client-side)\n  useSafeLayoutEffect(() => {\n    if (canUseKeyless) {\n      void detectKeylessEnvDriftAction();\n    }\n  }, []);\n\n  // Avoid rendering nested ClerkProviders by checking for the existence of the ClerkNextOptions context provider\n  const isNested = Boolean(useClerkNextOptions());\n  if (isNested) {\n    return props.children;\n  }\n\n  useEffect(() => {\n    if (!isPending) {\n      window.__clerk_internal_invalidateCachePromise?.();\n    }\n  }, [isPending]);\n\n  useSafeLayoutEffect(() => {\n    window.__unstable__onBeforeSetActive = intent => {\n      /**\n       * We need to invalidate the cache in case the user is navigating to a page that\n       * was previously cached using the auth state that was active at the time.\n       *\n       *  We also need to await for the invalidation to happen before we navigate,\n       * otherwise the navigation will use the cached page.\n       *\n       * For example, if we did not invalidate the flow, the following scenario would be broken:\n       * - The middleware is configured in such a way that it redirects you back to the same page if a certain condition is true (eg, you need to pick an org)\n       * - The user has a <Link href=/> component in the page\n       * - The UB is mounted with afterSignOutUrl=/\n       * - The user clicks the Link. A nav to / happens, a 307 to the current page is returned so a navigation does not take place. The / navigation is now cached as a 307 to the current page\n       * - The user clicks sign out\n       * - We call router.refresh()\n       * - We navigate to / but its cached and instead, we 'redirect' to the current page\n       *\n       *  For more information on cache invalidation, see:\n       * https://nextjs.org/docs/app/building-your-application/caching#invalidation-1\n       */\n      return new Promise(resolve => {\n        window.__clerk_internal_invalidateCachePromise = resolve;\n\n        const nextVersion = window?.next?.version || '';\n\n        // ATTENTION: Avoid using wrapping code with `startTransition` on versions >= 14\n        // otherwise the fetcher of `useReverification()` will be pending indefinitely when called within `startTransition`.\n        if (nextVersion.startsWith('13')) {\n          startTransition(() => {\n            router.refresh();\n          });\n        }\n        // On Next.js v15+ calling a server action that returns a 404 error when deployed on Vercel is prohibited, failing with 405 status code.\n        // When a user transitions from \"signed in\" to \"signed out\", we clear the `__session` cookie, then we call `__unstable__onBeforeSetActive`.\n        // If we were to call `invalidateCacheAction` while the user is already signed out (deleted cookie), any page protected by `auth.protect()`\n        // will result to the server action returning a 404 error (this happens because server actions inherit the protection rules of the page they are called from).\n        // SOLUTION:\n        // To mitigate this, since the router cache on version 15+ is much less aggressive, we can treat this as a noop and simply resolve the promise.\n        // Once `setActive` performs the navigation, `__unstable__onAfterSetActive` will kick in and perform a router.refresh ensuring shared layouts will also update with the correct authentication context.\n        else if ((nextVersion.startsWith('15') || nextVersion.startsWith('16')) && intent === 'sign-out') {\n          resolve(); // noop\n        } else {\n          void invalidateCacheAction().then(() => resolve());\n        }\n      });\n    };\n\n    window.__unstable__onAfterSetActive = () => {\n      if (__unstable_invokeMiddlewareOnAuthStateChange) {\n        return router.refresh();\n      }\n    };\n  }, []);\n\n  const mergedProps = mergeNextClerkPropsWithEnv({\n    ...props,\n    // @ts-expect-error Error because of the stricter types of internal `push`\n    routerPush: push,\n    // @ts-expect-error Error because of the stricter types of internal `replace`\n    routerReplace: replace,\n  });\n\n  return (\n    <ClerkNextOptionsProvider options={mergedProps}>\n      <ReactClerkProvider {...mergedProps}>\n        <RouterTelemetry />\n        <ClerkJSScript router='app' />\n        {children}\n      </ReactClerkProvider>\n    </ClerkNextOptionsProvider>\n  );\n};\n\nexport const ClientClerkProvider = (props: NextClerkProviderProps & { disableKeyless?: boolean }) => {\n  const { children, disableKeyless = false, ...rest } = props;\n  const safePublishableKey = mergeNextClerkPropsWithEnv(rest).publishableKey;\n\n  if (safePublishableKey || !canUseKeyless || disableKeyless) {\n    return <NextClientClerkProvider {...rest}>{children}</NextClientClerkProvider>;\n  }\n\n  return (\n    <LazyCreateKeylessApplication>\n      <NextClientClerkProvider {...rest}>{children}</NextClientClerkProvider>\n    </LazyCreateKeylessApplication>\n  );\n};\n","import type { ParsedUrlQuery } from 'querystring'\n\nexport function searchParamsToUrlQuery(\n  searchParams: URLSearchParams\n): ParsedUrlQuery {\n  const query: ParsedUrlQuery = {}\n  for (const [key, value] of searchParams.entries()) {\n    const existing = query[key]\n    if (typeof existing === 'undefined') {\n      query[key] = value\n    } else if (Array.isArray(existing)) {\n      existing.push(value)\n    } else {\n      query[key] = [existing, value]\n    }\n  }\n  return query\n}\n\nfunction stringifyUrlQueryParam(param: unknown): string {\n  if (typeof param === 'string') {\n    return param\n  }\n\n  if (\n    (typeof param === 'number' && !isNaN(param)) ||\n    typeof param === 'boolean'\n  ) {\n    return String(param)\n  } else {\n    return ''\n  }\n}\n\nexport function urlQueryToSearchParams(query: ParsedUrlQuery): URLSearchParams {\n  const searchParams = new URLSearchParams()\n  for (const [key, value] of Object.entries(query)) {\n    if (Array.isArray(value)) {\n      for (const item of value) {\n        searchParams.append(key, stringifyUrlQueryParam(item))\n      }\n    } else {\n      searchParams.set(key, stringifyUrlQueryParam(value))\n    }\n  }\n  return searchParams\n}\n\nexport function assign(\n  target: URLSearchParams,\n  ...searchParamsList: URLSearchParams[]\n): URLSearchParams {\n  for (const searchParams of searchParamsList) {\n    for (const key of searchParams.keys()) {\n      target.delete(key)\n    }\n\n    for (const [key, value] of searchParams.entries()) {\n      target.append(key, value)\n    }\n  }\n\n  return target\n}\n","// Format function modified from nodejs\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nimport type { UrlObject } from 'url'\nimport type { ParsedUrlQuery } from 'querystring'\nimport * as querystring from './querystring'\n\nconst slashedProtocols = /https?|ftp|gopher|file/\n\nexport function formatUrl(urlObj: UrlObject) {\n  let { auth, hostname } = urlObj\n  let protocol = urlObj.protocol || ''\n  let pathname = urlObj.pathname || ''\n  let hash = urlObj.hash || ''\n  let query = urlObj.query || ''\n  let host: string | false = false\n\n  auth = auth ? encodeURIComponent(auth).replace(/%3A/i, ':') + '@' : ''\n\n  if (urlObj.host) {\n    host = auth + urlObj.host\n  } else if (hostname) {\n    host = auth + (~hostname.indexOf(':') ? `[${hostname}]` : hostname)\n    if (urlObj.port) {\n      host += ':' + urlObj.port\n    }\n  }\n\n  if (query && typeof query === 'object') {\n    query = String(querystring.urlQueryToSearchParams(query as ParsedUrlQuery))\n  }\n\n  let search = urlObj.search || (query && `?${query}`) || ''\n\n  if (protocol && !protocol.endsWith(':')) protocol += ':'\n\n  if (\n    urlObj.slashes ||\n    ((!protocol || slashedProtocols.test(protocol)) && host !== false)\n  ) {\n    host = '//' + (host || '')\n    if (pathname && pathname[0] !== '/') pathname = '/' + pathname\n  } else if (!host) {\n    host = ''\n  }\n\n  if (hash && hash[0] !== '#') hash = '#' + hash\n  if (search && search[0] !== '?') search = '?' + search\n\n  pathname = pathname.replace(/[?#]/g, encodeURIComponent)\n  search = search.replace('#', '%23')\n\n  return `${protocol}${host}${pathname}${search}${hash}`\n}\n\nexport const urlObjectKeys = [\n  'auth',\n  'hash',\n  'host',\n  'hostname',\n  'href',\n  'path',\n  'pathname',\n  'port',\n  'protocol',\n  'query',\n  'search',\n  'slashes',\n]\n\nexport function formatWithValidation(url: UrlObject): string {\n  if (process.env.NODE_ENV === 'development') {\n    if (url !== null && typeof url === 'object') {\n      Object.keys(url).forEach((key) => {\n        if (!urlObjectKeys.includes(key)) {\n          console.warn(\n            `Unknown key passed via urlObject into url.format: ${key}`\n          )\n        }\n      })\n    }\n  }\n\n  return formatUrl(url)\n}\n","import { useCallback, useRef, type Ref } from 'react'\n\n// This is a compatibility hook to support React 18 and 19 refs.\n// In 19, a cleanup function from refs may be returned.\n// In 18, returning a cleanup function creates a warning.\n// Since we take userspace refs, we don't know ahead of time if a cleanup function will be returned.\n// This implements cleanup functions with the old behavior in 18.\n// We know refs are always called alternating with `null` and then `T`.\n// So a call with `null` means we need to call the previous cleanup functions.\nexport function useMergedRef<TElement>(\n  refA: Ref<TElement>,\n  refB: Ref<TElement>\n): Ref<TElement> {\n  const cleanupA = useRef<(() => void) | null>(null)\n  const cleanupB = useRef<(() => void) | null>(null)\n\n  // NOTE: In theory, we could skip the wrapping if only one of the refs is non-null.\n  // (this happens often if the user doesn't pass a ref to Link/Form/Image)\n  // But this can cause us to leak a cleanup-ref into user code (previously via `<Link legacyBehavior>`),\n  // and the user might pass that ref into ref-merging library that doesn't support cleanup refs\n  // (because it hasn't been updated for React 19)\n  // which can then cause things to blow up, because a cleanup-returning ref gets called with `null`.\n  // So in practice, it's safer to be defensive and always wrap the ref, even on React 19.\n  return useCallback(\n    (current: TElement | null): void => {\n      if (current === null) {\n        const cleanupFnA = cleanupA.current\n        if (cleanupFnA) {\n          cleanupA.current = null\n          cleanupFnA()\n        }\n        const cleanupFnB = cleanupB.current\n        if (cleanupFnB) {\n          cleanupB.current = null\n          cleanupFnB()\n        }\n      } else {\n        if (refA) {\n          cleanupA.current = applyRef(refA, current)\n        }\n        if (refB) {\n          cleanupB.current = applyRef(refB, current)\n        }\n      }\n    },\n    [refA, refB]\n  )\n}\n\nfunction applyRef<TElement>(\n  refA: NonNullable<Ref<TElement>>,\n  current: TElement\n) {\n  if (typeof refA === 'function') {\n    const cleanup = refA(current)\n    if (typeof cleanup === 'function') {\n      return cleanup\n    } else {\n      return () => refA(null)\n    }\n  } else {\n    refA.current = current\n    return () => {\n      refA.current = null\n    }\n  }\n}\n","import type { HtmlProps } from './html-context.shared-runtime'\nimport type { ComponentType, JSX } from 'react'\nimport type { DomainLocale } from '../../server/config'\nimport type { Env } from '@next/env'\nimport type { IncomingMessage, ServerResponse } from 'http'\nimport type { NextRouter } from './router/router'\nimport type { ParsedUrlQuery } from 'querystring'\nimport type { PreviewData } from '../../types'\nimport type { COMPILER_NAMES } from './constants'\nimport type fs from 'fs'\n\nexport type NextComponentType<\n  Context extends BaseContext = NextPageContext,\n  InitialProps = {},\n  Props = {},\n> = ComponentType<Props> & {\n  /**\n   * Used for initial page load data population. Data returned from `getInitialProps` is serialized when server rendered.\n   * Make sure to return plain `Object` without using `Date`, `Map`, `Set`.\n   * @param context Context of `page`\n   */\n  getInitialProps?(context: Context): InitialProps | Promise<InitialProps>\n}\n\nexport type DocumentType = NextComponentType<\n  DocumentContext,\n  DocumentInitialProps,\n  DocumentProps\n>\n\nexport type AppType<P = {}> = NextComponentType<\n  AppContextType,\n  P,\n  AppPropsType<any, P>\n>\n\nexport type AppTreeType = ComponentType<\n  AppInitialProps & { [name: string]: any }\n>\n\n/**\n * Web vitals provided to _app.reportWebVitals by Core Web Vitals plugin developed by Google Chrome team.\n * https://nextjs.org/blog/next-9-4#integrated-web-vitals-reporting\n */\nexport const WEB_VITALS = ['CLS', 'FCP', 'FID', 'INP', 'LCP', 'TTFB'] as const\nexport type NextWebVitalsMetric = {\n  id: string\n  startTime: number\n  value: number\n  attribution?: { [key: string]: unknown }\n} & (\n  | {\n      label: 'web-vital'\n      name: (typeof WEB_VITALS)[number]\n    }\n  | {\n      label: 'custom'\n      name:\n        | 'Next.js-hydration'\n        | 'Next.js-route-change-to-render'\n        | 'Next.js-render'\n    }\n)\n\nexport type Enhancer<C> = (Component: C) => C\n\nexport type ComponentsEnhancer =\n  | {\n      enhanceApp?: Enhancer<AppType>\n      enhanceComponent?: Enhancer<NextComponentType>\n    }\n  | Enhancer<NextComponentType>\n\nexport type RenderPageResult = {\n  html: string\n  head?: Array<JSX.Element | null>\n}\n\nexport type RenderPage = (\n  options?: ComponentsEnhancer\n) => DocumentInitialProps | Promise<DocumentInitialProps>\n\nexport type BaseContext = {\n  res?: ServerResponse\n  [k: string]: any\n}\n\nexport type NEXT_DATA = {\n  props: Record<string, any>\n  page: string\n  query: ParsedUrlQuery\n  buildId: string\n  assetPrefix?: string\n  nextExport?: boolean\n  autoExport?: boolean\n  isFallback?: boolean\n  isExperimentalCompile?: boolean\n  dynamicIds?: (string | number)[]\n  err?: Error & {\n    statusCode?: number\n    source?: typeof COMPILER_NAMES.server | typeof COMPILER_NAMES.edgeServer\n  }\n  gsp?: boolean\n  gssp?: boolean\n  customServer?: boolean\n  gip?: boolean\n  appGip?: boolean\n  locale?: string\n  locales?: readonly string[]\n  defaultLocale?: string\n  domainLocales?: readonly DomainLocale[]\n  scriptLoader?: any[]\n  isPreview?: boolean\n  notFoundSrcPage?: string\n}\n\n/**\n * `Next` context\n */\nexport interface NextPageContext {\n  /**\n   * Error object if encountered during rendering\n   */\n  err?: (Error & { statusCode?: number }) | null\n  /**\n   * `HTTP` request object.\n   */\n  req?: IncomingMessage\n  /**\n   * `HTTP` response object.\n   */\n  res?: ServerResponse\n  /**\n   * Path section of `URL`.\n   */\n  pathname: string\n  /**\n   * Query string section of `URL` parsed as an object.\n   */\n  query: ParsedUrlQuery\n  /**\n   * `String` of the actual path including query.\n   */\n  asPath?: string\n  /**\n   * The currently active locale\n   */\n  locale?: string\n  /**\n   * All configured locales\n   */\n  locales?: readonly string[]\n  /**\n   * The configured default locale\n   */\n  defaultLocale?: string\n  /**\n   * `Component` the tree of the App to use if needing to render separately\n   */\n  AppTree: AppTreeType\n}\n\nexport type AppContextType<Router extends NextRouter = NextRouter> = {\n  Component: NextComponentType<NextPageContext>\n  AppTree: AppTreeType\n  ctx: NextPageContext\n  router: Router\n}\n\nexport type AppInitialProps<PageProps = any> = {\n  pageProps: PageProps\n}\n\nexport type AppPropsType<\n  Router extends NextRouter = NextRouter,\n  PageProps = {},\n> = AppInitialProps<PageProps> & {\n  Component: NextComponentType<NextPageContext, any, any>\n  router: Router\n  __N_SSG?: boolean\n  __N_SSP?: boolean\n}\n\nexport type DocumentContext = NextPageContext & {\n  renderPage: RenderPage\n  defaultGetInitialProps(\n    ctx: DocumentContext,\n    options?: { nonce?: string }\n  ): Promise<DocumentInitialProps>\n}\n\nexport type DocumentInitialProps = RenderPageResult & {\n  styles?: React.ReactElement[] | Iterable<React.ReactNode> | JSX.Element\n}\n\nexport type DocumentProps = DocumentInitialProps & HtmlProps\n\n/**\n * Next `API` route request\n */\nexport interface NextApiRequest extends IncomingMessage {\n  /**\n   * Object of `query` values from url\n   */\n  query: Partial<{\n    [key: string]: string | string[]\n  }>\n  /**\n   * Object of `cookies` from header\n   */\n  cookies: Partial<{\n    [key: string]: string\n  }>\n\n  body: any\n\n  env: Env\n\n  draftMode?: boolean\n\n  preview?: boolean\n  /**\n   * Preview data set on the request, if any\n   * */\n  previewData?: PreviewData\n}\n\n/**\n * Send body of response\n */\ntype Send<T> = (body: T) => void\n\n/**\n * Next `API` route response\n */\nexport type NextApiResponse<Data = any> = ServerResponse & {\n  /**\n   * Send data `any` data in response\n   */\n  send: Send<Data>\n  /**\n   * Send data `json` data in response\n   */\n  json: Send<Data>\n  status: (statusCode: number) => NextApiResponse<Data>\n  redirect(url: string): NextApiResponse<Data>\n  redirect(status: number, url: string): NextApiResponse<Data>\n\n  /**\n   * Set draft mode\n   */\n  setDraftMode: (options: { enable: boolean }) => NextApiResponse<Data>\n\n  /**\n   * Set preview data for Next.js' prerender mode\n   */\n  setPreviewData: (\n    data: object | string,\n    options?: {\n      /**\n       * Specifies the number (in seconds) for the preview session to last for.\n       * The given number will be converted to an integer by rounding down.\n       * By default, no maximum age is set and the preview session finishes\n       * when the client shuts down (browser is closed).\n       */\n      maxAge?: number\n      /**\n       * Specifies the path for the preview session to work under. By default,\n       * the path is considered the \"default path\", i.e., any pages under \"/\".\n       */\n      path?: string\n    }\n  ) => NextApiResponse<Data>\n\n  /**\n   * Clear preview data for Next.js' prerender mode\n   */\n  clearPreviewData: (options?: { path?: string }) => NextApiResponse<Data>\n\n  /**\n   * Revalidate a specific page and regenerate it using On-Demand Incremental\n   * Static Regeneration.\n   * The path should be an actual path, not a rewritten path. E.g. for\n   * \"/blog/[slug]\" this should be \"/blog/post-1\".\n   * @link https://nextjs.org/docs/app/building-your-application/data-fetching/incremental-static-regeneration#on-demand-revalidation-with-revalidatepath\n   */\n  revalidate: (\n    urlPath: string,\n    opts?: {\n      unstable_onlyGenerated?: boolean\n    }\n  ) => Promise<void>\n}\n\n/**\n * Next `API` route handler\n */\nexport type NextApiHandler<T = any> = (\n  req: NextApiRequest,\n  res: NextApiResponse<T>\n) => unknown | Promise<unknown>\n\n/**\n * Utils\n */\nexport function execOnce<T extends (...args: any[]) => ReturnType<T>>(\n  fn: T\n): T {\n  let used = false\n  let result: ReturnType<T>\n\n  return ((...args: any[]) => {\n    if (!used) {\n      used = true\n      result = fn(...args)\n    }\n    return result\n  }) as T\n}\n\n// Scheme: https://tools.ietf.org/html/rfc3986#section-3.1\n// Absolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\nconst ABSOLUTE_URL_REGEX = /^[a-zA-Z][a-zA-Z\\d+\\-.]*?:/\nexport const isAbsoluteUrl = (url: string) => ABSOLUTE_URL_REGEX.test(url)\n\nexport function getLocationOrigin() {\n  const { protocol, hostname, port } = window.location\n  return `${protocol}//${hostname}${port ? ':' + port : ''}`\n}\n\nexport function getURL() {\n  const { href } = window.location\n  const origin = getLocationOrigin()\n  return href.substring(origin.length)\n}\n\nexport function getDisplayName<P>(Component: ComponentType<P>) {\n  return typeof Component === 'string'\n    ? Component\n    : Component.displayName || Component.name || 'Unknown'\n}\n\nexport function isResSent(res: ServerResponse) {\n  return res.finished || res.headersSent\n}\n\nexport function normalizeRepeatedSlashes(url: string) {\n  const urlParts = url.split('?')\n  const urlNoQuery = urlParts[0]\n\n  return (\n    urlNoQuery\n      // first we replace any non-encoded backslashes with forward\n      // then normalize repeated forward slashes\n      .replace(/\\\\/g, '/')\n      .replace(/\\/\\/+/g, '/') +\n    (urlParts[1] ? `?${urlParts.slice(1).join('?')}` : '')\n  )\n}\n\nexport async function loadGetInitialProps<\n  C extends BaseContext,\n  IP = {},\n  P = {},\n>(App: NextComponentType<C, IP, P>, ctx: C): Promise<IP> {\n  if (process.env.NODE_ENV !== 'production') {\n    if (App.prototype?.getInitialProps) {\n      const message = `\"${getDisplayName(\n        App\n      )}.getInitialProps()\" is defined as an instance method - visit https://nextjs.org/docs/messages/get-initial-props-as-an-instance-method for more information.`\n      throw new Error(message)\n    }\n  }\n  // when called from _app `ctx` is nested in `ctx`\n  const res = ctx.res || (ctx.ctx && ctx.ctx.res)\n\n  if (!App.getInitialProps) {\n    if (ctx.ctx && ctx.Component) {\n      // @ts-ignore pageProps default\n      return {\n        pageProps: await loadGetInitialProps(ctx.Component, ctx.ctx),\n      }\n    }\n    return {} as IP\n  }\n\n  const props = await App.getInitialProps(ctx)\n\n  if (res && isResSent(res)) {\n    return props\n  }\n\n  if (!props) {\n    const message = `\"${getDisplayName(\n      App\n    )}.getInitialProps()\" should resolve to an object. But found \"${props}\" instead.`\n    throw new Error(message)\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (Object.keys(props).length === 0 && !ctx.ctx) {\n      console.warn(\n        `${getDisplayName(\n          App\n        )} returned an empty object from \\`getInitialProps\\`. This de-optimizes and prevents automatic static optimization. https://nextjs.org/docs/messages/empty-object-getInitialProps`\n      )\n    }\n  }\n\n  return props\n}\n\nexport const SP = typeof performance !== 'undefined'\nexport const ST =\n  SP &&\n  (['mark', 'measure', 'getEntriesByName'] as const).every(\n    (method) => typeof performance[method] === 'function'\n  )\n\nexport class DecodeError extends Error {}\nexport class NormalizeError extends Error {}\nexport class PageNotFoundError extends Error {\n  code: string\n\n  constructor(page: string) {\n    super()\n    this.code = 'ENOENT'\n    this.name = 'PageNotFoundError'\n    this.message = `Cannot find module for page: ${page}`\n  }\n}\n\nexport class MissingStaticPage extends Error {\n  constructor(page: string, message: string) {\n    super()\n    this.message = `Failed to load static file for page: ${page} ${message}`\n  }\n}\n\nexport class MiddlewareNotFoundError extends Error {\n  code: string\n  constructor() {\n    super()\n    this.code = 'ENOENT'\n    this.message = `Cannot find the middleware module`\n  }\n}\n\nexport interface CacheFs {\n  existsSync: typeof fs.existsSync\n  readFile: typeof fs.promises.readFile\n  readFileSync: typeof fs.readFileSync\n  writeFile(f: string, d: any): Promise<void>\n  mkdir(dir: string): Promise<void | string>\n  stat(f: string): Promise<{ mtime: Date }>\n}\n\nexport function stringifyError(error: Error) {\n  return JSON.stringify({ message: error.message, stack: error.stack })\n}\n","/**\n * Given a path this function will find the pathname, query and hash and return\n * them. This is useful to parse full paths on the client side.\n * @param path A path to parse e.g. /foo/bar?id=1#hash\n */\nexport function parsePath(path: string) {\n  const hashIndex = path.indexOf('#')\n  const queryIndex = path.indexOf('?')\n  const hasQuery = queryIndex > -1 && (hashIndex < 0 || queryIndex < hashIndex)\n\n  if (hasQuery || hashIndex > -1) {\n    return {\n      pathname: path.substring(0, hasQuery ? queryIndex : hashIndex),\n      query: hasQuery\n        ? path.substring(queryIndex, hashIndex > -1 ? hashIndex : undefined)\n        : '',\n      hash: hashIndex > -1 ? path.slice(hashIndex) : '',\n    }\n  }\n\n  return { pathname: path, query: '', hash: '' }\n}\n","import { parsePath } from './parse-path'\n\n/**\n * Adds the provided prefix to the given path. It first ensures that the path\n * is indeed starting with a slash.\n */\nexport function addPathPrefix(path: string, prefix?: string) {\n  if (!path.startsWith('/') || !prefix) {\n    return path\n  }\n\n  const { pathname, query, hash } = parsePath(path)\n  return `${prefix}${pathname}${query}${hash}`\n}\n","/**\n * Removes the trailing slash for a given route or page path. Preserves the\n * root page. Examples:\n *   - `/foo/bar/` -> `/foo/bar`\n *   - `/foo/bar` -> `/foo/bar`\n *   - `/` -> `/`\n */\nexport function removeTrailingSlash(route: string) {\n  return route.replace(/\\/$/, '') || '/'\n}\n","import { removeTrailingSlash } from '../shared/lib/router/utils/remove-trailing-slash'\nimport { parsePath } from '../shared/lib/router/utils/parse-path'\n\n/**\n * Normalizes the trailing slash of a path according to the `trailingSlash` option\n * in `next.config.js`.\n */\nexport const normalizePathTrailingSlash = (path: string) => {\n  if (!path.startsWith('/') || process.env.__NEXT_MANUAL_TRAILING_SLASH) {\n    return path\n  }\n\n  const { pathname, query, hash } = parsePath(path)\n  if (process.env.__NEXT_TRAILING_SLASH) {\n    if (/\\.[^/]+\\/?$/.test(pathname)) {\n      return `${removeTrailingSlash(pathname)}${query}${hash}`\n    } else if (pathname.endsWith('/')) {\n      return `${pathname}${query}${hash}`\n    } else {\n      return `${pathname}/${query}${hash}`\n    }\n  }\n\n  return `${removeTrailingSlash(pathname)}${query}${hash}`\n}\n","import { addPathPrefix } from '../shared/lib/router/utils/add-path-prefix'\nimport { normalizePathTrailingSlash } from './normalize-trailing-slash'\n\nconst basePath = (process.env.__NEXT_ROUTER_BASEPATH as string) || ''\n\nexport function addBasePath(path: string, required?: boolean): string {\n  return normalizePathTrailingSlash(\n    process.env.__NEXT_MANUAL_CLIENT_BASE_PATH && !required\n      ? path\n      : addPathPrefix(path, basePath)\n  )\n}\n","let warnOnce = (_: string) => {}\nif (process.env.NODE_ENV !== 'production') {\n  const warnings = new Set<string>()\n  warnOnce = (msg: string) => {\n    if (!warnings.has(msg)) {\n      console.warn(msg)\n    }\n    warnings.add(msg)\n  }\n}\n\nexport { warnOnce }\n","/**\n * Shared types and constants for the Segment Cache.\n */\n\nexport const enum NavigationResultTag {\n  MPA,\n  Success,\n  NoOp,\n  Async,\n}\n\n/**\n * The priority of the prefetch task. Higher numbers are higher priority.\n */\nexport const enum PrefetchPriority {\n  /**\n   * Assigned to the most recently hovered/touched link. Special network\n   * bandwidth is reserved for this task only. There's only ever one Intent-\n   * priority task at a time; when a new Intent task is scheduled, the previous\n   * one is bumped down to Default.\n   */\n  Intent = 2,\n  /**\n   * The default priority for prefetch tasks.\n   */\n  Default = 1,\n  /**\n   * Assigned to tasks when they spawn non-blocking background work, like\n   * revalidating a partially cached entry to see if more data is available.\n   */\n  Background = 0,\n}\n\nexport const enum FetchStrategy {\n  // Deliberately ordered so we can easily compare two segments\n  // and determine if one segment is \"more specific\" than another\n  // (i.e. if it's likely that it contains more data)\n  LoadingBoundary = 0,\n  PPR = 1,\n  PPRRuntime = 2,\n  Full = 3,\n}\n\n/**\n * A subset of fetch strategies used for prefetch tasks.\n * A prefetch task can't know if it should use `PPR` or `LoadingBoundary`\n * until we complete the initial tree prefetch request, so we use `PPR` to signal both cases\n * and adjust it based on the route when actually fetching.\n * */\nexport type PrefetchTaskFetchStrategy =\n  | FetchStrategy.PPR\n  | FetchStrategy.PPRRuntime\n  | FetchStrategy.Full\n","// TypeScript trick to simulate opaque types, like in Flow.\ntype Opaque<K, T> = T & { __brand: K }\n\n// Only functions in this module should be allowed to create CacheKeys.\nexport type NormalizedPathname = Opaque<'NormalizedPathname', string>\nexport type NormalizedSearch = Opaque<'NormalizedSearch', string>\nexport type NormalizedNextUrl = Opaque<'NormalizedNextUrl', string>\n\nexport type RouteCacheKey = Opaque<\n  'RouteCacheKey',\n  {\n    pathname: NormalizedPathname\n    search: NormalizedSearch\n    nextUrl: NormalizedNextUrl | null\n\n    // TODO: Eventually the dynamic params will be added here, too.\n  }\n>\n\nexport function createCacheKey(\n  originalHref: string,\n  nextUrl: string | null\n): RouteCacheKey {\n  const originalUrl = new URL(originalHref)\n  const cacheKey = {\n    pathname: originalUrl.pathname as NormalizedPathname,\n    search: originalUrl.search as NormalizedSearch,\n    nextUrl: nextUrl as NormalizedNextUrl | null,\n  } as RouteCacheKey\n  return cacheKey\n}\n","/**\n * App Router types - Client-safe types for the Next.js App Router\n *\n * This file contains type definitions that can be safely imported\n * by both client-side and server-side code without circular dependencies.\n */\nimport type { FetchServerResponseResult } from '../../client/components/router-reducer/fetch-server-response'\nimport type React from 'react'\n\nexport type LoadingModuleData =\n  | [React.JSX.Element, React.ReactNode, React.ReactNode]\n  | null\n\n/** viewport metadata node */\nexport type HeadData = React.ReactNode\n\nexport type ChildSegmentMap = Map<string, CacheNode>\n\n/**\n * Cache node used in app-router / layout-router.\n */\nexport type CacheNode = ReadyCacheNode | LazyCacheNode\n\nexport type LazyCacheNode = {\n  /**\n   * When rsc is null, this is a lazily-initialized cache node.\n   *\n   * If the app attempts to render it, it triggers a lazy data fetch,\n   * postpones the render, and schedules an update to a new tree.\n   *\n   * TODO: This mechanism should not be used when PPR is enabled, though it\n   * currently is in some cases until we've implemented partial\n   * segment fetching.\n   */\n  rsc: null\n\n  /**\n   * A prefetched version of the segment data. See explanation in corresponding\n   * field of ReadyCacheNode (below).\n   *\n   * Since LazyCacheNode mostly only exists in the non-PPR implementation, this\n   * will usually be null, but it could have been cloned from a previous\n   * CacheNode that was created by the PPR implementation. Eventually we want\n   * to migrate everything away from LazyCacheNode entirely.\n   */\n  prefetchRsc: React.ReactNode\n\n  /**\n   * A pending response for the lazy data fetch. If this is not present\n   * during render, it is lazily created.\n   */\n  lazyData: Promise<FetchServerResponseResult> | null\n\n  prefetchHead: HeadData | null\n\n  head: HeadData\n\n  loading: LoadingModuleData | Promise<LoadingModuleData>\n\n  /**\n   * Child parallel routes.\n   */\n  parallelRoutes: Map<string, ChildSegmentMap>\n\n  /**\n   * The timestamp of the navigation that last updated the CacheNode's data. If\n   * a CacheNode is reused from a previous navigation, this value is not\n   * updated. Used to track the staleness of the data.\n   */\n  navigatedAt: number\n}\n\nexport type ReadyCacheNode = {\n  /**\n   * When rsc is not null, it represents the RSC data for the\n   * corresponding segment.\n   *\n   * `null` is a valid React Node but because segment data is always a\n   * <LayoutRouter> component, we can use `null` to represent empty.\n   *\n   * TODO: For additional type safety, update this type to\n   * Exclude<React.ReactNode, null>. Need to update createEmptyCacheNode to\n   * accept rsc as an argument, or just inline the callers.\n   */\n  rsc: React.ReactNode\n\n  /**\n   * Represents a static version of the segment that can be shown immediately,\n   * and may or may not contain dynamic holes. It's prefetched before a\n   * navigation occurs.\n   *\n   * During rendering, we will choose whether to render `rsc` or `prefetchRsc`\n   * with `useDeferredValue`. As with the `rsc` field, a value of `null` means\n   * no value was provided. In this case, the LayoutRouter will go straight to\n   * rendering the `rsc` value; if that one is also missing, it will suspend and\n   * trigger a lazy fetch.\n   */\n  prefetchRsc: React.ReactNode\n\n  /**\n   * There should never be a lazy data request in this case.\n   */\n  lazyData: null\n  prefetchHead: HeadData | null\n\n  head: HeadData\n\n  loading: LoadingModuleData | Promise<LoadingModuleData>\n\n  parallelRoutes: Map<string, ChildSegmentMap>\n\n  navigatedAt: number\n}\n\nexport type DynamicParamTypes =\n  | 'catchall'\n  | 'catchall-intercepted-(..)(..)'\n  | 'catchall-intercepted-(.)'\n  | 'catchall-intercepted-(..)'\n  | 'catchall-intercepted-(...)'\n  | 'optional-catchall'\n  | 'dynamic'\n  | 'dynamic-intercepted-(..)(..)'\n  | 'dynamic-intercepted-(.)'\n  | 'dynamic-intercepted-(..)'\n  | 'dynamic-intercepted-(...)'\n\nexport type DynamicParamTypesShort =\n  | 'c'\n  | 'ci(..)(..)'\n  | 'ci(.)'\n  | 'ci(..)'\n  | 'ci(...)'\n  | 'oc'\n  | 'd'\n  | 'di(..)(..)'\n  | 'di(.)'\n  | 'di(..)'\n  | 'di(...)'\n\nexport type Segment =\n  | string\n  | [\n      // Param name\n      paramName: string,\n      // Param cache key (almost the same as the value, but arrays are\n      // concatenated into strings)\n      // TODO: We should change this to just be the value. Currently we convert\n      // it back to a value when passing to useParams. It only needs to be\n      // a string when converted to a a cache key, but that doesn't mean we\n      // need to store it as that representation.\n      paramCacheKey: string,\n      // Dynamic param type\n      dynamicParamType: DynamicParamTypesShort,\n    ]\n\n/**\n * Router state\n */\nexport type FlightRouterState = [\n  segment: Segment,\n  parallelRoutes: { [parallelRouterKey: string]: FlightRouterState },\n  url?: string | null,\n  /**\n   * \"refresh\" and \"refetch\", despite being similarly named, have different\n   * semantics:\n   * - \"refetch\" is used during a request to inform the server where rendering\n   *   should start from.\n   *\n   * - \"refresh\" is used by the client to mark that a segment should re-fetch the\n   *   data from the server for the current segment. It uses the \"url\" property\n   *   above to determine where to fetch from.\n   *\n   * - \"inside-shared-layout\" is used during a prefetch request to inform the\n   *   server that even if the segment matches, it should be treated as if it's\n   *   within the \"new\" part of a navigation  inside the shared layout. If\n   *   the segment doesn't match, then it has no effect, since it would be\n   *   treated as new regardless. If it does match, though, the server does not\n   *   need to render it, because the client already has it.\n   *\n   * - \"metadata-only\" instructs the server to skip rendering the segments and\n   *   only send the head data.\n   *\n   *   A bit confusing, but that's because it has only one extremely narrow use\n   *   case  during a non-PPR prefetch, the server uses it to find the first\n   *   loading boundary beneath a shared layout.\n   *\n   *   TODO: We should rethink the protocol for dynamic requests. It might not\n   *   make sense for the client to send a FlightRouterState, since this type is\n   *   overloaded with concerns.\n   */\n  refresh?:\n    | 'refetch'\n    | 'refresh'\n    | 'inside-shared-layout'\n    | 'metadata-only'\n    | null,\n  isRootLayout?: boolean,\n  /**\n   * Only present when responding to a tree prefetch request. Indicates whether\n   * there is a loading boundary somewhere in the tree. The client cache uses\n   * this to determine if it can skip the data prefetch request.\n   */\n  hasLoadingBoundary?: HasLoadingBoundary,\n]\n\nexport const enum HasLoadingBoundary {\n  // There is a loading boundary in this particular segment\n  SegmentHasLoadingBoundary = 1,\n  // There is a loading boundary somewhere in the subtree (but not in\n  // this segment)\n  SubtreeHasLoadingBoundary = 2,\n  // There is no loading boundary in this segment or any of its descendants\n  SubtreeHasNoLoadingBoundary = 3,\n}\n\n/**\n * Individual Flight response path\n */\nexport type FlightSegmentPath =\n  // Uses `any` as repeating pattern can't be typed.\n  | any[]\n  // Looks somewhat like this\n  | [\n      segment: Segment,\n      parallelRouterKey: string,\n      segment: Segment,\n      parallelRouterKey: string,\n      segment: Segment,\n      parallelRouterKey: string,\n    ]\n\n/**\n * Represents a tree of segments and the Flight data (i.e. React nodes) that\n * correspond to each one. The tree is isomorphic to the FlightRouterState;\n * however in the future we want to be able to fetch arbitrary partial segments\n * without having to fetch all its children. So this response format will\n * likely change.\n */\nexport type CacheNodeSeedData = [\n  node: React.ReactNode | null,\n  parallelRoutes: {\n    [parallelRouterKey: string]: CacheNodeSeedData | null\n  },\n  loading: LoadingModuleData | Promise<LoadingModuleData>,\n  isPartial: boolean,\n  /** TODO: this doesn't feel like it belongs here, because it's only used during build, in `collectSegmentData` */\n  hasRuntimePrefetch: boolean,\n]\n\nexport type FlightDataSegment = [\n  /* segment of the rendered slice: */ Segment,\n  /* treePatch */ FlightRouterState,\n  /* cacheNodeSeedData */ CacheNodeSeedData | null, // Can be null during prefetch if there's no loading component\n  /* head: viewport */ HeadData,\n  /* isHeadPartial */ boolean,\n]\n\nexport type FlightDataPath =\n  // Uses `any` as repeating pattern can't be typed.\n  | any[]\n  // Looks somewhat like this\n  | [\n      // Holds full path to the segment.\n      ...FlightSegmentPath[],\n      ...FlightDataSegment,\n    ]\n\n/**\n * The Flight response data\n */\nexport type FlightData = Array<FlightDataPath> | string\n\nexport type ActionResult = Promise<any>\n\nexport type InitialRSCPayload = {\n  /** buildId */\n  b: string\n  /** initialCanonicalUrlParts */\n  c: string[]\n  /** initialRenderedSearch */\n  q: string\n  /** couldBeIntercepted */\n  i: boolean\n  /** initialFlightData */\n  f: FlightDataPath[]\n  /** missingSlots */\n  m: Set<string> | undefined\n  /** GlobalError */\n  G: [React.ComponentType<any>, React.ReactNode | undefined]\n  /** prerendered */\n  S: boolean\n}\n\n// Response from `createFromFetch` for normal rendering\nexport type NavigationFlightResponse = {\n  /** buildId */\n  b: string\n  /** flightData */\n  f: FlightData\n  /** prerendered */\n  S: boolean\n  /** runtimePrefetch - [isPartial, staleTime]. Only present in runtime prefetch responses. */\n  rp?: [boolean, number]\n}\n\n// Response from `createFromFetch` for server actions. Action's flight data can be null\nexport type ActionFlightResponse = {\n  /** actionResult */\n  a: ActionResult\n  /** buildId */\n  b: string\n  /** flightData */\n  f: FlightData\n}\n\nexport type RSCPayload =\n  | InitialRSCPayload\n  | NavigationFlightResponse\n  | ActionFlightResponse\n","import type { Segment } from '../../shared/lib/app-router-types'\n\nexport const matchSegment = (\n  existingSegment: Segment,\n  segment: Segment\n): boolean => {\n  // segment is either Array or string\n  if (typeof existingSegment === 'string') {\n    if (typeof segment === 'string') {\n      // Common case: segment is just a string\n      return existingSegment === segment\n    }\n    return false\n  }\n\n  if (typeof segment === 'string') {\n    return false\n  }\n  return existingSegment[0] === segment[0] && existingSegment[1] === segment[1]\n}\n","export const RSC_HEADER = 'rsc' as const\nexport const ACTION_HEADER = 'next-action' as const\n// TODO: Instead of sending the full router state, we only need to send the\n// segment path. Saves bytes. Then we could also use this field for segment\n// prefetches, which also need to specify a particular segment.\nexport const NEXT_ROUTER_STATE_TREE_HEADER = 'next-router-state-tree' as const\nexport const NEXT_ROUTER_PREFETCH_HEADER = 'next-router-prefetch' as const\n// This contains the path to the segment being prefetched.\n// TODO: If we change next-router-state-tree to be a segment path, we can use\n// that instead. Then next-router-prefetch and next-router-segment-prefetch can\n// be merged into a single enum.\nexport const NEXT_ROUTER_SEGMENT_PREFETCH_HEADER =\n  'next-router-segment-prefetch' as const\nexport const NEXT_HMR_REFRESH_HEADER = 'next-hmr-refresh' as const\nexport const NEXT_HMR_REFRESH_HASH_COOKIE = '__next_hmr_refresh_hash__' as const\nexport const NEXT_URL = 'next-url' as const\nexport const RSC_CONTENT_TYPE_HEADER = 'text/x-component' as const\n\nexport const FLIGHT_HEADERS = [\n  RSC_HEADER,\n  NEXT_ROUTER_STATE_TREE_HEADER,\n  NEXT_ROUTER_PREFETCH_HEADER,\n  NEXT_HMR_REFRESH_HEADER,\n  NEXT_ROUTER_SEGMENT_PREFETCH_HEADER,\n] as const\n\nexport const NEXT_RSC_UNION_QUERY = '_rsc' as const\n\nexport const NEXT_ROUTER_STALE_TIME_HEADER = 'x-nextjs-stale-time' as const\nexport const NEXT_DID_POSTPONE_HEADER = 'x-nextjs-postponed' as const\nexport const NEXT_REWRITTEN_PATH_HEADER = 'x-nextjs-rewritten-path' as const\nexport const NEXT_REWRITTEN_QUERY_HEADER = 'x-nextjs-rewritten-query' as const\nexport const NEXT_IS_PRERENDER_HEADER = 'x-nextjs-prerender' as const\nexport const NEXT_ACTION_NOT_FOUND_HEADER = 'x-nextjs-action-not-found' as const\nexport const NEXT_REQUEST_ID_HEADER = 'x-nextjs-request-id' as const\nexport const NEXT_HTML_REQUEST_ID_HEADER = 'x-nextjs-html-request-id' as const\n","import { PAGE_SEGMENT_KEY } from '../segment'\nimport type { Segment as FlightRouterStateSegment } from '../app-router-types'\n\n// TypeScript trick to simulate opaque types, like in Flow.\ntype Opaque<K, T> = T & { __brand: K }\n\nexport type SegmentRequestKeyPart = Opaque<'SegmentRequestKeyPart', string>\nexport type SegmentRequestKey = Opaque<'SegmentRequestKey', string>\n\nexport const ROOT_SEGMENT_REQUEST_KEY = '' as SegmentRequestKey\n\nexport const HEAD_REQUEST_KEY = '/_head' as SegmentRequestKey\n\nexport function createSegmentRequestKeyPart(\n  segment: FlightRouterStateSegment\n): SegmentRequestKeyPart {\n  if (typeof segment === 'string') {\n    if (segment.startsWith(PAGE_SEGMENT_KEY)) {\n      // The Flight Router State type sometimes includes the search params in\n      // the page segment. However, the Segment Cache tracks this as a separate\n      // key. So, we strip the search params here, and then add them back when\n      // the cache entry is turned back into a FlightRouterState. This is an\n      // unfortunate consequence of the FlightRouteState being used both as a\n      // transport type and as a cache key; we'll address this once more of the\n      // Segment Cache implementation has settled.\n      // TODO: We should hoist the search params out of the FlightRouterState\n      // type entirely, This is our plan for dynamic route params, too.\n      return PAGE_SEGMENT_KEY as SegmentRequestKeyPart\n    }\n    const safeName =\n      // TODO: FlightRouterState encodes Not Found routes as \"/_not-found\".\n      // But params typically don't include the leading slash. We should use\n      // a different encoding to avoid this special case.\n      segment === '/_not-found'\n        ? '_not-found'\n        : encodeToFilesystemAndURLSafeString(segment)\n    // Since this is not a dynamic segment, it's fully encoded. It does not\n    // need to be \"hydrated\" with a param value.\n    return safeName as SegmentRequestKeyPart\n  }\n\n  const name = segment[0]\n  const paramType = segment[2]\n  const safeName = encodeToFilesystemAndURLSafeString(name)\n\n  const encodedName = '$' + paramType + '$' + safeName\n  return encodedName as SegmentRequestKeyPart\n}\n\nexport function appendSegmentRequestKeyPart(\n  parentRequestKey: SegmentRequestKey,\n  parallelRouteKey: string,\n  childRequestKeyPart: SegmentRequestKeyPart\n): SegmentRequestKey {\n  // Aside from being filesystem safe, segment keys are also designed so that\n  // each segment and parallel route creates its own subdirectory. Roughly in\n  // the same shape as the source app directory. This is mostly just for easier\n  // debugging (you can open up the build folder and navigate the output); if\n  // we wanted to do we could just use a flat structure.\n\n  // Omit the parallel route key for children, since this is the most\n  // common case. Saves some bytes (and it's what the app directory does).\n  const slotKey =\n    parallelRouteKey === 'children'\n      ? childRequestKeyPart\n      : `@${encodeToFilesystemAndURLSafeString(parallelRouteKey)}/${childRequestKeyPart}`\n  return (parentRequestKey + '/' + slotKey) as SegmentRequestKey\n}\n\n// Define a regex pattern to match the most common characters found in a route\n// param. It excludes anything that might not be cross-platform filesystem\n// compatible, like |. It does not need to be precise because the fallback is to\n// just base64url-encode the whole parameter, which is fine; we just don't do it\n// by default for compactness, and for easier debugging.\nconst simpleParamValueRegex = /^[a-zA-Z0-9\\-_@]+$/\n\nfunction encodeToFilesystemAndURLSafeString(value: string) {\n  if (simpleParamValueRegex.test(value)) {\n    return value\n  }\n  // If there are any unsafe characters, base64url-encode the entire value.\n  // We also add a ! prefix so it doesn't collide with the simple case.\n  const base64url = btoa(value)\n    .replace(/\\+/g, '-') // Replace '+' with '-'\n    .replace(/\\//g, '_') // Replace '/' with '_'\n    .replace(/=+$/, '') // Remove trailing '='\n  return '!' + base64url\n}\n\nexport function convertSegmentPathToStaticExportFilename(\n  segmentPath: string\n): string {\n  return `__next${segmentPath.replace(/\\//g, '.')}.txt`\n}\n","import type { DynamicParamTypesShort } from '../shared/lib/app-router-types'\nimport {\n  addSearchParamsIfPageSegment,\n  DEFAULT_SEGMENT_KEY,\n  PAGE_SEGMENT_KEY,\n} from '../shared/lib/segment'\nimport { ROOT_SEGMENT_REQUEST_KEY } from '../shared/lib/segment-cache/segment-value-encoding'\nimport {\n  NEXT_REWRITTEN_PATH_HEADER,\n  NEXT_REWRITTEN_QUERY_HEADER,\n  NEXT_RSC_UNION_QUERY,\n} from './components/app-router-headers'\nimport type {\n  NormalizedPathname,\n  NormalizedSearch,\n} from './components/segment-cache/cache-key'\nimport type { RSCResponse } from './components/router-reducer/fetch-server-response'\nimport type { ParsedUrlQuery } from 'querystring'\n\nexport type RouteParamValue = string | Array<string> | null\n\nexport function getRenderedSearch(\n  response: RSCResponse<unknown> | Response\n): NormalizedSearch {\n  // If the server performed a rewrite, the search params used to render the\n  // page will be different from the params in the request URL. In this case,\n  // the response will include a header that gives the rewritten search query.\n  const rewrittenQuery = response.headers.get(NEXT_REWRITTEN_QUERY_HEADER)\n  if (rewrittenQuery !== null) {\n    return (\n      rewrittenQuery === '' ? '' : '?' + rewrittenQuery\n    ) as NormalizedSearch\n  }\n  // If the header is not present, there was no rewrite, so we use the search\n  // query of the response URL.\n  return urlToUrlWithoutFlightMarker(new URL(response.url))\n    .search as NormalizedSearch\n}\n\nexport function getRenderedPathname(\n  response: RSCResponse<unknown> | Response\n): NormalizedPathname {\n  // If the server performed a rewrite, the pathname used to render the\n  // page will be different from the pathname in the request URL. In this case,\n  // the response will include a header that gives the rewritten pathname.\n  const rewrittenPath = response.headers.get(NEXT_REWRITTEN_PATH_HEADER)\n  return (rewrittenPath ??\n    urlToUrlWithoutFlightMarker(new URL(response.url))\n      .pathname) as NormalizedPathname\n}\n\nexport function parseDynamicParamFromURLPart(\n  paramType: DynamicParamTypesShort,\n  pathnameParts: Array<string>,\n  partIndex: number\n): RouteParamValue {\n  // This needs to match the behavior in get-dynamic-param.ts.\n  switch (paramType) {\n    // Catchalls\n    case 'c': {\n      // Catchalls receive all the remaining URL parts. If there are no\n      // remaining pathname parts, return an empty array.\n      return partIndex < pathnameParts.length\n        ? pathnameParts.slice(partIndex).map((s) => encodeURIComponent(s))\n        : []\n    }\n    // Catchall intercepted\n    case 'ci(..)(..)':\n    case 'ci(.)':\n    case 'ci(..)':\n    case 'ci(...)': {\n      const prefix = paramType.length - 2\n      return partIndex < pathnameParts.length\n        ? pathnameParts.slice(partIndex).map((s, i) => {\n            if (i === 0) {\n              return encodeURIComponent(s.slice(prefix))\n            }\n\n            return encodeURIComponent(s)\n          })\n        : []\n    }\n    // Optional catchalls\n    case 'oc': {\n      // Optional catchalls receive all the remaining URL parts, unless this is\n      // the end of the pathname, in which case they return null.\n      return partIndex < pathnameParts.length\n        ? pathnameParts.slice(partIndex).map((s) => encodeURIComponent(s))\n        : null\n    }\n    // Dynamic\n    case 'd': {\n      if (partIndex >= pathnameParts.length) {\n        // The route tree expected there to be more parts in the URL than there\n        // actually are. This could happen if the x-nextjs-rewritten-path header\n        // is incorrectly set, or potentially due to bug in Next.js. TODO:\n        // Should this be a hard error? During a prefetch, we can just abort.\n        // During a client navigation, we could trigger a hard refresh. But if\n        // it happens during initial render, we don't really have any\n        // recovery options.\n        return ''\n      }\n      return encodeURIComponent(pathnameParts[partIndex])\n    }\n    // Dynamic intercepted\n    case 'di(..)(..)':\n    case 'di(.)':\n    case 'di(..)':\n    case 'di(...)': {\n      const prefix = paramType.length - 2\n      if (partIndex >= pathnameParts.length) {\n        // The route tree expected there to be more parts in the URL than there\n        // actually are. This could happen if the x-nextjs-rewritten-path header\n        // is incorrectly set, or potentially due to bug in Next.js. TODO:\n        // Should this be a hard error? During a prefetch, we can just abort.\n        // During a client navigation, we could trigger a hard refresh. But if\n        // it happens during initial render, we don't really have any\n        // recovery options.\n        return ''\n      }\n\n      return encodeURIComponent(pathnameParts[partIndex].slice(prefix))\n    }\n    default:\n      paramType satisfies never\n      return ''\n  }\n}\n\nexport function doesStaticSegmentAppearInURL(segment: string): boolean {\n  // This is not a parameterized segment; however, we need to determine\n  // whether or not this segment appears in the URL. For example, this route\n  // groups do not appear in the URL, so they should be skipped. Any other\n  // special cases must be handled here.\n  // TODO: Consider encoding this directly into the router tree instead of\n  // inferring it on the client based on the segment type. Something like\n  // a `doesAppearInURL` flag in FlightRouterState.\n  if (\n    segment === ROOT_SEGMENT_REQUEST_KEY ||\n    // For some reason, the loader tree sometimes includes extra __PAGE__\n    // \"layouts\" when part of a parallel route. But it's not a leaf node.\n    // Otherwise, we wouldn't need this special case because pages are\n    // always leaf nodes.\n    // TODO: Investigate why the loader produces these fake page segments.\n    segment.startsWith(PAGE_SEGMENT_KEY) ||\n    // Route groups.\n    (segment[0] === '(' && segment.endsWith(')')) ||\n    segment === DEFAULT_SEGMENT_KEY ||\n    segment === '/_not-found'\n  ) {\n    return false\n  } else {\n    // All other segment types appear in the URL\n    return true\n  }\n}\n\nexport function getCacheKeyForDynamicParam(\n  paramValue: RouteParamValue,\n  renderedSearch: NormalizedSearch\n): string {\n  // This needs to match the logic in get-dynamic-param.ts, until we're able to\n  // unify the various implementations so that these are always computed on\n  // the client.\n  if (typeof paramValue === 'string') {\n    // TODO: Refactor or remove this helper function to accept a string rather\n    // than the whole segment type. Also we can probably just append the\n    // search string instead of turning it into JSON.\n    const pageSegmentWithSearchParams = addSearchParamsIfPageSegment(\n      paramValue,\n      Object.fromEntries(new URLSearchParams(renderedSearch))\n    ) as string\n    return pageSegmentWithSearchParams\n  } else if (paramValue === null) {\n    return ''\n  } else {\n    return paramValue.join('/')\n  }\n}\n\nexport function urlToUrlWithoutFlightMarker(url: URL): URL {\n  const urlWithoutFlightParameters = new URL(url)\n  urlWithoutFlightParameters.searchParams.delete(NEXT_RSC_UNION_QUERY)\n  if (process.env.NODE_ENV === 'production') {\n    if (\n      process.env.__NEXT_CONFIG_OUTPUT === 'export' &&\n      urlWithoutFlightParameters.pathname.endsWith('.txt')\n    ) {\n      const { pathname } = urlWithoutFlightParameters\n      const length = pathname.endsWith('/index.txt') ? 10 : 4\n      // Slice off `/index.txt` or `.txt` from the end of the pathname\n      urlWithoutFlightParameters.pathname = pathname.slice(0, -length)\n    }\n  }\n  return urlWithoutFlightParameters\n}\n\nexport function getParamValueFromCacheKey(\n  paramCacheKey: string,\n  paramType: DynamicParamTypesShort\n) {\n  // Turn the cache key string sent by the server (as part of FlightRouterState)\n  // into a value that can be passed to `useParams` and client components.\n  const isCatchAll = paramType === 'c' || paramType === 'oc'\n  if (isCatchAll) {\n    // Catch-all param keys are a concatenation of the path segments.\n    // See equivalent logic in `getSelectedParams`.\n    // TODO: We should just pass the array directly, rather than concatenate\n    // it to a string and then split it back to an array. It needs to be an\n    // array in some places, like when passing a key React, but we can convert\n    // it at runtime in those places.\n    return paramCacheKey.split('/')\n  }\n  return paramCacheKey\n}\n\nexport function urlSearchParamsToParsedUrlQuery(\n  searchParams: URLSearchParams\n): ParsedUrlQuery {\n  // Converts a URLSearchParams object to the same type used by the server when\n  // creating search params props, i.e. the type returned by Node's\n  // \"querystring\" module.\n  const result: ParsedUrlQuery = {}\n  for (const [key, value] of searchParams.entries()) {\n    if (result[key] === undefined) {\n      result[key] = value\n    } else if (Array.isArray(result[key])) {\n      result[key].push(value)\n    } else {\n      result[key] = [result[key], value]\n    }\n  }\n  return result\n}\n","export function createHrefFromUrl(\n  url: Pick<URL, 'pathname' | 'search' | 'hash'>,\n  includeHash: boolean = true\n): string {\n  return url.pathname + url.search + (includeHash ? url.hash : '')\n}\n","import type {\n  CacheNodeSeedData,\n  FlightData,\n  FlightDataPath,\n  FlightRouterState,\n  FlightSegmentPath,\n  Segment,\n  HeadData,\n  InitialRSCPayload,\n} from '../shared/lib/app-router-types'\nimport { PAGE_SEGMENT_KEY } from '../shared/lib/segment'\nimport type { NormalizedSearch } from './components/segment-cache/cache-key'\nimport {\n  getCacheKeyForDynamicParam,\n  parseDynamicParamFromURLPart,\n  doesStaticSegmentAppearInURL,\n  getRenderedPathname,\n  getRenderedSearch,\n} from './route-params'\nimport { createHrefFromUrl } from './components/router-reducer/create-href-from-url'\n\nexport type NormalizedFlightData = {\n  /**\n   * The full `FlightSegmentPath` inclusive of the final `Segment`\n   */\n  segmentPath: FlightSegmentPath\n  /**\n   * The `FlightSegmentPath` exclusive of the final `Segment`\n   */\n  pathToSegment: FlightSegmentPath\n  segment: Segment\n  tree: FlightRouterState\n  seedData: CacheNodeSeedData | null\n  head: HeadData\n  isHeadPartial: boolean\n  isRootRender: boolean\n}\n\n// TODO: We should only have to export `normalizeFlightData`, however because the initial flight data\n// that gets passed to `createInitialRouterState` doesn't conform to the `FlightDataPath` type (it's missing the root segment)\n// we're currently exporting it so we can use it directly. This should be fixed as part of the unification of\n// the different ways we express `FlightSegmentPath`.\nexport function getFlightDataPartsFromPath(\n  flightDataPath: FlightDataPath\n): NormalizedFlightData {\n  // Pick the last 4 items from the `FlightDataPath` to get the [tree, seedData, viewport, isHeadPartial].\n  const flightDataPathLength = 4\n  // tree, seedData, and head are *always* the last three items in the `FlightDataPath`.\n  const [tree, seedData, head, isHeadPartial] =\n    flightDataPath.slice(-flightDataPathLength)\n  // The `FlightSegmentPath` is everything except the last three items. For a root render, it won't be present.\n  const segmentPath = flightDataPath.slice(0, -flightDataPathLength)\n\n  return {\n    // TODO: Unify these two segment path helpers. We are inconsistently pushing an empty segment (\"\")\n    // to the start of the segment path in some places which makes it hard to use solely the segment path.\n    // Look for \"// TODO-APP: remove ''\" in the codebase.\n    pathToSegment: segmentPath.slice(0, -1),\n    segmentPath,\n    // if the `FlightDataPath` corresponds with the root, there'll be no segment path,\n    // in which case we default to ''.\n    segment: segmentPath[segmentPath.length - 1] ?? '',\n    tree,\n    seedData,\n    head,\n    isHeadPartial,\n    isRootRender: flightDataPath.length === flightDataPathLength,\n  }\n}\n\nexport function createInitialRSCPayloadFromFallbackPrerender(\n  response: Response,\n  fallbackInitialRSCPayload: InitialRSCPayload\n): InitialRSCPayload {\n  // This is a static fallback page. In order to hydrate the page, we need to\n  // parse the client params from the URL, but to account for the possibility\n  // that the page was rewritten, we need to check the response headers\n  // for x-nextjs-rewritten-path or x-nextjs-rewritten-query headers. Since\n  // we can't access the headers of the initial document response, the client\n  // performs a fetch request to the current location. Since it's possible that\n  // the fetch request will be dynamically rewritten to a different path than\n  // the initial document, this fetch request delivers _all_ the hydration data\n  // for the page; it was not inlined into the document, like it normally\n  // would be.\n  //\n  // TODO: Consider treating the case where fetch is rewritten to a different\n  // path from the document as a special deopt case. We should optimistically\n  // assume this won't happen, inline the data into the document, and perform\n  // a minimal request (like a HEAD or range request) to verify that the\n  // response matches. Tricky to get right because we need to account for\n  // all the different deployment environments we support, like output:\n  // \"export\" mode, where we currently don't assume that custom response\n  // headers are present.\n\n  // Patch the Flight data sent by the server with the correct params parsed\n  // from the URL + response object.\n  const renderedPathname = getRenderedPathname(response)\n  const renderedSearch = getRenderedSearch(response)\n  const canonicalUrl = createHrefFromUrl(new URL(location.href))\n  const originalFlightDataPath = fallbackInitialRSCPayload.f[0]\n  const originalFlightRouterState = originalFlightDataPath[0]\n  return {\n    b: fallbackInitialRSCPayload.b,\n    c: canonicalUrl.split('/'),\n    q: renderedSearch,\n    i: fallbackInitialRSCPayload.i,\n    f: [\n      [\n        fillInFallbackFlightRouterState(\n          originalFlightRouterState,\n          renderedPathname,\n          renderedSearch as NormalizedSearch\n        ),\n        originalFlightDataPath[1],\n        originalFlightDataPath[2],\n        originalFlightDataPath[2],\n      ],\n    ],\n    m: fallbackInitialRSCPayload.m,\n    G: fallbackInitialRSCPayload.G,\n    S: fallbackInitialRSCPayload.S,\n  }\n}\n\nfunction fillInFallbackFlightRouterState(\n  flightRouterState: FlightRouterState,\n  renderedPathname: string,\n  renderedSearch: NormalizedSearch\n): FlightRouterState {\n  const pathnameParts = renderedPathname.split('/').filter((p) => p !== '')\n  const index = 0\n  return fillInFallbackFlightRouterStateImpl(\n    flightRouterState,\n    renderedSearch,\n    pathnameParts,\n    index\n  )\n}\n\nfunction fillInFallbackFlightRouterStateImpl(\n  flightRouterState: FlightRouterState,\n  renderedSearch: NormalizedSearch,\n  pathnameParts: Array<string>,\n  pathnamePartsIndex: number\n): FlightRouterState {\n  const originalSegment = flightRouterState[0]\n  let newSegment: Segment\n  let doesAppearInURL: boolean\n  if (typeof originalSegment === 'string') {\n    newSegment = originalSegment\n    doesAppearInURL = doesStaticSegmentAppearInURL(originalSegment)\n  } else {\n    const paramName = originalSegment[0]\n    const paramType = originalSegment[2]\n    const paramValue = parseDynamicParamFromURLPart(\n      paramType,\n      pathnameParts,\n      pathnamePartsIndex\n    )\n    const cacheKey = getCacheKeyForDynamicParam(paramValue, renderedSearch)\n    newSegment = [paramName, cacheKey, paramType]\n    doesAppearInURL = true\n  }\n\n  // Only increment the index if the segment appears in the URL. If it's a\n  // \"virtual\" segment, like a route group, it remains the same.\n  const childPathnamePartsIndex = doesAppearInURL\n    ? pathnamePartsIndex + 1\n    : pathnamePartsIndex\n\n  const children = flightRouterState[1]\n  const newChildren: { [key: string]: FlightRouterState } = {}\n  for (let key in children) {\n    const childFlightRouterState = children[key]\n    newChildren[key] = fillInFallbackFlightRouterStateImpl(\n      childFlightRouterState,\n      renderedSearch,\n      pathnameParts,\n      childPathnamePartsIndex\n    )\n  }\n\n  const newState: FlightRouterState = [\n    newSegment,\n    newChildren,\n    null,\n    flightRouterState[3],\n    flightRouterState[4],\n  ]\n  return newState\n}\n\nexport function getNextFlightSegmentPath(\n  flightSegmentPath: FlightSegmentPath\n): FlightSegmentPath {\n  // Since `FlightSegmentPath` is a repeated tuple of `Segment` and `ParallelRouteKey`, we slice off two items\n  // to get the next segment path.\n  return flightSegmentPath.slice(2)\n}\n\nexport function normalizeFlightData(\n  flightData: FlightData\n): NormalizedFlightData[] | string {\n  // FlightData can be a string when the server didn't respond with a proper flight response,\n  // or when a redirect happens, to signal to the client that it needs to perform an MPA navigation.\n  if (typeof flightData === 'string') {\n    return flightData\n  }\n\n  return flightData.map((flightDataPath) =>\n    getFlightDataPartsFromPath(flightDataPath)\n  )\n}\n\n/**\n * This function is used to prepare the flight router state for the request.\n * It removes markers that are not needed by the server, and are purely used\n * for stashing state on the client.\n * @param flightRouterState - The flight router state to prepare.\n * @param isHmrRefresh - Whether this is an HMR refresh request.\n * @returns The prepared flight router state.\n */\nexport function prepareFlightRouterStateForRequest(\n  flightRouterState: FlightRouterState,\n  isHmrRefresh?: boolean\n): string {\n  // HMR requests need the complete, unmodified state for proper functionality\n  if (isHmrRefresh) {\n    return encodeURIComponent(JSON.stringify(flightRouterState))\n  }\n\n  return encodeURIComponent(\n    JSON.stringify(stripClientOnlyDataFromFlightRouterState(flightRouterState))\n  )\n}\n\n/**\n * Recursively strips client-only data from FlightRouterState while preserving\n * server-needed information for proper rendering decisions.\n */\nfunction stripClientOnlyDataFromFlightRouterState(\n  flightRouterState: FlightRouterState\n): FlightRouterState {\n  const [\n    segment,\n    parallelRoutes,\n    _url, // Intentionally unused - URLs are client-only\n    refreshMarker,\n    isRootLayout,\n    hasLoadingBoundary,\n  ] = flightRouterState\n\n  // __PAGE__ segments are always fetched from the server, so there's\n  // no need to send them up\n  const cleanedSegment = stripSearchParamsFromPageSegment(segment)\n\n  // Recursively process parallel routes\n  const cleanedParallelRoutes: { [key: string]: FlightRouterState } = {}\n  for (const [key, childState] of Object.entries(parallelRoutes)) {\n    cleanedParallelRoutes[key] =\n      stripClientOnlyDataFromFlightRouterState(childState)\n  }\n\n  const result: FlightRouterState = [\n    cleanedSegment,\n    cleanedParallelRoutes,\n    null, // URLs omitted - server reconstructs paths from segments\n    shouldPreserveRefreshMarker(refreshMarker) ? refreshMarker : null,\n  ]\n\n  // Append optional fields if present\n  if (isRootLayout !== undefined) {\n    result[4] = isRootLayout\n  }\n  if (hasLoadingBoundary !== undefined) {\n    result[5] = hasLoadingBoundary\n  }\n\n  return result\n}\n\n/**\n * Strips search parameters from __PAGE__ segments to prevent sensitive\n * client-side data from being sent to the server.\n */\nfunction stripSearchParamsFromPageSegment(segment: Segment): Segment {\n  if (\n    typeof segment === 'string' &&\n    segment.startsWith(PAGE_SEGMENT_KEY + '?')\n  ) {\n    return PAGE_SEGMENT_KEY\n  }\n  return segment\n}\n\n/**\n * Determines whether the refresh marker should be sent to the server\n * Client-only markers like 'refresh' are stripped, while server-needed markers\n * like 'refetch' and 'inside-shared-layout' are preserved.\n */\nfunction shouldPreserveRefreshMarker(\n  refreshMarker: FlightRouterState[3]\n): boolean {\n  return Boolean(refreshMarker && refreshMarker !== 'refresh')\n}\n","// This gets assigned as a side-effect during app initialization. Because it\n// represents the build used to create the JS bundle, it should never change\n// after being set, so we store it in a global variable.\n//\n// When performing RSC requests, if the incoming data has a different build ID,\n// we perform an MPA navigation/refresh to load the updated build and ensure\n// that the client and server in sync.\n\n// Starts as an empty string. In practice, because setAppBuildId is called\n// during initialization before hydration starts, this will always get\n// reassigned to the actual build ID before it's ever needed by a navigation.\n// If for some reasons it didn't, due to a bug or race condition, then on\n// navigation the build comparision would fail and trigger an MPA navigation.\nlet globalBuildId: string = ''\n\nexport function setAppBuildId(buildId: string) {\n  globalBuildId = buildId\n}\n\nexport function getAppBuildId(): string {\n  return globalBuildId\n}\n","// http://www.cse.yorku.ca/~oz/hash.html\n// More specifically, 32-bit hash via djbxor\n// (ref: https://gist.github.com/eplawless/52813b1d8ad9af510d85?permalink_comment_id=3367765#gistcomment-3367765)\n// This is due to number type differences between rust for turbopack to js number types,\n// where rust does not have easy way to repreesnt js's 53-bit float number type for the matching\n// overflow behavior. This is more `correct` in terms of having canonical hash across different runtime / implementation\n// as can gaurantee determinstic output from 32bit hash.\nexport function djb2Hash(str: string) {\n  let hash = 5381\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i)\n    hash = ((hash << 5) + hash + char) & 0xffffffff\n  }\n  return hash >>> 0\n}\n\nexport function hexHash(str: string) {\n  return djb2Hash(str).toString(36).slice(0, 5)\n}\n","import { hexHash } from '../../hash'\n\nexport function computeCacheBustingSearchParam(\n  prefetchHeader: '1' | '2' | '0' | undefined,\n  segmentPrefetchHeader: string | string[] | undefined,\n  stateTreeHeader: string | string[] | undefined,\n  nextUrlHeader: string | string[] | undefined\n): string {\n  if (\n    (prefetchHeader === undefined || prefetchHeader === '0') &&\n    segmentPrefetchHeader === undefined &&\n    stateTreeHeader === undefined &&\n    nextUrlHeader === undefined\n  ) {\n    return ''\n  }\n  return hexHash(\n    [\n      prefetchHeader || '0',\n      segmentPrefetchHeader || '0',\n      stateTreeHeader || '0',\n      nextUrlHeader || '0',\n    ].join(',')\n  )\n}\n","'use client'\n\nimport { computeCacheBustingSearchParam } from '../../../shared/lib/router/utils/cache-busting-search-param'\nimport {\n  NEXT_ROUTER_PREFETCH_HEADER,\n  NEXT_ROUTER_SEGMENT_PREFETCH_HEADER,\n  NEXT_ROUTER_STATE_TREE_HEADER,\n  NEXT_URL,\n  NEXT_RSC_UNION_QUERY,\n} from '../app-router-headers'\nimport type { RequestHeaders } from './fetch-server-response'\n\n/**\n * Mutates the provided URL by adding a cache-busting search parameter for CDNs that don't\n * support custom headers. This helps avoid caching conflicts by making each request unique.\n *\n * Rather than relying on the Vary header which some CDNs ignore, we append a search param\n * to create a unique URL that forces a fresh request.\n *\n * Example:\n * URL before: https://example.com/path?query=1\n * URL after: https://example.com/path?query=1&_rsc=abc123\n *\n * Note: This function mutates the input URL directly and does not return anything.\n *\n * TODO: Since we need to use a search param anyway, we could simplify by removing the custom\n * headers approach entirely and just use search params.\n */\nexport const setCacheBustingSearchParam = (\n  url: URL,\n  headers: RequestHeaders\n): void => {\n  const uniqueCacheKey = computeCacheBustingSearchParam(\n    headers[NEXT_ROUTER_PREFETCH_HEADER],\n    headers[NEXT_ROUTER_SEGMENT_PREFETCH_HEADER],\n    headers[NEXT_ROUTER_STATE_TREE_HEADER],\n    headers[NEXT_URL]\n  )\n  setCacheBustingSearchParamWithHash(url, uniqueCacheKey)\n}\n\n/**\n * Sets a cache-busting search parameter on a URL using a provided hash value.\n *\n * This function performs the same logic as `setCacheBustingSearchParam` but accepts\n * a pre-computed hash instead of computing it from headers.\n *\n * Example:\n * URL before: https://example.com/path?query=1\n * hash: \"abc123\"\n * URL after: https://example.com/path?query=1&_rsc=abc123\n *\n * If the hash is null, we will set `_rsc` search param without a value.\n * Like this: https://example.com/path?query=1&_rsc\n *\n * Note: This function mutates the input URL directly and does not return anything.\n */\nexport const setCacheBustingSearchParamWithHash = (\n  url: URL,\n  hash: string\n): void => {\n  /**\n   * Note that we intentionally do not use `url.searchParams.set` here:\n   *\n   * const url = new URL('https://example.com/search?q=custom%20spacing');\n   * url.searchParams.set('_rsc', 'abc123');\n   * console.log(url.toString()); // Outputs: https://example.com/search?q=custom+spacing&_rsc=abc123\n   *                                                                             ^ <--- this is causing confusion\n   * This is in fact intended based on https://url.spec.whatwg.org/#interface-urlsearchparams, but\n   * we want to preserve the %20 as %20 if that's what the user passed in, hence the custom\n   * logic below.\n   */\n  const existingSearch = url.search\n  const rawQuery = existingSearch.startsWith('?')\n    ? existingSearch.slice(1)\n    : existingSearch\n\n  // Always remove any existing cache busting param and add a fresh one to ensure\n  // we have the correct value based on current request headers\n  const pairs = rawQuery\n    .split('&')\n    .filter((pair) => pair && !pair.startsWith(`${NEXT_RSC_UNION_QUERY}=`))\n\n  if (hash.length > 0) {\n    pairs.push(`${NEXT_RSC_UNION_QUERY}=${hash}`)\n  } else {\n    pairs.push(`${NEXT_RSC_UNION_QUERY}`)\n  }\n  url.search = pairs.length ? `?${pairs.join('&')}` : ''\n}\n","'use client'\n\n// TODO: Explicitly import from client.browser\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport {\n  createFromReadableStream as createFromReadableStreamBrowser,\n  createFromFetch as createFromFetchBrowser,\n} from 'react-server-dom-webpack/client'\n\nimport type {\n  FlightRouterState,\n  NavigationFlightResponse,\n} from '../../../shared/lib/app-router-types'\n\nimport type { NEXT_ROUTER_SEGMENT_PREFETCH_HEADER } from '../app-router-headers'\nimport {\n  NEXT_ROUTER_PREFETCH_HEADER,\n  NEXT_ROUTER_STATE_TREE_HEADER,\n  NEXT_RSC_UNION_QUERY,\n  NEXT_URL,\n  RSC_HEADER,\n  RSC_CONTENT_TYPE_HEADER,\n  NEXT_HMR_REFRESH_HEADER,\n  NEXT_DID_POSTPONE_HEADER,\n  NEXT_ROUTER_STALE_TIME_HEADER,\n  NEXT_HTML_REQUEST_ID_HEADER,\n  NEXT_REQUEST_ID_HEADER,\n} from '../app-router-headers'\nimport { callServer } from '../../app-call-server'\nimport { findSourceMapURL } from '../../app-find-source-map-url'\nimport { PrefetchKind } from './router-reducer-types'\nimport {\n  normalizeFlightData,\n  prepareFlightRouterStateForRequest,\n  type NormalizedFlightData,\n} from '../../flight-data-helpers'\nimport { getAppBuildId } from '../../app-build-id'\nimport { setCacheBustingSearchParam } from './set-cache-busting-search-param'\nimport {\n  getRenderedSearch,\n  urlToUrlWithoutFlightMarker,\n} from '../../route-params'\nimport type { NormalizedSearch } from '../segment-cache/cache-key'\n\nconst createFromReadableStream =\n  createFromReadableStreamBrowser as (typeof import('react-server-dom-webpack/client.browser'))['createFromReadableStream']\nconst createFromFetch =\n  createFromFetchBrowser as (typeof import('react-server-dom-webpack/client.browser'))['createFromFetch']\n\nlet createDebugChannel:\n  | typeof import('../../dev/debug-channel').createDebugChannel\n  | undefined\n\nif (\n  process.env.NODE_ENV !== 'production' &&\n  process.env.__NEXT_REACT_DEBUG_CHANNEL\n) {\n  createDebugChannel = (\n    require('../../dev/debug-channel') as typeof import('../../dev/debug-channel')\n  ).createDebugChannel\n}\n\nexport interface FetchServerResponseOptions {\n  readonly flightRouterState: FlightRouterState\n  readonly nextUrl: string | null\n  readonly prefetchKind?: PrefetchKind\n  readonly isHmrRefresh?: boolean\n}\n\ntype SpaFetchServerResponseResult = {\n  flightData: NormalizedFlightData[]\n  canonicalUrl: URL\n  renderedSearch: NormalizedSearch\n  couldBeIntercepted: boolean\n  prerendered: boolean\n  postponed: boolean\n  staleTime: number\n  debugInfo: Array<any> | null\n}\n\ntype MpaFetchServerResponseResult = string\n\nexport type FetchServerResponseResult =\n  | MpaFetchServerResponseResult\n  | SpaFetchServerResponseResult\n\nexport type RequestHeaders = {\n  [RSC_HEADER]?: '1'\n  [NEXT_ROUTER_STATE_TREE_HEADER]?: string\n  [NEXT_URL]?: string\n  [NEXT_ROUTER_PREFETCH_HEADER]?: '1' | '2'\n  [NEXT_ROUTER_SEGMENT_PREFETCH_HEADER]?: string\n  'x-deployment-id'?: string\n  [NEXT_HMR_REFRESH_HEADER]?: '1'\n  // A header that is only added in test mode to assert on fetch priority\n  'Next-Test-Fetch-Priority'?: RequestInit['priority']\n  [NEXT_HTML_REQUEST_ID_HEADER]?: string // dev-only\n  [NEXT_REQUEST_ID_HEADER]?: string // dev-only\n}\n\nfunction doMpaNavigation(url: string): FetchServerResponseResult {\n  return urlToUrlWithoutFlightMarker(new URL(url, location.origin)).toString()\n}\n\nlet isPageUnloading = false\n\nif (typeof window !== 'undefined') {\n  // Track when the page is unloading, e.g. due to reloading the page or\n  // performing hard navigations. This allows us to suppress error logging when\n  // the browser cancels in-flight requests during page unload.\n  window.addEventListener('pagehide', () => {\n    isPageUnloading = true\n  })\n\n  // Reset the flag on pageshow, e.g. when navigating back and the JavaScript\n  // execution context is restored by the browser.\n  window.addEventListener('pageshow', () => {\n    isPageUnloading = false\n  })\n}\n\n/**\n * Fetch the flight data for the provided url. Takes in the current router state\n * to decide what to render server-side.\n */\nexport async function fetchServerResponse(\n  url: URL,\n  options: FetchServerResponseOptions\n): Promise<FetchServerResponseResult> {\n  const { flightRouterState, nextUrl, prefetchKind } = options\n\n  const headers: RequestHeaders = {\n    // Enable flight response\n    [RSC_HEADER]: '1',\n    // Provide the current router state\n    [NEXT_ROUTER_STATE_TREE_HEADER]: prepareFlightRouterStateForRequest(\n      flightRouterState,\n      options.isHmrRefresh\n    ),\n  }\n\n  /**\n   * Three cases:\n   * - `prefetchKind` is `undefined`, it means it's a normal navigation, so we want to prefetch the page data fully\n   * - `prefetchKind` is `full` - we want to prefetch the whole page so same as above\n   * - `prefetchKind` is `auto` - if the page is dynamic, prefetch the page data partially, if static prefetch the page data fully\n   */\n  if (prefetchKind === PrefetchKind.AUTO) {\n    headers[NEXT_ROUTER_PREFETCH_HEADER] = '1'\n  }\n\n  if (process.env.NODE_ENV === 'development' && options.isHmrRefresh) {\n    headers[NEXT_HMR_REFRESH_HEADER] = '1'\n  }\n\n  if (nextUrl) {\n    headers[NEXT_URL] = nextUrl\n  }\n\n  // In static export mode, we need to modify the URL to request the .txt file,\n  // but we should preserve the original URL for the canonical URL and error handling.\n  const originalUrl = url\n\n  try {\n    // When creating a \"temporary\" prefetch (the \"on-demand\" prefetch that gets created on navigation, if one doesn't exist)\n    // we send the request with a \"high\" priority as it's in response to a user interaction that could be blocking a transition.\n    // Otherwise, all other prefetches are sent with a \"low\" priority.\n    // We use \"auto\" for in all other cases to match the existing default, as this function is shared outside of prefetching.\n    const fetchPriority = prefetchKind\n      ? prefetchKind === PrefetchKind.TEMPORARY\n        ? 'high'\n        : 'low'\n      : 'auto'\n\n    if (process.env.NODE_ENV === 'production') {\n      if (process.env.__NEXT_CONFIG_OUTPUT === 'export') {\n        // In \"output: export\" mode, we can't rely on headers to distinguish\n        // between HTML and RSC requests. Instead, we append an extra prefix\n        // to the request.\n        url = new URL(url)\n        if (url.pathname.endsWith('/')) {\n          url.pathname += 'index.txt'\n        } else {\n          url.pathname += '.txt'\n        }\n      }\n    }\n\n    // Typically, during a navigation, we decode the response using Flight's\n    // `createFromFetch` API, which accepts a `fetch` promise.\n    // TODO: Remove this check once the old PPR flag is removed\n    const isLegacyPPR =\n      process.env.__NEXT_PPR && !process.env.__NEXT_CACHE_COMPONENTS\n    const shouldImmediatelyDecode = !isLegacyPPR\n    const res = await createFetch<NavigationFlightResponse>(\n      url,\n      headers,\n      fetchPriority,\n      shouldImmediatelyDecode\n    )\n\n    const responseUrl = urlToUrlWithoutFlightMarker(new URL(res.url))\n    const canonicalUrl = res.redirected ? responseUrl : originalUrl\n\n    const contentType = res.headers.get('content-type') || ''\n    const interception = !!res.headers.get('vary')?.includes(NEXT_URL)\n    const postponed = !!res.headers.get(NEXT_DID_POSTPONE_HEADER)\n    const staleTimeHeaderSeconds = res.headers.get(\n      NEXT_ROUTER_STALE_TIME_HEADER\n    )\n    const staleTime =\n      staleTimeHeaderSeconds !== null\n        ? parseInt(staleTimeHeaderSeconds, 10) * 1000\n        : -1\n    let isFlightResponse = contentType.startsWith(RSC_CONTENT_TYPE_HEADER)\n\n    if (process.env.NODE_ENV === 'production') {\n      if (process.env.__NEXT_CONFIG_OUTPUT === 'export') {\n        if (!isFlightResponse) {\n          isFlightResponse = contentType.startsWith('text/plain')\n        }\n      }\n    }\n\n    // If fetch returns something different than flight response handle it like a mpa navigation\n    // If the fetch was not 200, we also handle it like a mpa navigation\n    if (!isFlightResponse || !res.ok || !res.body) {\n      // in case the original URL came with a hash, preserve it before redirecting to the new URL\n      if (url.hash) {\n        responseUrl.hash = url.hash\n      }\n\n      return doMpaNavigation(responseUrl.toString())\n    }\n\n    // We may navigate to a page that requires a different Webpack runtime.\n    // In prod, every page will have the same Webpack runtime.\n    // In dev, the Webpack runtime is minimal for each page.\n    // We need to ensure the Webpack runtime is updated before executing client-side JS of the new page.\n    // TODO: This needs to happen in the Flight Client.\n    // Or Webpack needs to include the runtime update in the Flight response as\n    // a blocking script.\n    if (process.env.NODE_ENV !== 'production' && !process.env.TURBOPACK) {\n      await (\n        require('../../dev/hot-reloader/app/hot-reloader-app') as typeof import('../../dev/hot-reloader/app/hot-reloader-app')\n      ).waitForWebpackRuntimeHotUpdate()\n    }\n\n    let flightResponsePromise = res.flightResponse\n    if (flightResponsePromise === null) {\n      // Typically, `createFetch` would have already started decoding the\n      // Flight response. If it hasn't, though, we need to decode it now.\n      // TODO: This should only be reachable if legacy PPR is enabled (i.e. PPR\n      // without Cache Components). Remove this branch once legacy PPR\n      // is deleted.\n      const flightStream = postponed\n        ? createUnclosingPrefetchStream(res.body)\n        : res.body\n      flightResponsePromise =\n        createFromNextReadableStream<NavigationFlightResponse>(\n          flightStream,\n          headers\n        )\n    }\n\n    const flightResponse = await flightResponsePromise\n\n    if (getAppBuildId() !== flightResponse.b) {\n      return doMpaNavigation(res.url)\n    }\n\n    const normalizedFlightData = normalizeFlightData(flightResponse.f)\n    if (typeof normalizedFlightData === 'string') {\n      return doMpaNavigation(normalizedFlightData)\n    }\n\n    return {\n      flightData: normalizedFlightData,\n      canonicalUrl: canonicalUrl,\n      renderedSearch: getRenderedSearch(res),\n      couldBeIntercepted: interception,\n      prerendered: flightResponse.S,\n      postponed,\n      staleTime,\n      debugInfo: flightResponsePromise._debugInfo ?? null,\n    }\n  } catch (err) {\n    if (!isPageUnloading) {\n      console.error(\n        `Failed to fetch RSC payload for ${originalUrl}. Falling back to browser navigation.`,\n        err\n      )\n    }\n\n    // If fetch fails handle it like a mpa navigation\n    // TODO-APP: Add a test for the case where a CORS request fails, e.g. external url redirect coming from the response.\n    // See https://github.com/vercel/next.js/issues/43605#issuecomment-1451617521 for a reproduction.\n    return originalUrl.toString()\n  }\n}\n\n// This is a subset of the standard Response type. We use a custom type for\n// this so we can limit which details about the response leak into the rest of\n// the codebase. For example, there's some custom logic for manually following\n// redirects, so \"redirected\" in this type could be a composite of multiple\n// browser fetch calls; however, this fact should not leak to the caller.\nexport type RSCResponse<T> = {\n  ok: boolean\n  redirected: boolean\n  headers: Headers\n  body: ReadableStream<Uint8Array> | null\n  status: number\n  url: string\n  flightResponse: (Promise<T> & { _debugInfo?: Array<any> }) | null\n}\n\nexport async function createFetch<T>(\n  url: URL,\n  headers: RequestHeaders,\n  fetchPriority: 'auto' | 'high' | 'low' | null,\n  shouldImmediatelyDecode: boolean,\n  signal?: AbortSignal\n): Promise<RSCResponse<T>> {\n  // TODO: In output: \"export\" mode, the headers do nothing. Omit them (and the\n  // cache busting search param) from the request so they're\n  // maximally cacheable.\n\n  if (process.env.__NEXT_TEST_MODE && fetchPriority !== null) {\n    headers['Next-Test-Fetch-Priority'] = fetchPriority\n  }\n\n  if (process.env.NEXT_DEPLOYMENT_ID) {\n    headers['x-deployment-id'] = process.env.NEXT_DEPLOYMENT_ID\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (self.__next_r) {\n      headers[NEXT_HTML_REQUEST_ID_HEADER] = self.__next_r\n    }\n\n    // Create a new request ID for the server action request. The server uses\n    // this to tag debug information sent via WebSocket to the client, which\n    // then routes those chunks to the debug channel associated with this ID.\n    headers[NEXT_REQUEST_ID_HEADER] = crypto\n      .getRandomValues(new Uint32Array(1))[0]\n      .toString(16)\n  }\n\n  const fetchOptions: RequestInit = {\n    // Backwards compat for older browsers. `same-origin` is the default in modern browsers.\n    credentials: 'same-origin',\n    headers,\n    priority: fetchPriority || undefined,\n    signal,\n  }\n  // `fetchUrl` is slightly different from `url` because we add a cache-busting\n  // search param to it. This should not leak outside of this function, so we\n  // track them separately.\n  let fetchUrl = new URL(url)\n  setCacheBustingSearchParam(fetchUrl, headers)\n  let fetchPromise = fetch(fetchUrl, fetchOptions)\n  // Immediately pass the fetch promise to the Flight client so that the debug\n  // info includes the latency from the client to the server. The internal timer\n  // in React starts as soon as `createFromFetch` is called.\n  //\n  // The only case where we don't do this is during a prefetch, because we have\n  // to do some extra processing of the response stream (see\n  // `createUnclosingPrefetchStream`). But this is fine, because a top-level\n  // prefetch response never blocks a navigation; if it hasn't already been\n  // written into the cache by the time the navigation happens, the router will\n  // go straight to a dynamic request.\n  let flightResponsePromise = shouldImmediatelyDecode\n    ? createFromNextFetch<T>(fetchPromise, headers)\n    : null\n  let browserResponse = await fetchPromise\n\n  // If the server responds with a redirect (e.g. 307), and the redirected\n  // location does not contain the cache busting search param set in the\n  // original request, the response is likely invalid  when following the\n  // redirect, the browser forwards the request headers, but since the cache\n  // busting search param is missing, the server will reject the request due to\n  // a mismatch.\n  //\n  // Ideally, we would be able to intercept the redirect response and perform it\n  // manually, instead of letting the browser automatically follow it, but this\n  // is not allowed by the fetch API.\n  //\n  // So instead, we must \"replay\" the redirect by fetching the new location\n  // again, but this time we'll append the cache busting search param to prevent\n  // a mismatch.\n  //\n  // TODO: We can optimize Next.js's built-in middleware APIs by returning a\n  // custom status code, to prevent the browser from automatically following it.\n  //\n  // This does not affect Server Action-based redirects; those are encoded\n  // differently, as part of the Flight body. It only affects redirects that\n  // occur in a middleware or a third-party proxy.\n\n  let redirected = browserResponse.redirected\n  if (process.env.__NEXT_CLIENT_VALIDATE_RSC_REQUEST_HEADERS) {\n    // This is to prevent a redirect loop. Same limit used by Chrome.\n    const MAX_REDIRECTS = 20\n    for (let n = 0; n < MAX_REDIRECTS; n++) {\n      if (!browserResponse.redirected) {\n        // The server did not perform a redirect.\n        break\n      }\n      const responseUrl = new URL(browserResponse.url, fetchUrl)\n      if (responseUrl.origin !== fetchUrl.origin) {\n        // The server redirected to an external URL. The rest of the logic below\n        // is not relevant, because it only applies to internal redirects.\n        break\n      }\n      if (\n        responseUrl.searchParams.get(NEXT_RSC_UNION_QUERY) ===\n        fetchUrl.searchParams.get(NEXT_RSC_UNION_QUERY)\n      ) {\n        // The redirected URL already includes the cache busting search param.\n        // This was probably intentional. Regardless, there's no reason to\n        // issue another request to this URL because it already has the param\n        // value that we would have added below.\n        break\n      }\n      // The RSC request was redirected. Assume the response is invalid.\n      //\n      // Append the cache busting search param to the redirected URL and\n      // fetch again.\n      // TODO: We should abort the previous request.\n      fetchUrl = new URL(responseUrl)\n      setCacheBustingSearchParam(fetchUrl, headers)\n      fetchPromise = fetch(fetchUrl, fetchOptions)\n      flightResponsePromise = shouldImmediatelyDecode\n        ? createFromNextFetch<T>(fetchPromise, headers)\n        : null\n      browserResponse = await fetchPromise\n      // We just performed a manual redirect, so this is now true.\n      redirected = true\n    }\n  }\n\n  // Remove the cache busting search param from the response URL, to prevent it\n  // from leaking outside of this function.\n  const responseUrl = new URL(browserResponse.url, fetchUrl)\n  responseUrl.searchParams.delete(NEXT_RSC_UNION_QUERY)\n\n  const rscResponse: RSCResponse<T> = {\n    url: responseUrl.href,\n\n    // This is true if any redirects occurred, either automatically by the\n    // browser, or manually by us. So it's different from\n    // `browserResponse.redirected`, which only tells us whether the browser\n    // followed a redirect, and only for the last response in the chain.\n    redirected,\n\n    // These can be copied from the last browser response we received. We\n    // intentionally only expose the subset of fields that are actually used\n    // elsewhere in the codebase.\n    ok: browserResponse.ok,\n    headers: browserResponse.headers,\n    body: browserResponse.body,\n    status: browserResponse.status,\n\n    // This is the exact promise returned by `createFromFetch`. It contains\n    // debug information that we need to transfer to any derived promises that\n    // are later rendered by React.\n    flightResponse: flightResponsePromise,\n  }\n\n  return rscResponse\n}\n\nexport function createFromNextReadableStream<T>(\n  flightStream: ReadableStream<Uint8Array>,\n  requestHeaders: RequestHeaders\n): Promise<T> {\n  return createFromReadableStream(flightStream, {\n    callServer,\n    findSourceMapURL,\n    debugChannel: createDebugChannel && createDebugChannel(requestHeaders),\n  })\n}\n\nfunction createFromNextFetch<T>(\n  promiseForResponse: Promise<Response>,\n  requestHeaders: RequestHeaders\n): Promise<T> & { _debugInfo?: Array<any> } {\n  return createFromFetch(promiseForResponse, {\n    callServer,\n    findSourceMapURL,\n    debugChannel: createDebugChannel && createDebugChannel(requestHeaders),\n  })\n}\n\nfunction createUnclosingPrefetchStream(\n  originalFlightStream: ReadableStream<Uint8Array>\n): ReadableStream<Uint8Array> {\n  // When PPR is enabled, prefetch streams may contain references that never\n  // resolve, because that's how we encode dynamic data access. In the decoded\n  // object returned by the Flight client, these are reified into hanging\n  // promises that suspend during render, which is effectively what we want.\n  // The UI resolves when it switches to the dynamic data stream\n  // (via useDeferredValue(dynamic, static)).\n  //\n  // However, the Flight implementation currently errors if the server closes\n  // the response before all the references are resolved. As a cheat to work\n  // around this, we wrap the original stream in a new stream that never closes,\n  // and therefore doesn't error.\n  const reader = originalFlightStream.getReader()\n  return new ReadableStream({\n    async pull(controller) {\n      while (true) {\n        const { done, value } = await reader.read()\n        if (!done) {\n          // Pass to the target stream and keep consuming the Flight response\n          // from the server.\n          controller.enqueue(value)\n          continue\n        }\n        // The server stream has closed. Exit, but intentionally do not close\n        // the target stream.\n        return\n      }\n    },\n  })\n}\n","import type { MapEntry } from './cache-map'\nimport { deleteFromCacheMap } from './cache-map'\n\n// We use an LRU for memory management. We must update this whenever we add or\n// remove a new cache entry, or when an entry changes size.\n\n// The MapEntry type is used as an LRU node, too. We choose this one instead of\n// the inner cache entry type (RouteCacheEntry, SegmentCacheEntry) because it's\n// monomorphic and can be optimized by the VM.\ntype LRUNode = MapEntry<any>\n\nlet head: LRUNode | null = null\nlet didScheduleCleanup: boolean = false\nlet lruSize: number = 0\n\n// TODO: I chose the max size somewhat arbitrarily. Consider setting this based\n// on navigator.deviceMemory, or some other heuristic. We should make this\n// customizable via the Next.js config, too.\nconst maxLruSize = 50 * 1024 * 1024 // 50 MB\n\nexport function lruPut(node: LRUNode) {\n  if (head === node) {\n    // Already at the head\n    return\n  }\n  const prev = node.prev\n  const next = node.next\n  if (next === null || prev === null) {\n    // This is an insertion\n    lruSize += node.size\n    // Whenever we add an entry, we need to check if we've exceeded the\n    // max size. We don't evict entries immediately; they're evicted later in\n    // an asynchronous task.\n    ensureCleanupIsScheduled()\n  } else {\n    // This is a move. Remove from its current position.\n    prev.next = next\n    next.prev = prev\n  }\n\n  // Move to the front of the list\n  if (head === null) {\n    // This is the first entry\n    node.prev = node\n    node.next = node\n  } else {\n    // Add to the front of the list\n    const tail = head.prev\n    node.prev = tail\n    // In practice, this is never null, but that isn't encoded in the type\n    if (tail !== null) {\n      tail.next = node\n    }\n    node.next = head\n    head.prev = node\n  }\n  head = node\n}\n\nexport function updateLruSize(node: LRUNode, newNodeSize: number) {\n  // This is a separate function from `put` so that we can resize the entry\n  // regardless of whether it's currently being tracked by the LRU.\n  const prevNodeSize = node.size\n  node.size = newNodeSize\n  if (node.next === null) {\n    // This entry is not currently being tracked by the LRU.\n    return\n  }\n  // Update the total LRU size\n  lruSize = lruSize - prevNodeSize + newNodeSize\n  ensureCleanupIsScheduled()\n}\n\nexport function deleteFromLru(deleted: LRUNode) {\n  const next = deleted.next\n  const prev = deleted.prev\n  if (next !== null && prev !== null) {\n    lruSize -= deleted.size\n\n    deleted.next = null\n    deleted.prev = null\n\n    // Remove from the list\n    if (head === deleted) {\n      // Update the head\n      if (next === head) {\n        // This was the last entry\n        head = null\n      } else {\n        head = next\n      }\n    } else {\n      prev.next = next\n      next.prev = prev\n    }\n  } else {\n    // Already deleted\n  }\n}\n\nfunction ensureCleanupIsScheduled() {\n  if (didScheduleCleanup || lruSize <= maxLruSize) {\n    return\n  }\n  didScheduleCleanup = true\n  requestCleanupCallback(cleanup)\n}\n\nfunction cleanup() {\n  didScheduleCleanup = false\n\n  // Evict entries until we're at 90% capacity. We can assume this won't\n  // infinite loop because even if `maxLruSize` were 0, eventually\n  // `deleteFromLru` sets `head` to `null` when we run out entries.\n  const ninetyPercentMax = maxLruSize * 0.9\n  while (lruSize > ninetyPercentMax && head !== null) {\n    const tail = head.prev\n    // In practice, this is never null, but that isn't encoded in the type\n    if (tail !== null) {\n      // Delete the entry from the map. In turn, this will remove it from\n      // the LRU.\n      deleteFromCacheMap(tail.value)\n    }\n  }\n}\n\nconst requestCleanupCallback =\n  typeof requestIdleCallback === 'function'\n    ? requestIdleCallback\n    : (cb: () => void) => setTimeout(cb, 0)\n","import type { VaryPath } from './vary-path'\nimport { lruPut, updateLruSize, deleteFromLru } from './lru'\n\n/**\n * A specialized data type for storing multi-key cache entries.\n *\n * The basic structure is a map whose keys are tuples, called the keypath.\n * When querying the cache, keypaths are compared per-element.\n *\n * Example:\n *   set(map, ['https://localhost', 'foo/bar/baz'], 'yay');\n *   get(map, ['https://localhost', 'foo/bar/baz']) -> 'yay'\n *\n * NOTE: Array syntax is used in these examples for illustration purposes, but\n * in reality the paths are lists.\n * \n * The parts of the keypath represent the different inputs that contribute\n * to the entry value. To illustrate, if you were to use this data type to store\n * HTTP responses, the keypath would include the URL and everything listed by\n * the Vary header.\n * \n * See vary-path.ts for more details.\n *\n * The order of elements in a keypath must be consistent between lookups to\n * be considered the same, but besides that, the order of the keys is not\n * semantically meaningful.\n *\n * Keypaths may include a special kind of key called Fallback. When an entry is\n * stored with Fallback as part of its keypath, it means that the entry does not\n * vary by that key. When querying the cache, if an exact match is not found for\n * a keypath, the cache will check for a Fallback match instead. Each element of\n * the keypath may have a Fallback, so retrieval is an O(n ^ 2) operation, but\n * it's expected that keypaths are relatively short.\n *\n * Example:\n *   set(cacheMap, ['store', 'product', 1], PRODUCT_PAGE_1);\n *   set(cacheMap, ['store', 'product', Fallback], GENERIC_PRODUCT_PAGE);\n *\n *   // Exact match\n *   get(cacheMap, ['store', 'product', 1]) -> PRODUCT_PAGE_1\n *\n *   // Fallback match\n *   get(cacheMap, ['store', 'product', 2]) -> GENERIC_PRODUCT_PAGE\n *\n * Because we have the Fallback mechanism, we can impose a constraint that\n * regular JS maps do not have: a value cannot be stored at multiple keypaths\n * simultaneously. These cases should be expressed with Fallback keys instead.\n *\n * Additionally, because values only exist at a single keypath at a time, we\n * can optimize successive lookups by caching the internal map entry on the\n * value itself, using the `ref` field. This is especially useful because it\n * lets us skip the O(n ^ 2) lookup that occurs when Fallback entries\n * are present.\n *\n\n * How to decide if stuff belongs in here, or in cache.ts?\n * -------------------------------------------------------\n * \n * Anything to do with retrival, lifetimes, or eviction needs to go in this\n * module because it affects the fallback algorithm. For example, when\n * performing a lookup, if an entry is stale, it needs to be treated as\n * semantically equivalent to if the entry was not present at all.\n * \n * If there's logic that's not related to the fallback algorithm, though, we\n * should prefer to put it in cache.ts.\n */\n\ntype MapEntryShared<V extends MapValue> = {\n  parent: MapEntry<V> | null\n  key: any\n  map: Map<any, MapEntry<V>> | null\n\n  // LRU-related fields\n  prev: MapEntry<any> | null\n  next: MapEntry<any> | null\n  size: number\n}\n\ntype EmptyMapEntry<V extends MapValue> = MapEntryShared<V> & {\n  value: null\n}\n\ntype FullMapEntry<V extends MapValue> = MapEntryShared<V> & {\n  value: V\n}\n\nexport type MapEntry<V extends MapValue> = EmptyMapEntry<V> | FullMapEntry<V>\n\n// The CacheMap type is just the root entry of the map.\nexport type CacheMap<V extends MapValue> = MapEntry<V>\n\n// The protocol that values must implement. In practice, the only two types that\n// we ever actually deal with in this module are RouteCacheEntry and\n// SegmentCacheEntry; this is just to keep track of the coupling so we don't\n// leak concerns between the modules unnecessarily.\nexport interface MapValue {\n  ref: MapEntry<any> | null\n  size: number\n  staleAt: number\n  version: number\n}\n\nexport type FallbackType = { __brand: 'Fallback' }\nexport const Fallback = {} as FallbackType\n\n// This is a special internal key that is used for \"revalidation\" entries. It's\n// an implementation detail that shouldn't leak outside of this module.\nconst Revalidation = {}\n\nexport function createCacheMap<V extends MapValue>(): CacheMap<V> {\n  const cacheMap: MapEntry<V> = {\n    parent: null,\n    key: null,\n    value: null,\n    map: null,\n\n    // LRU-related fields\n    prev: null,\n    next: null,\n    size: 0,\n  }\n  return cacheMap\n}\n\nfunction getOrInitialize<V extends MapValue>(\n  cacheMap: CacheMap<V>,\n  keys: VaryPath,\n  isRevalidation: boolean\n): MapEntry<V> {\n  // Go through each level of keys until we find the entry that matches, or\n  // create a new entry if one doesn't exist.\n  //\n  // This function will only return entries that match the keypath _exactly_.\n  // Unlike getWithFallback, it will not access fallback entries unless it's\n  // explicitly part of the keypath.\n  let entry = cacheMap\n  let remainingKeys: VaryPath | null = keys\n  let key: unknown | null = null\n  while (true) {\n    const previousKey = key\n    if (remainingKeys !== null) {\n      key = remainingKeys.value\n      remainingKeys = remainingKeys.parent\n    } else if (isRevalidation && previousKey !== Revalidation) {\n      // During a revalidation, we append an internal \"Revalidation\" key to\n      // the end of the keypath. The \"normal\" entry is its parent.\n\n      // However, if the parent entry is currently empty, we don't need to store\n      // this as a revalidation entry. Just insert the revalidation into the\n      // normal slot.\n      if (entry.value === null) {\n        return entry\n      }\n\n      // Otheriwse, create a child entry.\n      key = Revalidation\n    } else {\n      // There are no more keys. This is the terminal entry.\n      break\n    }\n\n    let map = entry.map\n    if (map !== null) {\n      const existingEntry = map.get(key)\n      if (existingEntry !== undefined) {\n        // Found a match. Keep going.\n        entry = existingEntry\n        continue\n      }\n    } else {\n      map = new Map()\n      entry.map = map\n    }\n    // No entry exists yet at this level. Create a new one.\n    const newEntry: EmptyMapEntry<V> = {\n      parent: entry,\n      key,\n      value: null,\n      map: null,\n\n      // LRU-related fields\n      prev: null,\n      next: null,\n      size: 0,\n    }\n    map.set(key, newEntry)\n    entry = newEntry\n  }\n\n  return entry\n}\n\nexport function getFromCacheMap<V extends MapValue>(\n  now: number,\n  currentCacheVersion: number,\n  rootEntry: CacheMap<V>,\n  keys: VaryPath,\n  isRevalidation: boolean\n): V | null {\n  const entry = getEntryWithFallbackImpl(\n    now,\n    currentCacheVersion,\n    rootEntry,\n    keys,\n    isRevalidation,\n    0\n  )\n  if (entry === null || entry.value === null) {\n    return null\n  }\n  // This is an LRU access. Move the entry to the front of the list.\n  lruPut(entry)\n  return entry.value\n}\n\nexport function isValueExpired<V extends MapValue>(\n  now: number,\n  currentCacheVersion: number,\n  value: V\n): boolean {\n  return value.staleAt <= now || value.version < currentCacheVersion\n}\n\nfunction lazilyEvictIfNeeded<V extends MapValue>(\n  now: number,\n  currentCacheVersion: number,\n  entry: MapEntry<V>\n) {\n  // We have a matching entry, but before we can return it, we need to check if\n  // it's still fresh. Otherwise it should be treated the same as a cache miss.\n\n  if (entry.value === null) {\n    // This entry has no value, so there's nothing to evict.\n    return entry\n  }\n\n  const value = entry.value\n  if (isValueExpired(now, currentCacheVersion, value)) {\n    // The value expired. Lazily evict it from the cache, and return null. This\n    // is conceptually the same as a cache miss.\n    deleteMapEntry(entry)\n    return null\n  }\n\n  // The matched entry has not expired. Return it.\n  return entry\n}\n\nfunction getEntryWithFallbackImpl<V extends MapValue>(\n  now: number,\n  currentCacheVersion: number,\n  entry: MapEntry<V>,\n  keys: VaryPath | null,\n  isRevalidation: boolean,\n  previousKey: unknown | null\n): MapEntry<V> | null {\n  // This is similar to getExactEntry, but if an exact match is not found for\n  // a key, it will return the fallback entry instead. This is recursive at\n  // every level, e.g. an entry with keypath [a, Fallback, c, Fallback] is\n  // valid match for [a, b, c, d].\n  //\n  // It will return the most specific match available.\n  let key\n  let remainingKeys: VaryPath | null\n  if (keys !== null) {\n    key = keys.value\n    remainingKeys = keys.parent\n  } else if (isRevalidation && previousKey !== Revalidation) {\n    // During a revalidation, we append an internal \"Revalidation\" key to\n    // the end of the keypath.\n    key = Revalidation\n    remainingKeys = null\n  } else {\n    // There are no more keys. This is the terminal entry.\n\n    // TODO: When performing a lookup during a navigation, as opposed to a\n    // prefetch, we may want to skip entries that are Pending if there's also\n    // a Fulfilled fallback entry. Tricky to say, though, since if it's\n    // already pending, it's likely to stream in soon. Maybe we could do this\n    // just on slow connections and offline mode.\n\n    return lazilyEvictIfNeeded(now, currentCacheVersion, entry)\n  }\n  const map = entry.map\n  if (map !== null) {\n    const existingEntry = map.get(key)\n    if (existingEntry !== undefined) {\n      // Found an exact match for this key. Keep searching.\n      const result = getEntryWithFallbackImpl<V>(\n        now,\n        currentCacheVersion,\n        existingEntry,\n        remainingKeys,\n        isRevalidation,\n        key\n      )\n      if (result !== null) {\n        return result\n      }\n    }\n    // No match found for this key. Check if there's a fallback.\n    const fallbackEntry = map.get(Fallback)\n    if (fallbackEntry !== undefined) {\n      // Found a fallback for this key. Keep searching.\n      return getEntryWithFallbackImpl(\n        now,\n        currentCacheVersion,\n        fallbackEntry,\n        remainingKeys,\n        isRevalidation,\n        key\n      )\n    }\n  }\n  return null\n}\n\nexport function setInCacheMap<V extends MapValue>(\n  cacheMap: CacheMap<V>,\n  keys: VaryPath,\n  value: V,\n  isRevalidation: boolean\n): void {\n  // Add a value to the map at the given keypath. If the value is already\n  // part of the map, it's removed from its previous keypath. (NOTE: This is\n  // unlike a regular JS map, but the behavior is intentional.)\n  const entry = getOrInitialize(cacheMap, keys, isRevalidation)\n  setMapEntryValue(entry, value)\n\n  // This is an LRU access. Move the entry to the front of the list.\n  lruPut(entry)\n  updateLruSize(entry, value.size)\n}\n\nfunction setMapEntryValue<V extends MapValue>(\n  entry: MapEntry<V>,\n  value: V\n): void {\n  if (entry.value !== null) {\n    // There's already a value at the given keypath. Disconnect the old value\n    // from the map. We're not calling `deleteMapEntry` here because the\n    // entry itself is still in the map. We just want to overwrite its value.\n    dropRef(entry.value)\n\n    // Fill the entry with the updated value.\n    const emptyEntry: EmptyMapEntry<V> = entry as any\n    emptyEntry.value = null\n    fillEmptyReference(emptyEntry, value)\n  } else {\n    fillEmptyReference(entry as any, value)\n  }\n}\n\nfunction fillEmptyReference<V extends MapValue>(\n  entry: EmptyMapEntry<V>,\n  value: V\n): void {\n  // This value may already be in the map at a different keypath.\n  // Grab a reference before we overwrite it.\n  const oldEntry = value.ref\n\n  const fullEntry: FullMapEntry<V> = entry as any\n  fullEntry.value = value\n  value.ref = fullEntry\n\n  updateLruSize(fullEntry, value.size)\n\n  if (oldEntry !== null && oldEntry !== entry && oldEntry.value === value) {\n    // This value is already in the map at a different keypath in the map.\n    // Values only exist at a single keypath at a time. Remove it from the\n    // previous keypath.\n    //\n    // Note that only the internal map entry is garbage collected; we don't\n    // call `dropRef` here because it's still in the map, just\n    // at a new keypath (the one we just set, above).\n    deleteMapEntry(oldEntry)\n  }\n}\n\nexport function deleteFromCacheMap<V extends MapValue>(value: V): void {\n  const entry = value.ref\n  if (entry === null) {\n    // This value is not a member of any map.\n    return\n  }\n\n  dropRef(value)\n  deleteMapEntry(entry)\n}\n\nfunction dropRef<V extends MapValue>(value: V): void {\n  // Drop the value from the map by setting its `ref` backpointer to\n  // null. This is a separate operation from `deleteMapEntry` because when\n  // re-keying a value we need to be able to delete the old, internal map\n  // entry without garbage collecting the value itself.\n  value.ref = null\n}\n\nfunction deleteMapEntry<V extends MapValue>(entry: MapEntry<V>): void {\n  // Delete the entry from the cache.\n  const emptyEntry: EmptyMapEntry<V> = entry as any\n  emptyEntry.value = null\n\n  deleteFromLru(entry)\n\n  // Check if we can garbage collect the entry.\n  const map = emptyEntry.map\n  if (map === null) {\n    // Since this entry has no value, and also no child entries, we can\n    // garbage collect it. Remove it from its parent, and keep garbage\n    // collecting the parents until we reach a non-empty entry.\n    let parent = emptyEntry.parent\n    let key = emptyEntry.key\n    while (parent !== null) {\n      const parentMap = parent.map\n      if (parentMap !== null) {\n        parentMap.delete(key)\n        if (parentMap.size === 0) {\n          // We just removed the last entry in the parent map.\n          parent.map = null\n          if (parent.value === null) {\n            // The parent node has no child entries, nor does it have a value\n            // on itself. It can be garbage collected. Keep going.\n            key = parent.key\n            parent = parent.parent\n            continue\n          }\n        }\n      }\n      // The parent is not empty. Stop garbage collecting.\n      break\n    }\n  } else {\n    // Check if there's a revalidating entry. If so, promote it to a\n    // \"normal\" entry, since the normal one was just deleted.\n    const revalidatingEntry = map.get(Revalidation)\n    if (revalidatingEntry !== undefined && revalidatingEntry.value !== null) {\n      setMapEntryValue(emptyEntry, revalidatingEntry.value)\n    }\n  }\n}\n\nexport function setSizeInCacheMap<V extends MapValue>(\n  value: V,\n  size: number\n): void {\n  const entry = value.ref\n  if (entry === null) {\n    // This value is not a member of any map.\n    return\n  }\n  // Except during initialization (when the size is set to 0), this is the only\n  // place the `size` field should be updated, to ensure it's in sync with the\n  // the LRU.\n  value.size = size\n  updateLruSize(entry, size)\n}\n","import { FetchStrategy } from './types'\nimport type {\n  NormalizedPathname,\n  NormalizedSearch,\n  NormalizedNextUrl,\n} from './cache-key'\nimport type { RouteTree } from './cache'\nimport { Fallback, type FallbackType } from './cache-map'\nimport { HEAD_REQUEST_KEY } from '../../../shared/lib/segment-cache/segment-value-encoding'\n\ntype Opaque<T, K> = T & { __brand: K }\n\n/**\n * A linked-list of all the params (or other param-like) inputs that a cache\n * entry may vary by. This is used by the CacheMap module to reuse cache entries\n * across different param values. If a param has a value of Fallback, it means\n * the cache entry is reusable for all possible values of that param. See\n * cache-map.ts for details.\n *\n * A segment's vary path is a pure function of a segment's position in a\n * particular route tree and the (post-rewrite) URL that is being queried. More\n * concretely, successive queries of the cache for the same segment always use\n * the same vary path.\n *\n * A route's vary path is simpler: it's comprised of the pathname, search\n * string, and Next-URL header.\n */\nexport type VaryPath = {\n  value: string | null | FallbackType\n  parent: VaryPath | null\n}\n\n// Because it's so important for vary paths to line up across cache accesses,\n// we use opaque type aliases to ensure these are only created within\n// this module.\n\n// requestKey -> searchParams -> nextUrl\nexport type RouteVaryPath = Opaque<\n  {\n    value: NormalizedPathname\n    parent: {\n      value: NormalizedSearch\n      parent: {\n        value: NormalizedNextUrl | null | FallbackType\n        parent: null\n      }\n    }\n  },\n  'RouteVaryPath'\n>\n\n// requestKey -> pathParams\nexport type LayoutVaryPath = Opaque<\n  {\n    value: string\n    parent: PartialSegmentVaryPath | null\n  },\n  'LayoutVaryPath'\n>\n\n// requestKey -> searchParams -> pathParams\nexport type PageVaryPath = Opaque<\n  {\n    value: string\n    parent: {\n      value: NormalizedSearch | FallbackType\n      parent: PartialSegmentVaryPath | null\n    }\n  },\n  'PageVaryPath'\n>\n\nexport type SegmentVaryPath = LayoutVaryPath | PageVaryPath\n\n// Intermediate type used when building a vary path during a recursive traversal\n// of the route tree.\nexport type PartialSegmentVaryPath = Opaque<VaryPath, 'PartialSegmentVaryPath'>\n\nexport function getRouteVaryPath(\n  pathname: NormalizedPathname,\n  search: NormalizedSearch,\n  nextUrl: NormalizedNextUrl | null\n): RouteVaryPath {\n  // requestKey -> searchParams -> nextUrl\n  const varyPath: VaryPath = {\n    value: pathname,\n    parent: {\n      value: search,\n      parent: {\n        value: nextUrl,\n        parent: null,\n      },\n    },\n  }\n  return varyPath as RouteVaryPath\n}\n\nexport function getFulfilledRouteVaryPath(\n  pathname: NormalizedPathname,\n  search: NormalizedSearch,\n  nextUrl: NormalizedNextUrl | null,\n  couldBeIntercepted: boolean\n): RouteVaryPath {\n  // This is called when a route's data is fulfilled. The cache entry will be\n  // re-keyed based on which inputs the response varies by.\n  // requestKey -> searchParams -> nextUrl\n  const varyPath: VaryPath = {\n    value: pathname,\n    parent: {\n      value: search,\n      parent: {\n        value: couldBeIntercepted ? nextUrl : Fallback,\n        parent: null,\n      },\n    },\n  }\n  return varyPath as RouteVaryPath\n}\n\nexport function appendLayoutVaryPath(\n  parentPath: PartialSegmentVaryPath | null,\n  cacheKey: string\n): PartialSegmentVaryPath {\n  const varyPathPart: VaryPath = {\n    value: cacheKey,\n    parent: parentPath,\n  }\n  return varyPathPart as PartialSegmentVaryPath\n}\n\nexport function finalizeLayoutVaryPath(\n  requestKey: string,\n  varyPath: PartialSegmentVaryPath | null\n): LayoutVaryPath {\n  const layoutVaryPath: VaryPath = {\n    value: requestKey,\n    parent: varyPath,\n  }\n  return layoutVaryPath as LayoutVaryPath\n}\n\nexport function finalizePageVaryPath(\n  requestKey: string,\n  renderedSearch: NormalizedSearch,\n  varyPath: PartialSegmentVaryPath | null\n): PageVaryPath {\n  // Unlike layouts, a page segment's vary path also includes the search string.\n  // requestKey -> searchParams -> pathParams\n  const pageVaryPath: VaryPath = {\n    value: requestKey,\n    parent: {\n      value: renderedSearch,\n      parent: varyPath,\n    },\n  }\n  return pageVaryPath as PageVaryPath\n}\n\nexport function finalizeMetadataVaryPath(\n  pageRequestKey: string,\n  renderedSearch: NormalizedSearch,\n  varyPath: PartialSegmentVaryPath | null\n): PageVaryPath {\n  // The metadata \"segment\" is not a real segment because it doesn't exist in\n  // the normal structure of the route tree, but in terms of caching, it\n  // behaves like a page segment because it varies by all the same params as\n  // a page.\n  //\n  // To keep the protocol for querying the server simple, the request key for\n  // the metadata does not include any path information. It's unnecessary from\n  // the server's perspective, because unlike page segments, there's only one\n  // metadata response per URL, i.e. there's no need to distinguish multiple\n  // parallel pages.\n  //\n  // However, this means the metadata request key is insufficient for\n  // caching the the metadata in the client cache, because on the client we\n  // use the request key to distinguish the metadata entry from all other\n  // page's metadata entries.\n  //\n  // So instead we create a simulated request key based on the page segment.\n  // Conceptually this is equivalent to the request key the server would have\n  // assigned the metadata segment if it treated it as part of the actual\n  // route structure.\n\n  // If there are multiple parallel pages, we use whichever is the first one.\n  // This is fine because the only difference between request keys for\n  // different parallel pages are things like route groups and parallel\n  // route slots. As long as it's always the same one, it doesn't matter.\n  const pageVaryPath: VaryPath = {\n    // Append the actual metadata request key to the page request key. Note\n    // that we're not using a separate vary path part; it's unnecessary because\n    // these are not conceptually separate inputs.\n    value: pageRequestKey + HEAD_REQUEST_KEY,\n    parent: {\n      value: renderedSearch,\n      parent: varyPath,\n    },\n  }\n  return pageVaryPath as PageVaryPath\n}\n\nexport function getSegmentVaryPathForRequest(\n  fetchStrategy: FetchStrategy,\n  tree: RouteTree\n): SegmentVaryPath {\n  // This is used for storing pending requests in the cache. We want to choose\n  // the most generic vary path based on the strategy used to fetch it, i.e.\n  // static/PPR versus runtime prefetching, so that it can be reused as much\n  // as possible.\n  //\n  // We may be able to re-key the response to something even more generic once\n  // we receive it  for example, if the server tells us that the response\n  // doesn't vary on a particular param  but even before we send the request,\n  // we know some params are reusable based on the fetch strategy alone. For\n  // example, a static prefetch will never vary on search params.\n  //\n  // The original vary path with all the params filled in is stored on the\n  // route tree object. We will clone this one to create a new vary path\n  // where certain params are replaced with Fallback.\n  //\n  // This result of this function is not stored anywhere. It's only used to\n  // access the cache a single time.\n  //\n  // TODO: Rather than create a new list object just to access the cache, the\n  // plan is to add the concept of a \"vary mask\". This will represent all the\n  // params that can be treated as Fallback. (Or perhaps the inverse.)\n  const originalVaryPath = tree.varyPath\n\n  // Only page segments (and the special \"metadata\" segment, which is treated\n  // like a page segment for the purposes of caching) may contain search\n  // params. There's no reason to include them in the vary path otherwise.\n  if (tree.isPage) {\n    // Only a runtime prefetch will include search params in the vary path.\n    // Static prefetches never include search params, so they can be reused\n    // across all possible search param values.\n    const doesVaryOnSearchParams =\n      fetchStrategy === FetchStrategy.Full ||\n      fetchStrategy === FetchStrategy.PPRRuntime\n\n    if (!doesVaryOnSearchParams) {\n      // The response from the the server will not vary on search params. Clone\n      // the end of the original vary path to replace the search params\n      // with Fallback.\n      //\n      // requestKey -> searchParams -> pathParams\n      //               ^ This part gets replaced with Fallback\n      const searchParamsVaryPath = (originalVaryPath as PageVaryPath).parent\n      const pathParamsVaryPath = searchParamsVaryPath.parent\n      const patchedVaryPath: VaryPath = {\n        value: originalVaryPath.value,\n        parent: {\n          value: Fallback,\n          parent: pathParamsVaryPath,\n        },\n      }\n      return patchedVaryPath as SegmentVaryPath\n    }\n  }\n\n  // The request does vary on search params. We don't need to modify anything.\n  return originalVaryPath as SegmentVaryPath\n}\n\nexport function clonePageVaryPathWithNewSearchParams(\n  originalVaryPath: PageVaryPath,\n  newSearch: NormalizedSearch\n): PageVaryPath {\n  // requestKey -> searchParams -> pathParams\n  //               ^ This part gets replaced with newSearch\n  const searchParamsVaryPath = originalVaryPath.parent\n  const clonedVaryPath: VaryPath = {\n    value: originalVaryPath.value,\n    parent: {\n      value: newSearch,\n      parent: searchParamsVaryPath.parent,\n    },\n  }\n  return clonedVaryPath as PageVaryPath\n}\n","/**\n * For a given page path, this function ensures that there is a leading slash.\n * If there is not a leading slash, one is added, otherwise it is noop.\n */\nexport function ensureLeadingSlash(path: string) {\n  return path.startsWith('/') ? path : `/${path}`\n}\n","import { ensureLeadingSlash } from '../../page-path/ensure-leading-slash'\nimport { isGroupSegment } from '../../segment'\n\n/**\n * Normalizes an app route so it represents the actual request path. Essentially\n * performing the following transformations:\n *\n * - `/(dashboard)/user/[id]/page` to `/user/[id]`\n * - `/(dashboard)/account/page` to `/account`\n * - `/user/[id]/page` to `/user/[id]`\n * - `/account/page` to `/account`\n * - `/page` to `/`\n * - `/(dashboard)/user/[id]/route` to `/user/[id]`\n * - `/(dashboard)/account/route` to `/account`\n * - `/user/[id]/route` to `/user/[id]`\n * - `/account/route` to `/account`\n * - `/route` to `/`\n * - `/` to `/`\n *\n * @param route the app route to normalize\n * @returns the normalized pathname\n */\nexport function normalizeAppPath(route: string) {\n  return ensureLeadingSlash(\n    route.split('/').reduce((pathname, segment, index, segments) => {\n      // Empty segments are ignored.\n      if (!segment) {\n        return pathname\n      }\n\n      // Groups are ignored.\n      if (isGroupSegment(segment)) {\n        return pathname\n      }\n\n      // Parallel segments are ignored.\n      if (segment[0] === '@') {\n        return pathname\n      }\n\n      // The last segment (if it's a leaf) should be ignored.\n      if (\n        (segment === 'page' || segment === 'route') &&\n        index === segments.length - 1\n      ) {\n        return pathname\n      }\n\n      return `${pathname}/${segment}`\n    }, '')\n  )\n}\n\n/**\n * Strips the `.rsc` extension if it's in the pathname.\n * Since this function is used on full urls it checks `?` for searchParams handling.\n */\nexport function normalizeRscURL(url: string) {\n  return url.replace(\n    /\\.rsc($|\\?)/,\n    // $1 ensures `?` is preserved\n    '$1'\n  )\n}\n","import { normalizeAppPath } from './app-paths'\n\n// order matters here, the first match will be used\nexport const INTERCEPTION_ROUTE_MARKERS = [\n  '(..)(..)',\n  '(.)',\n  '(..)',\n  '(...)',\n] as const\n\nexport function isInterceptionRouteAppPath(path: string): boolean {\n  // TODO-APP: add more serious validation\n  return (\n    path\n      .split('/')\n      .find((segment) =>\n        INTERCEPTION_ROUTE_MARKERS.find((m) => segment.startsWith(m))\n      ) !== undefined\n  )\n}\n\ntype InterceptionRouteInformation = {\n  /**\n   * The intercepting route. This is the route that is being intercepted or the\n   * route that the user was coming from. This is matched by the Next-Url\n   * header.\n   */\n  interceptingRoute: string\n\n  /**\n   * The intercepted route. This is the route that is being intercepted or the\n   * route that the user is going to. This is matched by the request pathname.\n   */\n  interceptedRoute: string\n}\n\nexport function extractInterceptionRouteInformation(\n  path: string\n): InterceptionRouteInformation {\n  let interceptingRoute: string | undefined\n  let marker: (typeof INTERCEPTION_ROUTE_MARKERS)[number] | undefined\n  let interceptedRoute: string | undefined\n\n  for (const segment of path.split('/')) {\n    marker = INTERCEPTION_ROUTE_MARKERS.find((m) => segment.startsWith(m))\n    if (marker) {\n      ;[interceptingRoute, interceptedRoute] = path.split(marker, 2)\n      break\n    }\n  }\n\n  if (!interceptingRoute || !marker || !interceptedRoute) {\n    throw new Error(\n      `Invalid interception route: ${path}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`\n    )\n  }\n\n  interceptingRoute = normalizeAppPath(interceptingRoute) // normalize the path, e.g. /(blog)/feed -> /feed\n\n  switch (marker) {\n    case '(.)':\n      // (.) indicates that we should match with sibling routes, so we just need to append the intercepted route to the intercepting route\n      if (interceptingRoute === '/') {\n        interceptedRoute = `/${interceptedRoute}`\n      } else {\n        interceptedRoute = interceptingRoute + '/' + interceptedRoute\n      }\n      break\n    case '(..)':\n      // (..) indicates that we should match at one level up, so we need to remove the last segment of the intercepting route\n      if (interceptingRoute === '/') {\n        throw new Error(\n          `Invalid interception route: ${path}. Cannot use (..) marker at the root level, use (.) instead.`\n        )\n      }\n      interceptedRoute = interceptingRoute\n        .split('/')\n        .slice(0, -1)\n        .concat(interceptedRoute)\n        .join('/')\n      break\n    case '(...)':\n      // (...) will match the route segment in the root directory, so we need to use the root directory to prepend the intercepted route\n      interceptedRoute = '/' + interceptedRoute\n      break\n    case '(..)(..)':\n      // (..)(..) indicates that we should match at two levels up, so we need to remove the last two segments of the intercepting route\n\n      const splitInterceptingRoute = interceptingRoute.split('/')\n      if (splitInterceptingRoute.length <= 2) {\n        throw new Error(\n          `Invalid interception route: ${path}. Cannot use (..)(..) marker at the root level or one level up.`\n        )\n      }\n\n      interceptedRoute = splitInterceptingRoute\n        .slice(0, -2)\n        .concat(interceptedRoute)\n        .join('/')\n      break\n    default:\n      throw new Error('Invariant: unexpected marker')\n  }\n\n  return { interceptingRoute, interceptedRoute }\n}\n","import type {\n  FlightRouterState,\n  Segment,\n} from '../../../shared/lib/app-router-types'\nimport { INTERCEPTION_ROUTE_MARKERS } from '../../../shared/lib/router/utils/interception-routes'\nimport type { Params } from '../../../server/request/params'\nimport {\n  isGroupSegment,\n  DEFAULT_SEGMENT_KEY,\n  PAGE_SEGMENT_KEY,\n} from '../../../shared/lib/segment'\nimport { matchSegment } from '../match-segments'\n\nconst removeLeadingSlash = (segment: string): string => {\n  return segment[0] === '/' ? segment.slice(1) : segment\n}\n\nconst segmentToPathname = (segment: Segment): string => {\n  if (typeof segment === 'string') {\n    // 'children' is not a valid path -- it's technically a parallel route that corresponds with the current segment's page\n    // if we don't skip it, then the computed pathname might be something like `/children` which doesn't make sense.\n    if (segment === 'children') return ''\n\n    return segment\n  }\n\n  return segment[1]\n}\n\nfunction normalizeSegments(segments: string[]): string {\n  return (\n    segments.reduce((acc, segment) => {\n      segment = removeLeadingSlash(segment)\n      if (segment === '' || isGroupSegment(segment)) {\n        return acc\n      }\n\n      return `${acc}/${segment}`\n    }, '') || '/'\n  )\n}\n\nexport function extractPathFromFlightRouterState(\n  flightRouterState: FlightRouterState\n): string | undefined {\n  const segment = Array.isArray(flightRouterState[0])\n    ? flightRouterState[0][1]\n    : flightRouterState[0]\n\n  if (\n    segment === DEFAULT_SEGMENT_KEY ||\n    INTERCEPTION_ROUTE_MARKERS.some((m) => segment.startsWith(m))\n  )\n    return undefined\n\n  if (segment.startsWith(PAGE_SEGMENT_KEY)) return ''\n\n  const segments = [segmentToPathname(segment)]\n  const parallelRoutes = flightRouterState[1] ?? {}\n\n  const childrenPath = parallelRoutes.children\n    ? extractPathFromFlightRouterState(parallelRoutes.children)\n    : undefined\n\n  if (childrenPath !== undefined) {\n    segments.push(childrenPath)\n  } else {\n    for (const [key, value] of Object.entries(parallelRoutes)) {\n      if (key === 'children') continue\n\n      const childPath = extractPathFromFlightRouterState(value)\n\n      if (childPath !== undefined) {\n        segments.push(childPath)\n      }\n    }\n  }\n\n  return normalizeSegments(segments)\n}\n\nfunction computeChangedPathImpl(\n  treeA: FlightRouterState,\n  treeB: FlightRouterState\n): string | null {\n  const [segmentA, parallelRoutesA] = treeA\n  const [segmentB, parallelRoutesB] = treeB\n\n  const normalizedSegmentA = segmentToPathname(segmentA)\n  const normalizedSegmentB = segmentToPathname(segmentB)\n\n  if (\n    INTERCEPTION_ROUTE_MARKERS.some(\n      (m) =>\n        normalizedSegmentA.startsWith(m) || normalizedSegmentB.startsWith(m)\n    )\n  ) {\n    return ''\n  }\n\n  if (!matchSegment(segmentA, segmentB)) {\n    // once we find where the tree changed, we compute the rest of the path by traversing the tree\n    return extractPathFromFlightRouterState(treeB) ?? ''\n  }\n\n  for (const parallelRouterKey in parallelRoutesA) {\n    if (parallelRoutesB[parallelRouterKey]) {\n      const changedPath = computeChangedPathImpl(\n        parallelRoutesA[parallelRouterKey],\n        parallelRoutesB[parallelRouterKey]\n      )\n      if (changedPath !== null) {\n        return `${segmentToPathname(segmentB)}/${changedPath}`\n      }\n    }\n  }\n\n  return null\n}\n\nexport function computeChangedPath(\n  treeA: FlightRouterState,\n  treeB: FlightRouterState\n): string | null {\n  const changedPath = computeChangedPathImpl(treeA, treeB)\n\n  if (changedPath == null || changedPath === '/') {\n    return changedPath\n  }\n\n  // lightweight normalization to remove route groups\n  return normalizeSegments(changedPath.split('/'))\n}\n\n/**\n * Recursively extracts dynamic parameters from FlightRouterState.\n */\nexport function getSelectedParams(\n  currentTree: FlightRouterState,\n  params: Params = {}\n): Params {\n  const parallelRoutes = currentTree[1]\n\n  for (const parallelRoute of Object.values(parallelRoutes)) {\n    const segment = parallelRoute[0]\n    const isDynamicParameter = Array.isArray(segment)\n    const segmentValue = isDynamicParameter ? segment[1] : segment\n    if (!segmentValue || segmentValue.startsWith(PAGE_SEGMENT_KEY)) continue\n\n    // Ensure catchAll and optional catchall are turned into an array\n    const isCatchAll =\n      isDynamicParameter && (segment[2] === 'c' || segment[2] === 'oc')\n\n    if (isCatchAll) {\n      params[segment[0]] = segment[1].split('/')\n    } else if (isDynamicParameter) {\n      params[segment[0]] = segment[1]\n    }\n\n    params = getSelectedParams(parallelRoute, params)\n  }\n\n  return params\n}\n","import { computeChangedPath } from './compute-changed-path'\nimport type {\n  Mutable,\n  ReadonlyReducerState,\n  ReducerState,\n} from './router-reducer-types'\n\nfunction isNotUndefined<T>(value: T): value is Exclude<T, undefined> {\n  return typeof value !== 'undefined'\n}\n\nexport function handleMutable(\n  state: ReadonlyReducerState,\n  mutable: Mutable\n): ReducerState {\n  // shouldScroll is true by default, can override to false.\n  const shouldScroll = mutable.shouldScroll ?? true\n\n  let previousNextUrl = state.previousNextUrl\n  let nextUrl = state.nextUrl\n\n  if (isNotUndefined(mutable.patchedTree)) {\n    // If we received a patched tree, we need to compute the changed path.\n    const changedPath = computeChangedPath(state.tree, mutable.patchedTree)\n    if (changedPath) {\n      // If the tree changed, we need to update the nextUrl\n      previousNextUrl = nextUrl\n      nextUrl = changedPath\n    } else if (!nextUrl) {\n      // if the tree ends up being the same (ie, no changed path), and we don't have a nextUrl, then we should use the canonicalUrl\n      nextUrl = state.canonicalUrl\n    }\n    // otherwise this will be a no-op and continue to use the existing nextUrl\n  }\n\n  return {\n    // Set href.\n    canonicalUrl: mutable.canonicalUrl ?? state.canonicalUrl,\n    renderedSearch: mutable.renderedSearch ?? state.renderedSearch,\n    pushRef: {\n      pendingPush: isNotUndefined(mutable.pendingPush)\n        ? mutable.pendingPush\n        : state.pushRef.pendingPush,\n      mpaNavigation: isNotUndefined(mutable.mpaNavigation)\n        ? mutable.mpaNavigation\n        : state.pushRef.mpaNavigation,\n      preserveCustomHistoryState: isNotUndefined(\n        mutable.preserveCustomHistoryState\n      )\n        ? mutable.preserveCustomHistoryState\n        : state.pushRef.preserveCustomHistoryState,\n    },\n    // All navigation requires scroll and focus management to trigger.\n    focusAndScrollRef: {\n      apply: shouldScroll\n        ? isNotUndefined(mutable?.scrollableSegments)\n          ? true\n          : state.focusAndScrollRef.apply\n        : // If shouldScroll is false then we should not apply scroll and focus management.\n          false,\n      onlyHashChange: mutable.onlyHashChange || false,\n      hashFragment: shouldScroll\n        ? // Empty hash should trigger default behavior of scrolling layout into view.\n          // #top is handled in layout-router.\n          mutable.hashFragment && mutable.hashFragment !== ''\n          ? // Remove leading # and decode hash to make non-latin hashes work.\n            decodeURIComponent(mutable.hashFragment.slice(1))\n          : state.focusAndScrollRef.hashFragment\n        : // If shouldScroll is false then we should not apply scroll and focus management.\n          null,\n      segmentPaths: shouldScroll\n        ? (mutable?.scrollableSegments ?? state.focusAndScrollRef.segmentPaths)\n        : // If shouldScroll is false then we should not apply scroll and focus management.\n          [],\n    },\n    // Apply cache.\n    cache: mutable.cache ? mutable.cache : state.cache,\n    // Apply patched router state.\n    tree: isNotUndefined(mutable.patchedTree)\n      ? mutable.patchedTree\n      : state.tree,\n    nextUrl,\n    previousNextUrl: previousNextUrl,\n    debugInfo: mutable.collectedDebugInfo ?? null,\n  }\n}\n","import type { Segment } from '../../../shared/lib/app-router-types'\nimport { PAGE_SEGMENT_KEY } from '../../../shared/lib/segment'\n\nexport function createRouterCacheKey(\n  segment: Segment,\n  withoutSearchParameters: boolean = false\n) {\n  // if the segment is an array, it means it's a dynamic segment\n  // for example, ['lang', 'en', 'd']. We need to convert it to a string to store it as a cache node key.\n  if (Array.isArray(segment)) {\n    return `${segment[0]}|${segment[1]}|${segment[2]}`\n  }\n\n  // Page segments might have search parameters, ie __PAGE__?foo=bar\n  // When `withoutSearchParameters` is true, we only want to return the page segment\n  if (withoutSearchParameters && segment.startsWith(PAGE_SEGMENT_KEY)) {\n    return PAGE_SEGMENT_KEY\n  }\n\n  return segment\n}\n","import type { FlightRouterState } from '../../../shared/lib/app-router-types'\n\nexport function isNavigatingToNewRootLayout(\n  currentTree: FlightRouterState,\n  nextTree: FlightRouterState\n): boolean {\n  // Compare segments\n  const currentTreeSegment = currentTree[0]\n  const nextTreeSegment = nextTree[0]\n\n  // If any segment is different before we find the root layout, the root layout has changed.\n  // E.g. /same/(group1)/layout.js -> /same/(group2)/layout.js\n  // First segment is 'same' for both, keep looking. (group1) changed to (group2) before the root layout was found, it must have changed.\n  if (Array.isArray(currentTreeSegment) && Array.isArray(nextTreeSegment)) {\n    // Compare dynamic param name and type but ignore the value, different values would not affect the current root layout\n    // /[name] - /slug1 and /slug2, both values (slug1 & slug2) still has the same layout /[name]/layout.js\n    if (\n      currentTreeSegment[0] !== nextTreeSegment[0] ||\n      currentTreeSegment[2] !== nextTreeSegment[2]\n    ) {\n      return true\n    }\n  } else if (currentTreeSegment !== nextTreeSegment) {\n    return true\n  }\n\n  // Current tree root layout found\n  if (currentTree[4]) {\n    // If the next tree doesn't have the root layout flag, it must have changed.\n    return !nextTree[4]\n  }\n  // Current tree didn't have its root layout here, must have changed.\n  if (nextTree[4]) {\n    return true\n  }\n  // We can't assume it's `parallelRoutes.children` here in case the root layout is `app/@something/layout.js`\n  // But it's not possible to be more than one parallelRoutes before the root layout is found\n  // TODO-APP: change to traverse all parallel routes\n  const currentTreeChild = Object.values(currentTree[1])[0]\n  const nextTreeChild = Object.values(nextTree[1])[0]\n  if (!currentTreeChild || !nextTreeChild) return true\n  return isNavigatingToNewRootLayout(currentTreeChild, nextTreeChild)\n}\n","import type {\n  CacheNodeSeedData,\n  FlightRouterState,\n  FlightSegmentPath,\n  Segment,\n} from '../../../shared/lib/app-router-types'\nimport type {\n  CacheNode,\n  ChildSegmentMap,\n  ReadyCacheNode,\n} from '../../../shared/lib/app-router-types'\nimport type {\n  HeadData,\n  LoadingModuleData,\n} from '../../../shared/lib/app-router-types'\nimport { DEFAULT_SEGMENT_KEY } from '../../../shared/lib/segment'\nimport { matchSegment } from '../match-segments'\nimport { createHrefFromUrl } from './create-href-from-url'\nimport { createRouterCacheKey } from './create-router-cache-key'\nimport type { FetchServerResponseResult } from './fetch-server-response'\nimport { isNavigatingToNewRootLayout } from './is-navigating-to-new-root-layout'\nimport { DYNAMIC_STALETIME_MS } from './reducers/navigate-reducer'\n\n// This is yet another tree type that is used to track pending promises that\n// need to be fulfilled once the dynamic data is received. The terminal nodes of\n// this tree represent the new Cache Node trees that were created during this\n// request. We can't use the Cache Node tree or Route State tree directly\n// because those include reused nodes, too. This tree is discarded as soon as\n// the navigation response is received.\ntype SPANavigationTask = {\n  // The router state that corresponds to the tree that this Task represents.\n  route: FlightRouterState\n  // The CacheNode that corresponds to the tree that this Task represents. If\n  // `children` is null (i.e. if this is a terminal task node), then `node`\n  // represents a brand new Cache Node tree, which way or may not need to be\n  // filled with dynamic data from the server.\n  node: CacheNode | null\n  // The tree sent to the server during the dynamic request. This is the\n  // same as `route`, except with the `refetch` marker set on dynamic segments.\n  // If all the segments are static, then this will be null, and no server\n  // request is required.\n  dynamicRequestTree: FlightRouterState | null\n  children: Map<string, SPANavigationTask> | null\n}\n\n// A special type used to bail out and trigger a full-page navigation.\ntype MPANavigationTask = {\n  // MPA tasks are distinguised from SPA tasks by having a null `route`.\n  route: null\n  node: null\n  dynamicRequestTree: null\n  children: null\n}\n\nconst MPA_NAVIGATION_TASK: MPANavigationTask = {\n  route: null,\n  node: null,\n  dynamicRequestTree: null,\n  children: null,\n}\n\nexport type Task = SPANavigationTask | MPANavigationTask\n\n// Creates a new Cache Node tree (i.e. copy-on-write) that represents the\n// optimistic result of a navigation, using both the current Cache Node tree and\n// data that was prefetched prior to navigation.\n//\n// At the moment we call this function, we haven't yet received the navigation\n// response from the server. It could send back something completely different\n// from the tree that was prefetched  due to rewrites, default routes, parallel\n// routes, etc.\n//\n// But in most cases, it will return the same tree that we prefetched, just with\n// the dynamic holes filled in. So we optimistically assume this will happen,\n// and accept that the real result could be arbitrarily different.\n//\n// We'll reuse anything that was already in the previous tree, since that's what\n// the server does.\n//\n// New segments (ones that don't appear in the old tree) are assigned an\n// unresolved promise. The data for these promises will be fulfilled later, when\n// the navigation response is received.\n//\n// The tree can be rendered immediately after it is created (that's why this is\n// a synchronous function). Any new trees that do not have prefetch data will\n// suspend during rendering, until the dynamic data streams in.\n//\n// Returns a Task object, which contains both the updated Cache Node and a path\n// to the pending subtrees that need to be resolved by the navigation response.\n//\n// A return value of `null` means there were no changes, and the previous tree\n// can be reused without initiating a server request.\nexport function startPPRNavigation(\n  navigatedAt: number,\n  oldUrl: URL,\n  oldCacheNode: CacheNode,\n  oldRouterState: FlightRouterState,\n  newRouterState: FlightRouterState,\n  prefetchData: CacheNodeSeedData | null,\n  prefetchHead: HeadData | null,\n  isPrefetchHeadPartial: boolean,\n  isSamePageNavigation: boolean,\n  scrollableSegmentsResult: Array<FlightSegmentPath>\n): Task | null {\n  const segmentPath: Array<FlightSegmentPath> = []\n  return updateCacheNodeOnNavigation(\n    navigatedAt,\n    oldUrl,\n    oldCacheNode,\n    oldRouterState,\n    newRouterState,\n    false,\n    prefetchData,\n    prefetchHead,\n    isPrefetchHeadPartial,\n    isSamePageNavigation,\n    segmentPath,\n    scrollableSegmentsResult\n  )\n}\n\nfunction updateCacheNodeOnNavigation(\n  navigatedAt: number,\n  oldUrl: URL,\n  oldCacheNode: CacheNode,\n  oldRouterState: FlightRouterState,\n  newRouterState: FlightRouterState,\n  didFindRootLayout: boolean,\n  prefetchData: CacheNodeSeedData | null,\n  prefetchHead: HeadData | null,\n  isPrefetchHeadPartial: boolean,\n  isSamePageNavigation: boolean,\n  segmentPath: FlightSegmentPath,\n  scrollableSegmentsResult: Array<FlightSegmentPath>\n): Task | null {\n  // Diff the old and new trees to reuse the shared layouts.\n  const oldRouterStateChildren = oldRouterState[1]\n  const newRouterStateChildren = newRouterState[1]\n  const prefetchDataChildren = prefetchData !== null ? prefetchData[1] : null\n\n  if (!didFindRootLayout) {\n    // We're currently traversing the part of the tree that was also part of\n    // the previous route. If we discover a root layout, then we don't need to\n    // trigger an MPA navigation. See beginRenderingNewRouteTree for context.\n    const isRootLayout = newRouterState[4] === true\n    if (isRootLayout) {\n      // Found a matching root layout.\n      didFindRootLayout = true\n    }\n  }\n\n  const oldParallelRoutes = oldCacheNode.parallelRoutes\n\n  // Clone the current set of segment children, even if they aren't active in\n  // the new tree.\n  // TODO: We currently retain all the inactive segments indefinitely, until\n  // there's an explicit refresh, or a parent layout is lazily refreshed. We\n  // rely on this for popstate navigations, which update the Router State Tree\n  // but do not eagerly perform a data fetch, because they expect the segment\n  // data to already be in the Cache Node tree. For highly static sites that\n  // are mostly read-only, this may happen only rarely, causing memory to\n  // leak. We should figure out a better model for the lifetime of inactive\n  // segments, so we can maintain instant back/forward navigations without\n  // leaking memory indefinitely.\n  const prefetchParallelRoutes = new Map(oldParallelRoutes)\n\n  // As we diff the trees, we may sometimes modify (copy-on-write, not mutate)\n  // the Route Tree that was returned by the server  for example, in the case\n  // of default parallel routes, we preserve the currently active segment. To\n  // avoid mutating the original tree, we clone the router state children along\n  // the return path.\n  let patchedRouterStateChildren: {\n    [parallelRouteKey: string]: FlightRouterState\n  } = {}\n  let taskChildren = null\n\n  // Most navigations require a request to fetch additional data from the\n  // server, either because the data was not already prefetched, or because the\n  // target route contains dynamic data that cannot be prefetched.\n  //\n  // However, if the target route is fully static, and it's already completely\n  // loaded into the segment cache, then we can skip the server request.\n  //\n  // This starts off as `false`, and is set to `true` if any of the child\n  // routes requires a dynamic request.\n  let needsDynamicRequest = false\n  // As we traverse the children, we'll construct a FlightRouterState that can\n  // be sent to the server to request the dynamic data. If it turns out that\n  // nothing in the subtree is dynamic (i.e. needsDynamicRequest is false at the\n  // end), then this will be discarded.\n  // TODO: We can probably optimize the format of this data structure to only\n  // include paths that are dynamic. Instead of reusing the\n  // FlightRouterState type.\n  let dynamicRequestTreeChildren: {\n    [parallelRouteKey: string]: FlightRouterState\n  } = {}\n\n  for (let parallelRouteKey in newRouterStateChildren) {\n    const newRouterStateChild: FlightRouterState =\n      newRouterStateChildren[parallelRouteKey]\n    const oldRouterStateChild: FlightRouterState | void =\n      oldRouterStateChildren[parallelRouteKey]\n    const oldSegmentMapChild = oldParallelRoutes.get(parallelRouteKey)\n    const prefetchDataChild: CacheNodeSeedData | void | null =\n      prefetchDataChildren !== null\n        ? prefetchDataChildren[parallelRouteKey]\n        : null\n\n    const newSegmentChild = newRouterStateChild[0]\n    const newSegmentPathChild = segmentPath.concat([\n      parallelRouteKey,\n      newSegmentChild,\n    ])\n    const newSegmentKeyChild = createRouterCacheKey(newSegmentChild)\n\n    const oldSegmentChild =\n      oldRouterStateChild !== undefined ? oldRouterStateChild[0] : undefined\n\n    const oldCacheNodeChild =\n      oldSegmentMapChild !== undefined\n        ? oldSegmentMapChild.get(newSegmentKeyChild)\n        : undefined\n\n    let taskChild: Task | null\n    if (newSegmentChild === DEFAULT_SEGMENT_KEY) {\n      // This is another kind of leaf segment  a default route.\n      //\n      // Default routes have special behavior. When there's no matching segment\n      // for a parallel route, Next.js preserves the currently active segment\n      // during a client navigation  but not for initial render. The server\n      // leaves it to the client to account for this. So we need to handle\n      // it here.\n      if (oldRouterStateChild !== undefined) {\n        // Reuse the existing Router State for this segment. We spawn a \"task\"\n        // just to keep track of the updated router state; unlike most, it's\n        // already fulfilled and won't be affected by the dynamic response.\n        taskChild = reuseActiveSegmentInDefaultSlot(oldUrl, oldRouterStateChild)\n      } else {\n        // There's no currently active segment. Switch to the \"create\" path.\n        taskChild = beginRenderingNewRouteTree(\n          navigatedAt,\n          oldRouterStateChild,\n          newRouterStateChild,\n          oldCacheNodeChild,\n          didFindRootLayout,\n          prefetchDataChild !== undefined ? prefetchDataChild : null,\n          prefetchHead,\n          isPrefetchHeadPartial,\n          newSegmentPathChild,\n          scrollableSegmentsResult\n        )\n      }\n    } else if (\n      isSamePageNavigation &&\n      // Check if this is a page segment.\n      // TODO: We're not consistent about how we do this check. Some places\n      // check if the segment starts with PAGE_SEGMENT_KEY, but most seem to\n      // check if there any any children, which is why I'm doing it here. We\n      // should probably encode an empty children set as `null` though. Either\n      // way, we should update all the checks to be consistent.\n      Object.keys(newRouterStateChild[1]).length === 0\n    ) {\n      // We special case navigations to the exact same URL as the current\n      // location. It's a common UI pattern for apps to refresh when you click a\n      // link to the current page. So when this happens, we refresh the dynamic\n      // data in the page segments.\n      //\n      // Note that this does not apply if the any part of the hash or search\n      // query has changed. This might feel a bit weird but it makes more sense\n      // when you consider that the way to trigger this behavior is to click\n      // the same link multiple times.\n      //\n      // TODO: We should probably refresh the *entire* route when this case\n      // occurs, not just the page segments. Essentially treating it the same as\n      // a refresh() triggered by an action, which is the more explicit way of\n      // modeling the UI pattern described above.\n      //\n      // Also note that this only refreshes the dynamic data, not static/\n      // cached data. If the page segment is fully static and prefetched, the\n      // request is skipped. (This is also how refresh() works.)\n      taskChild = beginRenderingNewRouteTree(\n        navigatedAt,\n        oldRouterStateChild,\n        newRouterStateChild,\n        oldCacheNodeChild,\n        didFindRootLayout,\n        prefetchDataChild !== undefined ? prefetchDataChild : null,\n        prefetchHead,\n        isPrefetchHeadPartial,\n        newSegmentPathChild,\n        scrollableSegmentsResult\n      )\n    } else if (\n      oldRouterStateChild !== undefined &&\n      oldSegmentChild !== undefined &&\n      matchSegment(newSegmentChild, oldSegmentChild)\n    ) {\n      if (\n        oldCacheNodeChild !== undefined &&\n        oldRouterStateChild !== undefined\n      ) {\n        // This segment exists in both the old and new trees. Recursively update\n        // the children.\n        taskChild = updateCacheNodeOnNavigation(\n          navigatedAt,\n          oldUrl,\n          oldCacheNodeChild,\n          oldRouterStateChild,\n          newRouterStateChild,\n          didFindRootLayout,\n          prefetchDataChild,\n          prefetchHead,\n          isPrefetchHeadPartial,\n          isSamePageNavigation,\n          newSegmentPathChild,\n          scrollableSegmentsResult\n        )\n      } else {\n        // There's no existing Cache Node for this segment. Switch to the\n        // \"create\" path.\n        taskChild = beginRenderingNewRouteTree(\n          navigatedAt,\n          oldRouterStateChild,\n          newRouterStateChild,\n          oldCacheNodeChild,\n          didFindRootLayout,\n          prefetchDataChild !== undefined ? prefetchDataChild : null,\n          prefetchHead,\n          isPrefetchHeadPartial,\n          newSegmentPathChild,\n          scrollableSegmentsResult\n        )\n      }\n    } else {\n      // This is a new tree. Switch to the \"create\" path.\n      taskChild = beginRenderingNewRouteTree(\n        navigatedAt,\n        oldRouterStateChild,\n        newRouterStateChild,\n        oldCacheNodeChild,\n        didFindRootLayout,\n        prefetchDataChild !== undefined ? prefetchDataChild : null,\n        prefetchHead,\n        isPrefetchHeadPartial,\n        newSegmentPathChild,\n        scrollableSegmentsResult\n      )\n    }\n\n    if (taskChild !== null) {\n      // Recursively propagate up the child tasks.\n\n      if (taskChild.route === null) {\n        // One of the child tasks discovered a change to the root layout.\n        // Immediately unwind from this recursive traversal.\n        return MPA_NAVIGATION_TASK\n      }\n\n      if (taskChildren === null) {\n        taskChildren = new Map()\n      }\n      taskChildren.set(parallelRouteKey, taskChild)\n      const newCacheNodeChild = taskChild.node\n      if (newCacheNodeChild !== null) {\n        const newSegmentMapChild: ChildSegmentMap = new Map(oldSegmentMapChild)\n        newSegmentMapChild.set(newSegmentKeyChild, newCacheNodeChild)\n        prefetchParallelRoutes.set(parallelRouteKey, newSegmentMapChild)\n      }\n\n      // The child tree's route state may be different from the prefetched\n      // route sent by the server. We need to clone it as we traverse back up\n      // the tree.\n      const taskChildRoute = taskChild.route\n      patchedRouterStateChildren[parallelRouteKey] = taskChildRoute\n\n      const dynamicRequestTreeChild = taskChild.dynamicRequestTree\n      if (dynamicRequestTreeChild !== null) {\n        // Something in the child tree is dynamic.\n        needsDynamicRequest = true\n        dynamicRequestTreeChildren[parallelRouteKey] = dynamicRequestTreeChild\n      } else {\n        dynamicRequestTreeChildren[parallelRouteKey] = taskChildRoute\n      }\n    } else {\n      // The child didn't change. We can use the prefetched router state.\n      patchedRouterStateChildren[parallelRouteKey] = newRouterStateChild\n      dynamicRequestTreeChildren[parallelRouteKey] = newRouterStateChild\n    }\n  }\n\n  if (taskChildren === null) {\n    // No new tasks were spawned.\n    return null\n  }\n\n  const newCacheNode: ReadyCacheNode = {\n    lazyData: null,\n    rsc: oldCacheNode.rsc,\n    // We intentionally aren't updating the prefetchRsc field, since this node\n    // is already part of the current tree, because it would be weird for\n    // prefetch data to be newer than the final data. It probably won't ever be\n    // observable anyway, but it could happen if the segment is unmounted then\n    // mounted again, because LayoutRouter will momentarily switch to rendering\n    // prefetchRsc, via useDeferredValue.\n    prefetchRsc: oldCacheNode.prefetchRsc,\n    head: oldCacheNode.head,\n    prefetchHead: oldCacheNode.prefetchHead,\n    loading: oldCacheNode.loading,\n\n    // Everything is cloned except for the children, which we computed above.\n    parallelRoutes: prefetchParallelRoutes,\n\n    navigatedAt,\n  }\n\n  return {\n    // Return a cloned copy of the router state with updated children.\n    route: patchRouterStateWithNewChildren(\n      newRouterState,\n      patchedRouterStateChildren\n    ),\n    node: newCacheNode,\n    dynamicRequestTree: needsDynamicRequest\n      ? patchRouterStateWithNewChildren(\n          newRouterState,\n          dynamicRequestTreeChildren\n        )\n      : null,\n    children: taskChildren,\n  }\n}\n\nfunction beginRenderingNewRouteTree(\n  navigatedAt: number,\n  oldRouterState: FlightRouterState | void,\n  newRouterState: FlightRouterState,\n  existingCacheNode: CacheNode | void,\n  didFindRootLayout: boolean,\n  prefetchData: CacheNodeSeedData | null,\n  possiblyPartialPrefetchHead: HeadData | null,\n  isPrefetchHeadPartial: boolean,\n  segmentPath: FlightSegmentPath,\n  scrollableSegmentsResult: Array<FlightSegmentPath>\n): Task {\n  if (!didFindRootLayout) {\n    // The route tree changed before we reached a layout. (The highest-level\n    // layout in a route tree is referred to as the \"root\" layout.) This could\n    // mean that we're navigating between two different root layouts. When this\n    // happens, we perform a full-page (MPA-style) navigation.\n    //\n    // However, the algorithm for deciding where to start rendering a route\n    // (i.e. the one performed in order to reach this function) is stricter\n    // than the one used to detect a change in the root layout. So just because\n    // we're re-rendering a segment outside of the root layout does not mean we\n    // should trigger a full-page navigation.\n    //\n    // Specifically, we handle dynamic parameters differently: two segments are\n    // considered the same even if their parameter values are different.\n    //\n    // Refer to isNavigatingToNewRootLayout for details.\n    //\n    // Note that we only have to perform this extra traversal if we didn't\n    // already discover a root layout in the part of the tree that is unchanged.\n    // In the common case, this branch is skipped completely.\n    if (\n      oldRouterState === undefined ||\n      isNavigatingToNewRootLayout(oldRouterState, newRouterState)\n    ) {\n      // The root layout changed. Perform a full-page navigation.\n      return MPA_NAVIGATION_TASK\n    }\n  }\n  return createCacheNodeOnNavigation(\n    navigatedAt,\n    newRouterState,\n    existingCacheNode,\n    prefetchData,\n    possiblyPartialPrefetchHead,\n    isPrefetchHeadPartial,\n    segmentPath,\n    scrollableSegmentsResult\n  )\n}\n\nfunction createCacheNodeOnNavigation(\n  navigatedAt: number,\n  routerState: FlightRouterState,\n  existingCacheNode: CacheNode | void,\n  prefetchData: CacheNodeSeedData | null,\n  possiblyPartialPrefetchHead: HeadData | null,\n  isPrefetchHeadPartial: boolean,\n  segmentPath: FlightSegmentPath,\n  scrollableSegmentsResult: Array<FlightSegmentPath>\n): SPANavigationTask {\n  // Same traversal as updateCacheNodeNavigation, but we switch to this path\n  // once we reach the part of the tree that was not in the previous route. We\n  // don't need to diff against the old tree, we just need to create a new one.\n\n  // The head is assigned to every leaf segment delivered by the server. Based\n  // on corresponding logic in fill-lazy-items-till-leaf-with-head.ts\n  const routerStateChildren = routerState[1]\n  const isLeafSegment = Object.keys(routerStateChildren).length === 0\n\n  // Even we're rendering inside the \"new\" part of the target tree, we may have\n  // a locally cached segment that we can reuse. This may come from either 1)\n  // the CacheNode tree, which lives in React state and is populated by previous\n  // navigations; or 2) the prefetch cache, which is a separate cache that is\n  // populated by prefetches.\n  let rsc: React.ReactNode\n  let loading: LoadingModuleData | Promise<LoadingModuleData>\n  let head: HeadData | null\n  let cacheNodeNavigatedAt: number\n  if (\n    existingCacheNode !== undefined &&\n    // DYNAMIC_STALETIME_MS defaults to 0, but it can be increased using\n    // the experimental.staleTimes.dynamic config. When set, we'll avoid\n    // refetching dynamic data if it was fetched within the given threshold.\n    existingCacheNode.navigatedAt + DYNAMIC_STALETIME_MS > navigatedAt\n  ) {\n    // We have an existing CacheNode for this segment, and it's not stale. We\n    // should reuse it rather than request a new one.\n    rsc = existingCacheNode.rsc\n    loading = existingCacheNode.loading\n    head = existingCacheNode.head\n\n    // Don't update the navigatedAt timestamp, since we're reusing stale data.\n    cacheNodeNavigatedAt = existingCacheNode.navigatedAt\n  } else if (prefetchData !== null) {\n    // There's no existing CacheNode for this segment, but we do have prefetch\n    // data. If the prefetch data is fully static (i.e. does not contain any\n    // dynamic holes), we don't need to request it from the server.\n    rsc = prefetchData[0]\n    loading = prefetchData[2]\n    head = isLeafSegment ? possiblyPartialPrefetchHead : null\n    // Even though we're accessing the data from the prefetch cache, this is\n    // conceptually a new segment, not a reused one. So we should update the\n    // navigatedAt timestamp.\n    cacheNodeNavigatedAt = navigatedAt\n    const isPrefetchRscPartial = prefetchData[3]\n    if (\n      // Check if the segment data is partial\n      isPrefetchRscPartial ||\n      // Check if the head is partial (only relevant if this is a leaf segment)\n      (isPrefetchHeadPartial && isLeafSegment)\n    ) {\n      // We only have partial data from this segment. Like missing segments, we\n      // must request the full data from the server.\n      return spawnPendingTask(\n        navigatedAt,\n        routerState,\n        prefetchData,\n        possiblyPartialPrefetchHead,\n        isPrefetchHeadPartial,\n        segmentPath,\n        scrollableSegmentsResult\n      )\n    } else {\n      // The prefetch data is fully static, so we can omit it from the\n      // navigation request.\n    }\n  } else {\n    // There's no prefetch for this segment. Everything from this point will be\n    // requested from the server, even if there are static children below it.\n    // Create a terminal task node that will later be fulfilled by\n    // server response.\n    return spawnPendingTask(\n      navigatedAt,\n      routerState,\n      null,\n      possiblyPartialPrefetchHead,\n      isPrefetchHeadPartial,\n      segmentPath,\n      scrollableSegmentsResult\n    )\n  }\n\n  // We already have a full segment we can render, so we don't need to request a\n  // new one from the server. Keep traversing down the tree until we reach\n  // something that requires a dynamic request.\n  const prefetchDataChildren = prefetchData !== null ? prefetchData[1] : null\n  const taskChildren = new Map()\n  const existingCacheNodeChildren =\n    existingCacheNode !== undefined ? existingCacheNode.parallelRoutes : null\n  const cacheNodeChildren = new Map(existingCacheNodeChildren)\n  let dynamicRequestTreeChildren: {\n    [parallelRouteKey: string]: FlightRouterState\n  } = {}\n  let needsDynamicRequest = false\n  if (isLeafSegment) {\n    // The segment path of every leaf segment (i.e. page) is collected into\n    // a result array. This is used by the LayoutRouter to scroll to ensure that\n    // new pages are visible after a navigation.\n    // TODO: We should use a string to represent the segment path instead of\n    // an array. We already use a string representation for the path when\n    // accessing the Segment Cache, so we can use the same one.\n    scrollableSegmentsResult.push(segmentPath)\n  } else {\n    for (let parallelRouteKey in routerStateChildren) {\n      const routerStateChild: FlightRouterState =\n        routerStateChildren[parallelRouteKey]\n      const prefetchDataChild: CacheNodeSeedData | void | null =\n        prefetchDataChildren !== null\n          ? prefetchDataChildren[parallelRouteKey]\n          : null\n      const existingSegmentMapChild =\n        existingCacheNodeChildren !== null\n          ? existingCacheNodeChildren.get(parallelRouteKey)\n          : undefined\n      const segmentChild = routerStateChild[0]\n      const segmentPathChild = segmentPath.concat([\n        parallelRouteKey,\n        segmentChild,\n      ])\n      const segmentKeyChild = createRouterCacheKey(segmentChild)\n\n      const existingCacheNodeChild =\n        existingSegmentMapChild !== undefined\n          ? existingSegmentMapChild.get(segmentKeyChild)\n          : undefined\n\n      const taskChild = createCacheNodeOnNavigation(\n        navigatedAt,\n        routerStateChild,\n        existingCacheNodeChild,\n        prefetchDataChild,\n        possiblyPartialPrefetchHead,\n        isPrefetchHeadPartial,\n        segmentPathChild,\n        scrollableSegmentsResult\n      )\n      taskChildren.set(parallelRouteKey, taskChild)\n      const dynamicRequestTreeChild = taskChild.dynamicRequestTree\n      if (dynamicRequestTreeChild !== null) {\n        // Something in the child tree is dynamic.\n        needsDynamicRequest = true\n        dynamicRequestTreeChildren[parallelRouteKey] = dynamicRequestTreeChild\n      } else {\n        dynamicRequestTreeChildren[parallelRouteKey] = routerStateChild\n      }\n      const newCacheNodeChild = taskChild.node\n      if (newCacheNodeChild !== null) {\n        const newSegmentMapChild: ChildSegmentMap = new Map()\n        newSegmentMapChild.set(segmentKeyChild, newCacheNodeChild)\n        cacheNodeChildren.set(parallelRouteKey, newSegmentMapChild)\n      }\n    }\n  }\n\n  return {\n    // Since we're inside a new route tree, unlike the\n    // `updateCacheNodeOnNavigation` path, the router state on the children\n    // tasks is always the same as the router state we pass in. So we don't need\n    // to clone/modify it.\n    route: routerState,\n    node: {\n      lazyData: null,\n      // Since this segment is already full, we don't need to use the\n      // `prefetchRsc` field.\n      rsc,\n      prefetchRsc: null,\n      head,\n      prefetchHead: null,\n      loading,\n      parallelRoutes: cacheNodeChildren,\n      navigatedAt: cacheNodeNavigatedAt,\n    },\n    dynamicRequestTree: needsDynamicRequest\n      ? patchRouterStateWithNewChildren(routerState, dynamicRequestTreeChildren)\n      : null,\n    children: taskChildren,\n  }\n}\n\nfunction patchRouterStateWithNewChildren(\n  baseRouterState: FlightRouterState,\n  newChildren: { [parallelRouteKey: string]: FlightRouterState }\n): FlightRouterState {\n  const clone: FlightRouterState = [baseRouterState[0], newChildren]\n  // Based on equivalent logic in apply-router-state-patch-to-tree, but should\n  // confirm whether we need to copy all of these fields. Not sure the server\n  // ever sends, e.g. the refetch marker.\n  if (2 in baseRouterState) {\n    clone[2] = baseRouterState[2]\n  }\n  if (3 in baseRouterState) {\n    clone[3] = baseRouterState[3]\n  }\n  if (4 in baseRouterState) {\n    clone[4] = baseRouterState[4]\n  }\n  return clone\n}\n\nfunction spawnPendingTask(\n  navigatedAt: number,\n  routerState: FlightRouterState,\n  prefetchData: CacheNodeSeedData | null,\n  prefetchHead: HeadData | null,\n  isPrefetchHeadPartial: boolean,\n  segmentPath: FlightSegmentPath,\n  scrollableSegmentsResult: Array<FlightSegmentPath>\n): SPANavigationTask {\n  // Create a task that will later be fulfilled by data from the server.\n\n  // Clone the prefetched route tree and the `refetch` marker to it. We'll send\n  // this to the server so it knows where to start rendering.\n  const dynamicRequestTree = patchRouterStateWithNewChildren(\n    routerState,\n    routerState[1]\n  )\n  dynamicRequestTree[3] = 'refetch'\n\n  const newTask: Task = {\n    route: routerState,\n\n    // Corresponds to the part of the route that will be rendered on the server.\n    node: createPendingCacheNode(\n      navigatedAt,\n      routerState,\n      prefetchData,\n      prefetchHead,\n      isPrefetchHeadPartial,\n      segmentPath,\n      scrollableSegmentsResult\n    ),\n    // Because this is non-null, and it gets propagated up through the parent\n    // tasks, the root task will know that it needs to perform a server request.\n    dynamicRequestTree,\n    children: null,\n  }\n  return newTask\n}\n\nfunction reuseActiveSegmentInDefaultSlot(\n  oldUrl: URL,\n  oldRouterState: FlightRouterState\n): Task {\n  // This is a \"default\" segment. These are never sent by the server during a\n  // soft navigation; instead, the client reuses whatever segment was already\n  // active in that slot on the previous route. This means if we later need to\n  // refresh the segment, it will have to be refetched from the previous route's\n  // URL. We store it in the Flight Router State.\n  //\n  // TODO: We also mark the segment with a \"refresh\" marker but I think we can\n  // get rid of that eventually by making sure we only add URLs to page segments\n  // that are reused. Then the presence of the URL alone is enough.\n  let reusedRouterState\n\n  const oldRefreshMarker = oldRouterState[3]\n  if (oldRefreshMarker === 'refresh') {\n    // This segment was already reused from an even older route. Keep its\n    // existing URL and refresh marker.\n    reusedRouterState = oldRouterState\n  } else {\n    // This segment was not previously reused, and it's not on the new route.\n    // So it must have been delivered in the old route.\n    reusedRouterState = patchRouterStateWithNewChildren(\n      oldRouterState,\n      oldRouterState[1]\n    )\n    reusedRouterState[2] = createHrefFromUrl(oldUrl)\n    reusedRouterState[3] = 'refresh'\n  }\n\n  return {\n    route: reusedRouterState,\n    node: null,\n    dynamicRequestTree: null,\n    children: null,\n  }\n}\n\n// Writes a dynamic server response into the tree created by\n// updateCacheNodeOnNavigation. All pending promises that were spawned by the\n// navigation will be resolved, either with dynamic data from the server, or\n// `null` to indicate that the data is missing.\n//\n// A `null` value will trigger a lazy fetch during render, which will then patch\n// up the tree using the same mechanism as the non-PPR implementation\n// (serverPatchReducer).\n//\n// Usually, the server will respond with exactly the subset of data that we're\n// waiting for  everything below the nearest shared layout. But technically,\n// the server can return anything it wants.\n//\n// This does _not_ create a new tree; it modifies the existing one in place.\n// Which means it must follow the Suspense rules of cache safety.\nexport function listenForDynamicRequest(\n  task: SPANavigationTask,\n  responsePromise: Promise<FetchServerResponseResult>\n) {\n  responsePromise.then(\n    (result: FetchServerResponseResult) => {\n      if (typeof result === 'string') {\n        // Happens when navigating to page in `pages` from `app`. We shouldn't\n        // get here because should have already handled this during\n        // the prefetch.\n        return\n      }\n      const { flightData, debugInfo } = result\n      for (const normalizedFlightData of flightData) {\n        const {\n          segmentPath,\n          tree: serverRouterState,\n          seedData: dynamicData,\n          head: dynamicHead,\n        } = normalizedFlightData\n\n        if (!dynamicData) {\n          // This shouldn't happen. PPR should always send back a response.\n          // However, `FlightDataPath` is a shared type and the pre-PPR handling of\n          // this might return null.\n          continue\n        }\n\n        writeDynamicDataIntoPendingTask(\n          task,\n          segmentPath,\n          serverRouterState,\n          dynamicData,\n          dynamicHead,\n          debugInfo\n        )\n      }\n\n      // Now that we've exhausted all the data we received from the server, if\n      // there are any remaining pending tasks in the tree, abort them now.\n      // If there's any missing data, it will trigger a lazy fetch.\n      abortTask(task, null, debugInfo)\n    },\n    (error: any) => {\n      // This will trigger an error during render\n      abortTask(task, error, null)\n    }\n  )\n}\n\nfunction writeDynamicDataIntoPendingTask(\n  rootTask: SPANavigationTask,\n  segmentPath: FlightSegmentPath,\n  serverRouterState: FlightRouterState,\n  dynamicData: CacheNodeSeedData,\n  dynamicHead: HeadData,\n  debugInfo: Array<any> | null\n) {\n  // The data sent by the server represents only a subtree of the app. We need\n  // to find the part of the task tree that matches the server response, and\n  // fulfill it using the dynamic data.\n  //\n  // segmentPath represents the parent path of subtree. It's a repeating pattern\n  // of parallel route key and segment:\n  //\n  //   [string, Segment, string, Segment, string, Segment, ...]\n  //\n  // Iterate through the path and finish any tasks that match this payload.\n  let task = rootTask\n  for (let i = 0; i < segmentPath.length; i += 2) {\n    const parallelRouteKey: string = segmentPath[i]\n    const segment: Segment = segmentPath[i + 1]\n    const taskChildren = task.children\n    if (taskChildren !== null) {\n      const taskChild = taskChildren.get(parallelRouteKey)\n      if (taskChild !== undefined) {\n        const taskSegment = taskChild.route[0]\n        if (matchSegment(segment, taskSegment)) {\n          // Found a match for this task. Keep traversing down the task tree.\n          task = taskChild\n          continue\n        }\n      }\n    }\n    // We didn't find a child task that matches the server data. Exit. We won't\n    // abort the task, though, because a different FlightDataPath may be able to\n    // fulfill it (see loop in listenForDynamicRequest). We only abort tasks\n    // once we've run out of data.\n    return\n  }\n\n  finishTaskUsingDynamicDataPayload(\n    task,\n    serverRouterState,\n    dynamicData,\n    dynamicHead,\n    debugInfo\n  )\n}\n\nfunction finishTaskUsingDynamicDataPayload(\n  task: SPANavigationTask,\n  serverRouterState: FlightRouterState,\n  dynamicData: CacheNodeSeedData,\n  dynamicHead: HeadData,\n  debugInfo: Array<any> | null\n) {\n  if (task.dynamicRequestTree === null) {\n    // Everything in this subtree is already complete. Bail out.\n    return\n  }\n\n  // dynamicData may represent a larger subtree than the task. Before we can\n  // finish the task, we need to line them up.\n  const taskChildren = task.children\n  const taskNode = task.node\n  if (taskChildren === null) {\n    // We've reached the leaf node of the pending task. The server data tree\n    // lines up the pending Cache Node tree. We can now switch to the\n    // normal algorithm.\n    if (taskNode !== null) {\n      finishPendingCacheNode(\n        taskNode,\n        task.route,\n        serverRouterState,\n        dynamicData,\n        dynamicHead,\n        debugInfo\n      )\n      // Set this to null to indicate that this task is now complete.\n      task.dynamicRequestTree = null\n    }\n    return\n  }\n  // The server returned more data than we need to finish the task. Skip over\n  // the extra segments until we reach the leaf task node.\n  const serverChildren = serverRouterState[1]\n  const dynamicDataChildren = dynamicData[1]\n\n  for (const parallelRouteKey in serverRouterState) {\n    const serverRouterStateChild: FlightRouterState =\n      serverChildren[parallelRouteKey]\n    const dynamicDataChild: CacheNodeSeedData | null | void =\n      dynamicDataChildren[parallelRouteKey]\n\n    const taskChild = taskChildren.get(parallelRouteKey)\n    if (taskChild !== undefined) {\n      const taskSegment = taskChild.route[0]\n      if (\n        matchSegment(serverRouterStateChild[0], taskSegment) &&\n        dynamicDataChild !== null &&\n        dynamicDataChild !== undefined\n      ) {\n        // Found a match for this task. Keep traversing down the task tree.\n        return finishTaskUsingDynamicDataPayload(\n          taskChild,\n          serverRouterStateChild,\n          dynamicDataChild,\n          dynamicHead,\n          debugInfo\n        )\n      }\n    }\n    // We didn't find a child task that matches the server data. We won't abort\n    // the task, though, because a different FlightDataPath may be able to\n    // fulfill it (see loop in listenForDynamicRequest). We only abort tasks\n    // once we've run out of data.\n  }\n}\n\nfunction createPendingCacheNode(\n  navigatedAt: number,\n  routerState: FlightRouterState,\n  prefetchData: CacheNodeSeedData | null,\n  prefetchHead: HeadData | null,\n  isPrefetchHeadPartial: boolean,\n  segmentPath: FlightSegmentPath,\n  scrollableSegmentsResult: Array<FlightSegmentPath>\n): ReadyCacheNode {\n  const routerStateChildren = routerState[1]\n  const prefetchDataChildren = prefetchData !== null ? prefetchData[1] : null\n\n  const parallelRoutes = new Map()\n  for (let parallelRouteKey in routerStateChildren) {\n    const routerStateChild: FlightRouterState =\n      routerStateChildren[parallelRouteKey]\n    const prefetchDataChild: CacheNodeSeedData | null | void =\n      prefetchDataChildren !== null\n        ? prefetchDataChildren[parallelRouteKey]\n        : null\n\n    const segmentChild = routerStateChild[0]\n    const segmentPathChild = segmentPath.concat([\n      parallelRouteKey,\n      segmentChild,\n    ])\n    const segmentKeyChild = createRouterCacheKey(segmentChild)\n\n    const newCacheNodeChild = createPendingCacheNode(\n      navigatedAt,\n      routerStateChild,\n      prefetchDataChild === undefined ? null : prefetchDataChild,\n      prefetchHead,\n      isPrefetchHeadPartial,\n      segmentPathChild,\n      scrollableSegmentsResult\n    )\n\n    const newSegmentMapChild: ChildSegmentMap = new Map()\n    newSegmentMapChild.set(segmentKeyChild, newCacheNodeChild)\n    parallelRoutes.set(parallelRouteKey, newSegmentMapChild)\n  }\n\n  // The head is assigned to every leaf segment delivered by the server. Based\n  // on corresponding logic in fill-lazy-items-till-leaf-with-head.ts\n  const isLeafSegment = parallelRoutes.size === 0\n\n  if (isLeafSegment) {\n    // The segment path of every leaf segment (i.e. page) is collected into\n    // a result array. This is used by the LayoutRouter to scroll to ensure that\n    // new pages are visible after a navigation.\n    // TODO: We should use a string to represent the segment path instead of\n    // an array. We already use a string representation for the path when\n    // accessing the Segment Cache, so we can use the same one.\n    scrollableSegmentsResult.push(segmentPath)\n  }\n\n  const maybePrefetchRsc = prefetchData !== null ? prefetchData[0] : null\n  return {\n    lazyData: null,\n    parallelRoutes: parallelRoutes,\n\n    prefetchRsc: maybePrefetchRsc !== undefined ? maybePrefetchRsc : null,\n    prefetchHead: isLeafSegment ? prefetchHead : [null, null],\n\n    // Create a deferred promise. This will be fulfilled once the dynamic\n    // response is received from the server.\n    rsc: createDeferredRsc() as React.ReactNode,\n    head: isLeafSegment ? (createDeferredRsc() as React.ReactNode) : null,\n\n    // TODO: Technically, a loading boundary could contain dynamic data. We must\n    // have separate `loading` and `prefetchLoading` fields to handle this, like\n    // we do for the segment data and head.\n    loading:\n      prefetchData !== null\n        ? (prefetchData[2] ?? null)\n        : // If we don't have a prefetch, then we don't know if there's a loading component.\n          // We'll fulfill it based on the dynamic response, just like `rsc` and `head`.\n          createDeferredRsc<LoadingModuleData>(),\n\n    navigatedAt,\n  }\n}\n\nfunction finishPendingCacheNode(\n  cacheNode: CacheNode,\n  taskState: FlightRouterState,\n  serverState: FlightRouterState,\n  dynamicData: CacheNodeSeedData,\n  dynamicHead: HeadData,\n  debugInfo: Array<any> | null\n): void {\n  // Writes a dynamic response into an existing Cache Node tree. This does _not_\n  // create a new tree, it updates the existing tree in-place. So it must follow\n  // the Suspense rules of cache safety  it can resolve pending promises, but\n  // it cannot overwrite existing data. It can add segments to the tree (because\n  // a missing segment will cause the layout router to suspend).\n  // but it cannot delete them.\n  //\n  // We must resolve every promise in the tree, or else it will suspend\n  // indefinitely. If we did not receive data for a segment, we will resolve its\n  // data promise to `null` to trigger a lazy fetch during render.\n  const taskStateChildren = taskState[1]\n  const serverStateChildren = serverState[1]\n  const dataChildren = dynamicData[1]\n\n  // The router state that we traverse the tree with (taskState) is the same one\n  // that we used to construct the pending Cache Node tree. That way we're sure\n  // to resolve all the pending promises.\n  const parallelRoutes = cacheNode.parallelRoutes\n  for (let parallelRouteKey in taskStateChildren) {\n    const taskStateChild: FlightRouterState =\n      taskStateChildren[parallelRouteKey]\n    const serverStateChild: FlightRouterState | void =\n      serverStateChildren[parallelRouteKey]\n    const dataChild: CacheNodeSeedData | null | void =\n      dataChildren[parallelRouteKey]\n\n    const segmentMapChild = parallelRoutes.get(parallelRouteKey)\n    const taskSegmentChild = taskStateChild[0]\n    const taskSegmentKeyChild = createRouterCacheKey(taskSegmentChild)\n\n    const cacheNodeChild =\n      segmentMapChild !== undefined\n        ? segmentMapChild.get(taskSegmentKeyChild)\n        : undefined\n\n    if (cacheNodeChild !== undefined) {\n      if (\n        serverStateChild !== undefined &&\n        matchSegment(taskSegmentChild, serverStateChild[0])\n      ) {\n        if (dataChild !== undefined && dataChild !== null) {\n          // This is the happy path. Recursively update all the children.\n          finishPendingCacheNode(\n            cacheNodeChild,\n            taskStateChild,\n            serverStateChild,\n            dataChild,\n            dynamicHead,\n            debugInfo\n          )\n        } else {\n          // The server never returned data for this segment. Trigger a lazy\n          // fetch during render. This shouldn't happen because the Route Tree\n          // and the Seed Data tree sent by the server should always be the same\n          // shape when part of the same server response.\n          abortPendingCacheNode(taskStateChild, cacheNodeChild, null, debugInfo)\n        }\n      } else {\n        // The server never returned data for this segment. Trigger a lazy\n        // fetch during render.\n        abortPendingCacheNode(taskStateChild, cacheNodeChild, null, debugInfo)\n      }\n    } else {\n      // The server response matches what was expected to receive, but there's\n      // no matching Cache Node in the task tree. This is a bug in the\n      // implementation because we should have created a node for every\n      // segment in the tree that's associated with this task.\n    }\n  }\n\n  // Use the dynamic data from the server to fulfill the deferred RSC promise\n  // on the Cache Node.\n  const rsc = cacheNode.rsc\n  const dynamicSegmentData = dynamicData[0]\n  if (rsc === null) {\n    // This is a lazy cache node. We can overwrite it. This is only safe\n    // because we know that the LayoutRouter suspends if `rsc` is `null`.\n    cacheNode.rsc = dynamicSegmentData\n  } else if (isDeferredRsc(rsc)) {\n    // This is a deferred RSC promise. We can fulfill it with the data we just\n    // received from the server. If it was already resolved by a different\n    // navigation, then this does nothing because we can't overwrite data.\n    rsc.resolve(dynamicSegmentData, debugInfo)\n  } else {\n    // This is not a deferred RSC promise, nor is it empty, so it must have\n    // been populated by a different navigation. We must not overwrite it.\n  }\n\n  // If we navigated without a prefetch, then `loading` will be a deferred promise too.\n  // Fulfill it using the dynamic response so that we can display the loading boundary.\n  const loading = cacheNode.loading\n  if (isDeferredRsc(loading)) {\n    const dynamicLoading = dynamicData[2]\n    loading.resolve(dynamicLoading, debugInfo)\n  }\n\n  // Check if this is a leaf segment. If so, it will have a `head` property with\n  // a pending promise that needs to be resolved with the dynamic head from\n  // the server.\n  const head = cacheNode.head\n  if (isDeferredRsc(head)) {\n    head.resolve(dynamicHead, debugInfo)\n  }\n}\n\nexport function abortTask(\n  task: SPANavigationTask,\n  error: any,\n  debugInfo: Array<any> | null\n): void {\n  const cacheNode = task.node\n  if (cacheNode === null) {\n    // This indicates the task is already complete.\n    return\n  }\n\n  const taskChildren = task.children\n  if (taskChildren === null) {\n    // Reached the leaf task node. This is the root of a pending cache\n    // node tree.\n    abortPendingCacheNode(task.route, cacheNode, error, debugInfo)\n  } else {\n    // This is an intermediate task node. Keep traversing until we reach a\n    // task node with no children. That will be the root of the cache node tree\n    // that needs to be resolved.\n    for (const taskChild of taskChildren.values()) {\n      abortTask(taskChild, error, debugInfo)\n    }\n  }\n\n  // Set this to null to indicate that this task is now complete.\n  task.dynamicRequestTree = null\n}\n\nfunction abortPendingCacheNode(\n  routerState: FlightRouterState,\n  cacheNode: CacheNode,\n  error: any,\n  debugInfo: Array<any> | null\n): void {\n  // For every pending segment in the tree, resolve its `rsc` promise to `null`\n  // to trigger a lazy fetch during render.\n  //\n  // Or, if an error object is provided, it will error instead.\n  const routerStateChildren = routerState[1]\n  const parallelRoutes = cacheNode.parallelRoutes\n  for (let parallelRouteKey in routerStateChildren) {\n    const routerStateChild: FlightRouterState =\n      routerStateChildren[parallelRouteKey]\n    const segmentMapChild = parallelRoutes.get(parallelRouteKey)\n    if (segmentMapChild === undefined) {\n      // This shouldn't happen because we're traversing the same tree that was\n      // used to construct the cache nodes in the first place.\n      continue\n    }\n    const segmentChild = routerStateChild[0]\n    const segmentKeyChild = createRouterCacheKey(segmentChild)\n    const cacheNodeChild = segmentMapChild.get(segmentKeyChild)\n    if (cacheNodeChild !== undefined) {\n      abortPendingCacheNode(routerStateChild, cacheNodeChild, error, debugInfo)\n    } else {\n      // This shouldn't happen because we're traversing the same tree that was\n      // used to construct the cache nodes in the first place.\n    }\n  }\n\n  const rsc = cacheNode.rsc\n  if (isDeferredRsc(rsc)) {\n    if (error === null) {\n      // This will trigger a lazy fetch during render.\n      rsc.resolve(null, debugInfo)\n    } else {\n      // This will trigger an error during rendering.\n      rsc.reject(error, debugInfo)\n    }\n  }\n\n  const loading = cacheNode.loading\n  if (isDeferredRsc(loading)) {\n    loading.resolve(null, debugInfo)\n  }\n\n  // Check if this is a leaf segment. If so, it will have a `head` property with\n  // a pending promise that needs to be resolved. If an error was provided, we\n  // will not resolve it with an error, since this is rendered at the root of\n  // the app. We want the segment to error, not the entire app.\n  const head = cacheNode.head\n  if (isDeferredRsc(head)) {\n    head.resolve(null, debugInfo)\n  }\n}\n\nexport function updateCacheNodeOnPopstateRestoration(\n  oldCacheNode: CacheNode,\n  routerState: FlightRouterState\n): ReadyCacheNode {\n  // A popstate navigation reads data from the local cache. It does not issue\n  // new network requests (unless the cache entries have been evicted). So, we\n  // update the cache to drop the prefetch data for any segment whose dynamic\n  // data was already received. This prevents an unnecessary flash back to PPR\n  // state during a back/forward navigation.\n  //\n  // This function clones the entire cache node tree and sets the `prefetchRsc`\n  // field to `null` to prevent it from being rendered. We can't mutate the node\n  // in place because this is a concurrent data structure.\n\n  const routerStateChildren = routerState[1]\n  const oldParallelRoutes = oldCacheNode.parallelRoutes\n  const newParallelRoutes = new Map(oldParallelRoutes)\n  for (let parallelRouteKey in routerStateChildren) {\n    const routerStateChild: FlightRouterState =\n      routerStateChildren[parallelRouteKey]\n    const segmentChild = routerStateChild[0]\n    const segmentKeyChild = createRouterCacheKey(segmentChild)\n    const oldSegmentMapChild = oldParallelRoutes.get(parallelRouteKey)\n    if (oldSegmentMapChild !== undefined) {\n      const oldCacheNodeChild = oldSegmentMapChild.get(segmentKeyChild)\n      if (oldCacheNodeChild !== undefined) {\n        const newCacheNodeChild = updateCacheNodeOnPopstateRestoration(\n          oldCacheNodeChild,\n          routerStateChild\n        )\n        const newSegmentMapChild = new Map(oldSegmentMapChild)\n        newSegmentMapChild.set(segmentKeyChild, newCacheNodeChild)\n        newParallelRoutes.set(parallelRouteKey, newSegmentMapChild)\n      }\n    }\n  }\n\n  // Only show prefetched data if the dynamic data is still pending.\n  //\n  // Tehnically, what we're actually checking is whether the dynamic network\n  // response was received. But since it's a streaming response, this does not\n  // mean that all the dynamic data has fully streamed in. It just means that\n  // _some_ of the dynamic data was received. But as a heuristic, we assume that\n  // the rest dynamic data will stream in quickly, so it's still better to skip\n  // the prefetch state.\n  const rsc = oldCacheNode.rsc\n  const shouldUsePrefetch = isDeferredRsc(rsc) && rsc.status === 'pending'\n\n  return {\n    lazyData: null,\n    rsc,\n    head: oldCacheNode.head,\n\n    prefetchHead: shouldUsePrefetch ? oldCacheNode.prefetchHead : [null, null],\n    prefetchRsc: shouldUsePrefetch ? oldCacheNode.prefetchRsc : null,\n    loading: oldCacheNode.loading,\n\n    // These are the cloned children we computed above\n    parallelRoutes: newParallelRoutes,\n\n    navigatedAt: oldCacheNode.navigatedAt,\n  }\n}\n\nconst DEFERRED = Symbol()\n\ntype PendingDeferredRsc<T> = Promise<T> & {\n  status: 'pending'\n  resolve: (value: T, debugInfo: Array<any> | null) => void\n  reject: (error: any, debugInfo: Array<any> | null) => void\n  tag: Symbol\n  _debugInfo: Array<any>\n}\n\ntype FulfilledDeferredRsc<T> = Promise<T> & {\n  status: 'fulfilled'\n  value: T\n  resolve: (value: T, debugInfo: Array<any> | null) => void\n  reject: (error: any, debugInfo: Array<any> | null) => void\n  tag: Symbol\n  _debugInfo: Array<any>\n}\n\ntype RejectedDeferredRsc<T> = Promise<T> & {\n  status: 'rejected'\n  reason: any\n  resolve: (value: T, debugInfo: Array<any> | null) => void\n  reject: (error: any, debugInfo: Array<any> | null) => void\n  tag: Symbol\n  _debugInfo: Array<any>\n}\n\ntype DeferredRsc<T extends React.ReactNode = React.ReactNode> =\n  | PendingDeferredRsc<T>\n  | FulfilledDeferredRsc<T>\n  | RejectedDeferredRsc<T>\n\n// This type exists to distinguish a DeferredRsc from a Flight promise. It's a\n// compromise to avoid adding an extra field on every Cache Node, which would be\n// awkward because the pre-PPR parts of codebase would need to account for it,\n// too. We can remove it once type Cache Node type is more settled.\nfunction isDeferredRsc(value: any): value is DeferredRsc {\n  return value && typeof value === 'object' && value.tag === DEFERRED\n}\n\nfunction createDeferredRsc<\n  T extends React.ReactNode = React.ReactNode,\n>(): PendingDeferredRsc<T> {\n  // Create an unresolved promise that represents data derived from a Flight\n  // response. The promise will be resolved later as soon as we start receiving\n  // data from the server, i.e. as soon as the Flight client decodes and returns\n  // the top-level response object.\n\n  // The `_debugInfo` field contains profiling information. Promises that are\n  // created by Flight already have this info added by React; for any derived\n  // promise created by the router, we need to transfer the Flight debug info\n  // onto the derived promise.\n  //\n  // The debug info represents the latency between the start of the navigation\n  // and the start of rendering. (It does not represent the time it takes for\n  // whole stream to finish.)\n  const debugInfo: Array<any> = []\n\n  let resolve: any\n  let reject: any\n  const pendingRsc = new Promise<T>((res, rej) => {\n    resolve = res\n    reject = rej\n  }) as PendingDeferredRsc<T>\n  pendingRsc.status = 'pending'\n  pendingRsc.resolve = (value: T, responseDebugInfo: Array<any> | null) => {\n    if (pendingRsc.status === 'pending') {\n      const fulfilledRsc: FulfilledDeferredRsc<T> = pendingRsc as any\n      fulfilledRsc.status = 'fulfilled'\n      fulfilledRsc.value = value\n      if (responseDebugInfo !== null) {\n        // Transfer the debug info to the derived promise.\n        debugInfo.push.apply(debugInfo, responseDebugInfo)\n      }\n      resolve(value)\n    }\n  }\n  pendingRsc.reject = (error: any, responseDebugInfo: Array<any> | null) => {\n    if (pendingRsc.status === 'pending') {\n      const rejectedRsc: RejectedDeferredRsc<T> = pendingRsc as any\n      rejectedRsc.status = 'rejected'\n      rejectedRsc.reason = error\n      if (responseDebugInfo !== null) {\n        // Transfer the debug info to the derived promise.\n        debugInfo.push.apply(debugInfo, responseDebugInfo)\n      }\n      reject(error)\n    }\n  }\n  pendingRsc.tag = DEFERRED\n  pendingRsc._debugInfo = debugInfo\n\n  return pendingRsc\n}\n","import type {\n  CacheNodeSeedData,\n  FlightRouterState,\n  FlightSegmentPath,\n} from '../../../shared/lib/app-router-types'\nimport type { CacheNode } from '../../../shared/lib/app-router-types'\nimport type {\n  HeadData,\n  LoadingModuleData,\n} from '../../../shared/lib/app-router-types'\nimport type { NormalizedFlightData } from '../../flight-data-helpers'\nimport { fetchServerResponse } from '../router-reducer/fetch-server-response'\nimport {\n  startPPRNavigation,\n  listenForDynamicRequest,\n  type Task as PPRNavigationTask,\n} from '../router-reducer/ppr-navigations'\nimport { createHrefFromUrl } from '../router-reducer/create-href-from-url'\nimport {\n  EntryStatus,\n  readRouteCacheEntry,\n  readSegmentCacheEntry,\n  waitForSegmentCacheEntry,\n  requestOptimisticRouteCacheEntry,\n  type RouteTree,\n  type FulfilledRouteCacheEntry,\n} from './cache'\nimport { createCacheKey } from './cache-key'\nimport { addSearchParamsIfPageSegment } from '../../../shared/lib/segment'\nimport { NavigationResultTag } from './types'\n\ntype MPANavigationResult = {\n  tag: NavigationResultTag.MPA\n  data: string\n}\n\ntype NoOpNavigationResult = {\n  tag: NavigationResultTag.NoOp\n  data: {\n    canonicalUrl: string\n    shouldScroll: boolean\n  }\n}\n\ntype SuccessfulNavigationResult = {\n  tag: NavigationResultTag.Success\n  data: {\n    flightRouterState: FlightRouterState\n    cacheNode: CacheNode\n    canonicalUrl: string\n    renderedSearch: string\n    scrollableSegments: Array<FlightSegmentPath>\n    shouldScroll: boolean\n    hash: string\n  }\n}\n\ntype AsyncNavigationResult = {\n  tag: NavigationResultTag.Async\n  data: Promise<\n    MPANavigationResult | NoOpNavigationResult | SuccessfulNavigationResult\n  >\n}\n\nexport type NavigationResult =\n  | MPANavigationResult\n  | SuccessfulNavigationResult\n  | NoOpNavigationResult\n  | AsyncNavigationResult\n\n/**\n * Navigate to a new URL, using the Segment Cache to construct a response.\n *\n * To allow for synchronous navigations whenever possible, this is not an async\n * function. It returns a promise only if there's no matching prefetch in\n * the cache. Otherwise it returns an immediate result and uses Suspense/RSC to\n * stream in any missing data.\n */\nexport function navigate(\n  url: URL,\n  currentUrl: URL,\n  currentCacheNode: CacheNode,\n  currentFlightRouterState: FlightRouterState,\n  nextUrl: string | null,\n  shouldScroll: boolean,\n  accumulation: { collectedDebugInfo?: Array<unknown> }\n): NavigationResult {\n  const now = Date.now()\n  const href = url.href\n\n  // We special case navigations to the exact same URL as the current location.\n  // It's a common UI pattern for apps to refresh when you click a link to the\n  // current page. So when this happens, we refresh the dynamic data in the page\n  // segments.\n  //\n  // Note that this does not apply if the any part of the hash or search query\n  // has changed. This might feel a bit weird but it makes more sense when you\n  // consider that the way to trigger this behavior is to click the same link\n  // multiple times.\n  //\n  // TODO: We should probably refresh the *entire* route when this case occurs,\n  // not just the page segments. Essentially treating it the same as a refresh()\n  // triggered by an action, which is the more explicit way of modeling the UI\n  // pattern described above.\n  //\n  // Also note that this only refreshes the dynamic data, not static/ cached\n  // data. If the page segment is fully static and prefetched, the request is\n  // skipped. (This is also how refresh() works.)\n  const isSamePageNavigation =\n    // TODO: This is not the only place we read from the location, but we should\n    // consider storing the current URL in the router state instead of reading\n    // from the location object. In practice I don't think this matters much\n    // since we keep them in sync anyway, but having two sources of truth can\n    // lead to subtle bugs and race conditions.\n    href === window.location.href\n\n  const cacheKey = createCacheKey(href, nextUrl)\n  const route = readRouteCacheEntry(now, cacheKey)\n  if (route !== null && route.status === EntryStatus.Fulfilled) {\n    // We have a matching prefetch.\n    const snapshot = readRenderSnapshotFromCache(now, route, route.tree)\n    const prefetchFlightRouterState = snapshot.flightRouterState\n    const prefetchSeedData = snapshot.seedData\n    const headSnapshot = readHeadSnapshotFromCache(now, route)\n    const prefetchHead = headSnapshot.rsc\n    const isPrefetchHeadPartial = headSnapshot.isPartial\n    // TODO: The \"canonicalUrl\" stored in the cache doesn't include the hash,\n    // because hash entries do not vary by hash fragment. However, the one\n    // we set in the router state *does* include the hash, and it's used to\n    // sync with the actual browser location. To make this less of a refactor\n    // hazard, we should always track the hash separately from the rest of\n    // the URL.\n    const newCanonicalUrl = route.canonicalUrl + url.hash\n    const renderedSearch = route.renderedSearch\n    return navigateUsingPrefetchedRouteTree(\n      now,\n      url,\n      currentUrl,\n      nextUrl,\n      isSamePageNavigation,\n      currentCacheNode,\n      currentFlightRouterState,\n      prefetchFlightRouterState,\n      prefetchSeedData,\n      prefetchHead,\n      isPrefetchHeadPartial,\n      newCanonicalUrl,\n      renderedSearch,\n      shouldScroll,\n      url.hash\n    )\n  }\n\n  // There was no matching route tree in the cache. Let's see if we can\n  // construct an \"optimistic\" route tree.\n  //\n  // Do not construct an optimistic route tree if there was a cache hit, but\n  // the entry has a rejected status, since it may have been rejected due to a\n  // rewrite or redirect based on the search params.\n  //\n  // TODO: There are multiple reasons a prefetch might be rejected; we should\n  // track them explicitly and choose what to do here based on that.\n  if (route === null || route.status !== EntryStatus.Rejected) {\n    const optimisticRoute = requestOptimisticRouteCacheEntry(now, url, nextUrl)\n    if (optimisticRoute !== null) {\n      // We have an optimistic route tree. Proceed with the normal flow.\n      const snapshot = readRenderSnapshotFromCache(\n        now,\n        optimisticRoute,\n        optimisticRoute.tree\n      )\n      const prefetchFlightRouterState = snapshot.flightRouterState\n      const prefetchSeedData = snapshot.seedData\n      const headSnapshot = readHeadSnapshotFromCache(now, optimisticRoute)\n      const prefetchHead = headSnapshot.rsc\n      const isPrefetchHeadPartial = headSnapshot.isPartial\n      const newCanonicalUrl = optimisticRoute.canonicalUrl + url.hash\n      const newRenderedSearch = optimisticRoute.renderedSearch\n      return navigateUsingPrefetchedRouteTree(\n        now,\n        url,\n        currentUrl,\n        nextUrl,\n        isSamePageNavigation,\n        currentCacheNode,\n        currentFlightRouterState,\n        prefetchFlightRouterState,\n        prefetchSeedData,\n        prefetchHead,\n        isPrefetchHeadPartial,\n        newCanonicalUrl,\n        newRenderedSearch,\n        shouldScroll,\n        url.hash\n      )\n    }\n  }\n\n  // There's no matching prefetch for this route in the cache.\n  let collectedDebugInfo = accumulation.collectedDebugInfo ?? []\n  if (accumulation.collectedDebugInfo === undefined) {\n    collectedDebugInfo = accumulation.collectedDebugInfo = []\n  }\n  return {\n    tag: NavigationResultTag.Async,\n    data: navigateDynamicallyWithNoPrefetch(\n      now,\n      url,\n      currentUrl,\n      nextUrl,\n      isSamePageNavigation,\n      currentCacheNode,\n      currentFlightRouterState,\n      shouldScroll,\n      url.hash,\n      collectedDebugInfo\n    ),\n  }\n}\n\nfunction navigateUsingPrefetchedRouteTree(\n  now: number,\n  url: URL,\n  currentUrl: URL,\n  nextUrl: string | null,\n  isSamePageNavigation: boolean,\n  currentCacheNode: CacheNode,\n  currentFlightRouterState: FlightRouterState,\n  prefetchFlightRouterState: FlightRouterState,\n  prefetchSeedData: CacheNodeSeedData | null,\n  prefetchHead: HeadData | null,\n  isPrefetchHeadPartial: boolean,\n  canonicalUrl: string,\n  renderedSearch: string,\n  shouldScroll: boolean,\n  hash: string\n): SuccessfulNavigationResult | NoOpNavigationResult | MPANavigationResult {\n  // Recursively construct a prefetch tree by reading from the Segment Cache. To\n  // maintain compatibility, we output the same data structures as the old\n  // prefetching implementation: FlightRouterState and CacheNodeSeedData.\n  // TODO: Eventually updateCacheNodeOnNavigation (or the equivalent) should\n  // read from the Segment Cache directly. It's only structured this way for now\n  // so we can share code with the old prefetching implementation.\n  const scrollableSegments: Array<FlightSegmentPath> = []\n  const task = startPPRNavigation(\n    now,\n    currentUrl,\n    currentCacheNode,\n    currentFlightRouterState,\n    prefetchFlightRouterState,\n    prefetchSeedData,\n    prefetchHead,\n    isPrefetchHeadPartial,\n    isSamePageNavigation,\n    scrollableSegments\n  )\n  if (task !== null) {\n    const dynamicRequestTree = task.dynamicRequestTree\n    if (dynamicRequestTree !== null) {\n      const promiseForDynamicServerResponse = fetchServerResponse(\n        new URL(canonicalUrl, url.origin),\n        {\n          flightRouterState: dynamicRequestTree,\n          nextUrl,\n        }\n      )\n      listenForDynamicRequest(task, promiseForDynamicServerResponse)\n    } else {\n      // The prefetched tree does not contain dynamic holes  it's\n      // fully static. We can skip the dynamic request.\n    }\n    return navigationTaskToResult(\n      task,\n      currentCacheNode,\n      canonicalUrl,\n      renderedSearch,\n      scrollableSegments,\n      shouldScroll,\n      hash\n    )\n  }\n  // The server sent back an empty tree patch. There's nothing to update, except\n  // possibly the URL.\n  return {\n    tag: NavigationResultTag.NoOp,\n    data: {\n      canonicalUrl,\n      shouldScroll,\n    },\n  }\n}\n\nfunction navigationTaskToResult(\n  task: PPRNavigationTask,\n  currentCacheNode: CacheNode,\n  canonicalUrl: string,\n  renderedSearch: string,\n  scrollableSegments: Array<FlightSegmentPath>,\n  shouldScroll: boolean,\n  hash: string\n): SuccessfulNavigationResult | MPANavigationResult {\n  const flightRouterState = task.route\n  if (flightRouterState === null) {\n    // When no router state is provided, it signals that we should perform an\n    // MPA navigation.\n    return {\n      tag: NavigationResultTag.MPA,\n      data: canonicalUrl,\n    }\n  }\n  const newCacheNode = task.node\n  return {\n    tag: NavigationResultTag.Success,\n    data: {\n      flightRouterState,\n      cacheNode: newCacheNode !== null ? newCacheNode : currentCacheNode,\n      canonicalUrl,\n      renderedSearch,\n      scrollableSegments,\n      shouldScroll,\n      hash,\n    },\n  }\n}\n\nfunction readRenderSnapshotFromCache(\n  now: number,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree\n): { flightRouterState: FlightRouterState; seedData: CacheNodeSeedData } {\n  let childRouterStates: { [parallelRouteKey: string]: FlightRouterState } = {}\n  let childSeedDatas: {\n    [parallelRouteKey: string]: CacheNodeSeedData | null\n  } = {}\n  const slots = tree.slots\n  if (slots !== null) {\n    for (const parallelRouteKey in slots) {\n      const childTree = slots[parallelRouteKey]\n      const childResult = readRenderSnapshotFromCache(now, route, childTree)\n      childRouterStates[parallelRouteKey] = childResult.flightRouterState\n      childSeedDatas[parallelRouteKey] = childResult.seedData\n    }\n  }\n\n  let rsc: React.ReactNode | null = null\n  let loading: LoadingModuleData | Promise<LoadingModuleData> = null\n  let isPartial: boolean = true\n\n  const segmentEntry = readSegmentCacheEntry(now, tree.varyPath)\n  if (segmentEntry !== null) {\n    switch (segmentEntry.status) {\n      case EntryStatus.Fulfilled: {\n        // Happy path: a cache hit\n        rsc = segmentEntry.rsc\n        loading = segmentEntry.loading\n        isPartial = segmentEntry.isPartial\n        break\n      }\n      case EntryStatus.Pending: {\n        // We haven't received data for this segment yet, but there's already\n        // an in-progress request. Since it's extremely likely to arrive\n        // before the dynamic data response, we might as well use it.\n        const promiseForFulfilledEntry = waitForSegmentCacheEntry(segmentEntry)\n        rsc = promiseForFulfilledEntry.then((entry) =>\n          entry !== null ? entry.rsc : null\n        )\n        loading = promiseForFulfilledEntry.then((entry) =>\n          entry !== null ? entry.loading : null\n        )\n        // Since we don't know yet whether the segment is partial or fully\n        // static, we must assume it's partial; we can't skip the\n        // dynamic request.\n        isPartial = true\n        break\n      }\n      case EntryStatus.Empty:\n      case EntryStatus.Rejected:\n        break\n      default:\n        segmentEntry satisfies never\n    }\n  }\n\n  // The navigation implementation expects the search params to be\n  // included in the segment. However, the Segment Cache tracks search\n  // params separately from the rest of the segment key. So we need to\n  // add them back here.\n  //\n  // See corresponding comment in convertFlightRouterStateToTree.\n  //\n  // TODO: What we should do instead is update the navigation diffing\n  // logic to compare search params explicitly. This is a temporary\n  // solution until more of the Segment Cache implementation has settled.\n  const segment = addSearchParamsIfPageSegment(\n    tree.segment,\n    Object.fromEntries(new URLSearchParams(route.renderedSearch))\n  )\n\n  // We don't need this information in a render snapshot, so this can just be a placeholder.\n  const hasRuntimePrefetch = false\n\n  return {\n    flightRouterState: [\n      segment,\n      childRouterStates,\n      null,\n      null,\n      tree.isRootLayout,\n    ],\n    seedData: [rsc, childSeedDatas, loading, isPartial, hasRuntimePrefetch],\n  }\n}\n\nfunction readHeadSnapshotFromCache(\n  now: number,\n  route: FulfilledRouteCacheEntry\n): { rsc: HeadData; isPartial: boolean } {\n  // Same as readRenderSnapshotFromCache, but for the head\n  let rsc: React.ReactNode | null = null\n  let isPartial: boolean = true\n  const segmentEntry = readSegmentCacheEntry(now, route.metadata.varyPath)\n  if (segmentEntry !== null) {\n    switch (segmentEntry.status) {\n      case EntryStatus.Fulfilled: {\n        rsc = segmentEntry.rsc\n        isPartial = segmentEntry.isPartial\n        break\n      }\n      case EntryStatus.Pending: {\n        const promiseForFulfilledEntry = waitForSegmentCacheEntry(segmentEntry)\n        rsc = promiseForFulfilledEntry.then((entry) =>\n          entry !== null ? entry.rsc : null\n        )\n        isPartial = true\n        break\n      }\n      case EntryStatus.Empty:\n      case EntryStatus.Rejected:\n        break\n      default:\n        segmentEntry satisfies never\n    }\n  }\n  return { rsc, isPartial }\n}\n\nasync function navigateDynamicallyWithNoPrefetch(\n  now: number,\n  url: URL,\n  currentUrl: URL,\n  nextUrl: string | null,\n  isSamePageNavigation: boolean,\n  currentCacheNode: CacheNode,\n  currentFlightRouterState: FlightRouterState,\n  shouldScroll: boolean,\n  hash: string,\n  collectedDebugInfo: Array<unknown>\n): Promise<\n  MPANavigationResult | SuccessfulNavigationResult | NoOpNavigationResult\n> {\n  // Runs when a navigation happens but there's no cached prefetch we can use.\n  // Don't bother to wait for a prefetch response; go straight to a full\n  // navigation that contains both static and dynamic data in a single stream.\n  // (This is unlike the old navigation implementation, which instead blocks\n  // the dynamic request until a prefetch request is received.)\n  //\n  // To avoid duplication of logic, we're going to pretend that the tree\n  // returned by the dynamic request is, in fact, a prefetch tree. Then we can\n  // use the same server response to write the actual data into the CacheNode\n  // tree. So it's the same flow as the \"happy path\" (prefetch, then\n  // navigation), except we use a single server response for both stages.\n\n  const promiseForDynamicServerResponse = fetchServerResponse(url, {\n    flightRouterState: currentFlightRouterState,\n    nextUrl,\n  })\n  const result = await promiseForDynamicServerResponse\n  if (typeof result === 'string') {\n    // This is an MPA navigation.\n    const newUrl = result\n    return {\n      tag: NavigationResultTag.MPA,\n      data: newUrl,\n    }\n  }\n\n  const {\n    flightData,\n    canonicalUrl,\n    renderedSearch,\n    debugInfo: debugInfoFromResponse,\n  } = result\n  if (debugInfoFromResponse !== null) {\n    collectedDebugInfo.push(...debugInfoFromResponse)\n  }\n\n  // Since the response format of dynamic requests and prefetches is slightly\n  // different, we'll need to massage the data a bit. Create FlightRouterState\n  // tree that simulates what we'd receive as the result of a prefetch.\n  const prefetchFlightRouterState = simulatePrefetchTreeUsingDynamicTreePatch(\n    currentFlightRouterState,\n    flightData\n  )\n\n  // In our simulated prefetch payload, we pretend that there's no seed data\n  // nor a prefetch head.\n  const prefetchSeedData = null\n  const prefetchHead = null\n  const isPrefetchHeadPartial = true\n\n  // Now we proceed exactly as we would for normal navigation.\n  const scrollableSegments: Array<FlightSegmentPath> = []\n  const task = startPPRNavigation(\n    now,\n    currentUrl,\n    currentCacheNode,\n    currentFlightRouterState,\n    prefetchFlightRouterState,\n    prefetchSeedData,\n    prefetchHead,\n    isPrefetchHeadPartial,\n    isSamePageNavigation,\n    scrollableSegments\n  )\n  if (task !== null) {\n    // In this case, we've already sent the dynamic request, so we don't\n    // actually use the request tree created by `startPPRNavigation`,\n    // except to check if it contains dynamic holes.\n    //\n    // This is almost always true, but it could be false if all the segment data\n    // was present in the cache, but the route tree was not. E.g. navigating\n    // to a URL that was not prefetched but rewrites to a different URL\n    // that was.\n    const hasDynamicHoles = task.dynamicRequestTree !== null\n    if (hasDynamicHoles) {\n      listenForDynamicRequest(task, promiseForDynamicServerResponse)\n    } else {\n      // The prefetched tree does not contain dynamic holes  it's\n      // fully static. We don't need to process the server response further.\n    }\n    return navigationTaskToResult(\n      task,\n      currentCacheNode,\n      createHrefFromUrl(canonicalUrl),\n      renderedSearch,\n      scrollableSegments,\n      shouldScroll,\n      hash\n    )\n  }\n  // The server sent back an empty tree patch. There's nothing to update, except\n  // possibly the URL.\n  return {\n    tag: NavigationResultTag.NoOp,\n    data: {\n      canonicalUrl: createHrefFromUrl(canonicalUrl),\n      shouldScroll,\n    },\n  }\n}\n\nfunction simulatePrefetchTreeUsingDynamicTreePatch(\n  currentTree: FlightRouterState,\n  flightData: Array<NormalizedFlightData>\n): FlightRouterState {\n  // Takes the current FlightRouterState and applies the router state patch\n  // received from the server, to create a full FlightRouterState tree that we\n  // can pretend was returned by a prefetch.\n  //\n  // (It sounds similar to what applyRouterStatePatch does, but it doesn't need\n  // to handle stuff like interception routes or diffing since that will be\n  // handled later.)\n  let baseTree = currentTree\n  for (const { segmentPath, tree: treePatch } of flightData) {\n    // If the server sends us multiple tree patches, we only need to clone the\n    // base tree when applying the first patch. After the first patch, we can\n    // apply the remaining patches in place without copying.\n    const canMutateInPlace = baseTree !== currentTree\n    baseTree = simulatePrefetchTreeUsingDynamicTreePatchImpl(\n      baseTree,\n      treePatch,\n      segmentPath,\n      canMutateInPlace,\n      0\n    )\n  }\n\n  return baseTree\n}\n\nfunction simulatePrefetchTreeUsingDynamicTreePatchImpl(\n  baseRouterState: FlightRouterState,\n  patch: FlightRouterState,\n  segmentPath: FlightSegmentPath,\n  canMutateInPlace: boolean,\n  index: number\n) {\n  if (index === segmentPath.length) {\n    // We reached the part of the tree that we need to patch.\n    return patch\n  }\n\n  // segmentPath represents the parent path of subtree. It's a repeating\n  // pattern of parallel route key and segment:\n  //\n  //   [string, Segment, string, Segment, string, Segment, ...]\n  //\n  // This path tells us which part of the base tree to apply the tree patch.\n  //\n  // NOTE: In the case of a fully dynamic request with no prefetch, we receive\n  // the FlightRouterState patch in the same request as the dynamic data.\n  // Therefore we don't need to worry about diffing the segment values; we can\n  // assume the server sent us a correct result.\n  const updatedParallelRouteKey: string = segmentPath[index]\n  // const segment: Segment = segmentPath[index + 1] <-- Not used, see note above\n\n  const baseChildren = baseRouterState[1]\n  const newChildren: { [parallelRouteKey: string]: FlightRouterState } = {}\n  for (const parallelRouteKey in baseChildren) {\n    if (parallelRouteKey === updatedParallelRouteKey) {\n      const childBaseRouterState = baseChildren[parallelRouteKey]\n      newChildren[parallelRouteKey] =\n        simulatePrefetchTreeUsingDynamicTreePatchImpl(\n          childBaseRouterState,\n          patch,\n          segmentPath,\n          canMutateInPlace,\n          // Advance the index by two and keep cloning until we reach\n          // the end of the segment path.\n          index + 2\n        )\n    } else {\n      // This child is not being patched. Copy it over as-is.\n      newChildren[parallelRouteKey] = baseChildren[parallelRouteKey]\n    }\n  }\n\n  if (canMutateInPlace) {\n    // We can mutate the base tree in place, because the base tree is already\n    // a clone.\n    baseRouterState[1] = newChildren\n    return baseRouterState\n  }\n\n  // Clone all the fields except the children.\n  //\n  // Based on equivalent logic in apply-router-state-patch-to-tree, but should\n  // confirm whether we need to copy all of these fields. Not sure the server\n  // ever sends, e.g. the refetch marker.\n  const clone: FlightRouterState = [baseRouterState[0], newChildren]\n  if (2 in baseRouterState) {\n    clone[2] = baseRouterState[2]\n  }\n  if (3 in baseRouterState) {\n    clone[3] = baseRouterState[3]\n  }\n  if (4 in baseRouterState) {\n    clone[4] = baseRouterState[4]\n  }\n  return clone\n}\n","import type {\n  FlightRouterState,\n  FlightSegmentPath,\n} from '../../../../shared/lib/app-router-types'\nimport { createHrefFromUrl } from '../create-href-from-url'\nimport type {\n  Mutable,\n  NavigateAction,\n  ReadonlyReducerState,\n  ReducerState,\n} from '../router-reducer-types'\nimport { handleMutable } from '../handle-mutable'\n\nimport {\n  navigate as navigateUsingSegmentCache,\n  type NavigationResult,\n} from '../../segment-cache/navigation'\nimport { NavigationResultTag } from '../../segment-cache/types'\nimport { getStaleTimeMs } from '../../segment-cache/cache'\n\n// These values are set by `define-env-plugin` (based on `nextConfig.experimental.staleTimes`)\n// and default to 5 minutes (static) / 0 seconds (dynamic)\nexport const DYNAMIC_STALETIME_MS =\n  Number(process.env.__NEXT_CLIENT_ROUTER_DYNAMIC_STALETIME) * 1000\n\nexport const STATIC_STALETIME_MS = getStaleTimeMs(\n  Number(process.env.__NEXT_CLIENT_ROUTER_STATIC_STALETIME)\n)\n\nexport function handleExternalUrl(\n  state: ReadonlyReducerState,\n  mutable: Mutable,\n  url: string,\n  pendingPush: boolean\n) {\n  mutable.mpaNavigation = true\n  mutable.canonicalUrl = url\n  mutable.pendingPush = pendingPush\n  mutable.scrollableSegments = undefined\n\n  return handleMutable(state, mutable)\n}\n\nexport function generateSegmentsFromPatch(\n  flightRouterPatch: FlightRouterState\n): FlightSegmentPath[] {\n  const segments: FlightSegmentPath[] = []\n  const [segment, parallelRoutes] = flightRouterPatch\n\n  if (Object.keys(parallelRoutes).length === 0) {\n    return [[segment]]\n  }\n\n  for (const [parallelRouteKey, parallelRoute] of Object.entries(\n    parallelRoutes\n  )) {\n    for (const childSegment of generateSegmentsFromPatch(parallelRoute)) {\n      // If the segment is empty, it means we are at the root of the tree\n      if (segment === '') {\n        segments.push([parallelRouteKey, ...childSegment])\n      } else {\n        segments.push([segment, parallelRouteKey, ...childSegment])\n      }\n    }\n  }\n\n  return segments\n}\n\nfunction handleNavigationResult(\n  url: URL,\n  state: ReadonlyReducerState,\n  mutable: Mutable,\n  pendingPush: boolean,\n  result: NavigationResult\n): ReducerState {\n  switch (result.tag) {\n    case NavigationResultTag.MPA: {\n      // Perform an MPA navigation.\n      const newUrl = result.data\n      return handleExternalUrl(state, mutable, newUrl, pendingPush)\n    }\n    case NavigationResultTag.NoOp: {\n      // The server responded with no change to the current page. However, if\n      // the URL changed, we still need to update that.\n      const newCanonicalUrl = result.data.canonicalUrl\n      mutable.canonicalUrl = newCanonicalUrl\n\n      // Check if the only thing that changed was the hash fragment.\n      const oldUrl = new URL(state.canonicalUrl, url)\n      const onlyHashChange =\n        // We don't need to compare the origins, because client-driven\n        // navigations are always same-origin.\n        url.pathname === oldUrl.pathname &&\n        url.search === oldUrl.search &&\n        url.hash !== oldUrl.hash\n      if (onlyHashChange) {\n        // The only updated part of the URL is the hash.\n        mutable.onlyHashChange = true\n        mutable.shouldScroll = result.data.shouldScroll\n        mutable.hashFragment = url.hash\n        // Setting this to an empty array triggers a scroll for all new and\n        // updated segments. See `ScrollAndFocusHandler` for more details.\n        mutable.scrollableSegments = []\n      }\n\n      return handleMutable(state, mutable)\n    }\n    case NavigationResultTag.Success: {\n      // Received a new result.\n      mutable.cache = result.data.cacheNode\n      mutable.patchedTree = result.data.flightRouterState\n      mutable.renderedSearch = result.data.renderedSearch\n      mutable.canonicalUrl = result.data.canonicalUrl\n      mutable.scrollableSegments = result.data.scrollableSegments\n      mutable.shouldScroll = result.data.shouldScroll\n      mutable.hashFragment = result.data.hash\n      return handleMutable(state, mutable)\n    }\n    case NavigationResultTag.Async: {\n      return result.data.then(\n        (asyncResult) =>\n          handleNavigationResult(url, state, mutable, pendingPush, asyncResult),\n        // If the navigation failed, return the current state.\n        // TODO: This matches the current behavior but we need to do something\n        // better here if the network fails.\n        () => {\n          return state\n        }\n      )\n    }\n    default: {\n      result satisfies never\n      return state\n    }\n  }\n}\n\nexport function navigateReducer(\n  state: ReadonlyReducerState,\n  action: NavigateAction\n): ReducerState {\n  const { url, isExternalUrl, navigateType, shouldScroll } = action\n  const mutable: Mutable = {}\n  const href = createHrefFromUrl(url)\n  const pendingPush = navigateType === 'push'\n\n  mutable.preserveCustomHistoryState = false\n  mutable.pendingPush = pendingPush\n\n  if (isExternalUrl) {\n    return handleExternalUrl(state, mutable, url.toString(), pendingPush)\n  }\n\n  // Handles case where `<meta http-equiv=\"refresh\">` tag is present,\n  // which will trigger an MPA navigation.\n  if (document.getElementById('__next-page-redirect')) {\n    return handleExternalUrl(state, mutable, href, pendingPush)\n  }\n\n  // Temporary glue code between the router reducer and the new navigation\n  // implementation. Eventually we'll rewrite the router reducer to a\n  // state machine.\n  const currentUrl = new URL(state.canonicalUrl, location.origin)\n  const result = navigateUsingSegmentCache(\n    url,\n    currentUrl,\n    state.cache,\n    state.tree,\n    state.nextUrl,\n    shouldScroll,\n    mutable\n  )\n  return handleNavigationResult(url, state, mutable, pendingPush, result)\n}\n","// In output: export mode, the build id is added to the start of the HTML\n// document, directly after the doctype declaration. During a prefetch, the\n// client performs a range request to get the build id, so it can check whether\n// the target page belongs to the same build.\n//\n// The first 64 bytes of the document are requested. The exact number isn't\n// too important; it must be larger than the build id + doctype + closing and\n// ending comment markers, but it doesn't need to match the end of the\n// comment exactly.\n//\n// Build ids are 21 bytes long in the default implementation, though this\n// can be overridden in the Next.js config. For the purposes of this check,\n// it's OK to only match the start of the id, so we'll truncate it if exceeds\n// a certain length.\n\nconst DOCTYPE_PREFIX = '<!DOCTYPE html>' // 15 bytes\nconst MAX_BUILD_ID_LENGTH = 24\n\n// Request the first 64 bytes. The Range header is inclusive of the end value.\nexport const DOC_PREFETCH_RANGE_HEADER_VALUE = 'bytes=0-63'\n\nfunction escapeBuildId(buildId: string) {\n  // If the build id is longer than the given limit, it's OK for our purposes\n  // to only match the beginning.\n  const truncated = buildId.slice(0, MAX_BUILD_ID_LENGTH)\n  // Replace hyphens with underscores so it doesn't break the HTML comment.\n  // (Unlikely, but if this did happen it would break the whole document.)\n  return truncated.replace(/-/g, '_')\n}\n\nexport function insertBuildIdComment(originalHtml: string, buildId: string) {\n  if (\n    // Skip if the build id contains a closing comment marker.\n    buildId.includes('-->') ||\n    // React always inserts a doctype at the start of the document. Skip if it\n    // isn't present. Shouldn't happen; suggests an issue elsewhere.\n    !originalHtml.startsWith(DOCTYPE_PREFIX)\n  ) {\n    // Return the original HTML unchanged. This means the document will not\n    // be prefetched.\n    // TODO: The build id comment is currently only used during prefetches, but\n    // if we eventually use this mechanism for regular navigations, we may need\n    // to error during build if we fail to insert it for some reason.\n    return originalHtml\n  }\n  // The comment must be inserted after the doctype.\n  return originalHtml.replace(\n    DOCTYPE_PREFIX,\n    DOCTYPE_PREFIX + '<!--' + escapeBuildId(buildId) + '-->'\n  )\n}\n\nexport function doesExportedHtmlMatchBuildId(\n  partialHtmlDocument: string,\n  buildId: string\n) {\n  // Check whether the document starts with the expected buildId.\n  return partialHtmlDocument.startsWith(\n    DOCTYPE_PREFIX + '<!--' + escapeBuildId(buildId) + '-->'\n  )\n}\n","import type {\n  TreePrefetch,\n  RootTreePrefetch,\n  SegmentPrefetch,\n} from '../../../server/app-render/collect-segment-data'\nimport type { LoadingModuleData } from '../../../shared/lib/app-router-types'\nimport type {\n  CacheNodeSeedData,\n  Segment as FlightRouterStateSegment,\n} from '../../../shared/lib/app-router-types'\nimport { HasLoadingBoundary } from '../../../shared/lib/app-router-types'\nimport {\n  NEXT_DID_POSTPONE_HEADER,\n  NEXT_ROUTER_PREFETCH_HEADER,\n  NEXT_ROUTER_SEGMENT_PREFETCH_HEADER,\n  NEXT_ROUTER_STALE_TIME_HEADER,\n  NEXT_ROUTER_STATE_TREE_HEADER,\n  NEXT_URL,\n  RSC_CONTENT_TYPE_HEADER,\n  RSC_HEADER,\n} from '../app-router-headers'\nimport {\n  createFetch,\n  createFromNextReadableStream,\n  type RSCResponse,\n  type RequestHeaders,\n} from '../router-reducer/fetch-server-response'\nimport {\n  pingPrefetchTask,\n  isPrefetchTaskDirty,\n  type PrefetchTask,\n  type PrefetchSubtaskResult,\n  startRevalidationCooldown,\n} from './scheduler'\nimport {\n  type RouteVaryPath,\n  type SegmentVaryPath,\n  type PartialSegmentVaryPath,\n  getRouteVaryPath,\n  getFulfilledRouteVaryPath,\n  getSegmentVaryPathForRequest,\n  appendLayoutVaryPath,\n  finalizeLayoutVaryPath,\n  finalizePageVaryPath,\n  clonePageVaryPathWithNewSearchParams,\n  type PageVaryPath,\n  finalizeMetadataVaryPath,\n} from './vary-path'\nimport { getAppBuildId } from '../../app-build-id'\nimport { createHrefFromUrl } from '../router-reducer/create-href-from-url'\nimport type { NormalizedSearch, RouteCacheKey } from './cache-key'\n// TODO: Rename this module to avoid confusion with other types of cache keys\nimport { createCacheKey as createPrefetchRequestKey } from './cache-key'\nimport {\n  doesStaticSegmentAppearInURL,\n  getCacheKeyForDynamicParam,\n  getRenderedPathname,\n  getRenderedSearch,\n  parseDynamicParamFromURLPart,\n} from '../../route-params'\nimport {\n  createCacheMap,\n  getFromCacheMap,\n  setInCacheMap,\n  setSizeInCacheMap,\n  deleteFromCacheMap,\n  isValueExpired,\n  type CacheMap,\n  type MapEntry,\n} from './cache-map'\nimport {\n  appendSegmentRequestKeyPart,\n  convertSegmentPathToStaticExportFilename,\n  createSegmentRequestKeyPart,\n  HEAD_REQUEST_KEY,\n  ROOT_SEGMENT_REQUEST_KEY,\n  type SegmentRequestKey,\n} from '../../../shared/lib/segment-cache/segment-value-encoding'\nimport type {\n  FlightRouterState,\n  NavigationFlightResponse,\n} from '../../../shared/lib/app-router-types'\nimport {\n  normalizeFlightData,\n  prepareFlightRouterStateForRequest,\n} from '../../flight-data-helpers'\nimport { STATIC_STALETIME_MS } from '../router-reducer/reducers/navigate-reducer'\nimport { pingVisibleLinks } from '../links'\nimport { PAGE_SEGMENT_KEY } from '../../../shared/lib/segment'\nimport {\n  DOC_PREFETCH_RANGE_HEADER_VALUE,\n  doesExportedHtmlMatchBuildId,\n} from '../../../shared/lib/segment-cache/output-export-prefetch-encoding'\nimport { FetchStrategy } from './types'\nimport { createPromiseWithResolvers } from '../../../shared/lib/promise-with-resolvers'\n\n/**\n * Ensures a minimum stale time of 30s to avoid issues where the server sends a too\n * short-lived stale time, which would prevent anything from being prefetched.\n */\nexport function getStaleTimeMs(staleTimeSeconds: number): number {\n  return Math.max(staleTimeSeconds, 30) * 1000\n}\n\n// A note on async/await when working in the prefetch cache:\n//\n// Most async operations in the prefetch cache should *not* use async/await,\n// Instead, spawn a subtask that writes the results to a cache entry, and attach\n// a \"ping\" listener to notify the prefetch queue to try again.\n//\n// The reason is we need to be able to access the segment cache and traverse its\n// data structures synchronously. For example, if there's a synchronous update\n// we can take an immediate snapshot of the cache to produce something we can\n// render. Limiting the use of async/await also makes it easier to avoid race\n// conditions, which is especially important because is cache is mutable.\n//\n// Another reason is that while we're performing async work, it's possible for\n// existing entries to become stale, or for Link prefetches to be removed from\n// the queue. For optimal scheduling, we need to be able to \"cancel\" subtasks\n// that are no longer needed. So, when a segment is received from the server, we\n// restart from the root of the tree that's being prefetched, to confirm all the\n// parent segments are still cached. If the segment is no longer reachable from\n// the root, then it's effectively canceled. This is similar to the design of\n// Rust Futures, or React Suspense.\n\ntype RouteTreeShared = {\n  requestKey: SegmentRequestKey\n  // TODO: Remove the `segment` field, now that it can be reconstructed\n  // from `param`.\n  segment: FlightRouterStateSegment\n  slots: null | {\n    [parallelRouteKey: string]: RouteTree\n  }\n  isRootLayout: boolean\n\n  // If this is a dynamic route, indicates whether there is a loading boundary\n  // somewhere in the tree. If not, we can skip the prefetch for the data,\n  // because we know it would be an empty response. (For a static/PPR route,\n  // this value is disregarded, because in that model `loading.tsx` is treated\n  // like any other Suspense boundary.)\n  hasLoadingBoundary: HasLoadingBoundary\n\n  // Indicates whether this route has a runtime prefetch that we can request.\n  // This is determined by the server; it's not purely a user configuration\n  // because the server may determine that a route is fully static and doesn't\n  // need runtime prefetching regardless of the configuration.\n  hasRuntimePrefetch: boolean\n}\n\ntype LayoutRouteTree = RouteTreeShared & {\n  isPage: false\n  varyPath: SegmentVaryPath\n}\n\ntype PageRouteTree = RouteTreeShared & {\n  isPage: true\n  varyPath: PageVaryPath\n}\n\nexport type RouteTree = LayoutRouteTree | PageRouteTree\n\ntype RouteCacheEntryShared = {\n  // This is false only if we're certain the route cannot be intercepted. It's\n  // true in all other cases, including on initialization when we haven't yet\n  // received a response from the server.\n  couldBeIntercepted: boolean\n\n  // Map-related fields.\n  ref: null | MapEntry<RouteCacheEntry>\n  size: number\n  staleAt: number\n  version: number\n}\n\n/**\n * Tracks the status of a cache entry as it progresses from no data (Empty),\n * waiting for server data (Pending), and finished (either Fulfilled or\n * Rejected depending on the response from the server.\n */\nexport const enum EntryStatus {\n  Empty = 0,\n  Pending = 1,\n  Fulfilled = 2,\n  Rejected = 3,\n}\n\ntype PendingRouteCacheEntry = RouteCacheEntryShared & {\n  status: EntryStatus.Empty | EntryStatus.Pending\n  blockedTasks: Set<PrefetchTask> | null\n  canonicalUrl: null\n  renderedSearch: null\n  tree: null\n  metadata: null\n  isPPREnabled: false\n}\n\ntype RejectedRouteCacheEntry = RouteCacheEntryShared & {\n  status: EntryStatus.Rejected\n  blockedTasks: Set<PrefetchTask> | null\n  canonicalUrl: null\n  renderedSearch: null\n  tree: null\n  metadata: null\n  isPPREnabled: boolean\n}\n\nexport type FulfilledRouteCacheEntry = RouteCacheEntryShared & {\n  status: EntryStatus.Fulfilled\n  blockedTasks: null\n  canonicalUrl: string\n  renderedSearch: NormalizedSearch\n  tree: RouteTree\n  metadata: RouteTree\n  isPPREnabled: boolean\n}\n\nexport type RouteCacheEntry =\n  | PendingRouteCacheEntry\n  | FulfilledRouteCacheEntry\n  | RejectedRouteCacheEntry\n\ntype SegmentCacheEntryShared = {\n  fetchStrategy: FetchStrategy\n\n  // Map-related fields.\n  ref: null | MapEntry<SegmentCacheEntry>\n  size: number\n  staleAt: number\n  version: number\n}\n\nexport type EmptySegmentCacheEntry = SegmentCacheEntryShared & {\n  status: EntryStatus.Empty\n  rsc: null\n  loading: null\n  isPartial: true\n  promise: null\n}\n\nexport type PendingSegmentCacheEntry = SegmentCacheEntryShared & {\n  status: EntryStatus.Pending\n  rsc: null\n  loading: null\n  isPartial: true\n  promise: null | PromiseWithResolvers<FulfilledSegmentCacheEntry | null>\n}\n\ntype RejectedSegmentCacheEntry = SegmentCacheEntryShared & {\n  status: EntryStatus.Rejected\n  rsc: null\n  loading: null\n  isPartial: true\n  promise: null\n}\n\nexport type FulfilledSegmentCacheEntry = SegmentCacheEntryShared & {\n  status: EntryStatus.Fulfilled\n  rsc: React.ReactNode | null\n  loading: LoadingModuleData | Promise<LoadingModuleData>\n  isPartial: boolean\n  promise: null\n}\n\nexport type SegmentCacheEntry =\n  | EmptySegmentCacheEntry\n  | PendingSegmentCacheEntry\n  | RejectedSegmentCacheEntry\n  | FulfilledSegmentCacheEntry\n\nexport type NonEmptySegmentCacheEntry = Exclude<\n  SegmentCacheEntry,\n  EmptySegmentCacheEntry\n>\n\nconst isOutputExportMode =\n  process.env.NODE_ENV === 'production' &&\n  process.env.__NEXT_CONFIG_OUTPUT === 'export'\n\nconst MetadataOnlyRequestTree: FlightRouterState = [\n  '',\n  {},\n  null,\n  'metadata-only',\n]\n\nlet routeCacheMap: CacheMap<RouteCacheEntry> = createCacheMap()\nlet segmentCacheMap: CacheMap<SegmentCacheEntry> = createCacheMap()\n\n// All invalidation listeners for the whole cache are tracked in single set.\n// Since we don't yet support tag or path-based invalidation, there's no point\n// tracking them any more granularly than this. Once we add granular\n// invalidation, that may change, though generally the model is to just notify\n// the listeners and allow the caller to poll the prefetch cache with a new\n// prefetch task if desired.\nlet invalidationListeners: Set<PrefetchTask> | null = null\n\n// Incrementing counter used to track cache invalidations.\nlet currentCacheVersion = 0\n\nexport function getCurrentCacheVersion(): number {\n  return currentCacheVersion\n}\n\n/**\n * Used to clear the client prefetch cache when a server action calls\n * revalidatePath or revalidateTag. Eventually we will support only clearing the\n * segments that were actually affected, but there's more work to be done on the\n * server before the client is able to do this correctly.\n */\nexport function revalidateEntireCache(\n  nextUrl: string | null,\n  tree: FlightRouterState\n) {\n  // Increment the current cache version. This does not eagerly evict anything\n  // from the cache, but because all the entries are versioned, and we check\n  // the version when reading from the cache, this effectively causes all\n  // entries to be evicted lazily. We do it lazily because in the future,\n  // actions like revalidateTag or refresh will not evict the entire cache,\n  // but rather some subset of the entries.\n  currentCacheVersion++\n\n  // Start a cooldown before re-prefetching to allow CDN cache propagation.\n  startRevalidationCooldown()\n\n  // Prefetch all the currently visible links again, to re-fill the cache.\n  pingVisibleLinks(nextUrl, tree)\n\n  // Similarly, notify all invalidation listeners (i.e. those passed to\n  // `router.prefetch(onInvalidate)`), so they can trigger a new prefetch\n  // if needed.\n  pingInvalidationListeners(nextUrl, tree)\n}\n\nfunction attachInvalidationListener(task: PrefetchTask): void {\n  // This function is called whenever a prefetch task reads a cache entry. If\n  // the task has an onInvalidate function associated with it  i.e. the one\n  // optionally passed to router.prefetch(onInvalidate)  then we attach that\n  // listener to the every cache entry that the task reads. Then, if an entry\n  // is invalidated, we call the function.\n  if (task.onInvalidate !== null) {\n    if (invalidationListeners === null) {\n      invalidationListeners = new Set([task])\n    } else {\n      invalidationListeners.add(task)\n    }\n  }\n}\n\nfunction notifyInvalidationListener(task: PrefetchTask): void {\n  const onInvalidate = task.onInvalidate\n  if (onInvalidate !== null) {\n    // Clear the callback from the task object to guarantee it's not called more\n    // than once.\n    task.onInvalidate = null\n\n    // This is a user-space function, so we must wrap in try/catch.\n    try {\n      onInvalidate()\n    } catch (error) {\n      if (typeof reportError === 'function') {\n        reportError(error)\n      } else {\n        console.error(error)\n      }\n    }\n  }\n}\n\nexport function pingInvalidationListeners(\n  nextUrl: string | null,\n  tree: FlightRouterState\n): void {\n  // The rough equivalent of pingVisibleLinks, but for onInvalidate callbacks.\n  // This is called when the Next-Url or the base tree changes, since those\n  // may affect the result of a prefetch task. It's also called after a\n  // cache invalidation.\n  if (invalidationListeners !== null) {\n    const tasks = invalidationListeners\n    invalidationListeners = null\n    for (const task of tasks) {\n      if (isPrefetchTaskDirty(task, nextUrl, tree)) {\n        notifyInvalidationListener(task)\n      }\n    }\n  }\n}\n\nexport function readRouteCacheEntry(\n  now: number,\n  key: RouteCacheKey\n): RouteCacheEntry | null {\n  const varyPath: RouteVaryPath = getRouteVaryPath(\n    key.pathname,\n    key.search,\n    key.nextUrl\n  )\n  const isRevalidation = false\n  return getFromCacheMap(\n    now,\n    getCurrentCacheVersion(),\n    routeCacheMap,\n    varyPath,\n    isRevalidation\n  )\n}\n\nexport function readSegmentCacheEntry(\n  now: number,\n  varyPath: SegmentVaryPath\n): SegmentCacheEntry | null {\n  const isRevalidation = false\n  return getFromCacheMap(\n    now,\n    getCurrentCacheVersion(),\n    segmentCacheMap,\n    varyPath,\n    isRevalidation\n  )\n}\n\nfunction readRevalidatingSegmentCacheEntry(\n  now: number,\n  varyPath: SegmentVaryPath\n): SegmentCacheEntry | null {\n  const isRevalidation = true\n  return getFromCacheMap(\n    now,\n    getCurrentCacheVersion(),\n    segmentCacheMap,\n    varyPath,\n    isRevalidation\n  )\n}\n\nexport function waitForSegmentCacheEntry(\n  pendingEntry: PendingSegmentCacheEntry\n): Promise<FulfilledSegmentCacheEntry | null> {\n  // Because the entry is pending, there's already a in-progress request.\n  // Attach a promise to the entry that will resolve when the server responds.\n  let promiseWithResolvers = pendingEntry.promise\n  if (promiseWithResolvers === null) {\n    promiseWithResolvers = pendingEntry.promise =\n      createPromiseWithResolvers<FulfilledSegmentCacheEntry | null>()\n  } else {\n    // There's already a promise we can use\n  }\n  return promiseWithResolvers.promise\n}\n\n/**\n * Checks if an entry for a route exists in the cache. If so, it returns the\n * entry, If not, it adds an empty entry to the cache and returns it.\n */\nexport function readOrCreateRouteCacheEntry(\n  now: number,\n  task: PrefetchTask,\n  key: RouteCacheKey\n): RouteCacheEntry {\n  attachInvalidationListener(task)\n\n  const existingEntry = readRouteCacheEntry(now, key)\n  if (existingEntry !== null) {\n    return existingEntry\n  }\n  // Create a pending entry and add it to the cache.\n  const pendingEntry: PendingRouteCacheEntry = {\n    canonicalUrl: null,\n    status: EntryStatus.Empty,\n    blockedTasks: null,\n    tree: null,\n    metadata: null,\n    // This is initialized to true because we don't know yet whether the route\n    // could be intercepted. It's only set to false once we receive a response\n    // from the server.\n    couldBeIntercepted: true,\n    // Similarly, we don't yet know if the route supports PPR.\n    isPPREnabled: false,\n    renderedSearch: null,\n\n    // Map-related fields\n    ref: null,\n    size: 0,\n    // Since this is an empty entry, there's no reason to ever evict it. It will\n    // be updated when the data is populated.\n    staleAt: Infinity,\n    version: getCurrentCacheVersion(),\n  }\n  const varyPath: RouteVaryPath = getRouteVaryPath(\n    key.pathname,\n    key.search,\n    key.nextUrl\n  )\n  const isRevalidation = false\n  setInCacheMap(routeCacheMap, varyPath, pendingEntry, isRevalidation)\n  return pendingEntry\n}\n\nexport function requestOptimisticRouteCacheEntry(\n  now: number,\n  requestedUrl: URL,\n  nextUrl: string | null\n): FulfilledRouteCacheEntry | null {\n  // This function is called during a navigation when there was no matching\n  // route tree in the prefetch cache. Before de-opting to a blocking,\n  // unprefetched navigation, we will first attempt to construct an \"optimistic\"\n  // route tree by checking the cache for similar routes.\n  //\n  // Check if there's a route with the same pathname, but with different\n  // search params. We can then base our optimistic route tree on this entry.\n  //\n  // Conceptually, we are simulating what would happen if we did perform a\n  // prefetch the requested URL, under the assumption that the server will\n  // not redirect or rewrite the request in a different manner than the\n  // base route tree. This assumption might not hold, in which case we'll have\n  // to recover when we perform the dynamic navigation request. However, this\n  // is what would happen if a route were dynamically rewritten/redirected\n  // in between the prefetch and the navigation. So the logic needs to exist\n  // to handle this case regardless.\n\n  // Look for a route with the same pathname, but with an empty search string.\n  // TODO: There's nothing inherently special about the empty search string;\n  // it's chosen somewhat arbitrarily, with the rationale that it's the most\n  // likely one to exist. But we should update this to match _any_ search\n  // string. The plan is to generalize this logic alongside other improvements\n  // related to \"fallback\" cache entries.\n  const requestedSearch = requestedUrl.search as NormalizedSearch\n  if (requestedSearch === '') {\n    // The caller would have already checked if a route with an empty search\n    // string is in the cache. So we can bail out here.\n    return null\n  }\n  const urlWithoutSearchParams = new URL(requestedUrl)\n  urlWithoutSearchParams.search = ''\n  const routeWithNoSearchParams = readRouteCacheEntry(\n    now,\n    createPrefetchRequestKey(urlWithoutSearchParams.href, nextUrl)\n  )\n\n  if (\n    routeWithNoSearchParams === null ||\n    routeWithNoSearchParams.status !== EntryStatus.Fulfilled\n  ) {\n    // Bail out of constructing an optimistic route tree. This will result in\n    // a blocking, unprefetched navigation.\n    return null\n  }\n\n  // Now we have a base route tree we can \"patch\" with our optimistic values.\n\n  // Optimistically assume that redirects for the requested pathname do\n  // not vary on the search string. Therefore, if the base route was\n  // redirected to a different search string, then the optimistic route\n  // should be redirected to the same search string. Otherwise, we use\n  // the requested search string.\n  const canonicalUrlForRouteWithNoSearchParams = new URL(\n    routeWithNoSearchParams.canonicalUrl,\n    requestedUrl.origin\n  )\n  const optimisticCanonicalSearch =\n    canonicalUrlForRouteWithNoSearchParams.search !== ''\n      ? // Base route was redirected. Reuse the same redirected search string.\n        canonicalUrlForRouteWithNoSearchParams.search\n      : requestedSearch\n\n  // Similarly, optimistically assume that rewrites for the requested\n  // pathname do not vary on the search string. Therefore, if the base\n  // route was rewritten to a different search string, then the optimistic\n  // route should be rewritten to the same search string. Otherwise, we use\n  // the requested search string.\n  const optimisticRenderedSearch =\n    routeWithNoSearchParams.renderedSearch !== ''\n      ? // Base route was rewritten. Reuse the same rewritten search string.\n        routeWithNoSearchParams.renderedSearch\n      : requestedSearch\n\n  const optimisticUrl = new URL(\n    routeWithNoSearchParams.canonicalUrl,\n    location.origin\n  )\n  optimisticUrl.search = optimisticCanonicalSearch\n  const optimisticCanonicalUrl = createHrefFromUrl(optimisticUrl)\n\n  const optimisticRouteTree = createOptimisticRouteTree(\n    routeWithNoSearchParams.tree,\n    optimisticRenderedSearch\n  )\n  const optimisticMetadataTree = createOptimisticRouteTree(\n    routeWithNoSearchParams.metadata,\n    optimisticRenderedSearch\n  )\n\n  // Clone the base route tree, and override the relevant fields with our\n  // optimistic values.\n  const optimisticEntry: FulfilledRouteCacheEntry = {\n    canonicalUrl: optimisticCanonicalUrl,\n\n    status: EntryStatus.Fulfilled,\n    // This isn't cloned because it's instance-specific\n    blockedTasks: null,\n    tree: optimisticRouteTree,\n    metadata: optimisticMetadataTree,\n    couldBeIntercepted: routeWithNoSearchParams.couldBeIntercepted,\n    isPPREnabled: routeWithNoSearchParams.isPPREnabled,\n\n    // Override the rendered search with the optimistic value.\n    renderedSearch: optimisticRenderedSearch,\n\n    // Map-related fields\n    ref: null,\n    size: 0,\n    staleAt: routeWithNoSearchParams.staleAt,\n    version: routeWithNoSearchParams.version,\n  }\n\n  // Do not insert this entry into the cache. It only exists so we can\n  // perform the current navigation. Just return it to the caller.\n  return optimisticEntry\n}\n\nfunction createOptimisticRouteTree(\n  tree: RouteTree,\n  newRenderedSearch: NormalizedSearch\n): RouteTree {\n  // Create a new route tree that identical to the original one except for\n  // the rendered search string, which is contained in the vary path.\n\n  let clonedSlots: Record<string, RouteTree> | null = null\n  const originalSlots = tree.slots\n  if (originalSlots !== null) {\n    clonedSlots = {}\n    for (const parallelRouteKey in originalSlots) {\n      const childTree = originalSlots[parallelRouteKey]\n      clonedSlots[parallelRouteKey] = createOptimisticRouteTree(\n        childTree,\n        newRenderedSearch\n      )\n    }\n  }\n\n  // We only need to clone the vary path if the route is a page.\n  if (tree.isPage) {\n    return {\n      requestKey: tree.requestKey,\n      segment: tree.segment,\n      varyPath: clonePageVaryPathWithNewSearchParams(\n        tree.varyPath,\n        newRenderedSearch\n      ),\n      isPage: true,\n      slots: clonedSlots,\n      isRootLayout: tree.isRootLayout,\n      hasLoadingBoundary: tree.hasLoadingBoundary,\n      hasRuntimePrefetch: tree.hasRuntimePrefetch,\n    }\n  }\n\n  return {\n    requestKey: tree.requestKey,\n    segment: tree.segment,\n    varyPath: tree.varyPath,\n    isPage: false,\n    slots: clonedSlots,\n    isRootLayout: tree.isRootLayout,\n    hasLoadingBoundary: tree.hasLoadingBoundary,\n    hasRuntimePrefetch: tree.hasRuntimePrefetch,\n  }\n}\n\n/**\n * Checks if an entry for a segment exists in the cache. If so, it returns the\n * entry, If not, it adds an empty entry to the cache and returns it.\n */\nexport function readOrCreateSegmentCacheEntry(\n  now: number,\n  fetchStrategy: FetchStrategy,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree\n): SegmentCacheEntry {\n  const existingEntry = readSegmentCacheEntry(now, tree.varyPath)\n  if (existingEntry !== null) {\n    return existingEntry\n  }\n  // Create a pending entry and add it to the cache.\n  const varyPathForRequest = getSegmentVaryPathForRequest(fetchStrategy, tree)\n  const pendingEntry = createDetachedSegmentCacheEntry(route.staleAt)\n  const isRevalidation = false\n  setInCacheMap(\n    segmentCacheMap,\n    varyPathForRequest,\n    pendingEntry,\n    isRevalidation\n  )\n  return pendingEntry\n}\n\nexport function readOrCreateRevalidatingSegmentEntry(\n  now: number,\n  fetchStrategy: FetchStrategy,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree\n): SegmentCacheEntry {\n  // This function is called when we've already confirmed that a particular\n  // segment is cached, but we want to perform another request anyway in case it\n  // returns more complete and/or fresher data than we already have. The logic\n  // for deciding whether to replace the existing entry is handled elsewhere;\n  // this function just handles retrieving a cache entry that we can use to\n  // track the revalidation.\n  //\n  // The reason revalidations are stored in the cache is because we need to be\n  // able to dedupe multiple revalidation requests. The reason they have to be\n  // handled specially is because we shouldn't overwrite a \"normal\" entry if\n  // one exists at the same keypath. So, for each internal cache location, there\n  // is a special \"revalidation\" slot that is used solely for this purpose.\n  //\n  // You can think of it as if all the revalidation entries were stored in a\n  // separate cache map from the canonical entries, and then transfered to the\n  // canonical cache map once the request is complete  this isn't how it's\n  // actually implemented, since it's more efficient to store them in the same\n  // data structure as the normal entries, but that's how it's modeled\n  // conceptually.\n\n  // TODO: Once we implement Fallback behavior for params, where an entry is\n  // re-keyed based on response information, we'll need to account for the\n  // possibility that the keypath of the previous entry is more generic than\n  // the keypath of the revalidating entry. In other words, the server could\n  // return a less generic entry upon revalidation. For now, though, this isn't\n  // a concern because the keypath is based solely on the prefetch strategy,\n  // not on data contained in the response.\n  const existingEntry = readRevalidatingSegmentCacheEntry(now, tree.varyPath)\n  if (existingEntry !== null) {\n    return existingEntry\n  }\n  // Create a pending entry and add it to the cache.\n  const varyPathForRequest = getSegmentVaryPathForRequest(fetchStrategy, tree)\n  const pendingEntry = createDetachedSegmentCacheEntry(route.staleAt)\n  const isRevalidation = true\n  setInCacheMap(\n    segmentCacheMap,\n    varyPathForRequest,\n    pendingEntry,\n    isRevalidation\n  )\n  return pendingEntry\n}\n\nexport function overwriteRevalidatingSegmentCacheEntry(\n  fetchStrategy: FetchStrategy,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree\n) {\n  // This function is called when we've already decided to replace an existing\n  // revalidation entry. Create a new entry and write it into the cache,\n  // overwriting the previous value.\n  const varyPathForRequest = getSegmentVaryPathForRequest(fetchStrategy, tree)\n  const pendingEntry = createDetachedSegmentCacheEntry(route.staleAt)\n  const isRevalidation = true\n  setInCacheMap(\n    segmentCacheMap,\n    varyPathForRequest,\n    pendingEntry,\n    isRevalidation\n  )\n  return pendingEntry\n}\n\nexport function upsertSegmentEntry(\n  now: number,\n  varyPath: SegmentVaryPath,\n  candidateEntry: SegmentCacheEntry\n): SegmentCacheEntry | null {\n  // We have a new entry that has not yet been inserted into the cache. Before\n  // we do so, we need to confirm whether it takes precedence over the existing\n  // entry (if one exists).\n  // TODO: We should not upsert an entry if its key was invalidated in the time\n  // since the request was made. We can do that by passing the \"owner\" entry to\n  // this function and confirming it's the same as `existingEntry`.\n\n  if (isValueExpired(now, getCurrentCacheVersion(), candidateEntry)) {\n    // The entry is expired. We cannot upsert it.\n    return null\n  }\n\n  const existingEntry = readSegmentCacheEntry(now, varyPath)\n  if (existingEntry !== null) {\n    // Don't replace a more specific segment with a less-specific one. A case where this\n    // might happen is if the existing segment was fetched via\n    // `<Link prefetch={true}>`.\n    if (\n      // We fetched the new segment using a different, less specific fetch strategy\n      // than the segment we already have in the cache, so it can't have more content.\n      (candidateEntry.fetchStrategy !== existingEntry.fetchStrategy &&\n        !canNewFetchStrategyProvideMoreContent(\n          existingEntry.fetchStrategy,\n          candidateEntry.fetchStrategy\n        )) ||\n      // The existing entry isn't partial, but the new one is.\n      // (TODO: can this be true if `candidateEntry.fetchStrategy >= existingEntry.fetchStrategy`?)\n      (!existingEntry.isPartial && candidateEntry.isPartial)\n    ) {\n      // We're going to leave revalidating entry in the cache so that it doesn't\n      // get revalidated again unnecessarily. Downgrade the Fulfilled entry to\n      // Rejected and null out the data so it can be garbage collected. We leave\n      // `staleAt` intact to prevent subsequent revalidation attempts only until\n      // the entry expires.\n      const rejectedEntry: RejectedSegmentCacheEntry = candidateEntry as any\n      rejectedEntry.status = EntryStatus.Rejected\n      rejectedEntry.loading = null\n      rejectedEntry.rsc = null\n      return null\n    }\n\n    // Evict the existing entry from the cache.\n    deleteFromCacheMap(existingEntry)\n  }\n\n  const isRevalidation = false\n  setInCacheMap(segmentCacheMap, varyPath, candidateEntry, isRevalidation)\n  return candidateEntry\n}\n\nexport function createDetachedSegmentCacheEntry(\n  staleAt: number\n): EmptySegmentCacheEntry {\n  const emptyEntry: EmptySegmentCacheEntry = {\n    status: EntryStatus.Empty,\n    // Default to assuming the fetch strategy will be PPR. This will be updated\n    // when a fetch is actually initiated.\n    fetchStrategy: FetchStrategy.PPR,\n    rsc: null,\n    loading: null,\n    isPartial: true,\n    promise: null,\n\n    // Map-related fields\n    ref: null,\n    size: 0,\n    staleAt,\n    version: 0,\n  }\n  return emptyEntry\n}\n\nexport function upgradeToPendingSegment(\n  emptyEntry: EmptySegmentCacheEntry,\n  fetchStrategy: FetchStrategy\n): PendingSegmentCacheEntry {\n  const pendingEntry: PendingSegmentCacheEntry = emptyEntry as any\n  pendingEntry.status = EntryStatus.Pending\n  pendingEntry.fetchStrategy = fetchStrategy\n  // Set the version here, since this is right before the request is initiated.\n  // The next time the global cache version is incremented, the entry will\n  // effectively be evicted. This happens before initiating the request, rather\n  // than when receiving the response, because it's guaranteed to happen\n  // before the data is read on the server.\n  pendingEntry.version = getCurrentCacheVersion()\n  return pendingEntry\n}\n\nfunction pingBlockedTasks(entry: {\n  blockedTasks: Set<PrefetchTask> | null\n}): void {\n  const blockedTasks = entry.blockedTasks\n  if (blockedTasks !== null) {\n    for (const task of blockedTasks) {\n      pingPrefetchTask(task)\n    }\n    entry.blockedTasks = null\n  }\n}\n\nfunction fulfillRouteCacheEntry(\n  entry: RouteCacheEntry,\n  tree: RouteTree,\n  metadataVaryPath: PageVaryPath,\n  staleAt: number,\n  couldBeIntercepted: boolean,\n  canonicalUrl: string,\n  renderedSearch: NormalizedSearch,\n  isPPREnabled: boolean\n): FulfilledRouteCacheEntry {\n  // The Head is not actually part of the route tree, but other than that, it's\n  // fetched and cached like a segment. Some functions expect a RouteTree\n  // object, so rather than fork the logic in all those places, we use this\n  // \"fake\" one.\n  const metadata: RouteTree = {\n    requestKey: HEAD_REQUEST_KEY,\n    segment: HEAD_REQUEST_KEY,\n    varyPath: metadataVaryPath,\n    // The metadata isn't really a \"page\" (though it isn't really a \"segment\"\n    // either) but for the purposes of how this field is used, it behaves like\n    // one. If this logic ever gets more complex we can change this to an enum.\n    isPage: true,\n    slots: null,\n    isRootLayout: false,\n    hasLoadingBoundary: HasLoadingBoundary.SubtreeHasNoLoadingBoundary,\n    hasRuntimePrefetch: false,\n  }\n  const fulfilledEntry: FulfilledRouteCacheEntry = entry as any\n  fulfilledEntry.status = EntryStatus.Fulfilled\n  fulfilledEntry.tree = tree\n  fulfilledEntry.metadata = metadata\n  fulfilledEntry.staleAt = staleAt\n  fulfilledEntry.couldBeIntercepted = couldBeIntercepted\n  fulfilledEntry.canonicalUrl = canonicalUrl\n  fulfilledEntry.renderedSearch = renderedSearch\n  fulfilledEntry.isPPREnabled = isPPREnabled\n  pingBlockedTasks(entry)\n  return fulfilledEntry\n}\n\nfunction fulfillSegmentCacheEntry(\n  segmentCacheEntry: PendingSegmentCacheEntry,\n  rsc: React.ReactNode,\n  loading: LoadingModuleData | Promise<LoadingModuleData>,\n  staleAt: number,\n  isPartial: boolean\n): FulfilledSegmentCacheEntry {\n  const fulfilledEntry: FulfilledSegmentCacheEntry = segmentCacheEntry as any\n  fulfilledEntry.status = EntryStatus.Fulfilled\n  fulfilledEntry.rsc = rsc\n  fulfilledEntry.loading = loading\n  fulfilledEntry.staleAt = staleAt\n  fulfilledEntry.isPartial = isPartial\n  // Resolve any listeners that were waiting for this data.\n  if (segmentCacheEntry.promise !== null) {\n    segmentCacheEntry.promise.resolve(fulfilledEntry)\n    // Free the promise for garbage collection.\n    fulfilledEntry.promise = null\n  }\n  return fulfilledEntry\n}\n\nfunction rejectRouteCacheEntry(\n  entry: PendingRouteCacheEntry,\n  staleAt: number\n): void {\n  const rejectedEntry: RejectedRouteCacheEntry = entry as any\n  rejectedEntry.status = EntryStatus.Rejected\n  rejectedEntry.staleAt = staleAt\n  pingBlockedTasks(entry)\n}\n\nfunction rejectSegmentCacheEntry(\n  entry: PendingSegmentCacheEntry,\n  staleAt: number\n): void {\n  const rejectedEntry: RejectedSegmentCacheEntry = entry as any\n  rejectedEntry.status = EntryStatus.Rejected\n  rejectedEntry.staleAt = staleAt\n  if (entry.promise !== null) {\n    // NOTE: We don't currently propagate the reason the prefetch was canceled\n    // but we could by accepting a `reason` argument.\n    entry.promise.resolve(null)\n    entry.promise = null\n  }\n}\n\ntype RouteTreeAccumulator = {\n  metadataVaryPath: PageVaryPath | null\n}\n\nfunction convertRootTreePrefetchToRouteTree(\n  rootTree: RootTreePrefetch,\n  renderedPathname: string,\n  renderedSearch: NormalizedSearch,\n  acc: RouteTreeAccumulator\n) {\n  // Remove trailing and leading slashes\n  const pathnameParts = renderedPathname.split('/').filter((p) => p !== '')\n  const index = 0\n  const rootSegment = ROOT_SEGMENT_REQUEST_KEY\n  return convertTreePrefetchToRouteTree(\n    rootTree.tree,\n    rootSegment,\n    null,\n    ROOT_SEGMENT_REQUEST_KEY,\n    pathnameParts,\n    index,\n    renderedSearch,\n    acc\n  )\n}\n\nfunction convertTreePrefetchToRouteTree(\n  prefetch: TreePrefetch,\n  segment: FlightRouterStateSegment,\n  partialVaryPath: PartialSegmentVaryPath | null,\n  requestKey: SegmentRequestKey,\n  pathnameParts: Array<string>,\n  pathnamePartsIndex: number,\n  renderedSearch: NormalizedSearch,\n  acc: RouteTreeAccumulator\n): RouteTree {\n  // Converts the route tree sent by the server into the format used by the\n  // cache. The cached version of the tree includes additional fields, such as a\n  // cache key for each segment. Since this is frequently accessed, we compute\n  // it once instead of on every access. This same cache key is also used to\n  // request the segment from the server.\n\n  let slots: { [parallelRouteKey: string]: RouteTree } | null = null\n  let isPage: boolean\n  let varyPath: SegmentVaryPath\n  const prefetchSlots = prefetch.slots\n  if (prefetchSlots !== null) {\n    isPage = false\n    varyPath = finalizeLayoutVaryPath(requestKey, partialVaryPath)\n\n    slots = {}\n    for (let parallelRouteKey in prefetchSlots) {\n      const childPrefetch = prefetchSlots[parallelRouteKey]\n      const childParamName = childPrefetch.name\n      const childParamType = childPrefetch.paramType\n      const childServerSentParamKey = childPrefetch.paramKey\n\n      let childDoesAppearInURL: boolean\n      let childSegment: FlightRouterStateSegment\n      let childPartialVaryPath: PartialSegmentVaryPath | null\n      if (childParamType !== null) {\n        // This segment is parameterized. Get the param from the pathname.\n        const childParamValue = parseDynamicParamFromURLPart(\n          childParamType,\n          pathnameParts,\n          pathnamePartsIndex\n        )\n\n        // Assign a cache key to the segment, based on the param value. In the\n        // pre-Segment Cache implementation, the server computes this and sends\n        // it in the body of the response. In the Segment Cache implementation,\n        // the server sends an empty string and we fill it in here.\n\n        // TODO: We're intentionally not adding the search param to page\n        // segments here; it's tracked separately and added back during a read.\n        // This would clearer if we waited to construct the segment until it's\n        // read from the cache, since that's effectively what we're\n        // doing anyway.\n        const childParamKey =\n          // The server omits this field from the prefetch response when\n          // cacheComponents is enabled.\n          childServerSentParamKey !== null\n            ? childServerSentParamKey\n            : // If no param key was sent, use the value parsed on the client.\n              getCacheKeyForDynamicParam(\n                childParamValue,\n                '' as NormalizedSearch\n              )\n\n        childPartialVaryPath = appendLayoutVaryPath(\n          partialVaryPath,\n          childParamKey\n        )\n        childSegment = [childParamName, childParamKey, childParamType]\n        childDoesAppearInURL = true\n      } else {\n        // This segment does not have a param. Inherit the partial vary path of\n        // the parent.\n        childPartialVaryPath = partialVaryPath\n        childSegment = childParamName\n        childDoesAppearInURL = doesStaticSegmentAppearInURL(childParamName)\n      }\n\n      // Only increment the index if the segment appears in the URL. If it's a\n      // \"virtual\" segment, like a route group, it remains the same.\n      const childPathnamePartsIndex = childDoesAppearInURL\n        ? pathnamePartsIndex + 1\n        : pathnamePartsIndex\n\n      const childRequestKeyPart = createSegmentRequestKeyPart(childSegment)\n      const childRequestKey = appendSegmentRequestKeyPart(\n        requestKey,\n        parallelRouteKey,\n        childRequestKeyPart\n      )\n      slots[parallelRouteKey] = convertTreePrefetchToRouteTree(\n        childPrefetch,\n        childSegment,\n        childPartialVaryPath,\n        childRequestKey,\n        pathnameParts,\n        childPathnamePartsIndex,\n        renderedSearch,\n        acc\n      )\n    }\n  } else {\n    if (requestKey.endsWith(PAGE_SEGMENT_KEY)) {\n      // This is a page segment.\n      isPage = true\n      varyPath = finalizePageVaryPath(\n        requestKey,\n        renderedSearch,\n        partialVaryPath\n      )\n      // The metadata \"segment\" is not part the route tree, but it has the same\n      // conceptual params as a page segment. Write the vary path into the\n      // accumulator object. If there are multiple parallel pages, we use the\n      // first one. Which page we choose is arbitrary as long as it's\n      // consistently the same one every time every time. See\n      // finalizeMetadataVaryPath for more details.\n      if (acc.metadataVaryPath === null) {\n        acc.metadataVaryPath = finalizeMetadataVaryPath(\n          requestKey,\n          renderedSearch,\n          partialVaryPath\n        )\n      }\n    } else {\n      // This is a layout segment.\n      isPage = false\n      varyPath = finalizeLayoutVaryPath(requestKey, partialVaryPath)\n    }\n  }\n\n  return {\n    requestKey,\n    segment,\n    varyPath,\n    // TODO: Cheating the type system here a bit because TypeScript can't tell\n    // that the type of isPage and varyPath are consistent. The fix would be to\n    // create separate constructors and call the appropriate one from each of\n    // the branches above. Just seems a bit overkill only for one field so I'll\n    // leave it as-is for now. If isPage were wrong it would break the behavior\n    // and we'd catch it quickly, anyway.\n    isPage: isPage as boolean as any,\n    slots,\n    isRootLayout: prefetch.isRootLayout,\n    // This field is only relevant to dynamic routes. For a PPR/static route,\n    // there's always some partial loading state we can fetch.\n    hasLoadingBoundary: HasLoadingBoundary.SegmentHasLoadingBoundary,\n    hasRuntimePrefetch: prefetch.hasRuntimePrefetch,\n  }\n}\n\nfunction convertRootFlightRouterStateToRouteTree(\n  flightRouterState: FlightRouterState,\n  renderedSearch: NormalizedSearch,\n  acc: RouteTreeAccumulator\n): RouteTree {\n  return convertFlightRouterStateToRouteTree(\n    flightRouterState,\n    ROOT_SEGMENT_REQUEST_KEY,\n    null,\n    renderedSearch,\n    acc\n  )\n}\n\nfunction convertFlightRouterStateToRouteTree(\n  flightRouterState: FlightRouterState,\n  requestKey: SegmentRequestKey,\n  parentPartialVaryPath: PartialSegmentVaryPath | null,\n  renderedSearch: NormalizedSearch,\n  acc: RouteTreeAccumulator\n): RouteTree {\n  const originalSegment = flightRouterState[0]\n\n  let segment: FlightRouterStateSegment\n  let partialVaryPath: PartialSegmentVaryPath | null\n  let isPage: boolean\n  let varyPath: SegmentVaryPath\n  if (Array.isArray(originalSegment)) {\n    isPage = false\n    const paramCacheKey = originalSegment[1]\n    partialVaryPath = appendLayoutVaryPath(parentPartialVaryPath, paramCacheKey)\n    varyPath = finalizeLayoutVaryPath(requestKey, partialVaryPath)\n    segment = originalSegment\n  } else {\n    // This segment does not have a param. Inherit the partial vary path of\n    // the parent.\n    partialVaryPath = parentPartialVaryPath\n    if (requestKey.endsWith(PAGE_SEGMENT_KEY)) {\n      // This is a page segment.\n      isPage = true\n\n      // The navigation implementation expects the search params to be included\n      // in the segment. However, in the case of a static response, the search\n      // params are omitted. So the client needs to add them back in when reading\n      // from the Segment Cache.\n      //\n      // For consistency, we'll do this for dynamic responses, too.\n      //\n      // TODO: We should move search params out of FlightRouterState and handle\n      // them entirely on the client, similar to our plan for dynamic params.\n      segment = PAGE_SEGMENT_KEY\n      varyPath = finalizePageVaryPath(\n        requestKey,\n        renderedSearch,\n        partialVaryPath\n      )\n      // The metadata \"segment\" is not part the route tree, but it has the same\n      // conceptual params as a page segment. Write the vary path into the\n      // accumulator object. If there are multiple parallel pages, we use the\n      // first one. Which page we choose is arbitrary as long as it's\n      // consistently the same one every time every time. See\n      // finalizeMetadataVaryPath for more details.\n      if (acc.metadataVaryPath === null) {\n        acc.metadataVaryPath = finalizeMetadataVaryPath(\n          requestKey,\n          renderedSearch,\n          partialVaryPath\n        )\n      }\n    } else {\n      // This is a layout segment.\n      isPage = false\n      segment = originalSegment\n      varyPath = finalizeLayoutVaryPath(requestKey, partialVaryPath)\n    }\n  }\n\n  let slots: { [parallelRouteKey: string]: RouteTree } | null = null\n\n  const parallelRoutes = flightRouterState[1]\n  for (let parallelRouteKey in parallelRoutes) {\n    const childRouterState = parallelRoutes[parallelRouteKey]\n    const childSegment = childRouterState[0]\n    // TODO: Eventually, the param values will not be included in the response\n    // from the server. We'll instead fill them in on the client by parsing\n    // the URL. This is where we'll do that.\n    const childRequestKeyPart = createSegmentRequestKeyPart(childSegment)\n    const childRequestKey = appendSegmentRequestKeyPart(\n      requestKey,\n      parallelRouteKey,\n      childRequestKeyPart\n    )\n    const childTree = convertFlightRouterStateToRouteTree(\n      childRouterState,\n      childRequestKey,\n      partialVaryPath,\n      renderedSearch,\n      acc\n    )\n    if (slots === null) {\n      slots = {\n        [parallelRouteKey]: childTree,\n      }\n    } else {\n      slots[parallelRouteKey] = childTree\n    }\n  }\n\n  return {\n    requestKey,\n    segment,\n    varyPath,\n    // TODO: Cheating the type system here a bit because TypeScript can't tell\n    // that the type of isPage and varyPath are consistent. The fix would be to\n    // create separate constructors and call the appropriate one from each of\n    // the branches above. Just seems a bit overkill only for one field so I'll\n    // leave it as-is for now. If isPage were wrong it would break the behavior\n    // and we'd catch it quickly, anyway.\n    isPage: isPage as boolean as any,\n    slots,\n    isRootLayout: flightRouterState[4] === true,\n    hasLoadingBoundary:\n      flightRouterState[5] !== undefined\n        ? flightRouterState[5]\n        : HasLoadingBoundary.SubtreeHasNoLoadingBoundary,\n\n    // Non-static tree responses are only used by apps that haven't adopted\n    // Cache Components. So this is always false.\n    hasRuntimePrefetch: false,\n  }\n}\n\nexport function convertRouteTreeToFlightRouterState(\n  routeTree: RouteTree\n): FlightRouterState {\n  const parallelRoutes: Record<string, FlightRouterState> = {}\n  if (routeTree.slots !== null) {\n    for (const parallelRouteKey in routeTree.slots) {\n      parallelRoutes[parallelRouteKey] = convertRouteTreeToFlightRouterState(\n        routeTree.slots[parallelRouteKey]\n      )\n    }\n  }\n  const flightRouterState: FlightRouterState = [\n    routeTree.segment,\n    parallelRoutes,\n    null,\n    null,\n    routeTree.isRootLayout,\n  ]\n  return flightRouterState\n}\n\nexport async function fetchRouteOnCacheMiss(\n  entry: PendingRouteCacheEntry,\n  task: PrefetchTask,\n  key: RouteCacheKey\n): Promise<PrefetchSubtaskResult<null> | null> {\n  // This function is allowed to use async/await because it contains the actual\n  // fetch that gets issued on a cache miss. Notice it writes the result to the\n  // cache entry directly, rather than return data that is then written by\n  // the caller.\n  const pathname = key.pathname\n  const search = key.search\n  const nextUrl = key.nextUrl\n  const segmentPath = '/_tree' as SegmentRequestKey\n\n  const headers: RequestHeaders = {\n    [RSC_HEADER]: '1',\n    [NEXT_ROUTER_PREFETCH_HEADER]: '1',\n    [NEXT_ROUTER_SEGMENT_PREFETCH_HEADER]: segmentPath,\n  }\n  if (nextUrl !== null) {\n    headers[NEXT_URL] = nextUrl\n  }\n\n  try {\n    const url = new URL(pathname + search, location.origin)\n    let response\n    let urlAfterRedirects\n    if (isOutputExportMode) {\n      // In output: \"export\" mode, we can't use headers to request a particular\n      // segment. Instead, we encode the extra request information into the URL.\n      // This is not part of the \"public\" interface of the app; it's an internal\n      // Next.js implementation detail that the app developer should not need to\n      // concern themselves with.\n      //\n      // For example, to request a segment:\n      //\n      //   Path passed to <Link>:   /path/to/page\n      //   Path passed to fetch:    /path/to/page/__next-segments/_tree\n      //\n      //   (This is not the exact protocol, just an illustration.)\n      //\n      // Before we do that, though, we need to account for redirects. Even in\n      // output: \"export\" mode, a proxy might redirect the page to a different\n      // location, but we shouldn't assume or expect that they also redirect all\n      // the segment files, too.\n      //\n      // To check whether the page is redirected, we perform a range request of\n      // the first N bytes of the HTML document. The canonical URL is determined\n      // from the response.\n      //\n      // Then we can use the canonical URL to request the route tree.\n      //\n      // NOTE: We could embed the route tree into the HTML document, to avoid\n      // a second request. We're not doing that currently because it would make\n      // the HTML document larger and affect normal page loads.\n      const htmlResponse = await fetch(url, {\n        headers: {\n          Range: DOC_PREFETCH_RANGE_HEADER_VALUE,\n        },\n      })\n      const partialHtml = await htmlResponse.text()\n      if (!doesExportedHtmlMatchBuildId(partialHtml, getAppBuildId())) {\n        // The target page is not part of this app, or it belongs to a\n        // different build.\n        rejectRouteCacheEntry(entry, Date.now() + 10 * 1000)\n        return null\n      }\n      urlAfterRedirects = htmlResponse.redirected\n        ? new URL(htmlResponse.url)\n        : url\n      response = await fetchPrefetchResponse(\n        addSegmentPathToUrlInOutputExportMode(urlAfterRedirects, segmentPath),\n        headers\n      )\n    } else {\n      // \"Server\" mode. We can use request headers instead of the pathname.\n      // TODO: The eventual plan is to get rid of our custom request headers and\n      // encode everything into the URL, using a similar strategy to the\n      // \"output: export\" block above.\n      response = await fetchPrefetchResponse(url, headers)\n      urlAfterRedirects =\n        response !== null && response.redirected ? new URL(response.url) : url\n    }\n\n    if (\n      !response ||\n      !response.ok ||\n      // 204 is a Cache miss. Though theoretically this shouldn't happen when\n      // PPR is enabled, because we always respond to route tree requests, even\n      // if it needs to be blockingly generated on demand.\n      response.status === 204 ||\n      !response.body\n    ) {\n      // Server responded with an error, or with a miss. We should still cache\n      // the response, but we can try again after 10 seconds.\n      rejectRouteCacheEntry(entry, Date.now() + 10 * 1000)\n      return null\n    }\n\n    // TODO: The canonical URL is the href without the origin. I think\n    // historically the reason for this is because the initial canonical URL\n    // gets passed as a prop to the top-level React component, which means it\n    // needs to be computed during SSR. If it were to include the origin, it\n    // would need to always be same as location.origin on the client, to prevent\n    // a hydration mismatch. To sidestep this complexity, we omit the origin.\n    //\n    // However, since this is neither a native URL object nor a fully qualified\n    // URL string, we need to be careful about how we use it. To prevent subtle\n    // mistakes, we should create a special type for it, instead of just string.\n    // Or, we should just use a (readonly) URL object instead. The type of the\n    // prop that we pass to seed the initial state does not need to be the same\n    // type as the state itself.\n    const canonicalUrl = createHrefFromUrl(urlAfterRedirects)\n\n    // Check whether the response varies based on the Next-Url header.\n    const varyHeader = response.headers.get('vary')\n    const couldBeIntercepted =\n      varyHeader !== null && varyHeader.includes(NEXT_URL)\n\n    // Track when the network connection closes.\n    const closed = createPromiseWithResolvers<void>()\n\n    // This checks whether the response was served from the per-segment cache,\n    // rather than the old prefetching flow. If it fails, it implies that PPR\n    // is disabled on this route.\n    const routeIsPPREnabled =\n      response.headers.get(NEXT_DID_POSTPONE_HEADER) === '2' ||\n      // In output: \"export\" mode, we can't rely on response headers. But if we\n      // receive a well-formed response, we can assume it's a static response,\n      // because all data is static in this mode.\n      isOutputExportMode\n\n    if (routeIsPPREnabled) {\n      const prefetchStream = createPrefetchResponseStream(\n        response.body,\n        closed.resolve,\n        function onResponseSizeUpdate(size) {\n          setSizeInCacheMap(entry, size)\n        }\n      )\n      const serverData = await createFromNextReadableStream<RootTreePrefetch>(\n        prefetchStream,\n        headers\n      )\n      if (serverData.buildId !== getAppBuildId()) {\n        // The server build does not match the client. Treat as a 404. During\n        // an actual navigation, the router will trigger an MPA navigation.\n        // TODO: Consider moving the build ID to a response header so we can check\n        // it before decoding the response, and so there's one way of checking\n        // across all response types.\n        // TODO: We should cache the fact that this is an MPA navigation.\n        rejectRouteCacheEntry(entry, Date.now() + 10 * 1000)\n        return null\n      }\n\n      // Get the params that were used to render the target page. These may\n      // be different from the params in the request URL, if the page\n      // was rewritten.\n      const renderedPathname = getRenderedPathname(response)\n      const renderedSearch = getRenderedSearch(response)\n\n      // Convert the server-sent data into the RouteTree format used by the\n      // client cache.\n      //\n      // During this traversal, we accumulate additional data into this\n      // \"accumulator\" object.\n      const acc: RouteTreeAccumulator = { metadataVaryPath: null }\n      const routeTree = convertRootTreePrefetchToRouteTree(\n        serverData,\n        renderedPathname,\n        renderedSearch,\n        acc\n      )\n      const metadataVaryPath = acc.metadataVaryPath\n      if (metadataVaryPath === null) {\n        rejectRouteCacheEntry(entry, Date.now() + 10 * 1000)\n        return null\n      }\n\n      const staleTimeMs = getStaleTimeMs(serverData.staleTime)\n      fulfillRouteCacheEntry(\n        entry,\n        routeTree,\n        metadataVaryPath,\n        Date.now() + staleTimeMs,\n        couldBeIntercepted,\n        canonicalUrl,\n        renderedSearch,\n        routeIsPPREnabled\n      )\n    } else {\n      // PPR is not enabled for this route. The server responds with a\n      // different format (FlightRouterState) that we need to convert.\n      // TODO: We will unify the responses eventually. I'm keeping the types\n      // separate for now because FlightRouterState has so many\n      // overloaded concerns.\n      const prefetchStream = createPrefetchResponseStream(\n        response.body,\n        closed.resolve,\n        function onResponseSizeUpdate(size) {\n          setSizeInCacheMap(entry, size)\n        }\n      )\n      const serverData =\n        await createFromNextReadableStream<NavigationFlightResponse>(\n          prefetchStream,\n          headers\n        )\n      if (serverData.b !== getAppBuildId()) {\n        // The server build does not match the client. Treat as a 404. During\n        // an actual navigation, the router will trigger an MPA navigation.\n        // TODO: Consider moving the build ID to a response header so we can check\n        // it before decoding the response, and so there's one way of checking\n        // across all response types.\n        // TODO: We should cache the fact that this is an MPA navigation.\n        rejectRouteCacheEntry(entry, Date.now() + 10 * 1000)\n        return null\n      }\n\n      writeDynamicTreeResponseIntoCache(\n        Date.now(),\n        task,\n        // The non-PPR response format is what we'd get if we prefetched these segments\n        // using the LoadingBoundary fetch strategy, so mark their cache entries accordingly.\n        FetchStrategy.LoadingBoundary,\n        response as RSCResponse<NavigationFlightResponse>,\n        serverData,\n        entry,\n        couldBeIntercepted,\n        canonicalUrl,\n        routeIsPPREnabled\n      )\n    }\n\n    if (!couldBeIntercepted) {\n      // This route will never be intercepted. So we can use this entry for all\n      // requests to this route, regardless of the Next-Url header. This works\n      // because when reading the cache we always check for a valid\n      // non-intercepted entry first.\n\n      // Re-key the entry. The `set` implementation handles removing it from\n      // its previous position in the cache. We don't need to do anything to\n      // update the LRU, because the entry is already in it.\n      // TODO: Treat this as an upsert  should check if an entry already\n      // exists at the new keypath, and if so, whether we should keep that\n      // one instead.\n      const fulfilledVaryPath: RouteVaryPath = getFulfilledRouteVaryPath(\n        pathname,\n        search,\n        nextUrl,\n        couldBeIntercepted\n      )\n      const isRevalidation = false\n      setInCacheMap(routeCacheMap, fulfilledVaryPath, entry, isRevalidation)\n    }\n    // Return a promise that resolves when the network connection closes, so\n    // the scheduler can track the number of concurrent network connections.\n    return { value: null, closed: closed.promise }\n  } catch (error) {\n    // Either the connection itself failed, or something bad happened while\n    // decoding the response.\n    rejectRouteCacheEntry(entry, Date.now() + 10 * 1000)\n    return null\n  }\n}\n\nexport async function fetchSegmentOnCacheMiss(\n  route: FulfilledRouteCacheEntry,\n  segmentCacheEntry: PendingSegmentCacheEntry,\n  routeKey: RouteCacheKey,\n  tree: RouteTree\n): Promise<PrefetchSubtaskResult<FulfilledSegmentCacheEntry> | null> {\n  // This function is allowed to use async/await because it contains the actual\n  // fetch that gets issued on a cache miss. Notice it writes the result to the\n  // cache entry directly, rather than return data that is then written by\n  // the caller.\n  //\n  // Segment fetches are non-blocking so we don't need to ping the scheduler\n  // on completion.\n\n  // Use the canonical URL to request the segment, not the original URL. These\n  // are usually the same, but the canonical URL will be different if the route\n  // tree response was redirected. To avoid an extra waterfall on every segment\n  // request, we pass the redirected URL instead of the original one.\n  const url = new URL(route.canonicalUrl, location.origin)\n  const nextUrl = routeKey.nextUrl\n\n  const requestKey = tree.requestKey\n  const normalizedRequestKey =\n    requestKey === ROOT_SEGMENT_REQUEST_KEY\n      ? // The root segment is a special case. To simplify the server-side\n        // handling of these requests, we encode the root segment path as\n        // `_index` instead of as an empty string. This should be treated as\n        // an implementation detail and not as a stable part of the protocol.\n        // It just needs to match the equivalent logic that happens when\n        // prerendering the responses. It should not leak outside of Next.js.\n        ('/_index' as SegmentRequestKey)\n      : requestKey\n\n  const headers: RequestHeaders = {\n    [RSC_HEADER]: '1',\n    [NEXT_ROUTER_PREFETCH_HEADER]: '1',\n    [NEXT_ROUTER_SEGMENT_PREFETCH_HEADER]: normalizedRequestKey,\n  }\n  if (nextUrl !== null) {\n    headers[NEXT_URL] = nextUrl\n  }\n\n  const requestUrl = isOutputExportMode\n    ? // In output: \"export\" mode, we need to add the segment path to the URL.\n      addSegmentPathToUrlInOutputExportMode(url, normalizedRequestKey)\n    : url\n  try {\n    const response = await fetchPrefetchResponse(requestUrl, headers)\n    if (\n      !response ||\n      !response.ok ||\n      response.status === 204 || // Cache miss\n      // This checks whether the response was served from the per-segment cache,\n      // rather than the old prefetching flow. If it fails, it implies that PPR\n      // is disabled on this route. Theoretically this should never happen\n      // because we only issue requests for segments once we've verified that\n      // the route supports PPR.\n      (response.headers.get(NEXT_DID_POSTPONE_HEADER) !== '2' &&\n        // In output: \"export\" mode, we can't rely on response headers. But if\n        // we receive a well-formed response, we can assume it's a static\n        // response, because all data is static in this mode.\n        !isOutputExportMode) ||\n      !response.body\n    ) {\n      // Server responded with an error, or with a miss. We should still cache\n      // the response, but we can try again after 10 seconds.\n      rejectSegmentCacheEntry(segmentCacheEntry, Date.now() + 10 * 1000)\n      return null\n    }\n\n    // Track when the network connection closes.\n    const closed = createPromiseWithResolvers<void>()\n\n    // Wrap the original stream in a new stream that never closes. That way the\n    // Flight client doesn't error if there's a hanging promise.\n    const prefetchStream = createPrefetchResponseStream(\n      response.body,\n      closed.resolve,\n      function onResponseSizeUpdate(size) {\n        setSizeInCacheMap(segmentCacheEntry, size)\n      }\n    )\n    const serverData = await (createFromNextReadableStream(\n      prefetchStream,\n      headers\n    ) as Promise<SegmentPrefetch>)\n    if (serverData.buildId !== getAppBuildId()) {\n      // The server build does not match the client. Treat as a 404. During\n      // an actual navigation, the router will trigger an MPA navigation.\n      // TODO: Consider moving the build ID to a response header so we can check\n      // it before decoding the response, and so there's one way of checking\n      // across all response types.\n      rejectSegmentCacheEntry(segmentCacheEntry, Date.now() + 10 * 1000)\n      return null\n    }\n    return {\n      value: fulfillSegmentCacheEntry(\n        segmentCacheEntry,\n        serverData.rsc,\n        serverData.loading,\n        // TODO: The server does not currently provide per-segment stale time.\n        // So we use the stale time of the route.\n        route.staleAt,\n        serverData.isPartial\n      ),\n      // Return a promise that resolves when the network connection closes, so\n      // the scheduler can track the number of concurrent network connections.\n      closed: closed.promise,\n    }\n  } catch (error) {\n    // Either the connection itself failed, or something bad happened while\n    // decoding the response.\n    rejectSegmentCacheEntry(segmentCacheEntry, Date.now() + 10 * 1000)\n    return null\n  }\n}\n\nexport async function fetchSegmentPrefetchesUsingDynamicRequest(\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  fetchStrategy:\n    | FetchStrategy.LoadingBoundary\n    | FetchStrategy.PPRRuntime\n    | FetchStrategy.Full,\n  dynamicRequestTree: FlightRouterState,\n  spawnedEntries: Map<SegmentRequestKey, PendingSegmentCacheEntry>\n): Promise<PrefetchSubtaskResult<null> | null> {\n  const key = task.key\n  const url = new URL(route.canonicalUrl, location.origin)\n  const nextUrl = key.nextUrl\n\n  if (\n    spawnedEntries.size === 1 &&\n    spawnedEntries.has(route.metadata.requestKey)\n  ) {\n    // The only thing pending is the head. Instruct the server to\n    // skip over everything else.\n    dynamicRequestTree = MetadataOnlyRequestTree\n  }\n\n  const headers: RequestHeaders = {\n    [RSC_HEADER]: '1',\n    [NEXT_ROUTER_STATE_TREE_HEADER]:\n      prepareFlightRouterStateForRequest(dynamicRequestTree),\n  }\n  if (nextUrl !== null) {\n    headers[NEXT_URL] = nextUrl\n  }\n  switch (fetchStrategy) {\n    case FetchStrategy.Full: {\n      // We omit the prefetch header from a full prefetch because it's essentially\n      // just a navigation request that happens ahead of time  it should include\n      // all the same data in the response.\n      break\n    }\n    case FetchStrategy.PPRRuntime: {\n      headers[NEXT_ROUTER_PREFETCH_HEADER] = '2'\n      break\n    }\n    case FetchStrategy.LoadingBoundary: {\n      headers[NEXT_ROUTER_PREFETCH_HEADER] = '1'\n      break\n    }\n    default: {\n      fetchStrategy satisfies never\n    }\n  }\n\n  try {\n    const response = await fetchPrefetchResponse(url, headers)\n    if (!response || !response.ok || !response.body) {\n      // Server responded with an error, or with a miss. We should still cache\n      // the response, but we can try again after 10 seconds.\n      rejectSegmentEntriesIfStillPending(spawnedEntries, Date.now() + 10 * 1000)\n      return null\n    }\n\n    const renderedSearch = getRenderedSearch(response)\n    if (renderedSearch !== route.renderedSearch) {\n      // The search params that were used to render the target page are\n      // different from the search params in the request URL. This only happens\n      // when there's a dynamic rewrite in between the tree prefetch and the\n      // data prefetch.\n      // TODO: For now, since this is an edge case, we reject the prefetch, but\n      // the proper way to handle this is to evict the stale route tree entry\n      // then fill the cache with the new response.\n      rejectSegmentEntriesIfStillPending(spawnedEntries, Date.now() + 10 * 1000)\n      return null\n    }\n\n    // Track when the network connection closes.\n    const closed = createPromiseWithResolvers<void>()\n\n    let fulfilledEntries: Array<FulfilledSegmentCacheEntry> | null = null\n    const prefetchStream = createPrefetchResponseStream(\n      response.body,\n      closed.resolve,\n      function onResponseSizeUpdate(totalBytesReceivedSoFar) {\n        // When processing a dynamic response, we don't know how large each\n        // individual segment is, so approximate by assiging each segment\n        // the average of the total response size.\n        if (fulfilledEntries === null) {\n          // Haven't received enough data yet to know which segments\n          // were included.\n          return\n        }\n        const averageSize = totalBytesReceivedSoFar / fulfilledEntries.length\n        for (const entry of fulfilledEntries) {\n          setSizeInCacheMap(entry, averageSize)\n        }\n      }\n    )\n    const serverData = await (createFromNextReadableStream(\n      prefetchStream,\n      headers\n    ) as Promise<NavigationFlightResponse>)\n\n    const isResponsePartial =\n      fetchStrategy === FetchStrategy.PPRRuntime\n        ? // A runtime prefetch may have holes.\n          serverData.rp?.[0] === true\n        : // Full and LoadingBoundary prefetches cannot have holes.\n          // (even if we did set the prefetch header, we only use this codepath for non-PPR-enabled routes)\n          false\n\n    // Aside from writing the data into the cache, this function also returns\n    // the entries that were fulfilled, so we can streamingly update their sizes\n    // in the LRU as more data comes in.\n    fulfilledEntries = writeDynamicRenderResponseIntoCache(\n      Date.now(),\n      task,\n      fetchStrategy,\n      response as RSCResponse<NavigationFlightResponse>,\n      serverData,\n      isResponsePartial,\n      route,\n      spawnedEntries\n    )\n\n    // Return a promise that resolves when the network connection closes, so\n    // the scheduler can track the number of concurrent network connections.\n    return { value: null, closed: closed.promise }\n  } catch (error) {\n    rejectSegmentEntriesIfStillPending(spawnedEntries, Date.now() + 10 * 1000)\n    return null\n  }\n}\n\nfunction writeDynamicTreeResponseIntoCache(\n  now: number,\n  task: PrefetchTask,\n  fetchStrategy:\n    | FetchStrategy.LoadingBoundary\n    | FetchStrategy.PPRRuntime\n    | FetchStrategy.Full,\n  response: RSCResponse<NavigationFlightResponse>,\n  serverData: NavigationFlightResponse,\n  entry: PendingRouteCacheEntry,\n  couldBeIntercepted: boolean,\n  canonicalUrl: string,\n  routeIsPPREnabled: boolean\n) {\n  // Get the URL that was used to render the target page. This may be different\n  // from the URL in the request URL, if the page was rewritten.\n  const renderedSearch = getRenderedSearch(response)\n\n  const normalizedFlightDataResult = normalizeFlightData(serverData.f)\n  if (\n    // A string result means navigating to this route will result in an\n    // MPA navigation.\n    typeof normalizedFlightDataResult === 'string' ||\n    normalizedFlightDataResult.length !== 1\n  ) {\n    rejectRouteCacheEntry(entry, now + 10 * 1000)\n    return\n  }\n  const flightData = normalizedFlightDataResult[0]\n  if (!flightData.isRootRender) {\n    // Unexpected response format.\n    rejectRouteCacheEntry(entry, now + 10 * 1000)\n    return\n  }\n\n  const flightRouterState = flightData.tree\n  // For runtime prefetches, stale time is in the payload at rp[1].\n  // For other responses, fall back to the header.\n  const staleTimeSeconds =\n    typeof serverData.rp?.[1] === 'number'\n      ? serverData.rp[1]\n      : parseInt(response.headers.get(NEXT_ROUTER_STALE_TIME_HEADER) ?? '', 10)\n  const staleTimeMs = !isNaN(staleTimeSeconds)\n    ? getStaleTimeMs(staleTimeSeconds)\n    : STATIC_STALETIME_MS\n\n  // If the response contains dynamic holes, then we must conservatively assume\n  // that any individual segment might contain dynamic holes, and also the\n  // head. If it did not contain dynamic holes, then we can assume every segment\n  // and the head is completely static.\n  const isResponsePartial =\n    response.headers.get(NEXT_DID_POSTPONE_HEADER) === '1'\n\n  // Convert the server-sent data into the RouteTree format used by the\n  // client cache.\n  //\n  // During this traversal, we accumulate additional data into this\n  // \"accumulator\" object.\n  const acc: RouteTreeAccumulator = { metadataVaryPath: null }\n  const routeTree = convertRootFlightRouterStateToRouteTree(\n    flightRouterState,\n    renderedSearch,\n    acc\n  )\n  const metadataVaryPath = acc.metadataVaryPath\n  if (metadataVaryPath === null) {\n    rejectRouteCacheEntry(entry, now + 10 * 1000)\n    return\n  }\n\n  const fulfilledEntry = fulfillRouteCacheEntry(\n    entry,\n    routeTree,\n    metadataVaryPath,\n    now + staleTimeMs,\n    couldBeIntercepted,\n    canonicalUrl,\n    renderedSearch,\n    routeIsPPREnabled\n  )\n\n  // If the server sent segment data as part of the response, we should write\n  // it into the cache to prevent a second, redundant prefetch request.\n  //\n  // TODO: When `clientSegmentCache` is enabled, the server does not include\n  // segment data when responding to a route tree prefetch request. However,\n  // when `clientSegmentCache` is set to \"client-only\", and PPR is enabled (or\n  // the page is fully static), the normal check is bypassed and the server\n  // responds with the full page. This is a temporary situation until we can\n  // remove the \"client-only\" option. Then, we can delete this function call.\n  writeDynamicRenderResponseIntoCache(\n    now,\n    task,\n    fetchStrategy,\n    response,\n    serverData,\n    isResponsePartial,\n    fulfilledEntry,\n    null\n  )\n}\n\nfunction rejectSegmentEntriesIfStillPending(\n  entries: Map<SegmentRequestKey, SegmentCacheEntry>,\n  staleAt: number\n): Array<FulfilledSegmentCacheEntry> {\n  const fulfilledEntries = []\n  for (const entry of entries.values()) {\n    if (entry.status === EntryStatus.Pending) {\n      rejectSegmentCacheEntry(entry, staleAt)\n    } else if (entry.status === EntryStatus.Fulfilled) {\n      fulfilledEntries.push(entry)\n    }\n  }\n  return fulfilledEntries\n}\n\nfunction writeDynamicRenderResponseIntoCache(\n  now: number,\n  task: PrefetchTask,\n  fetchStrategy:\n    | FetchStrategy.LoadingBoundary\n    | FetchStrategy.PPRRuntime\n    | FetchStrategy.Full,\n  response: RSCResponse<NavigationFlightResponse>,\n  serverData: NavigationFlightResponse,\n  isResponsePartial: boolean,\n  route: FulfilledRouteCacheEntry,\n  spawnedEntries: Map<SegmentRequestKey, PendingSegmentCacheEntry> | null\n): Array<FulfilledSegmentCacheEntry> | null {\n  if (serverData.b !== getAppBuildId()) {\n    // The server build does not match the client. Treat as a 404. During\n    // an actual navigation, the router will trigger an MPA navigation.\n    // TODO: Consider moving the build ID to a response header so we can check\n    // it before decoding the response, and so there's one way of checking\n    // across all response types.\n    if (spawnedEntries !== null) {\n      rejectSegmentEntriesIfStillPending(spawnedEntries, now + 10 * 1000)\n    }\n    return null\n  }\n\n  const flightDatas = normalizeFlightData(serverData.f)\n  if (typeof flightDatas === 'string') {\n    // This means navigating to this route will result in an MPA navigation.\n    // TODO: We should cache this, too, so that the MPA navigation is immediate.\n    return null\n  }\n\n  // For runtime prefetches, stale time is in the payload at rp[1].\n  // For other responses, fall back to the header.\n  const staleTimeSeconds =\n    typeof serverData.rp?.[1] === 'number'\n      ? serverData.rp[1]\n      : parseInt(response.headers.get(NEXT_ROUTER_STALE_TIME_HEADER) ?? '', 10)\n  const staleTimeMs = !isNaN(staleTimeSeconds)\n    ? getStaleTimeMs(staleTimeSeconds)\n    : STATIC_STALETIME_MS\n  const staleAt = now + staleTimeMs\n\n  for (const flightData of flightDatas) {\n    const seedData = flightData.seedData\n    if (seedData !== null) {\n      // The data sent by the server represents only a subtree of the app. We\n      // need to find the part of the task tree that matches the response.\n      //\n      // segmentPath represents the parent path of subtree. It's a repeating\n      // pattern of parallel route key and segment:\n      //\n      //   [string, Segment, string, Segment, string, Segment, ...]\n      const segmentPath = flightData.segmentPath\n      let tree = route.tree\n      for (let i = 0; i < segmentPath.length; i += 2) {\n        const parallelRouteKey: string = segmentPath[i]\n        if (tree?.slots?.[parallelRouteKey] !== undefined) {\n          tree = tree.slots[parallelRouteKey]\n        } else {\n          if (spawnedEntries !== null) {\n            rejectSegmentEntriesIfStillPending(spawnedEntries, now + 10 * 1000)\n          }\n          return null\n        }\n      }\n\n      writeSeedDataIntoCache(\n        now,\n        task,\n        fetchStrategy,\n        route,\n        tree,\n        staleAt,\n        seedData,\n        isResponsePartial,\n        spawnedEntries\n      )\n    }\n\n    const head = flightData.head\n    if (head !== null) {\n      fulfillEntrySpawnedByRuntimePrefetch(\n        now,\n        fetchStrategy,\n        route,\n        head,\n        null,\n        flightData.isHeadPartial,\n        staleAt,\n        route.metadata,\n        spawnedEntries\n      )\n    }\n  }\n  // Any entry that's still pending was intentionally not rendered by the\n  // server, because it was inside the loading boundary. Mark them as rejected\n  // so we know not to fetch them again.\n  // TODO: If PPR is enabled on some routes but not others, then it's possible\n  // that a different page is able to do a per-segment prefetch of one of the\n  // segments we're marking as rejected here. We should mark on the segment\n  // somehow that the reason for the rejection is because of a non-PPR prefetch.\n  // That way a per-segment prefetch knows to disregard the rejection.\n  if (spawnedEntries !== null) {\n    const fulfilledEntries = rejectSegmentEntriesIfStillPending(\n      spawnedEntries,\n      now + 10 * 1000\n    )\n    return fulfilledEntries\n  }\n  return null\n}\n\nfunction writeSeedDataIntoCache(\n  now: number,\n  task: PrefetchTask,\n  fetchStrategy:\n    | FetchStrategy.LoadingBoundary\n    | FetchStrategy.PPRRuntime\n    | FetchStrategy.Full,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree,\n  staleAt: number,\n  seedData: CacheNodeSeedData,\n  isResponsePartial: boolean,\n  entriesOwnedByCurrentTask: Map<\n    SegmentRequestKey,\n    PendingSegmentCacheEntry\n  > | null\n) {\n  // This function is used to write the result of a runtime server request\n  // (CacheNodeSeedData) into the prefetch cache.\n  const rsc = seedData[0]\n  const loading = seedData[2]\n  const isPartial = rsc === null || isResponsePartial\n  fulfillEntrySpawnedByRuntimePrefetch(\n    now,\n    fetchStrategy,\n    route,\n    rsc,\n    loading,\n    isPartial,\n    staleAt,\n    tree,\n    entriesOwnedByCurrentTask\n  )\n\n  // Recursively write the child data into the cache.\n  const slots = tree.slots\n  if (slots !== null) {\n    const seedDataChildren = seedData[1]\n    for (const parallelRouteKey in slots) {\n      const childTree = slots[parallelRouteKey]\n      const childSeedData: CacheNodeSeedData | null | void =\n        seedDataChildren[parallelRouteKey]\n      if (childSeedData !== null && childSeedData !== undefined) {\n        writeSeedDataIntoCache(\n          now,\n          task,\n          fetchStrategy,\n          route,\n          childTree,\n          staleAt,\n          childSeedData,\n          isResponsePartial,\n          entriesOwnedByCurrentTask\n        )\n      }\n    }\n  }\n}\n\nfunction fulfillEntrySpawnedByRuntimePrefetch(\n  now: number,\n  fetchStrategy:\n    | FetchStrategy.LoadingBoundary\n    | FetchStrategy.PPRRuntime\n    | FetchStrategy.Full,\n  route: FulfilledRouteCacheEntry,\n  rsc: React.ReactNode,\n  loading: LoadingModuleData | Promise<LoadingModuleData>,\n  isPartial: boolean,\n  staleAt: number,\n  tree: RouteTree,\n  entriesOwnedByCurrentTask: Map<\n    SegmentRequestKey,\n    PendingSegmentCacheEntry\n  > | null\n) {\n  // We should only write into cache entries that are owned by us. Or create\n  // a new one and write into that. We must never write over an entry that was\n  // created by a different task, because that causes data races.\n  const ownedEntry =\n    entriesOwnedByCurrentTask !== null\n      ? entriesOwnedByCurrentTask.get(tree.requestKey)\n      : undefined\n  if (ownedEntry !== undefined) {\n    fulfillSegmentCacheEntry(ownedEntry, rsc, loading, staleAt, isPartial)\n  } else {\n    // There's no matching entry. Attempt to create a new one.\n    const possiblyNewEntry = readOrCreateSegmentCacheEntry(\n      now,\n      fetchStrategy,\n      route,\n      tree\n    )\n    if (possiblyNewEntry.status === EntryStatus.Empty) {\n      // Confirmed this is a new entry. We can fulfill it.\n      const newEntry = possiblyNewEntry\n      fulfillSegmentCacheEntry(\n        upgradeToPendingSegment(newEntry, fetchStrategy),\n        rsc,\n        loading,\n        staleAt,\n        isPartial\n      )\n    } else {\n      // There was already an entry in the cache. But we may be able to\n      // replace it with the new one from the server.\n      const newEntry = fulfillSegmentCacheEntry(\n        upgradeToPendingSegment(\n          createDetachedSegmentCacheEntry(staleAt),\n          fetchStrategy\n        ),\n        rsc,\n        loading,\n        staleAt,\n        isPartial\n      )\n      upsertSegmentEntry(\n        now,\n        getSegmentVaryPathForRequest(fetchStrategy, tree),\n        newEntry\n      )\n    }\n  }\n}\n\nasync function fetchPrefetchResponse<T>(\n  url: URL,\n  headers: RequestHeaders\n): Promise<RSCResponse<T> | null> {\n  const fetchPriority = 'low'\n  // When issuing a prefetch request, don't immediately decode the response; we\n  // use the lower level `createFromResponse` API instead because we need to do\n  // some extra processing of the response stream. See\n  // `createPrefetchResponseStream` for more details.\n  const shouldImmediatelyDecode = false\n  const response = await createFetch<T>(\n    url,\n    headers,\n    fetchPriority,\n    shouldImmediatelyDecode\n  )\n  if (!response.ok) {\n    return null\n  }\n\n  // Check the content type\n  if (isOutputExportMode) {\n    // In output: \"export\" mode, we relaxed about the content type, since it's\n    // not Next.js that's serving the response. If the status is OK, assume the\n    // response is valid. If it's not a valid response, the Flight client won't\n    // be able to decode it, and we'll treat it as a miss.\n  } else {\n    const contentType = response.headers.get('content-type')\n    const isFlightResponse =\n      contentType && contentType.startsWith(RSC_CONTENT_TYPE_HEADER)\n    if (!isFlightResponse) {\n      return null\n    }\n  }\n  return response\n}\n\nfunction createPrefetchResponseStream(\n  originalFlightStream: ReadableStream<Uint8Array>,\n  onStreamClose: () => void,\n  onResponseSizeUpdate: (size: number) => void\n): ReadableStream<Uint8Array> {\n  // When PPR is enabled, prefetch streams may contain references that never\n  // resolve, because that's how we encode dynamic data access. In the decoded\n  // object returned by the Flight client, these are reified into hanging\n  // promises that suspend during render, which is effectively what we want.\n  // The UI resolves when it switches to the dynamic data stream\n  // (via useDeferredValue(dynamic, static)).\n  //\n  // However, the Flight implementation currently errors if the server closes\n  // the response before all the references are resolved. As a cheat to work\n  // around this, we wrap the original stream in a new stream that never closes,\n  // and therefore doesn't error.\n  //\n  // While processing the original stream, we also incrementally update the size\n  // of the cache entry in the LRU.\n  let totalByteLength = 0\n  const reader = originalFlightStream.getReader()\n  return new ReadableStream({\n    async pull(controller) {\n      while (true) {\n        const { done, value } = await reader.read()\n        if (!done) {\n          // Pass to the target stream and keep consuming the Flight response\n          // from the server.\n          controller.enqueue(value)\n\n          // Incrementally update the size of the cache entry in the LRU.\n          // NOTE: Since prefetch responses are delivered in a single chunk,\n          // it's not really necessary to do this streamingly, but I'm doing it\n          // anyway in case this changes in the future.\n          totalByteLength += value.byteLength\n          onResponseSizeUpdate(totalByteLength)\n          continue\n        }\n        // The server stream has closed. Exit, but intentionally do not close\n        // the target stream. We do notify the caller, though.\n        onStreamClose()\n        return\n      }\n    },\n  })\n}\n\nfunction addSegmentPathToUrlInOutputExportMode(\n  url: URL,\n  segmentPath: SegmentRequestKey\n): URL {\n  if (isOutputExportMode) {\n    // In output: \"export\" mode, we cannot use a header to encode the segment\n    // path. Instead, we append it to the end of the pathname.\n    const staticUrl = new URL(url)\n    const routeDir = staticUrl.pathname.endsWith('/')\n      ? staticUrl.pathname.slice(0, -1)\n      : staticUrl.pathname\n    const staticExportFilename =\n      convertSegmentPathToStaticExportFilename(segmentPath)\n    staticUrl.pathname = `${routeDir}/${staticExportFilename}`\n    return staticUrl\n  }\n  return url\n}\n\n/**\n * Checks whether the new fetch strategy is likely to provide more content than the old one.\n *\n * Generally, when an app uses dynamic data, a \"more specific\" fetch strategy is expected to provide more content:\n * - `LoadingBoundary` only provides static layouts\n * - `PPR` can provide shells for each segment (even for segments that use dynamic data)\n * - `PPRRuntime` can additionally include content that uses searchParams, params, or cookies\n * - `Full` includes all the content, even if it uses dynamic data\n *\n * However, it's possible that a more specific fetch strategy *won't* give us more content if:\n * - a segment is fully static\n *   (then, `PPR`/`PPRRuntime`/`Full` will all yield equivalent results)\n * - providing searchParams/params/cookies doesn't reveal any more content, e.g. because of an `await connection()`\n *   (then, `PPR` and `PPRRuntime` will yield equivalent results, only `Full` will give us more)\n * Because of this, when comparing two segments, we should also check if the existing segment is partial.\n * If it's not partial, then there's no need to prefetch it again, even using a \"more specific\" strategy.\n * There's currently no way to know if `PPRRuntime` will yield more data that `PPR`, so we have to assume it will.\n *\n * Also note that, in practice, we don't expect to be comparing `LoadingBoundary` to `PPR`/`PPRRuntime`,\n * because a non-PPR-enabled route wouldn't ever use the latter strategies. It might however use `Full`.\n */\nexport function canNewFetchStrategyProvideMoreContent(\n  currentStrategy: FetchStrategy,\n  newStrategy: FetchStrategy\n): boolean {\n  return currentStrategy < newStrategy\n}\n","import type {\n  FlightRouterState,\n  Segment as FlightRouterStateSegment,\n  Segment,\n} from '../../../shared/lib/app-router-types'\nimport { HasLoadingBoundary } from '../../../shared/lib/app-router-types'\nimport { matchSegment } from '../match-segments'\nimport {\n  readOrCreateRouteCacheEntry,\n  readOrCreateSegmentCacheEntry,\n  fetchRouteOnCacheMiss,\n  fetchSegmentOnCacheMiss,\n  EntryStatus,\n  type FulfilledRouteCacheEntry,\n  type RouteCacheEntry,\n  type SegmentCacheEntry,\n  type RouteTree,\n  fetchSegmentPrefetchesUsingDynamicRequest,\n  type PendingSegmentCacheEntry,\n  convertRouteTreeToFlightRouterState,\n  readOrCreateRevalidatingSegmentEntry,\n  upsertSegmentEntry,\n  type FulfilledSegmentCacheEntry,\n  upgradeToPendingSegment,\n  waitForSegmentCacheEntry,\n  overwriteRevalidatingSegmentCacheEntry,\n  canNewFetchStrategyProvideMoreContent,\n} from './cache'\nimport { getSegmentVaryPathForRequest, type SegmentVaryPath } from './vary-path'\nimport type { RouteCacheKey } from './cache-key'\nimport { createCacheKey } from './cache-key'\nimport {\n  FetchStrategy,\n  type PrefetchTaskFetchStrategy,\n  PrefetchPriority,\n} from './types'\nimport { getCurrentCacheVersion } from './cache'\nimport {\n  addSearchParamsIfPageSegment,\n  PAGE_SEGMENT_KEY,\n} from '../../../shared/lib/segment'\nimport type { SegmentRequestKey } from '../../../shared/lib/segment-cache/segment-value-encoding'\n\nconst scheduleMicrotask =\n  typeof queueMicrotask === 'function'\n    ? queueMicrotask\n    : (fn: () => unknown) =>\n        Promise.resolve()\n          .then(fn)\n          .catch((error) =>\n            setTimeout(() => {\n              throw error\n            })\n          )\n\nexport type PrefetchTask = {\n  key: RouteCacheKey\n\n  /**\n   * The FlightRouterState at the time the task was initiated. This is needed\n   * when falling back to the non-PPR behavior, which only prefetches up to\n   * the first loading boundary.\n   */\n  treeAtTimeOfPrefetch: FlightRouterState\n\n  /**\n   * The cache version at the time the task was initiated. This is used to\n   * determine if the cache was invalidated since the task was initiated.\n   */\n  cacheVersion: number\n\n  /**\n   * Whether to prefetch dynamic data, in addition to static data. This is\n   * used by `<Link prefetch={true}>`.\n   *\n   * Note that a task with `FetchStrategy.PPR` might need to use\n   * `FetchStrategy.LoadingBoundary` instead if we find out that a route\n   * does not support PPR after doing the initial route prefetch.\n   */\n  fetchStrategy: PrefetchTaskFetchStrategy\n\n  /**\n   * sortId is an incrementing counter\n   *\n   * Newer prefetches are prioritized over older ones, so that as new links\n   * enter the viewport, they are not starved by older links that are no\n   * longer relevant. In the future, we can add additional prioritization\n   * heuristics, like removing prefetches once a link leaves the viewport.\n   *\n   * The sortId is assigned when the prefetch is initiated, and reassigned if\n   * the same task is prefetched again (effectively bumping it to the top of\n   * the queue).\n   *\n   * TODO: We can add additional fields here to indicate what kind of prefetch\n   * it is. For example, was it initiated by a link? Or was it an imperative\n   * call? If it was initiated by a link, we can remove it from the queue when\n   * the link leaves the viewport, but if it was an imperative call, then we\n   * should keep it in the queue until it's fulfilled.\n   *\n   * We can also add priority levels. For example, hovering over a link could\n   * increase the priority of its prefetch.\n   */\n  sortId: number\n\n  /**\n   * The priority of the task. Like sortId, this affects the task's position in\n   * the queue, so it must never be updated without resifting the heap.\n   */\n  priority: PrefetchPriority\n\n  /**\n   * The phase of the task. Tasks are split into multiple phases so that their\n   * priority can be adjusted based on what kind of work they're doing.\n   * Concretely, prefetching the route tree is higher priority than prefetching\n   * segment data.\n   */\n  phase: PrefetchPhase\n\n  /**\n   * These fields are temporary state for tracking the currently running task.\n   * They are reset after each iteration of the task queue.\n   */\n  hasBackgroundWork: boolean\n  spawnedRuntimePrefetches: Set<SegmentRequestKey> | null\n\n  /**\n   * True if the prefetch was cancelled.\n   */\n  isCanceled: boolean\n\n  /**\n   * The callback passed to `router.prefetch`, if given.\n   */\n  onInvalidate: null | (() => void)\n\n  /**\n   * The index of the task in the heap's backing array. Used to efficiently\n   * change the priority of a task by re-sifting it, which requires knowing\n   * where it is in the array. This is only used internally by the heap\n   * algorithm. The naive alternative is indexOf every time a task is queued,\n   * which has O(n) complexity.\n   *\n   * We also use this field to check whether a task is currently in the queue.\n   */\n  _heapIndex: number\n}\n\nconst enum PrefetchTaskExitStatus {\n  /**\n   * The task yielded because there are too many requests in progress.\n   */\n  InProgress,\n\n  /**\n   * The task is blocked. It needs more data before it can proceed.\n   *\n   * Currently the only reason this happens is we're still waiting to receive a\n   * route tree from the server, because we can't start prefetching the segments\n   * until we know what to prefetch.\n   */\n  Blocked,\n\n  /**\n   * There's nothing left to prefetch.\n   */\n  Done,\n}\n\n/**\n * Prefetch tasks are processed in two phases: first the route tree is fetched,\n * then the segments. We use this to priortize tasks that have not yet fetched\n * the route tree.\n */\nconst enum PrefetchPhase {\n  RouteTree = 1,\n  Segments = 0,\n}\n\nexport type PrefetchSubtaskResult<T> = {\n  /**\n   * A promise that resolves when the network connection is closed.\n   */\n  closed: Promise<void>\n  value: T\n}\n\nconst taskHeap: Array<PrefetchTask> = []\n\nlet inProgressRequests = 0\n\nlet sortIdCounter = 0\nlet didScheduleMicrotask = false\n\n// The most recently hovered (or touched, etc) link, i.e. the most recent task\n// scheduled at Intent priority. There's only ever a single task at Intent\n// priority at a time. We reserve special network bandwidth for this task only.\nlet mostRecentlyHoveredLink: PrefetchTask | null = null\n\n// CDN cache propagation delay after revalidation (in milliseconds)\nconst REVALIDATION_COOLDOWN_MS = 300\n\n// Timeout handle for the revalidation cooldown. When non-null, prefetch\n// requests are blocked to allow CDN cache propagation.\nlet revalidationCooldownTimeoutHandle: ReturnType<typeof setTimeout> | null =\n  null\n\n/**\n * Called by the cache when revalidation occurs. Starts a cooldown period\n * during which prefetch requests are blocked to allow CDN cache propagation.\n */\nexport function startRevalidationCooldown(): void {\n  // Clear any existing timeout in case multiple revalidations happen\n  // in quick succession.\n  if (revalidationCooldownTimeoutHandle !== null) {\n    clearTimeout(revalidationCooldownTimeoutHandle)\n  }\n\n  // Schedule the cooldown to expire after the delay.\n  revalidationCooldownTimeoutHandle = setTimeout(() => {\n    revalidationCooldownTimeoutHandle = null\n    // Retry the prefetch queue now that the cooldown has expired.\n    ensureWorkIsScheduled()\n  }, REVALIDATION_COOLDOWN_MS)\n}\n\nexport type IncludeDynamicData = null | 'full' | 'dynamic'\n\n/**\n * Initiates a prefetch task for the given URL. If a prefetch for the same URL\n * is already in progress, this will bump it to the top of the queue.\n *\n * This is not a user-facing function. By the time this is called, the href is\n * expected to be validated and normalized.\n *\n * @param key The RouteCacheKey to prefetch.\n * @param treeAtTimeOfPrefetch The app's current FlightRouterState\n * @param fetchStrategy Whether to prefetch dynamic data, in addition to\n * static data. This is used by `<Link prefetch={true}>`.\n */\nexport function schedulePrefetchTask(\n  key: RouteCacheKey,\n  treeAtTimeOfPrefetch: FlightRouterState,\n  fetchStrategy: PrefetchTaskFetchStrategy,\n  priority: PrefetchPriority,\n  onInvalidate: null | (() => void)\n): PrefetchTask {\n  // Spawn a new prefetch task\n  const task: PrefetchTask = {\n    key,\n    treeAtTimeOfPrefetch,\n    cacheVersion: getCurrentCacheVersion(),\n    priority,\n    phase: PrefetchPhase.RouteTree,\n    hasBackgroundWork: false,\n    spawnedRuntimePrefetches: null,\n    fetchStrategy,\n    sortId: sortIdCounter++,\n    isCanceled: false,\n    onInvalidate,\n    _heapIndex: -1,\n  }\n\n  trackMostRecentlyHoveredLink(task)\n\n  heapPush(taskHeap, task)\n\n  // Schedule an async task to process the queue.\n  //\n  // The main reason we process the queue in an async task is for batching.\n  // It's common for a single JS task/event to trigger multiple prefetches.\n  // By deferring to a microtask, we only process the queue once per JS task.\n  // If they have different priorities, it also ensures they are processed in\n  // the optimal order.\n  ensureWorkIsScheduled()\n\n  return task\n}\n\nexport function cancelPrefetchTask(task: PrefetchTask): void {\n  // Remove the prefetch task from the queue. If the task already completed,\n  // then this is a no-op.\n  //\n  // We must also explicitly mark the task as canceled so that a blocked task\n  // does not get added back to the queue when it's pinged by the network.\n  task.isCanceled = true\n  heapDelete(taskHeap, task)\n}\n\nexport function reschedulePrefetchTask(\n  task: PrefetchTask,\n  treeAtTimeOfPrefetch: FlightRouterState,\n  fetchStrategy: PrefetchTaskFetchStrategy,\n  priority: PrefetchPriority\n): void {\n  // Bump the prefetch task to the top of the queue, as if it were a fresh\n  // task. This is essentially the same as canceling the task and scheduling\n  // a new one, except it reuses the original object.\n  //\n  // The primary use case is to increase the priority of a Link-initated\n  // prefetch on hover.\n\n  // Un-cancel the task, in case it was previously canceled.\n  task.isCanceled = false\n  task.phase = PrefetchPhase.RouteTree\n\n  // Assign a new sort ID to move it ahead of all other tasks at the same\n  // priority level. (Higher sort IDs are processed first.)\n  task.sortId = sortIdCounter++\n  task.priority =\n    // If this task is the most recently hovered link, maintain its\n    // Intent priority, even if the rescheduled priority is lower.\n    task === mostRecentlyHoveredLink ? PrefetchPriority.Intent : priority\n\n  task.treeAtTimeOfPrefetch = treeAtTimeOfPrefetch\n  task.fetchStrategy = fetchStrategy\n\n  trackMostRecentlyHoveredLink(task)\n\n  if (task._heapIndex !== -1) {\n    // The task is already in the queue.\n    heapResift(taskHeap, task)\n  } else {\n    heapPush(taskHeap, task)\n  }\n  ensureWorkIsScheduled()\n}\n\nexport function isPrefetchTaskDirty(\n  task: PrefetchTask,\n  nextUrl: string | null,\n  tree: FlightRouterState\n): boolean {\n  // This is used to quickly bail out of a prefetch task if the result is\n  // guaranteed to not have changed since the task was initiated. This is\n  // strictly an optimization  theoretically, if it always returned true, no\n  // behavior should change because a full prefetch task will effectively\n  // perform the same checks.\n  const currentCacheVersion = getCurrentCacheVersion()\n  return (\n    task.cacheVersion !== currentCacheVersion ||\n    task.treeAtTimeOfPrefetch !== tree ||\n    task.key.nextUrl !== nextUrl\n  )\n}\n\nfunction trackMostRecentlyHoveredLink(task: PrefetchTask) {\n  // Track the mostly recently hovered link, i.e. the most recently scheduled\n  // task at Intent priority. There must only be one such task at a time.\n  if (\n    task.priority === PrefetchPriority.Intent &&\n    task !== mostRecentlyHoveredLink\n  ) {\n    if (mostRecentlyHoveredLink !== null) {\n      // Bump the previously hovered link's priority down to Default.\n      if (mostRecentlyHoveredLink.priority !== PrefetchPriority.Background) {\n        mostRecentlyHoveredLink.priority = PrefetchPriority.Default\n        heapResift(taskHeap, mostRecentlyHoveredLink)\n      }\n    }\n    mostRecentlyHoveredLink = task\n  }\n}\n\nfunction ensureWorkIsScheduled() {\n  if (didScheduleMicrotask) {\n    // Already scheduled a task to process the queue\n    return\n  }\n  didScheduleMicrotask = true\n  scheduleMicrotask(processQueueInMicrotask)\n}\n\n/**\n * Checks if we've exceeded the maximum number of concurrent prefetch requests,\n * to avoid saturating the browser's internal network queue. This is a\n * cooperative limit  prefetch tasks should check this before issuing\n * new requests.\n *\n * Also checks if we're within the revalidation cooldown window, during which\n * prefetch requests are delayed to allow CDN cache propagation.\n */\nfunction hasNetworkBandwidth(task: PrefetchTask): boolean {\n  // Check if we're within the revalidation cooldown window\n  if (revalidationCooldownTimeoutHandle !== null) {\n    // We're within the cooldown window. Return false to prevent prefetching.\n    // When the cooldown expires, the timeout will call ensureWorkIsScheduled()\n    // to retry the queue.\n    return false\n  }\n\n  // TODO: Also check if there's an in-progress navigation. We should never\n  // add prefetch requests to the network queue if an actual navigation is\n  // taking place, to ensure there's sufficient bandwidth for render-blocking\n  // data and resources.\n\n  // TODO: Consider reserving some amount of bandwidth for static prefetches.\n\n  if (task.priority === PrefetchPriority.Intent) {\n    // The most recently hovered link is allowed to exceed the default limit.\n    //\n    // The goal is to always have enough bandwidth to start a new prefetch\n    // request when hovering over a link.\n    //\n    // However, because we don't abort in-progress requests, it's still possible\n    // we'll run out of bandwidth. When links are hovered in quick succession,\n    // there could be multiple hover requests running simultaneously.\n    return inProgressRequests < 12\n  }\n\n  // The default limit is lower than the limit for a hovered link.\n  return inProgressRequests < 4\n}\n\nfunction spawnPrefetchSubtask<T>(\n  prefetchSubtask: Promise<PrefetchSubtaskResult<T> | null>\n): Promise<T | null> {\n  // When the scheduler spawns an async task, we don't await its result.\n  // Instead, the async task writes its result directly into the cache, then\n  // pings the scheduler to continue.\n  //\n  // We process server responses streamingly, so the prefetch subtask will\n  // likely resolve before we're finished receiving all the data. The subtask\n  // result includes a promise that resolves once the network connection is\n  // closed. The scheduler uses this to control network bandwidth by tracking\n  // and limiting the number of concurrent requests.\n  inProgressRequests++\n  return prefetchSubtask.then((result) => {\n    if (result === null) {\n      // The prefetch task errored before it could start processing the\n      // network stream. Assume the connection is closed.\n      onPrefetchConnectionClosed()\n      return null\n    }\n    // Wait for the connection to close before freeing up more bandwidth.\n    result.closed.then(onPrefetchConnectionClosed)\n    return result.value\n  })\n}\n\nfunction onPrefetchConnectionClosed(): void {\n  inProgressRequests--\n\n  // Notify the scheduler that we have more bandwidth, and can continue\n  // processing tasks.\n  ensureWorkIsScheduled()\n}\n\n/**\n * Notify the scheduler that we've received new data for an in-progress\n * prefetch. The corresponding task will be added back to the queue (unless the\n * task has been canceled in the meantime).\n */\nexport function pingPrefetchTask(task: PrefetchTask) {\n  // \"Ping\" a prefetch that's already in progress to notify it of new data.\n  if (\n    // Check if prefetch was canceled.\n    task.isCanceled ||\n    // Check if prefetch is already queued.\n    task._heapIndex !== -1\n  ) {\n    return\n  }\n  // Add the task back to the queue.\n  heapPush(taskHeap, task)\n  ensureWorkIsScheduled()\n}\n\nfunction processQueueInMicrotask() {\n  didScheduleMicrotask = false\n\n  // We aim to minimize how often we read the current time. Since nearly all\n  // functions in the prefetch scheduler are synchronous, we can read the time\n  // once and pass it as an argument wherever it's needed.\n  const now = Date.now()\n\n  // Process the task queue until we run out of network bandwidth.\n  let task = heapPeek(taskHeap)\n  while (task !== null && hasNetworkBandwidth(task)) {\n    task.cacheVersion = getCurrentCacheVersion()\n\n    const exitStatus = pingRoute(now, task)\n\n    // These fields are only valid for a single attempt. Reset them after each\n    // iteration of the task queue.\n    const hasBackgroundWork = task.hasBackgroundWork\n    task.hasBackgroundWork = false\n    task.spawnedRuntimePrefetches = null\n\n    switch (exitStatus) {\n      case PrefetchTaskExitStatus.InProgress:\n        // The task yielded because there are too many requests in progress.\n        // Stop processing tasks until we have more bandwidth.\n        return\n      case PrefetchTaskExitStatus.Blocked:\n        // The task is blocked. It needs more data before it can proceed.\n        // Keep the task out of the queue until the server responds.\n        heapPop(taskHeap)\n        // Continue to the next task\n        task = heapPeek(taskHeap)\n        continue\n      case PrefetchTaskExitStatus.Done:\n        if (task.phase === PrefetchPhase.RouteTree) {\n          // Finished prefetching the route tree. Proceed to prefetching\n          // the segments.\n          task.phase = PrefetchPhase.Segments\n          heapResift(taskHeap, task)\n        } else if (hasBackgroundWork) {\n          // The task spawned additional background work. Reschedule the task\n          // at background priority.\n          task.priority = PrefetchPriority.Background\n          heapResift(taskHeap, task)\n        } else {\n          // The prefetch is complete. Continue to the next task.\n          heapPop(taskHeap)\n        }\n        task = heapPeek(taskHeap)\n        continue\n      default:\n        exitStatus satisfies never\n    }\n  }\n}\n\n/**\n * Check this during a prefetch task to determine if background work can be\n * performed. If so, it evaluates to `true`. Otherwise, it returns `false`,\n * while also scheduling a background task to run later. Usage:\n *\n * @example\n * if (background(task)) {\n *   // Perform background-pri work\n * }\n */\nfunction background(task: PrefetchTask): boolean {\n  if (task.priority === PrefetchPriority.Background) {\n    return true\n  }\n  task.hasBackgroundWork = true\n  return false\n}\n\nfunction pingRoute(now: number, task: PrefetchTask): PrefetchTaskExitStatus {\n  const key = task.key\n  const route = readOrCreateRouteCacheEntry(now, task, key)\n  const exitStatus = pingRootRouteTree(now, task, route)\n\n  if (exitStatus !== PrefetchTaskExitStatus.InProgress && key.search !== '') {\n    // If the URL has a non-empty search string, also prefetch the pathname\n    // without the search string. We use the searchless route tree as a base for\n    // optimistic routing; see requestOptimisticRouteCacheEntry for details.\n    //\n    // Note that we don't need to prefetch any of the segment data. Just the\n    // route tree.\n    //\n    // TODO: This is a temporary solution; the plan is to replace this by adding\n    // a wildcard lookup method to the TupleMap implementation. This is\n    // non-trivial to implement because it needs to account for things like\n    // fallback route entries, hence this temporary workaround.\n    const url = new URL(key.pathname, location.origin)\n    const keyWithoutSearch = createCacheKey(url.href, key.nextUrl)\n    const routeWithoutSearch = readOrCreateRouteCacheEntry(\n      now,\n      task,\n      keyWithoutSearch\n    )\n    switch (routeWithoutSearch.status) {\n      case EntryStatus.Empty: {\n        if (background(task)) {\n          routeWithoutSearch.status = EntryStatus.Pending\n          spawnPrefetchSubtask(\n            fetchRouteOnCacheMiss(routeWithoutSearch, task, keyWithoutSearch)\n          )\n        }\n        break\n      }\n      case EntryStatus.Pending:\n      case EntryStatus.Fulfilled:\n      case EntryStatus.Rejected: {\n        // Either the route tree is already cached, or there's already a\n        // request in progress. Since we don't need to fetch any segment data\n        // for this route, there's nothing left to do.\n        break\n      }\n      default:\n        routeWithoutSearch satisfies never\n    }\n  }\n\n  return exitStatus\n}\n\nfunction pingRootRouteTree(\n  now: number,\n  task: PrefetchTask,\n  route: RouteCacheEntry\n): PrefetchTaskExitStatus {\n  switch (route.status) {\n    case EntryStatus.Empty: {\n      // Route is not yet cached, and there's no request already in progress.\n      // Spawn a task to request the route, load it into the cache, and ping\n      // the task to continue.\n\n      // TODO: There are multiple strategies in the <Link> API for prefetching\n      // a route. Currently we've only implemented the main one: per-segment,\n      // static-data only.\n      //\n      // There's also `<Link prefetch={true}>`\n      // which prefetch both static *and* dynamic data.\n      // Similarly, we need to fallback to the old, per-page\n      // behavior if PPR is disabled for a route (via the incremental opt-in).\n      //\n      // Those cases will be handled here.\n      spawnPrefetchSubtask(fetchRouteOnCacheMiss(route, task, task.key))\n\n      // If the request takes longer than a minute, a subsequent request should\n      // retry instead of waiting for this one. When the response is received,\n      // this value will be replaced by a new value based on the stale time sent\n      // from the server.\n      // TODO: We should probably also manually abort the fetch task, to reclaim\n      // server bandwidth.\n      route.staleAt = now + 60 * 1000\n\n      // Upgrade to Pending so we know there's already a request in progress\n      route.status = EntryStatus.Pending\n\n      // Intentional fallthrough to the Pending branch\n    }\n    case EntryStatus.Pending: {\n      // Still pending. We can't start prefetching the segments until the route\n      // tree has loaded. Add the task to the set of blocked tasks so that it\n      // is notified when the route tree is ready.\n      const blockedTasks = route.blockedTasks\n      if (blockedTasks === null) {\n        route.blockedTasks = new Set([task])\n      } else {\n        blockedTasks.add(task)\n      }\n      return PrefetchTaskExitStatus.Blocked\n    }\n    case EntryStatus.Rejected: {\n      // Route tree failed to load. Treat as a 404.\n      return PrefetchTaskExitStatus.Done\n    }\n    case EntryStatus.Fulfilled: {\n      if (task.phase !== PrefetchPhase.Segments) {\n        // Do not prefetch segment data until we've entered the segment phase.\n        return PrefetchTaskExitStatus.Done\n      }\n      // Recursively fill in the segment tree.\n      if (!hasNetworkBandwidth(task)) {\n        // Stop prefetching segments until there's more bandwidth.\n        return PrefetchTaskExitStatus.InProgress\n      }\n      const tree = route.tree\n\n      // A task's fetch strategy gets set to `PPR` for any \"auto\" prefetch.\n      // If it turned out that the route isn't PPR-enabled, we need to use `LoadingBoundary` instead.\n      // We don't need to do this for runtime prefetches, because those are only available in\n      // `cacheComponents`, where every route is PPR.\n      const fetchStrategy =\n        task.fetchStrategy === FetchStrategy.PPR\n          ? route.isPPREnabled\n            ? FetchStrategy.PPR\n            : FetchStrategy.LoadingBoundary\n          : task.fetchStrategy\n\n      switch (fetchStrategy) {\n        case FetchStrategy.PPR: {\n          // For Cache Components pages, each segment may be prefetched\n          // statically or using a runtime request, based on various\n          // configurations and heuristics. We'll do this in two passes: first\n          // traverse the tree and perform all the static prefetches.\n          //\n          // Then, if there are any segments that need a runtime request,\n          // do another pass to perform a runtime prefetch.\n          pingStaticHead(now, task, route)\n          const exitStatus = pingSharedPartOfCacheComponentsTree(\n            now,\n            task,\n            route,\n            task.treeAtTimeOfPrefetch,\n            tree\n          )\n          if (exitStatus === PrefetchTaskExitStatus.InProgress) {\n            // Child yielded without finishing.\n            return PrefetchTaskExitStatus.InProgress\n          }\n          const spawnedRuntimePrefetches = task.spawnedRuntimePrefetches\n          if (spawnedRuntimePrefetches !== null) {\n            // During the first pass, we discovered segments that require a\n            // runtime prefetch. Do a second pass to construct a request tree.\n            const spawnedEntries = new Map<\n              SegmentRequestKey,\n              PendingSegmentCacheEntry\n            >()\n            pingRuntimeHead(\n              now,\n              task,\n              route,\n              spawnedEntries,\n              FetchStrategy.PPRRuntime\n            )\n            const requestTree = pingRuntimePrefetches(\n              now,\n              task,\n              route,\n              tree,\n              spawnedRuntimePrefetches,\n              spawnedEntries\n            )\n            let needsDynamicRequest = spawnedEntries.size > 0\n            if (needsDynamicRequest) {\n              // Perform a dynamic prefetch request and populate the cache with\n              // the result.\n              spawnPrefetchSubtask(\n                fetchSegmentPrefetchesUsingDynamicRequest(\n                  task,\n                  route,\n                  FetchStrategy.PPRRuntime,\n                  requestTree,\n                  spawnedEntries\n                )\n              )\n            }\n          }\n          return PrefetchTaskExitStatus.Done\n        }\n        case FetchStrategy.Full:\n        case FetchStrategy.PPRRuntime:\n        case FetchStrategy.LoadingBoundary: {\n          // Prefetch multiple segments using a single dynamic request.\n          // TODO: We can consolidate this branch with previous one by modeling\n          // it as if the first segment in the new tree has runtime prefetching\n          // enabled. Will do this as a follow-up refactor. Might want to remove\n          // the special metatdata case below first. In the meantime, it's not\n          // really that much duplication, just would be nice to remove one of\n          // these codepaths.\n          const spawnedEntries = new Map<\n            SegmentRequestKey,\n            PendingSegmentCacheEntry\n          >()\n          pingRuntimeHead(now, task, route, spawnedEntries, fetchStrategy)\n          const dynamicRequestTree = diffRouteTreeAgainstCurrent(\n            now,\n            task,\n            route,\n            task.treeAtTimeOfPrefetch,\n            tree,\n            spawnedEntries,\n            fetchStrategy\n          )\n          let needsDynamicRequest = spawnedEntries.size > 0\n          if (needsDynamicRequest) {\n            spawnPrefetchSubtask(\n              fetchSegmentPrefetchesUsingDynamicRequest(\n                task,\n                route,\n                fetchStrategy,\n                dynamicRequestTree,\n                spawnedEntries\n              )\n            )\n          }\n          return PrefetchTaskExitStatus.Done\n        }\n        default:\n          fetchStrategy satisfies never\n      }\n      break\n    }\n    default: {\n      route satisfies never\n    }\n  }\n  return PrefetchTaskExitStatus.Done\n}\n\nfunction pingStaticHead(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry\n): void {\n  // The Head data for a page (metadata, viewport) is not really a route\n  // segment, in the sense that it doesn't appear in the route tree. But we\n  // store it in the cache as if it were, using a special key.\n  pingStaticSegmentData(\n    now,\n    task,\n    route,\n    readOrCreateSegmentCacheEntry(\n      now,\n      FetchStrategy.PPR,\n      route,\n      route.metadata\n    ),\n    task.key,\n    route.metadata\n  )\n}\n\nfunction pingRuntimeHead(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  spawnedEntries: Map<SegmentRequestKey, PendingSegmentCacheEntry>,\n  fetchStrategy:\n    | FetchStrategy.Full\n    | FetchStrategy.PPRRuntime\n    | FetchStrategy.LoadingBoundary\n): void {\n  pingRouteTreeAndIncludeDynamicData(\n    now,\n    task,\n    route,\n    route.metadata,\n    false,\n    spawnedEntries,\n    // When prefetching the head, there's no difference between Full\n    // and LoadingBoundary\n    fetchStrategy === FetchStrategy.LoadingBoundary\n      ? FetchStrategy.Full\n      : fetchStrategy\n  )\n}\n\n// TODO: Rename dynamic -> runtime throughout this module\n\nfunction pingSharedPartOfCacheComponentsTree(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  oldTree: FlightRouterState,\n  newTree: RouteTree\n): PrefetchTaskExitStatus {\n  // When Cache Components is enabled (or PPR, or a fully static route when PPR\n  // is disabled; those cases are treated equivalently to Cache Components), we\n  // start by prefetching each segment individually. Once we reach the \"new\"\n  // part of the tree  the part that doesn't exist on the current page  we\n  // may choose to switch to a runtime prefetch instead, based on the\n  // information sent by the server in the route tree.\n  //\n  // The traversal starts in the \"shared\" part of the tree. Once we reach the\n  // \"new\" part of the tree, we switch to a different traversal,\n  // pingNewPartOfCacheComponentsTree.\n\n  // Prefetch this segment's static data.\n  const segment = readOrCreateSegmentCacheEntry(\n    now,\n    task.fetchStrategy,\n    route,\n    newTree\n  )\n  pingStaticSegmentData(now, task, route, segment, task.key, newTree)\n\n  // Recursively ping the children.\n  const oldTreeChildren = oldTree[1]\n  const newTreeChildren = newTree.slots\n  if (newTreeChildren !== null) {\n    for (const parallelRouteKey in newTreeChildren) {\n      if (!hasNetworkBandwidth(task)) {\n        // Stop prefetching segments until there's more bandwidth.\n        return PrefetchTaskExitStatus.InProgress\n      }\n      const newTreeChild = newTreeChildren[parallelRouteKey]\n      const newTreeChildSegment = newTreeChild.segment\n      const oldTreeChild: FlightRouterState | void =\n        oldTreeChildren[parallelRouteKey]\n      const oldTreeChildSegment: FlightRouterStateSegment | void =\n        oldTreeChild?.[0]\n      let childExitStatus\n      if (\n        oldTreeChildSegment !== undefined &&\n        doesCurrentSegmentMatchCachedSegment(\n          route,\n          newTreeChildSegment,\n          oldTreeChildSegment\n        )\n      ) {\n        // We're still in the \"shared\" part of the tree.\n        childExitStatus = pingSharedPartOfCacheComponentsTree(\n          now,\n          task,\n          route,\n          oldTreeChild,\n          newTreeChild\n        )\n      } else {\n        // We've entered the \"new\" part of the tree. Switch\n        // traversal functions.\n        childExitStatus = pingNewPartOfCacheComponentsTree(\n          now,\n          task,\n          route,\n          newTreeChild\n        )\n      }\n      if (childExitStatus === PrefetchTaskExitStatus.InProgress) {\n        // Child yielded without finishing.\n        return PrefetchTaskExitStatus.InProgress\n      }\n    }\n  }\n\n  return PrefetchTaskExitStatus.Done\n}\n\nfunction pingNewPartOfCacheComponentsTree(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree\n): PrefetchTaskExitStatus.InProgress | PrefetchTaskExitStatus.Done {\n  // We're now prefetching in the \"new\" part of the tree, the part that doesn't\n  // exist on the current page. (In other words, we're deeper than the\n  // shared layouts.) Segments in here default to being prefetched statically.\n  // However, if the server instructs us to, we may switch to a runtime\n  // prefetch instead. Traverse the tree and check at each segment.\n  if (tree.hasRuntimePrefetch) {\n    // This route has a runtime prefetch response. Since we're below the shared\n    // layout, everything from this point should be prefetched using a single,\n    // combined runtime request, rather than using per-segment static requests.\n    // This is true even if some of the child segments are known to be fully\n    // static  once we've decided to perform a runtime prefetch, we might as\n    // well respond with the static segments in the same roundtrip. (That's how\n    // regular navigations work, too.) We'll still skip over segments that are\n    // already cached, though.\n    //\n    // It's the server's responsibility to set a reasonable value of\n    // `hasRuntimePrefetch`. Currently it's user-defined, but eventually, the\n    // server may send a value of `false` even if the user opts in, if it\n    // determines during build that the route is always fully static. There are\n    // more optimizations we can do once we implement fallback param\n    // tracking, too.\n    //\n    // Use the task object to collect the segments that need a runtime prefetch.\n    // This will signal to the outer task queue that a second traversal is\n    // required to construct a request tree.\n    if (task.spawnedRuntimePrefetches === null) {\n      task.spawnedRuntimePrefetches = new Set([tree.requestKey])\n    } else {\n      task.spawnedRuntimePrefetches.add(tree.requestKey)\n    }\n    // Then exit the traversal without prefetching anything further.\n    return PrefetchTaskExitStatus.Done\n  }\n\n  // This segment should not be runtime prefetched. Prefetch its static data.\n  const segment = readOrCreateSegmentCacheEntry(\n    now,\n    task.fetchStrategy,\n    route,\n    tree\n  )\n  pingStaticSegmentData(now, task, route, segment, task.key, tree)\n  if (tree.slots !== null) {\n    if (!hasNetworkBandwidth(task)) {\n      // Stop prefetching segments until there's more bandwidth.\n      return PrefetchTaskExitStatus.InProgress\n    }\n    // Recursively ping the children.\n    for (const parallelRouteKey in tree.slots) {\n      const childTree = tree.slots[parallelRouteKey]\n      const childExitStatus = pingNewPartOfCacheComponentsTree(\n        now,\n        task,\n        route,\n        childTree\n      )\n      if (childExitStatus === PrefetchTaskExitStatus.InProgress) {\n        // Child yielded without finishing.\n        return PrefetchTaskExitStatus.InProgress\n      }\n    }\n  }\n  // This segment and all its children have finished prefetching.\n  return PrefetchTaskExitStatus.Done\n}\n\nfunction diffRouteTreeAgainstCurrent(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  oldTree: FlightRouterState,\n  newTree: RouteTree,\n  spawnedEntries: Map<SegmentRequestKey, PendingSegmentCacheEntry>,\n  fetchStrategy:\n    | FetchStrategy.Full\n    | FetchStrategy.PPRRuntime\n    | FetchStrategy.LoadingBoundary\n): FlightRouterState {\n  // This is a single recursive traversal that does multiple things:\n  // - Finds the parts of the target route (newTree) that are not part of\n  //   of the current page (oldTree) by diffing them, using the same algorithm\n  //   as a real navigation.\n  // - Constructs a request tree (FlightRouterState) that describes which\n  //   segments need to be prefetched and which ones are already cached.\n  // - Creates a set of pending cache entries for the segments that need to\n  //   be prefetched, so that a subsequent prefetch task does not request the\n  //   same segments again.\n  const oldTreeChildren = oldTree[1]\n  const newTreeChildren = newTree.slots\n  let requestTreeChildren: Record<string, FlightRouterState> = {}\n  if (newTreeChildren !== null) {\n    for (const parallelRouteKey in newTreeChildren) {\n      const newTreeChild = newTreeChildren[parallelRouteKey]\n      const newTreeChildSegment = newTreeChild.segment\n      const oldTreeChild: FlightRouterState | void =\n        oldTreeChildren[parallelRouteKey]\n      const oldTreeChildSegment: FlightRouterStateSegment | void =\n        oldTreeChild?.[0]\n      if (\n        oldTreeChildSegment !== undefined &&\n        doesCurrentSegmentMatchCachedSegment(\n          route,\n          newTreeChildSegment,\n          oldTreeChildSegment\n        )\n      ) {\n        // This segment is already part of the current route. Keep traversing.\n        const requestTreeChild = diffRouteTreeAgainstCurrent(\n          now,\n          task,\n          route,\n          oldTreeChild,\n          newTreeChild,\n          spawnedEntries,\n          fetchStrategy\n        )\n        requestTreeChildren[parallelRouteKey] = requestTreeChild\n      } else {\n        // This segment is not part of the current route. We're entering a\n        // part of the tree that we need to prefetch (unless everything is\n        // already cached).\n        switch (fetchStrategy) {\n          case FetchStrategy.LoadingBoundary: {\n            // When PPR is disabled, we can't prefetch per segment. We must\n            // fallback to the old prefetch behavior and send a dynamic request.\n            // Only routes that include a loading boundary can be prefetched in\n            // this way.\n            //\n            // This is simlar to a \"full\" prefetch, but we're much more\n            // conservative about which segments to include in the request.\n            //\n            // The server will only render up to the first loading boundary\n            // inside new part of the tree. If there's no loading boundary\n            // anywhere in the tree, the server will never return any data, so\n            // we can skip the request.\n            const subtreeHasLoadingBoundary =\n              newTreeChild.hasLoadingBoundary !==\n              HasLoadingBoundary.SubtreeHasNoLoadingBoundary\n            const requestTreeChild = subtreeHasLoadingBoundary\n              ? pingPPRDisabledRouteTreeUpToLoadingBoundary(\n                  now,\n                  task,\n                  route,\n                  newTreeChild,\n                  null,\n                  spawnedEntries\n                )\n              : // There's no loading boundary within this tree. Bail out.\n                convertRouteTreeToFlightRouterState(newTreeChild)\n            requestTreeChildren[parallelRouteKey] = requestTreeChild\n            break\n          }\n          case FetchStrategy.PPRRuntime: {\n            // This is a runtime prefetch. Fetch all cacheable data in the tree,\n            // not just the static PPR shell.\n            const requestTreeChild = pingRouteTreeAndIncludeDynamicData(\n              now,\n              task,\n              route,\n              newTreeChild,\n              false,\n              spawnedEntries,\n              fetchStrategy\n            )\n            requestTreeChildren[parallelRouteKey] = requestTreeChild\n            break\n          }\n          case FetchStrategy.Full: {\n            // This is a \"full\" prefetch. Fetch all the data in the tree, both\n            // static and dynamic. We issue roughly the same request that we\n            // would during a real navigation. The goal is that once the\n            // navigation occurs, the router should not have to fetch any\n            // additional data.\n            //\n            // Although the response will include dynamic data, opting into a\n            // Full prefetch  via <Link prefetch={true}>  implicitly\n            // instructs the cache to treat the response as \"static\", or non-\n            // dynamic, since the whole point is to cache it for\n            // future navigations.\n            //\n            // Construct a tree (currently a FlightRouterState) that represents\n            // which segments need to be prefetched and which ones are already\n            // cached. If the tree is empty, then we can exit. Otherwise, we'll\n            // send the request tree to the server and use the response to\n            // populate the segment cache.\n            const requestTreeChild = pingRouteTreeAndIncludeDynamicData(\n              now,\n              task,\n              route,\n              newTreeChild,\n              false,\n              spawnedEntries,\n              fetchStrategy\n            )\n            requestTreeChildren[parallelRouteKey] = requestTreeChild\n            break\n          }\n          default:\n            fetchStrategy satisfies never\n        }\n      }\n    }\n  }\n  const requestTree: FlightRouterState = [\n    newTree.segment,\n    requestTreeChildren,\n    null,\n    null,\n    newTree.isRootLayout,\n  ]\n  return requestTree\n}\n\nfunction pingPPRDisabledRouteTreeUpToLoadingBoundary(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree,\n  refetchMarkerContext: 'refetch' | 'inside-shared-layout' | null,\n  spawnedEntries: Map<SegmentRequestKey, PendingSegmentCacheEntry>\n): FlightRouterState {\n  // This function is similar to pingRouteTreeAndIncludeDynamicData, except the\n  // server is only going to return a minimal loading state  it will stop\n  // rendering at the first loading boundary. Whereas a Full prefetch is\n  // intentionally aggressive and tries to pretfetch all the data that will be\n  // needed for a navigation, a LoadingBoundary prefetch is much more\n  // conservative. For example, it will omit from the request tree any segment\n  // that is already cached, regardles of whether it's partial or full. By\n  // contrast, a Full prefetch will refetch partial segments.\n\n  // \"inside-shared-layout\" tells the server where to start looking for a\n  // loading boundary.\n  let refetchMarker: 'refetch' | 'inside-shared-layout' | null =\n    refetchMarkerContext === null ? 'inside-shared-layout' : null\n\n  const segment = readOrCreateSegmentCacheEntry(\n    now,\n    task.fetchStrategy,\n    route,\n    tree\n  )\n  switch (segment.status) {\n    case EntryStatus.Empty: {\n      // This segment is not cached. Add a refetch marker so the server knows\n      // to start rendering here.\n      // TODO: Instead of a \"refetch\" marker, we could just omit this subtree's\n      // FlightRouterState from the request tree. I think this would probably\n      // already work even without any updates to the server. For consistency,\n      // though, I'll send the full tree and we'll look into this later as part\n      // of a larger redesign of the request protocol.\n\n      // Add the pending cache entry to the result map.\n      spawnedEntries.set(\n        tree.requestKey,\n        upgradeToPendingSegment(\n          segment,\n          // Set the fetch strategy to LoadingBoundary to indicate that the server\n          // might not include it in the pending response. If another route is able\n          // to issue a per-segment request, we'll do that in the background.\n          FetchStrategy.LoadingBoundary\n        )\n      )\n      if (refetchMarkerContext !== 'refetch') {\n        refetchMarker = refetchMarkerContext = 'refetch'\n      } else {\n        // There's already a parent with a refetch marker, so we don't need\n        // to add another one.\n      }\n      break\n    }\n    case EntryStatus.Fulfilled: {\n      // The segment is already cached.\n      const segmentHasLoadingBoundary =\n        tree.hasLoadingBoundary === HasLoadingBoundary.SegmentHasLoadingBoundary\n      if (segmentHasLoadingBoundary) {\n        // This segment has a loading boundary, which means the server won't\n        // render its children. So there's nothing left to prefetch along this\n        // path. We can bail out.\n        return convertRouteTreeToFlightRouterState(tree)\n      }\n      // NOTE: If the cached segment were fetched using PPR, then it might be\n      // partial. We could get a more complete version of the segment by\n      // including it in this non-PPR request.\n      //\n      // We're intentionally choosing not to, though, because it's generally\n      // better to avoid doing a full prefetch whenever possible.\n      break\n    }\n    case EntryStatus.Pending: {\n      // There's another prefetch currently in progress. Don't add the refetch\n      // marker yet, so the server knows it can skip rendering this segment.\n      break\n    }\n    case EntryStatus.Rejected: {\n      // The segment failed to load. We shouldn't issue another request until\n      // the stale time has elapsed.\n      break\n    }\n    default:\n      segment satisfies never\n  }\n  const requestTreeChildren: Record<string, FlightRouterState> = {}\n  if (tree.slots !== null) {\n    for (const parallelRouteKey in tree.slots) {\n      const childTree = tree.slots[parallelRouteKey]\n      requestTreeChildren[parallelRouteKey] =\n        pingPPRDisabledRouteTreeUpToLoadingBoundary(\n          now,\n          task,\n          route,\n          childTree,\n          refetchMarkerContext,\n          spawnedEntries\n        )\n    }\n  }\n  const requestTree: FlightRouterState = [\n    tree.segment,\n    requestTreeChildren,\n    null,\n    refetchMarker,\n    tree.isRootLayout,\n  ]\n  return requestTree\n}\n\nfunction pingRouteTreeAndIncludeDynamicData(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree,\n  isInsideRefetchingParent: boolean,\n  spawnedEntries: Map<SegmentRequestKey, PendingSegmentCacheEntry>,\n  fetchStrategy: FetchStrategy.Full | FetchStrategy.PPRRuntime\n): FlightRouterState {\n  // The tree we're constructing is the same shape as the tree we're navigating\n  // to. But even though this is a \"new\" tree, some of the individual segments\n  // may be cached as a result of other route prefetches.\n  //\n  // So we need to find the first uncached segment along each path add an\n  // explicit \"refetch\" marker so the server knows where to start rendering.\n  // Once the server starts rendering along a path, it keeps rendering the\n  // entire subtree.\n  const segment = readOrCreateSegmentCacheEntry(\n    now,\n    // Note that `fetchStrategy` might be different from `task.fetchStrategy`,\n    // and we have to use the former here.\n    // We can have a task with `FetchStrategy.PPR` where some of its segments are configured to\n    // always use runtime prefetching (via `export const prefetch`), and those should check for\n    // entries that include search params.\n    fetchStrategy,\n    route,\n    tree\n  )\n\n  let spawnedSegment: PendingSegmentCacheEntry | null = null\n\n  switch (segment.status) {\n    case EntryStatus.Empty: {\n      // This segment is not cached. Include it in the request.\n      spawnedSegment = upgradeToPendingSegment(segment, fetchStrategy)\n      break\n    }\n    case EntryStatus.Fulfilled: {\n      // The segment is already cached.\n      if (\n        segment.isPartial &&\n        canNewFetchStrategyProvideMoreContent(\n          segment.fetchStrategy,\n          fetchStrategy\n        )\n      ) {\n        // The cached segment contains dynamic holes, and was prefetched using a less specific strategy than the current one.\n        // This means we're in one of these cases:\n        //   - we have a static prefetch, and we're doing a runtime prefetch\n        //   - we have a static or runtime prefetch, and we're doing a Full prefetch (or a navigation).\n        // In either case, we need to include it in the request to get a more specific (or full) version.\n        spawnedSegment = pingFullSegmentRevalidation(\n          now,\n          route,\n          tree,\n          fetchStrategy\n        )\n      }\n      break\n    }\n    case EntryStatus.Pending:\n    case EntryStatus.Rejected: {\n      // There's either another prefetch currently in progress, or the previous\n      // attempt failed. If the new strategy can provide more content, fetch it again.\n      if (\n        canNewFetchStrategyProvideMoreContent(\n          segment.fetchStrategy,\n          fetchStrategy\n        )\n      ) {\n        spawnedSegment = pingFullSegmentRevalidation(\n          now,\n          route,\n          tree,\n          fetchStrategy\n        )\n      }\n      break\n    }\n    default:\n      segment satisfies never\n  }\n  const requestTreeChildren: Record<string, FlightRouterState> = {}\n  if (tree.slots !== null) {\n    for (const parallelRouteKey in tree.slots) {\n      const childTree = tree.slots[parallelRouteKey]\n      requestTreeChildren[parallelRouteKey] =\n        pingRouteTreeAndIncludeDynamicData(\n          now,\n          task,\n          route,\n          childTree,\n          isInsideRefetchingParent || spawnedSegment !== null,\n          spawnedEntries,\n          fetchStrategy\n        )\n    }\n  }\n\n  if (spawnedSegment !== null) {\n    // Add the pending entry to the result map.\n    spawnedEntries.set(tree.requestKey, spawnedSegment)\n  }\n\n  // Don't bother to add a refetch marker if one is already present in a parent.\n  const refetchMarker =\n    !isInsideRefetchingParent && spawnedSegment !== null ? 'refetch' : null\n\n  const requestTree: FlightRouterState = [\n    tree.segment,\n    requestTreeChildren,\n    null,\n    refetchMarker,\n    tree.isRootLayout,\n  ]\n  return requestTree\n}\n\nfunction pingRuntimePrefetches(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree,\n  spawnedRuntimePrefetches: Set<SegmentRequestKey>,\n  spawnedEntries: Map<SegmentRequestKey, PendingSegmentCacheEntry>\n): FlightRouterState {\n  // Construct a request tree (FlightRouterState) for a runtime prefetch. If\n  // a segment is part of the runtime prefetch, the tree is constructed by\n  // diffing against what's already in the prefetch cache. Otherwise, we send\n  // a regular FlightRouterState with no special markers.\n  //\n  // See pingRouteTreeAndIncludeDynamicData for details.\n  if (spawnedRuntimePrefetches.has(tree.requestKey)) {\n    // This segment needs a runtime prefetch.\n    return pingRouteTreeAndIncludeDynamicData(\n      now,\n      task,\n      route,\n      tree,\n      false,\n      spawnedEntries,\n      FetchStrategy.PPRRuntime\n    )\n  }\n  let requestTreeChildren: Record<string, FlightRouterState> = {}\n  const slots = tree.slots\n  if (slots !== null) {\n    for (const parallelRouteKey in slots) {\n      const childTree = slots[parallelRouteKey]\n      requestTreeChildren[parallelRouteKey] = pingRuntimePrefetches(\n        now,\n        task,\n        route,\n        childTree,\n        spawnedRuntimePrefetches,\n        spawnedEntries\n      )\n    }\n  }\n\n  // This segment is not part of the runtime prefetch. Clone the base tree.\n  const requestTree: FlightRouterState = [\n    tree.segment,\n    requestTreeChildren,\n    null,\n    null,\n  ]\n  return requestTree\n}\n\nfunction pingStaticSegmentData(\n  now: number,\n  task: PrefetchTask,\n  route: FulfilledRouteCacheEntry,\n  segment: SegmentCacheEntry,\n  routeKey: RouteCacheKey,\n  tree: RouteTree\n): void {\n  switch (segment.status) {\n    case EntryStatus.Empty:\n      // Upgrade to Pending so we know there's already a request in progress\n      spawnPrefetchSubtask(\n        fetchSegmentOnCacheMiss(\n          route,\n          upgradeToPendingSegment(segment, FetchStrategy.PPR),\n          routeKey,\n          tree\n        )\n      )\n      break\n    case EntryStatus.Pending: {\n      // There's already a request in progress. Depending on what kind of\n      // request it is, we may want to revalidate it.\n      switch (segment.fetchStrategy) {\n        case FetchStrategy.PPR:\n        case FetchStrategy.PPRRuntime:\n        case FetchStrategy.Full:\n          // There's already a request in progress. Don't do anything.\n          break\n        case FetchStrategy.LoadingBoundary:\n          // There's a pending request, but because it's using the old\n          // prefetching strategy, we can't be sure if it will be fulfilled by\n          // the response  it might be inside the loading boundary. Perform\n          // a revalidation, but because it's speculative, wait to do it at\n          // background priority.\n          if (background(task)) {\n            // TODO: Instead of speculatively revalidating, consider including\n            // `hasLoading` in the route tree prefetch response.\n            pingPPRSegmentRevalidation(now, route, routeKey, tree)\n          }\n          break\n        default:\n          segment.fetchStrategy satisfies never\n      }\n      break\n    }\n    case EntryStatus.Rejected: {\n      // The existing entry in the cache was rejected. Depending on how it\n      // was originally fetched, we may or may not want to revalidate it.\n      switch (segment.fetchStrategy) {\n        case FetchStrategy.PPR:\n        case FetchStrategy.PPRRuntime:\n        case FetchStrategy.Full:\n          // The previous attempt to fetch this entry failed. Don't attempt to\n          // fetch it again until the entry expires.\n          break\n        case FetchStrategy.LoadingBoundary:\n          // There's a rejected entry, but it was fetched using the loading\n          // boundary strategy. So the reason it wasn't returned by the server\n          // might just be because it was inside a loading boundary. Or because\n          // there was a dynamic rewrite. Revalidate it using the per-\n          // segment strategy.\n          //\n          // Because a rejected segment will definitely prevent the segment (and\n          // all of its children) from rendering, we perform this revalidation\n          // immediately instead of deferring it to a background task.\n          pingPPRSegmentRevalidation(now, route, routeKey, tree)\n          break\n        default:\n          segment.fetchStrategy satisfies never\n      }\n      break\n    }\n    case EntryStatus.Fulfilled:\n      // Segment is already cached. There's nothing left to prefetch.\n      break\n    default:\n      segment satisfies never\n  }\n\n  // Segments do not have dependent tasks, so once the prefetch is initiated,\n  // there's nothing else for us to do (except write the server data into the\n  // entry, which is handled by `fetchSegmentOnCacheMiss`).\n}\n\nfunction pingPPRSegmentRevalidation(\n  now: number,\n  route: FulfilledRouteCacheEntry,\n  routeKey: RouteCacheKey,\n  tree: RouteTree\n): void {\n  const revalidatingSegment = readOrCreateRevalidatingSegmentEntry(\n    now,\n    FetchStrategy.PPR,\n    route,\n    tree\n  )\n  switch (revalidatingSegment.status) {\n    case EntryStatus.Empty:\n      // Spawn a prefetch request and upsert the segment into the cache\n      // upon completion.\n      upsertSegmentOnCompletion(\n        spawnPrefetchSubtask(\n          fetchSegmentOnCacheMiss(\n            route,\n            upgradeToPendingSegment(revalidatingSegment, FetchStrategy.PPR),\n            routeKey,\n            tree\n          )\n        ),\n        getSegmentVaryPathForRequest(FetchStrategy.PPR, tree)\n      )\n      break\n    case EntryStatus.Pending:\n      // There's already a revalidation in progress.\n      break\n    case EntryStatus.Fulfilled:\n    case EntryStatus.Rejected:\n      // A previous revalidation attempt finished, but we chose not to replace\n      // the existing entry in the cache. Don't try again until or unless the\n      // revalidation entry expires.\n      break\n    default:\n      revalidatingSegment satisfies never\n  }\n}\n\nfunction pingFullSegmentRevalidation(\n  now: number,\n  route: FulfilledRouteCacheEntry,\n  tree: RouteTree,\n  fetchStrategy: FetchStrategy.Full | FetchStrategy.PPRRuntime\n): PendingSegmentCacheEntry | null {\n  const revalidatingSegment = readOrCreateRevalidatingSegmentEntry(\n    now,\n    fetchStrategy,\n    route,\n    tree\n  )\n  if (revalidatingSegment.status === EntryStatus.Empty) {\n    // During a Full/PPRRuntime prefetch, a single dynamic request is made for all the\n    // segments that we need. So we don't initiate a request here directly. By\n    // returning a pending entry from this function, it signals to the caller\n    // that this segment should be included in the request that's sent to\n    // the server.\n    const pendingSegment = upgradeToPendingSegment(\n      revalidatingSegment,\n      fetchStrategy\n    )\n    upsertSegmentOnCompletion(\n      waitForSegmentCacheEntry(pendingSegment),\n      getSegmentVaryPathForRequest(fetchStrategy, tree)\n    )\n    return pendingSegment\n  } else {\n    // There's already a revalidation in progress.\n    const nonEmptyRevalidatingSegment = revalidatingSegment\n    if (\n      canNewFetchStrategyProvideMoreContent(\n        nonEmptyRevalidatingSegment.fetchStrategy,\n        fetchStrategy\n      )\n    ) {\n      // The existing revalidation was fetched using a less specific strategy.\n      // Reset it and start a new revalidation.\n      const emptySegment = overwriteRevalidatingSegmentCacheEntry(\n        fetchStrategy,\n        route,\n        tree\n      )\n      const pendingSegment = upgradeToPendingSegment(\n        emptySegment,\n        fetchStrategy\n      )\n      upsertSegmentOnCompletion(\n        waitForSegmentCacheEntry(pendingSegment),\n        getSegmentVaryPathForRequest(fetchStrategy, tree)\n      )\n      return pendingSegment\n    }\n    switch (nonEmptyRevalidatingSegment.status) {\n      case EntryStatus.Pending:\n        // There's already an in-progress prefetch that includes this segment.\n        return null\n      case EntryStatus.Fulfilled:\n      case EntryStatus.Rejected:\n        // A previous revalidation attempt finished, but we chose not to replace\n        // the existing entry in the cache. Don't try again until or unless the\n        // revalidation entry expires.\n        return null\n      default:\n        nonEmptyRevalidatingSegment satisfies never\n        return null\n    }\n  }\n}\n\nconst noop = () => {}\n\nfunction upsertSegmentOnCompletion(\n  promise: Promise<FulfilledSegmentCacheEntry | null>,\n  varyPath: SegmentVaryPath\n) {\n  // Wait for a segment to finish loading, then upsert it into the cache\n  promise.then((fulfilled) => {\n    if (fulfilled !== null) {\n      // Received new data. Attempt to replace the existing entry in the cache.\n      upsertSegmentEntry(Date.now(), varyPath, fulfilled)\n    }\n  }, noop)\n}\n\nfunction doesCurrentSegmentMatchCachedSegment(\n  route: FulfilledRouteCacheEntry,\n  currentSegment: Segment,\n  cachedSegment: Segment\n): boolean {\n  if (cachedSegment === PAGE_SEGMENT_KEY) {\n    // In the FlightRouterState stored by the router, the page segment has the\n    // rendered search params appended to the name of the segment. In the\n    // prefetch cache, however, this is stored separately. So, when comparing\n    // the router's current FlightRouterState to the cached FlightRouterState,\n    // we need to make sure we compare both parts of the segment.\n    // TODO: This is not modeled clearly. We use the same type,\n    // FlightRouterState, for both the CacheNode tree _and_ the prefetch cache\n    // _and_ the server response format, when conceptually those are three\n    // different things and treated in different ways. We should encode more of\n    // this information into the type design so mistakes are less likely.\n    return (\n      currentSegment ===\n      addSearchParamsIfPageSegment(\n        PAGE_SEGMENT_KEY,\n        Object.fromEntries(new URLSearchParams(route.renderedSearch))\n      )\n    )\n  }\n  // Non-page segments are compared using the same function as the server\n  return matchSegment(cachedSegment, currentSegment)\n}\n\n// -----------------------------------------------------------------------------\n// The remainder of the module is a MinHeap implementation. Try not to put any\n// logic below here unless it's related to the heap algorithm. We can extract\n// this to a separate module if/when we need multiple kinds of heaps.\n// -----------------------------------------------------------------------------\n\nfunction compareQueuePriority(a: PrefetchTask, b: PrefetchTask) {\n  // Since the queue is a MinHeap, this should return a positive number if b is\n  // higher priority than a, and a negative number if a is higher priority\n  // than b.\n\n  // `priority` is an integer, where higher numbers are higher priority.\n  const priorityDiff = b.priority - a.priority\n  if (priorityDiff !== 0) {\n    return priorityDiff\n  }\n\n  // If the priority is the same, check which phase the prefetch is in  is it\n  // prefetching the route tree, or the segments? Route trees are prioritized.\n  const phaseDiff = b.phase - a.phase\n  if (phaseDiff !== 0) {\n    return phaseDiff\n  }\n\n  // Finally, check the insertion order. `sortId` is an incrementing counter\n  // assigned to prefetches. We want to process the newest prefetches first.\n  return b.sortId - a.sortId\n}\n\nfunction heapPush(heap: Array<PrefetchTask>, node: PrefetchTask): void {\n  const index = heap.length\n  heap.push(node)\n  node._heapIndex = index\n  heapSiftUp(heap, node, index)\n}\n\nfunction heapPeek(heap: Array<PrefetchTask>): PrefetchTask | null {\n  return heap.length === 0 ? null : heap[0]\n}\n\nfunction heapPop(heap: Array<PrefetchTask>): PrefetchTask | null {\n  if (heap.length === 0) {\n    return null\n  }\n  const first = heap[0]\n  first._heapIndex = -1\n  const last = heap.pop() as PrefetchTask\n  if (last !== first) {\n    heap[0] = last\n    last._heapIndex = 0\n    heapSiftDown(heap, last, 0)\n  }\n  return first\n}\n\nfunction heapDelete(heap: Array<PrefetchTask>, node: PrefetchTask): void {\n  const index = node._heapIndex\n  if (index !== -1) {\n    node._heapIndex = -1\n    if (heap.length !== 0) {\n      const last = heap.pop() as PrefetchTask\n      if (last !== node) {\n        heap[index] = last\n        last._heapIndex = index\n        heapSiftDown(heap, last, index)\n      }\n    }\n  }\n}\n\nfunction heapResift(heap: Array<PrefetchTask>, node: PrefetchTask): void {\n  const index = node._heapIndex\n  if (index !== -1) {\n    if (index === 0) {\n      heapSiftDown(heap, node, 0)\n    } else {\n      const parentIndex = (index - 1) >>> 1\n      const parent = heap[parentIndex]\n      if (compareQueuePriority(parent, node) > 0) {\n        // The parent is larger. Sift up.\n        heapSiftUp(heap, node, index)\n      } else {\n        // The parent is smaller (or equal). Sift down.\n        heapSiftDown(heap, node, index)\n      }\n    }\n  }\n}\n\nfunction heapSiftUp(\n  heap: Array<PrefetchTask>,\n  node: PrefetchTask,\n  i: number\n): void {\n  let index = i\n  while (index > 0) {\n    const parentIndex = (index - 1) >>> 1\n    const parent = heap[parentIndex]\n    if (compareQueuePriority(parent, node) > 0) {\n      // The parent is larger. Swap positions.\n      heap[parentIndex] = node\n      node._heapIndex = parentIndex\n      heap[index] = parent\n      parent._heapIndex = index\n\n      index = parentIndex\n    } else {\n      // The parent is smaller. Exit.\n      return\n    }\n  }\n}\n\nfunction heapSiftDown(\n  heap: Array<PrefetchTask>,\n  node: PrefetchTask,\n  i: number\n): void {\n  let index = i\n  const length = heap.length\n  const halfLength = length >>> 1\n  while (index < halfLength) {\n    const leftIndex = (index + 1) * 2 - 1\n    const left = heap[leftIndex]\n    const rightIndex = leftIndex + 1\n    const right = heap[rightIndex]\n\n    // If the left or right node is smaller, swap with the smaller of those.\n    if (compareQueuePriority(left, node) < 0) {\n      if (rightIndex < length && compareQueuePriority(right, left) < 0) {\n        heap[index] = right\n        right._heapIndex = index\n        heap[rightIndex] = node\n        node._heapIndex = rightIndex\n\n        index = rightIndex\n      } else {\n        heap[index] = left\n        left._heapIndex = index\n        heap[leftIndex] = node\n        node._heapIndex = leftIndex\n\n        index = leftIndex\n      }\n    } else if (rightIndex < length && compareQueuePriority(right, node) < 0) {\n      heap[index] = right\n      right._heapIndex = index\n      heap[rightIndex] = node\n      node._heapIndex = rightIndex\n\n      index = rightIndex\n    } else {\n      // Neither child is smaller. Exit.\n      return\n    }\n  }\n}\n","import type { FlightRouterState } from '../../shared/lib/app-router-types'\nimport type { AppRouterInstance } from '../../shared/lib/app-router-context.shared-runtime'\nimport {\n  FetchStrategy,\n  type PrefetchTaskFetchStrategy,\n  PrefetchPriority,\n} from './segment-cache/types'\nimport { createCacheKey } from './segment-cache/cache-key'\nimport {\n  type PrefetchTask,\n  schedulePrefetchTask as scheduleSegmentPrefetchTask,\n  cancelPrefetchTask,\n  reschedulePrefetchTask,\n  isPrefetchTaskDirty,\n} from './segment-cache/scheduler'\nimport { startTransition } from 'react'\n\ntype LinkElement = HTMLAnchorElement | SVGAElement\n\ntype Element = LinkElement | HTMLFormElement\n\n// Properties that are shared between Link and Form instances. We use the same\n// shape for both to prevent a polymorphic de-opt in the VM.\ntype LinkOrFormInstanceShared = {\n  router: AppRouterInstance\n  fetchStrategy: PrefetchTaskFetchStrategy\n\n  isVisible: boolean\n\n  // The most recently initiated prefetch task. It may or may not have\n  // already completed. The same prefetch task object can be reused across\n  // multiple prefetches of the same link.\n  prefetchTask: PrefetchTask | null\n}\n\nexport type FormInstance = LinkOrFormInstanceShared & {\n  prefetchHref: string\n  setOptimisticLinkStatus: null\n}\n\ntype PrefetchableLinkInstance = LinkOrFormInstanceShared & {\n  prefetchHref: string\n  setOptimisticLinkStatus: (status: { pending: boolean }) => void\n}\n\ntype NonPrefetchableLinkInstance = LinkOrFormInstanceShared & {\n  prefetchHref: null\n  setOptimisticLinkStatus: (status: { pending: boolean }) => void\n}\n\ntype PrefetchableInstance = PrefetchableLinkInstance | FormInstance\n\nexport type LinkInstance =\n  | PrefetchableLinkInstance\n  | NonPrefetchableLinkInstance\n\n// Tracks the most recently navigated link instance. When null, indicates\n// the current navigation was not initiated by a link click.\nlet linkForMostRecentNavigation: LinkInstance | null = null\n\n// Status object indicating link is pending\nexport const PENDING_LINK_STATUS = { pending: true }\n\n// Status object indicating link is idle\nexport const IDLE_LINK_STATUS = { pending: false }\n\n// Updates the loading state when navigating between links\n// - Resets the previous link's loading state\n// - Sets the new link's loading state\n// - Updates tracking of current navigation\nexport function setLinkForCurrentNavigation(link: LinkInstance | null) {\n  startTransition(() => {\n    linkForMostRecentNavigation?.setOptimisticLinkStatus(IDLE_LINK_STATUS)\n    link?.setOptimisticLinkStatus(PENDING_LINK_STATUS)\n    linkForMostRecentNavigation = link\n  })\n}\n\n// Unmounts the current link instance from navigation tracking\nexport function unmountLinkForCurrentNavigation(link: LinkInstance) {\n  if (linkForMostRecentNavigation === link) {\n    linkForMostRecentNavigation = null\n  }\n}\n\n// Use a WeakMap to associate a Link instance with its DOM element. This is\n// used by the IntersectionObserver to track the link's visibility.\nconst prefetchable:\n  | WeakMap<Element, PrefetchableInstance>\n  | Map<Element, PrefetchableInstance> =\n  typeof WeakMap === 'function' ? new WeakMap() : new Map()\n\n// A Set of the currently visible links. We re-prefetch visible links after a\n// cache invalidation, or when the current URL changes. It's a separate data\n// structure from the WeakMap above because only the visible links need to\n// be enumerated.\nconst prefetchableAndVisible: Set<PrefetchableInstance> = new Set()\n\n// A single IntersectionObserver instance shared by all <Link> components.\nconst observer: IntersectionObserver | null =\n  typeof IntersectionObserver === 'function'\n    ? new IntersectionObserver(handleIntersect, {\n        rootMargin: '200px',\n      })\n    : null\n\nfunction observeVisibility(element: Element, instance: PrefetchableInstance) {\n  const existingInstance = prefetchable.get(element)\n  if (existingInstance !== undefined) {\n    // This shouldn't happen because each <Link> component should have its own\n    // anchor tag instance, but it's defensive coding to avoid a memory leak in\n    // case there's a logical error somewhere else.\n    unmountPrefetchableInstance(element)\n  }\n  // Only track prefetchable links that have a valid prefetch URL\n  prefetchable.set(element, instance)\n  if (observer !== null) {\n    observer.observe(element)\n  }\n}\n\nfunction coercePrefetchableUrl(href: string): URL | null {\n  if (typeof window !== 'undefined') {\n    const { createPrefetchURL } =\n      require('./app-router-utils') as typeof import('./app-router-utils')\n\n    try {\n      return createPrefetchURL(href)\n    } catch {\n      // createPrefetchURL sometimes throws an error if an invalid URL is\n      // provided, though I'm not sure if it's actually necessary.\n      // TODO: Consider removing the throw from the inner function, or change it\n      // to reportError. Or maybe the error isn't even necessary for automatic\n      // prefetches, just navigations.\n      const reportErrorFn =\n        typeof reportError === 'function' ? reportError : console.error\n      reportErrorFn(\n        `Cannot prefetch '${href}' because it cannot be converted to a URL.`\n      )\n      return null\n    }\n  } else {\n    return null\n  }\n}\n\nexport function mountLinkInstance(\n  element: LinkElement,\n  href: string,\n  router: AppRouterInstance,\n  fetchStrategy: PrefetchTaskFetchStrategy,\n  prefetchEnabled: boolean,\n  setOptimisticLinkStatus: (status: { pending: boolean }) => void\n): LinkInstance {\n  if (prefetchEnabled) {\n    const prefetchURL = coercePrefetchableUrl(href)\n    if (prefetchURL !== null) {\n      const instance: PrefetchableLinkInstance = {\n        router,\n        fetchStrategy,\n        isVisible: false,\n        prefetchTask: null,\n        prefetchHref: prefetchURL.href,\n        setOptimisticLinkStatus,\n      }\n      // We only observe the link's visibility if it's prefetchable. For\n      // example, this excludes links to external URLs.\n      observeVisibility(element, instance)\n      return instance\n    }\n  }\n  // If the link is not prefetchable, we still create an instance so we can\n  // track its optimistic state (i.e. useLinkStatus).\n  const instance: NonPrefetchableLinkInstance = {\n    router,\n    fetchStrategy,\n    isVisible: false,\n    prefetchTask: null,\n    prefetchHref: null,\n    setOptimisticLinkStatus,\n  }\n  return instance\n}\n\nexport function mountFormInstance(\n  element: HTMLFormElement,\n  href: string,\n  router: AppRouterInstance,\n  fetchStrategy: PrefetchTaskFetchStrategy\n): void {\n  const prefetchURL = coercePrefetchableUrl(href)\n  if (prefetchURL === null) {\n    // This href is not prefetchable, so we don't track it.\n    // TODO: We currently observe/unobserve a form every time its href changes.\n    // For Links, this isn't a big deal because the href doesn't usually change,\n    // but for forms it's extremely common. We should optimize this.\n    return\n  }\n  const instance: FormInstance = {\n    router,\n    fetchStrategy,\n    isVisible: false,\n    prefetchTask: null,\n    prefetchHref: prefetchURL.href,\n    setOptimisticLinkStatus: null,\n  }\n  observeVisibility(element, instance)\n}\n\nexport function unmountPrefetchableInstance(element: Element) {\n  const instance = prefetchable.get(element)\n  if (instance !== undefined) {\n    prefetchable.delete(element)\n    prefetchableAndVisible.delete(instance)\n    const prefetchTask = instance.prefetchTask\n    if (prefetchTask !== null) {\n      cancelPrefetchTask(prefetchTask)\n    }\n  }\n  if (observer !== null) {\n    observer.unobserve(element)\n  }\n}\n\nfunction handleIntersect(entries: Array<IntersectionObserverEntry>) {\n  for (const entry of entries) {\n    // Some extremely old browsers or polyfills don't reliably support\n    // isIntersecting so we check intersectionRatio instead. (Do we care? Not\n    // really. But whatever this is fine.)\n    const isVisible = entry.intersectionRatio > 0\n    onLinkVisibilityChanged(entry.target as HTMLAnchorElement, isVisible)\n  }\n}\n\nexport function onLinkVisibilityChanged(element: Element, isVisible: boolean) {\n  if (process.env.NODE_ENV !== 'production') {\n    // Prefetching on viewport is disabled in development for performance\n    // reasons, because it requires compiling the target page.\n    // TODO: Investigate re-enabling this.\n    return\n  }\n\n  const instance = prefetchable.get(element)\n  if (instance === undefined) {\n    return\n  }\n\n  instance.isVisible = isVisible\n  if (isVisible) {\n    prefetchableAndVisible.add(instance)\n  } else {\n    prefetchableAndVisible.delete(instance)\n  }\n  rescheduleLinkPrefetch(instance, PrefetchPriority.Default)\n}\n\nexport function onNavigationIntent(\n  element: HTMLAnchorElement | SVGAElement,\n  unstable_upgradeToDynamicPrefetch: boolean\n) {\n  const instance = prefetchable.get(element)\n  if (instance === undefined) {\n    return\n  }\n  // Prefetch the link on hover/touchstart.\n  if (instance !== undefined) {\n    if (\n      process.env.__NEXT_DYNAMIC_ON_HOVER &&\n      unstable_upgradeToDynamicPrefetch\n    ) {\n      // Switch to a full prefetch\n      instance.fetchStrategy = FetchStrategy.Full\n    }\n    rescheduleLinkPrefetch(instance, PrefetchPriority.Intent)\n  }\n}\n\nfunction rescheduleLinkPrefetch(\n  instance: PrefetchableInstance,\n  priority: PrefetchPriority.Default | PrefetchPriority.Intent\n) {\n  // Ensures that app-router-instance is not compiled in the server bundle\n  if (typeof window !== 'undefined') {\n    const existingPrefetchTask = instance.prefetchTask\n\n    if (!instance.isVisible) {\n      // Cancel any in-progress prefetch task. (If it already finished then this\n      // is a no-op.)\n      if (existingPrefetchTask !== null) {\n        cancelPrefetchTask(existingPrefetchTask)\n      }\n      // We don't need to reset the prefetchTask to null upon cancellation; an\n      // old task object can be rescheduled with reschedulePrefetchTask. This is a\n      // micro-optimization but also makes the code simpler (don't need to\n      // worry about whether an old task object is stale).\n      return\n    }\n\n    const { getCurrentAppRouterState } =\n      require('./app-router-instance') as typeof import('./app-router-instance')\n\n    const appRouterState = getCurrentAppRouterState()\n    if (appRouterState !== null) {\n      const treeAtTimeOfPrefetch = appRouterState.tree\n      if (existingPrefetchTask === null) {\n        // Initiate a prefetch task.\n        const nextUrl = appRouterState.nextUrl\n        const cacheKey = createCacheKey(instance.prefetchHref, nextUrl)\n        instance.prefetchTask = scheduleSegmentPrefetchTask(\n          cacheKey,\n          treeAtTimeOfPrefetch,\n          instance.fetchStrategy,\n          priority,\n          null\n        )\n      } else {\n        // We already have an old task object that we can reschedule. This is\n        // effectively the same as canceling the old task and creating a new one.\n        reschedulePrefetchTask(\n          existingPrefetchTask,\n          treeAtTimeOfPrefetch,\n          instance.fetchStrategy,\n          priority\n        )\n      }\n    }\n  }\n}\n\nexport function pingVisibleLinks(\n  nextUrl: string | null,\n  tree: FlightRouterState\n) {\n  // For each currently visible link, cancel the existing prefetch task (if it\n  // exists) and schedule a new one. This is effectively the same as if all the\n  // visible links left and then re-entered the viewport.\n  //\n  // This is called when the Next-Url or the base tree changes, since those\n  // may affect the result of a prefetch task. It's also called after a\n  // cache invalidation.\n  for (const instance of prefetchableAndVisible) {\n    const task = instance.prefetchTask\n    if (task !== null && !isPrefetchTaskDirty(task, nextUrl, tree)) {\n      // The cache has not been invalidated, and none of the inputs have\n      // changed. Bail out.\n      continue\n    }\n    // Something changed. Cancel the existing prefetch task and schedule a\n    // new one.\n    if (task !== null) {\n      cancelPrefetchTask(task)\n    }\n    const cacheKey = createCacheKey(instance.prefetchHref, nextUrl)\n    instance.prefetchTask = scheduleSegmentPrefetchTask(\n      cacheKey,\n      tree,\n      instance.fetchStrategy,\n      PrefetchPriority.Default,\n      null\n    )\n  }\n}\n","import { parsePath } from './parse-path'\n\n/**\n * Checks if a given path starts with a given prefix. It ensures it matches\n * exactly without containing extra chars. e.g. prefix /docs should replace\n * for /docs, /docs/, /docs/a but not /docsss\n * @param path The path to check.\n * @param prefix The prefix to check against.\n */\nexport function pathHasPrefix(path: string, prefix: string) {\n  if (typeof path !== 'string') {\n    return false\n  }\n\n  const { pathname } = parsePath(path)\n  return pathname === prefix || pathname.startsWith(prefix + '/')\n}\n","import { pathHasPrefix } from '../shared/lib/router/utils/path-has-prefix'\n\nconst basePath = (process.env.__NEXT_ROUTER_BASEPATH as string) || ''\n\nexport function hasBasePath(path: string): boolean {\n  return pathHasPrefix(path, basePath)\n}\n","import { isAbsoluteUrl, getLocationOrigin } from '../../utils'\nimport { hasBasePath } from '../../../../client/has-base-path'\n\n/**\n * Detects whether a given url is routable by the Next.js router (browser only).\n */\nexport function isLocalURL(url: string): boolean {\n  // prevent a hydration mismatch on href for url with anchor refs\n  if (!isAbsoluteUrl(url)) return true\n  try {\n    // absolute urls can be local if they are on the same origin\n    const locationOrigin = getLocationOrigin()\n    const resolved = new URL(url, locationOrigin)\n    return resolved.origin === locationOrigin && hasBasePath(resolved.pathname)\n  } catch (_) {\n    return false\n  }\n}\n","let errorOnce = (_: string) => {}\nif (process.env.NODE_ENV !== 'production') {\n  const errors = new Set<string>()\n  errorOnce = (msg: string) => {\n    if (!errors.has(msg)) {\n      console.error(msg)\n    }\n    errors.add(msg)\n  }\n}\n\nexport { errorOnce }\n","'use client'\n\nimport React, { createContext, useContext, useOptimistic, useRef } from 'react'\nimport type { UrlObject } from 'url'\nimport { formatUrl } from '../../shared/lib/router/utils/format-url'\nimport { AppRouterContext } from '../../shared/lib/app-router-context.shared-runtime'\nimport { useMergedRef } from '../use-merged-ref'\nimport { isAbsoluteUrl } from '../../shared/lib/utils'\nimport { addBasePath } from '../add-base-path'\nimport { warnOnce } from '../../shared/lib/utils/warn-once'\nimport type { PENDING_LINK_STATUS } from '../components/links'\nimport {\n  IDLE_LINK_STATUS,\n  mountLinkInstance,\n  onNavigationIntent,\n  unmountLinkForCurrentNavigation,\n  unmountPrefetchableInstance,\n  type LinkInstance,\n} from '../components/links'\nimport { isLocalURL } from '../../shared/lib/router/utils/is-local-url'\nimport {\n  FetchStrategy,\n  type PrefetchTaskFetchStrategy,\n} from '../components/segment-cache/types'\nimport { errorOnce } from '../../shared/lib/utils/error-once'\n\ntype Url = string | UrlObject\ntype RequiredKeys<T> = {\n  [K in keyof T]-?: {} extends Pick<T, K> ? never : K\n}[keyof T]\ntype OptionalKeys<T> = {\n  [K in keyof T]-?: {} extends Pick<T, K> ? K : never\n}[keyof T]\n\ntype OnNavigateEventHandler = (event: { preventDefault: () => void }) => void\n\ntype InternalLinkProps = {\n  /**\n   * **Required**. The path or URL to navigate to. It can also be an object (similar to `URL`).\n   *\n   * @example\n   * ```tsx\n   * // Navigate to /dashboard:\n   * <Link href=\"/dashboard\">Dashboard</Link>\n   *\n   * // Navigate to /about?name=test:\n   * <Link href={{ pathname: '/about', query: { name: 'test' } }}>\n   *   About\n   * </Link>\n   * ```\n   *\n   * @remarks\n   * - For external URLs, use a fully qualified URL such as `https://...`.\n   * - In the App Router, dynamic routes must not include bracketed segments in `href`.\n   */\n  href: Url\n\n  /**\n   * @deprecated v10.0.0: `href` props pointing to a dynamic route are\n   * automatically resolved and no longer require the `as` prop.\n   */\n  as?: Url\n\n  /**\n   * Replace the current `history` state instead of adding a new URL into the stack.\n   *\n   * @defaultValue `false`\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/about\" replace>\n   *   About (replaces the history state)\n   * </Link>\n   * ```\n   */\n  replace?: boolean\n\n  /**\n   * Whether to override the default scroll behavior. If `true`, Next.js attempts to maintain\n   * the scroll position if the newly navigated page is still visible. If not, it scrolls to the top.\n   *\n   * If `false`, Next.js will not modify the scroll behavior at all.\n   *\n   * @defaultValue `true`\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/dashboard\" scroll={false}>\n   *   No auto scroll\n   * </Link>\n   * ```\n   */\n  scroll?: boolean\n\n  /**\n   * Update the path of the current page without rerunning data fetching methods\n   * like `getStaticProps`, `getServerSideProps`, or `getInitialProps`.\n   *\n   * @remarks\n   * `shallow` only applies to the Pages Router. For the App Router, see the\n   * [following documentation](https://nextjs.org/docs/app/building-your-application/routing/linking-and-navigating#using-the-native-history-api).\n   *\n   * @defaultValue `false`\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/blog\" shallow>\n   *   Shallow navigation\n   * </Link>\n   * ```\n   */\n  shallow?: boolean\n\n  /**\n   * Forces `Link` to pass its `href` to the child component. Useful if the child is a custom\n   * component that wraps an `<a>` tag, or if you're using certain styling libraries.\n   *\n   * @defaultValue `false`\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/dashboard\" passHref legacyBehavior>\n   *   <MyStyledAnchor>Dashboard</MyStyledAnchor>\n   * </Link>\n   * ```\n   */\n  passHref?: boolean\n\n  /**\n   * Prefetch the page in the background.\n   * Any `<Link />` that is in the viewport (initially or through scroll) will be prefetched.\n   * Prefetch can be disabled by passing `prefetch={false}`.\n   *\n   * @remarks\n   * Prefetching is only enabled in production.\n   *\n   * - In the **App Router**:\n   *   - `\"auto\"`, `null`, `undefined` (default): Prefetch behavior depends on static vs dynamic routes:\n   *     - Static routes: fully prefetched\n   *     - Dynamic routes: partial prefetch to the nearest segment with a `loading.js`\n   *   - `true`: Always prefetch the full route and data.\n   *   - `false`: Disable prefetching on both viewport and hover.\n   * - In the **Pages Router**:\n   *   - `true` (default): Prefetches the route and data in the background on viewport or hover.\n   *   - `false`: Prefetch only on hover, not on viewport.\n   *\n   * @defaultValue `true` (Pages Router) or `null` (App Router)\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/dashboard\" prefetch={false}>\n   *   Dashboard\n   * </Link>\n   * ```\n   */\n  prefetch?: boolean | 'auto' | null\n\n  /**\n   * (unstable) Switch to a full prefetch on hover. Effectively the same as\n   * updating the prefetch prop to `true` in a mouse event.\n   */\n  unstable_dynamicOnHover?: boolean\n\n  /**\n   * The active locale is automatically prepended in the Pages Router. `locale` allows for providing\n   * a different locale, or can be set to `false` to opt out of automatic locale behavior.\n   *\n   * @remarks\n   * Note: locale only applies in the Pages Router and is ignored in the App Router.\n   *\n   * @example\n   * ```tsx\n   * // Use the 'fr' locale:\n   * <Link href=\"/about\" locale=\"fr\">\n   *   About (French)\n   * </Link>\n   *\n   * // Disable locale prefix:\n   * <Link href=\"/about\" locale={false}>\n   *   About (no locale prefix)\n   * </Link>\n   * ```\n   */\n  locale?: string | false\n\n  /**\n   * Enable legacy link behavior.\n   *\n   * @deprecated This will be removed in a future version\n   * @defaultValue `false`\n   * @see https://github.com/vercel/next.js/commit/489e65ed98544e69b0afd7e0cfc3f9f6c2b803b7\n   */\n  legacyBehavior?: boolean\n\n  /**\n   * Optional event handler for when the mouse pointer is moved onto the `<Link>`.\n   */\n  onMouseEnter?: React.MouseEventHandler<HTMLAnchorElement>\n\n  /**\n   * Optional event handler for when the `<Link>` is touched.\n   */\n  onTouchStart?: React.TouchEventHandler<HTMLAnchorElement>\n\n  /**\n   * Optional event handler for when the `<Link>` is clicked.\n   */\n  onClick?: React.MouseEventHandler<HTMLAnchorElement>\n\n  /**\n   * Optional event handler for when the `<Link>` is navigated.\n   */\n  onNavigate?: OnNavigateEventHandler\n}\n\n// TODO-APP: Include the full set of Anchor props\n// adding this to the publicly exported type currently breaks existing apps\n\n// `RouteInferType` is a stub here to avoid breaking `typedRoutes` when the type\n// isn't generated yet. It will be replaced when type generation runs.\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport type LinkProps<RouteInferType = any> = InternalLinkProps\ntype LinkPropsRequired = RequiredKeys<LinkProps>\ntype LinkPropsOptional = OptionalKeys<Omit<InternalLinkProps, 'locale'>>\n\nfunction isModifiedEvent(event: React.MouseEvent): boolean {\n  const eventTarget = event.currentTarget as HTMLAnchorElement | SVGAElement\n  const target = eventTarget.getAttribute('target')\n  return (\n    (target && target !== '_self') ||\n    event.metaKey ||\n    event.ctrlKey ||\n    event.shiftKey ||\n    event.altKey || // triggers resource download\n    (event.nativeEvent && event.nativeEvent.which === 2)\n  )\n}\n\nfunction linkClicked(\n  e: React.MouseEvent,\n  href: string,\n  as: string,\n  linkInstanceRef: React.RefObject<LinkInstance | null>,\n  replace?: boolean,\n  scroll?: boolean,\n  onNavigate?: OnNavigateEventHandler\n): void {\n  if (typeof window !== 'undefined') {\n    const { nodeName } = e.currentTarget\n\n    // anchors inside an svg have a lowercase nodeName\n    const isAnchorNodeName = nodeName.toUpperCase() === 'A'\n    if (\n      (isAnchorNodeName && isModifiedEvent(e)) ||\n      e.currentTarget.hasAttribute('download')\n    ) {\n      // ignore click for browsers default behavior\n      return\n    }\n\n    if (!isLocalURL(href)) {\n      if (replace) {\n        // browser default behavior does not replace the history state\n        // so we need to do it manually\n        e.preventDefault()\n        location.replace(href)\n      }\n\n      // ignore click for browsers default behavior\n      return\n    }\n\n    e.preventDefault()\n\n    if (onNavigate) {\n      let isDefaultPrevented = false\n\n      onNavigate({\n        preventDefault: () => {\n          isDefaultPrevented = true\n        },\n      })\n\n      if (isDefaultPrevented) {\n        return\n      }\n    }\n\n    const { dispatchNavigateAction } =\n      require('../components/app-router-instance') as typeof import('../components/app-router-instance')\n\n    React.startTransition(() => {\n      dispatchNavigateAction(\n        as || href,\n        replace ? 'replace' : 'push',\n        scroll ?? true,\n        linkInstanceRef.current\n      )\n    })\n  }\n}\n\nfunction formatStringOrUrl(urlObjOrString: UrlObject | string): string {\n  if (typeof urlObjOrString === 'string') {\n    return urlObjOrString\n  }\n\n  return formatUrl(urlObjOrString)\n}\n\n/**\n * A React component that extends the HTML `<a>` element to provide\n * [prefetching](https://nextjs.org/docs/app/building-your-application/routing/linking-and-navigating#2-prefetching)\n * and client-side navigation. This is the primary way to navigate between routes in Next.js.\n *\n * @remarks\n * - Prefetching is only enabled in production.\n *\n * @see https://nextjs.org/docs/app/api-reference/components/link\n */\nexport default function LinkComponent(\n  props: LinkProps & {\n    children: React.ReactNode\n    ref: React.Ref<HTMLAnchorElement>\n  }\n) {\n  const [linkStatus, setOptimisticLinkStatus] = useOptimistic(IDLE_LINK_STATUS)\n\n  let children: React.ReactNode\n\n  const linkInstanceRef = useRef<LinkInstance | null>(null)\n\n  const {\n    href: hrefProp,\n    as: asProp,\n    children: childrenProp,\n    prefetch: prefetchProp = null,\n    passHref,\n    replace,\n    shallow,\n    scroll,\n    onClick,\n    onMouseEnter: onMouseEnterProp,\n    onTouchStart: onTouchStartProp,\n    legacyBehavior = false,\n    onNavigate,\n    ref: forwardedRef,\n    unstable_dynamicOnHover,\n    ...restProps\n  } = props\n\n  children = childrenProp\n\n  if (\n    legacyBehavior &&\n    (typeof children === 'string' || typeof children === 'number')\n  ) {\n    children = <a>{children}</a>\n  }\n\n  const router = React.useContext(AppRouterContext)\n\n  const prefetchEnabled = prefetchProp !== false\n\n  const fetchStrategy =\n    prefetchProp !== false\n      ? getFetchStrategyFromPrefetchProp(prefetchProp)\n      : // TODO: it makes no sense to assign a fetchStrategy when prefetching is disabled.\n        FetchStrategy.PPR\n\n  if (process.env.NODE_ENV !== 'production') {\n    function createPropError(args: {\n      key: string\n      expected: string\n      actual: string\n    }) {\n      return new Error(\n        `Failed prop type: The prop \\`${args.key}\\` expects a ${args.expected} in \\`<Link>\\`, but got \\`${args.actual}\\` instead.` +\n          (typeof window !== 'undefined'\n            ? \"\\nOpen your browser's console to view the Component stack trace.\"\n            : '')\n      )\n    }\n\n    // TypeScript trick for type-guarding:\n    const requiredPropsGuard: Record<LinkPropsRequired, true> = {\n      href: true,\n    } as const\n    const requiredProps: LinkPropsRequired[] = Object.keys(\n      requiredPropsGuard\n    ) as LinkPropsRequired[]\n    requiredProps.forEach((key: LinkPropsRequired) => {\n      if (key === 'href') {\n        if (\n          props[key] == null ||\n          (typeof props[key] !== 'string' && typeof props[key] !== 'object')\n        ) {\n          throw createPropError({\n            key,\n            expected: '`string` or `object`',\n            actual: props[key] === null ? 'null' : typeof props[key],\n          })\n        }\n      } else {\n        // TypeScript trick for type-guarding:\n        const _: never = key\n      }\n    })\n\n    // TypeScript trick for type-guarding:\n    const optionalPropsGuard: Record<LinkPropsOptional, true> = {\n      as: true,\n      replace: true,\n      scroll: true,\n      shallow: true,\n      passHref: true,\n      prefetch: true,\n      unstable_dynamicOnHover: true,\n      onClick: true,\n      onMouseEnter: true,\n      onTouchStart: true,\n      legacyBehavior: true,\n      onNavigate: true,\n    } as const\n    const optionalProps: LinkPropsOptional[] = Object.keys(\n      optionalPropsGuard\n    ) as LinkPropsOptional[]\n    optionalProps.forEach((key: LinkPropsOptional) => {\n      const valType = typeof props[key]\n\n      if (key === 'as') {\n        if (props[key] && valType !== 'string' && valType !== 'object') {\n          throw createPropError({\n            key,\n            expected: '`string` or `object`',\n            actual: valType,\n          })\n        }\n      } else if (\n        key === 'onClick' ||\n        key === 'onMouseEnter' ||\n        key === 'onTouchStart' ||\n        key === 'onNavigate'\n      ) {\n        if (props[key] && valType !== 'function') {\n          throw createPropError({\n            key,\n            expected: '`function`',\n            actual: valType,\n          })\n        }\n      } else if (\n        key === 'replace' ||\n        key === 'scroll' ||\n        key === 'shallow' ||\n        key === 'passHref' ||\n        key === 'legacyBehavior' ||\n        key === 'unstable_dynamicOnHover'\n      ) {\n        if (props[key] != null && valType !== 'boolean') {\n          throw createPropError({\n            key,\n            expected: '`boolean`',\n            actual: valType,\n          })\n        }\n      } else if (key === 'prefetch') {\n        if (\n          props[key] != null &&\n          valType !== 'boolean' &&\n          props[key] !== 'auto'\n        ) {\n          throw createPropError({\n            key,\n            expected: '`boolean | \"auto\"`',\n            actual: valType,\n          })\n        }\n      } else {\n        // TypeScript trick for type-guarding:\n        const _: never = key\n      }\n    })\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (props.locale) {\n      warnOnce(\n        'The `locale` prop is not supported in `next/link` while using the `app` router. Read more about app router internalization: https://nextjs.org/docs/app/building-your-application/routing/internationalization'\n      )\n    }\n    if (!asProp) {\n      let href: string | undefined\n      if (typeof hrefProp === 'string') {\n        href = hrefProp\n      } else if (\n        typeof hrefProp === 'object' &&\n        typeof hrefProp.pathname === 'string'\n      ) {\n        href = hrefProp.pathname\n      }\n\n      if (href) {\n        const hasDynamicSegment = href\n          .split('/')\n          .some((segment) => segment.startsWith('[') && segment.endsWith(']'))\n\n        if (hasDynamicSegment) {\n          throw new Error(\n            `Dynamic href \\`${href}\\` found in <Link> while using the \\`/app\\` router, this is not supported. Read more: https://nextjs.org/docs/messages/app-dir-dynamic-href`\n          )\n        }\n      }\n    }\n  }\n\n  const { href, as } = React.useMemo(() => {\n    const resolvedHref = formatStringOrUrl(hrefProp)\n    return {\n      href: resolvedHref,\n      as: asProp ? formatStringOrUrl(asProp) : resolvedHref,\n    }\n  }, [hrefProp, asProp])\n\n  // This will return the first child, if multiple are provided it will throw an error\n  let child: any\n  if (legacyBehavior) {\n    if ((children as any)?.$$typeof === Symbol.for('react.lazy')) {\n      throw new Error(\n        `\\`<Link legacyBehavior>\\` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's \\`<a>\\` tag.`\n      )\n    }\n\n    if (process.env.NODE_ENV === 'development') {\n      if (onClick) {\n        console.warn(\n          `\"onClick\" was passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but \"legacyBehavior\" was set. The legacy behavior requires onClick be set on the child of next/link`\n        )\n      }\n      if (onMouseEnterProp) {\n        console.warn(\n          `\"onMouseEnter\" was passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but \"legacyBehavior\" was set. The legacy behavior requires onMouseEnter be set on the child of next/link`\n        )\n      }\n      try {\n        child = React.Children.only(children)\n      } catch (err) {\n        if (!children) {\n          throw new Error(\n            `No children were passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but one child is required https://nextjs.org/docs/messages/link-no-children`\n          )\n        }\n        throw new Error(\n          `Multiple children were passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but only one child is supported https://nextjs.org/docs/messages/link-multiple-children` +\n            (typeof window !== 'undefined'\n              ? \" \\nOpen your browser's console to view the Component stack trace.\"\n              : '')\n        )\n      }\n    } else {\n      child = React.Children.only(children)\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if ((children as any)?.type === 'a') {\n        throw new Error(\n          'Invalid <Link> with <a> child. Please remove <a> or use <Link legacyBehavior>.\\nLearn more: https://nextjs.org/docs/messages/invalid-new-link-with-extra-anchor'\n        )\n      }\n    }\n  }\n\n  const childRef: any = legacyBehavior\n    ? child && typeof child === 'object' && child.ref\n    : forwardedRef\n\n  // Use a callback ref to attach an IntersectionObserver to the anchor tag on\n  // mount. In the future we will also use this to keep track of all the\n  // currently mounted <Link> instances, e.g. so we can re-prefetch them after\n  // a revalidation or refresh.\n  const observeLinkVisibilityOnMount = React.useCallback(\n    (element: HTMLAnchorElement | SVGAElement) => {\n      if (router !== null) {\n        linkInstanceRef.current = mountLinkInstance(\n          element,\n          href,\n          router,\n          fetchStrategy,\n          prefetchEnabled,\n          setOptimisticLinkStatus\n        )\n      }\n\n      return () => {\n        if (linkInstanceRef.current) {\n          unmountLinkForCurrentNavigation(linkInstanceRef.current)\n          linkInstanceRef.current = null\n        }\n        unmountPrefetchableInstance(element)\n      }\n    },\n    [prefetchEnabled, href, router, fetchStrategy, setOptimisticLinkStatus]\n  )\n\n  const mergedRef = useMergedRef(observeLinkVisibilityOnMount, childRef)\n\n  const childProps: {\n    onTouchStart?: React.TouchEventHandler<HTMLAnchorElement>\n    onMouseEnter: React.MouseEventHandler<HTMLAnchorElement>\n    onClick: React.MouseEventHandler<HTMLAnchorElement>\n    href?: string\n    ref?: any\n  } = {\n    ref: mergedRef,\n    onClick(e) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (!e) {\n          throw new Error(\n            `Component rendered inside next/link has to pass click event to \"onClick\" prop.`\n          )\n        }\n      }\n\n      if (!legacyBehavior && typeof onClick === 'function') {\n        onClick(e)\n      }\n\n      if (\n        legacyBehavior &&\n        child.props &&\n        typeof child.props.onClick === 'function'\n      ) {\n        child.props.onClick(e)\n      }\n\n      if (!router) {\n        return\n      }\n      if (e.defaultPrevented) {\n        return\n      }\n      linkClicked(e, href, as, linkInstanceRef, replace, scroll, onNavigate)\n    },\n    onMouseEnter(e) {\n      if (!legacyBehavior && typeof onMouseEnterProp === 'function') {\n        onMouseEnterProp(e)\n      }\n\n      if (\n        legacyBehavior &&\n        child.props &&\n        typeof child.props.onMouseEnter === 'function'\n      ) {\n        child.props.onMouseEnter(e)\n      }\n\n      if (!router) {\n        return\n      }\n      if (!prefetchEnabled || process.env.NODE_ENV === 'development') {\n        return\n      }\n\n      const upgradeToDynamicPrefetch = unstable_dynamicOnHover === true\n      onNavigationIntent(\n        e.currentTarget as HTMLAnchorElement | SVGAElement,\n        upgradeToDynamicPrefetch\n      )\n    },\n    onTouchStart: process.env.__NEXT_LINK_NO_TOUCH_START\n      ? undefined\n      : function onTouchStart(e) {\n          if (!legacyBehavior && typeof onTouchStartProp === 'function') {\n            onTouchStartProp(e)\n          }\n\n          if (\n            legacyBehavior &&\n            child.props &&\n            typeof child.props.onTouchStart === 'function'\n          ) {\n            child.props.onTouchStart(e)\n          }\n\n          if (!router) {\n            return\n          }\n          if (!prefetchEnabled) {\n            return\n          }\n\n          const upgradeToDynamicPrefetch = unstable_dynamicOnHover === true\n          onNavigationIntent(\n            e.currentTarget as HTMLAnchorElement | SVGAElement,\n            upgradeToDynamicPrefetch\n          )\n        },\n  }\n\n  // If the url is absolute, we can bypass the logic to prepend the basePath.\n  if (isAbsoluteUrl(as)) {\n    childProps.href = as\n  } else if (\n    !legacyBehavior ||\n    passHref ||\n    (child.type === 'a' && !('href' in child.props))\n  ) {\n    childProps.href = addBasePath(as)\n  }\n\n  let link: React.ReactNode\n\n  if (legacyBehavior) {\n    if (process.env.NODE_ENV === 'development') {\n      errorOnce(\n        '`legacyBehavior` is deprecated and will be removed in a future ' +\n          'release. A codemod is available to upgrade your components:\\n\\n' +\n          'npx @next/codemod@latest new-link .\\n\\n' +\n          'Learn more: https://nextjs.org/docs/app/building-your-application/upgrading/codemods#remove-a-tags-from-link-components'\n      )\n    }\n    link = React.cloneElement(child, childProps)\n  } else {\n    link = (\n      <a {...restProps} {...childProps}>\n        {children}\n      </a>\n    )\n  }\n\n  return (\n    <LinkStatusContext.Provider value={linkStatus}>\n      {link}\n    </LinkStatusContext.Provider>\n  )\n}\n\nconst LinkStatusContext = createContext<\n  typeof PENDING_LINK_STATUS | typeof IDLE_LINK_STATUS\n>(IDLE_LINK_STATUS)\n\nexport const useLinkStatus = () => {\n  return useContext(LinkStatusContext)\n}\n\nfunction getFetchStrategyFromPrefetchProp(\n  prefetchProp: Exclude<LinkProps['prefetch'], undefined | false>\n): PrefetchTaskFetchStrategy {\n  if (process.env.__NEXT_CACHE_COMPONENTS) {\n    if (prefetchProp === true) {\n      return FetchStrategy.Full\n    }\n\n    // `null` or `\"auto\"`: this is the default \"auto\" mode, where we will prefetch partially if the link is in the viewport.\n    // This will also include invalid prop values that don't match the types specified here.\n    // (although those should've been filtered out by prop validation in dev)\n    prefetchProp satisfies null | 'auto'\n    return FetchStrategy.PPR\n  } else {\n    return prefetchProp === null || prefetchProp === 'auto'\n      ? // We default to PPR, and we'll discover whether or not the route supports it with the initial prefetch.\n        FetchStrategy.PPR\n      : // In the old implementation without runtime prefetches, `prefetch={true}` forces all dynamic data to be prefetched.\n        // To preserve backwards-compatibility, anything other than `false`, `null`, or `\"auto\"` results in a full prefetch.\n        // (although invalid values should've been filtered out by prop validation in dev)\n        FetchStrategy.Full\n  }\n}\n","import { createContext, useContext, useEffect, useState } from \"react\";\r\n\r\ntype Theme = \"light\" | \"dark\";\r\n\r\ninterface ThemeContextType {\r\n  theme: Theme;\r\n  toggleTheme: () => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\r\n\r\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\r\n  const [theme, setTheme] = useState<Theme>(() => {\r\n    const saved = localStorage.getItem(\"theme\");\r\n    return (saved as Theme) || \"light\";\r\n  });\r\n\r\n  useEffect(() => {\r\n    const root = document.documentElement;\r\n    if (theme === \"dark\") {\r\n      root.classList.add(\"dark\");\r\n    } else {\r\n      root.classList.remove(\"dark\");\r\n    }\r\n    localStorage.setItem(\"theme\", theme);\r\n  }, [theme]);\r\n\r\n  const toggleTheme = () => {\r\n    setTheme((prev) => (prev === \"light\" ? \"dark\" : \"light\"));\r\n  };\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useTheme() {\r\n  const context = useContext(ThemeContext);\r\n  if (!context) {\r\n    throw new Error(\"useTheme must be used within ThemeProvider\");\r\n  }\r\n  return context;\r\n}\r\n","import { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\nimport * as React from 'react'\r\n\r\nimport { cn } from '@/utils'\r\n\r\nconst buttonVariants = cva(\r\n\t\"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n\t{\r\n\t\tvariants: {\r\n\t\t\tvariant: {\r\n\t\t\t\tdefault: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n\t\t\t\tdestructive:\r\n\t\t\t\t\t'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n\t\t\t\toutline:\r\n\t\t\t\t\t'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n\t\t\t\tsecondary:\r\n\t\t\t\t\t'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n\t\t\t\tghost:\r\n\t\t\t\t\t'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n\t\t\t\tlink: 'text-primary underline-offset-4 hover:underline',\r\n\t\t\t},\r\n\t\t\tsize: {\r\n\t\t\t\tdefault: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n\t\t\t\tsm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n\t\t\t\tlg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n\t\t\t\ticon: 'size-9',\r\n\t\t\t\t'icon-sm': 'size-8',\r\n\t\t\t\t'icon-lg': 'size-10',\r\n\t\t\t},\r\n\t\t},\r\n\t\tdefaultVariants: {\r\n\t\t\tvariant: 'default',\r\n\t\t\tsize: 'default',\r\n\t\t},\r\n\t}\r\n)\r\n\r\nfunction Button({\r\n\tclassName,\r\n\tvariant,\r\n\tsize,\r\n\tasChild = false,\r\n\t...props\r\n}: React.ComponentProps<'button'> &\r\n\tVariantProps<typeof buttonVariants> & {\r\n\t\tasChild?: boolean\r\n\t}) {\r\n\tconst Comp = asChild ? Slot : 'button'\r\n\r\n\treturn (\r\n\t\t<Comp\r\n\t\t\tdata-slot='button'\r\n\t\t\tclassName={cn(buttonVariants({ variant, size, className }))}\r\n\t\t\t{...props}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const api = { setState, getState, getInitialState, subscribe };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = ((createState) => createState ? createStoreImpl(createState) : createStoreImpl);\n\nexport { createStore };\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...args) => api.dispatch(...args), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst removeStoreFromTrackedConnections = (name, store) => {\n  if (store === void 0) return;\n  const connectionInfo = trackedConnections.get(name);\n  if (!connectionInfo) return;\n  delete connectionInfo.stores[store];\n  if (Object.keys(connectionInfo.stores).length === 0) {\n    trackedConnections.delete(name);\n  }\n};\nconst findCallerName = (stack) => {\n  var _a, _b;\n  if (!stack) return void 0;\n  const traceLines = stack.split(\"\\n\");\n  const apiSetStateLineIndex = traceLines.findIndex(\n    (traceLine) => traceLine.includes(\"api.setState\")\n  );\n  if (apiSetStateLineIndex < 0) return void 0;\n  const callerLine = ((_a = traceLines[apiSetStateLineIndex + 1]) == null ? void 0 : _a.trim()) || \"\";\n  return (_b = /.+ (.+) .+/.exec(callerLine)) == null ? void 0 : _b[1];\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (e) {\n  }\n  if (!extensionConnector) {\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = ((state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? {\n      type: anonymousActionType || findCallerName(new Error().stack) || \"anonymous\"\n    } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  });\n  api.devtools = {\n    cleanup: () => {\n      if (connection && typeof connection.unsubscribe === \"function\") {\n        connection.unsubscribe();\n      }\n      removeStoreFromTrackedConnections(options.name, store);\n    }\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...args) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && args[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...args);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format.\n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, fn) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) fn(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = ((selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  });\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nfunction combine(initialState, create) {\n  return (...args) => Object.assign({}, initialState, create(...args));\n}\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(name, JSON.stringify(newValue, options == null ? void 0 : options.replacer)),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst persistImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    return setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      return setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            const migration = options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n            if (migration instanceof Promise) {\n              return migration.then((result) => [true, result]);\n            }\n            return [true, migration];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persist = persistImpl;\n\nfunction ssrSafe(config, isSSR = typeof window === \"undefined\") {\n  return (set, get, api) => {\n    if (!isSSR) {\n      return config(set, get, api);\n    }\n    const ssrSet = () => {\n      throw new Error(\"Cannot set state of Zustand store in SSR\");\n    };\n    api.setState = ssrSet;\n    return config(ssrSet, get, api);\n  };\n}\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector, ssrSafe as unstable_ssrSafe };\n","'use client'\r\n\r\nimport { ThemeToggle } from '@/components/ThemeToggle'\r\nimport { Button } from '@/components/ui/button'\r\nimport { useLanguage } from '@/hooks/useLanguage'\r\nimport { AnimatePresence, motion } from 'framer-motion'\r\nimport { Globe, Menu, X } from 'lucide-react'\r\nimport Link from 'next/link'\r\nimport { usePathname } from 'next/navigation'\r\nimport { useState } from 'react'\r\n\r\nexport function Navigation() {\r\n\tconst [isOpen, setIsOpen] = useState(false)\r\n\tconst pathname = usePathname()\r\n\tconst { language, setLanguage, t } = useLanguage()\r\n\r\n\tconst navItems = [\r\n\t\t{ path: '/', label: t('home', 'Home'), labelUz: 'Bosh sahifa' },\r\n\t\t{ path: '/courses', label: t('courses', 'Courses'), labelUz: 'Kurslar' },\r\n\t\t{ path: '/about', label: t('about', 'About'), labelUz: 'Men haqimda' },\r\n\t\t{\r\n\t\t\tpath: '/resources',\r\n\t\t\tlabel: t('resources', 'Resources'),\r\n\t\t\tlabelUz: 'Resurslar',\r\n\t\t},\r\n\t\t{ path: '/contact', label: t('contact', 'Contact'), labelUz: 'Aloqa' },\r\n\t]\r\n\r\n\treturn (\r\n\t\t<nav className='fixed top-0 left-0 right-0 z-50 bg-white/90 dark:bg-slate-950/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 transition-colors duration-300'>\r\n\t\t\t<div className='container mx-auto px-4 sm:px-6 lg:px-8'>\r\n\t\t\t\t<div className='flex items-center justify-between h-20'>\r\n\t\t\t\t\t<Link href='/' className='flex items-center gap-3'>\r\n\t\t\t\t\t\t<div className='w-10 h-10 bg-sky-600 rounded-lg flex items-center justify-center'>\r\n\t\t\t\t\t\t\t<span className='text-white font-bold text-xl'>A</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='hidden sm:block'>\r\n\t\t\t\t\t\t\t<div className='font-bold text-slate-900 dark:text-white'>\r\n\t\t\t\t\t\t\t\tAlibek Allaberganov\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='text-xs text-slate-600 dark:text-slate-400'>\r\n\t\t\t\t\t\t\t\tEnglish Teacher\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Link>\r\n\r\n\t\t\t\t\t<div className='hidden md:flex items-center gap-8'>\r\n\t\t\t\t\t\t{navItems.map(item => (\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\tkey={item.path}\r\n\t\t\t\t\t\t\t\thref={item.path}\r\n\t\t\t\t\t\t\t\tclassName={`text-sm font-medium transition-colors relative ${\r\n\t\t\t\t\t\t\t\t\tpathname === item.path\r\n\t\t\t\t\t\t\t\t\t\t? 'text-sky-600 dark:text-sky-400'\r\n\t\t\t\t\t\t\t\t\t\t: 'text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white'\r\n\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{item.labelUz}\r\n\t\t\t\t\t\t\t\t{pathname === item.path && (\r\n\t\t\t\t\t\t\t\t\t<motion.div\r\n\t\t\t\t\t\t\t\t\t\tlayoutId='activeNav'\r\n\t\t\t\t\t\t\t\t\t\tclassName='absolute -bottom-6 left-0 right-0 h-0.5 bg-sky-600 dark:bg-sky-400'\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='flex items-center gap-4'>\r\n\t\t\t\t\t\t<ThemeToggle />\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant='ghost'\r\n\t\t\t\t\t\t\tsize='sm'\r\n\t\t\t\t\t\t\tonClick={() => setLanguage(language === 'uz' ? 'en' : 'uz')}\r\n\t\t\t\t\t\t\tclassName='gap-2'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Globe className='w-4 h-4' />\r\n\t\t\t\t\t\t\t<span className='hidden sm:inline'>{language.toUpperCase()}</span>\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => setIsOpen(!isOpen)}\r\n\t\t\t\t\t\t\tclassName='md:hidden p-2 text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{isOpen ? (\r\n\t\t\t\t\t\t\t\t<X className='w-6 h-6' />\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<Menu className='w-6 h-6' />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<AnimatePresence>\r\n\t\t\t\t{isOpen && (\r\n\t\t\t\t\t<motion.div\r\n\t\t\t\t\t\tinitial={{ opacity: 0, height: 0 }}\r\n\t\t\t\t\t\tanimate={{ opacity: 1, height: 'auto' }}\r\n\t\t\t\t\t\texit={{ opacity: 0, height: 0 }}\r\n\t\t\t\t\t\tclassName='md:hidden border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div className='container mx-auto px-4 py-4 space-y-2'>\r\n\t\t\t\t\t\t\t{navItems.map(item => (\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tkey={item.path}\r\n\t\t\t\t\t\t\t\t\thref={item.path}\r\n\t\t\t\t\t\t\t\t\tonClick={() => setIsOpen(false)}\r\n\t\t\t\t\t\t\t\t\tclassName={`block px-4 py-3 rounded-lg text-sm font-medium transition-colors ${\r\n\t\t\t\t\t\t\t\t\t\tpathname === item.path\r\n\t\t\t\t\t\t\t\t\t\t\t? 'bg-sky-50 dark:bg-sky-950 text-sky-600 dark:text-sky-400'\r\n\t\t\t\t\t\t\t\t\t\t\t: 'text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-900'\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{item.labelUz}\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</motion.div>\r\n\t\t\t\t)}\r\n\t\t\t</AnimatePresence>\r\n\t\t</nav>\r\n\t)\r\n}\r\n","import { Moon, Sun } from \"lucide-react\";\r\nimport { useTheme } from \"@/hooks/useTheme\";\r\n\r\nexport function ThemeToggle() {\r\n  const { theme, toggleTheme } = useTheme();\r\n\r\n  return (\r\n    <button\r\n      onClick={toggleTheme}\r\n      className=\"p-2 rounded-lg bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 transition-all duration-300 transform hover:scale-110\"\r\n      aria-label=\"Toggle theme\"\r\n    >\r\n      {theme === \"light\" ? (\r\n        <Moon className=\"w-5 h-5 text-slate-700 dark:text-slate-300 transition-transform duration-300\" />\r\n      ) : (\r\n        <Sun className=\"w-5 h-5 text-yellow-500 transition-transform duration-300\" />\r\n      )}\r\n    </button>\r\n  );\r\n}\r\n","/**\n * Concatenates two arrays faster than the array spread operator.\n */\nexport const concatArrays = <T, U>(\n    array1: readonly T[],\n    array2: readonly U[],\n): readonly (T | U)[] => {\n    // Pre-allocate for better V8 optimization\n    const combinedArray: (T | U)[] = new Array(array1.length + array2.length)\n    for (let i = 0; i < array1.length; i++) {\n        combinedArray[i] = array1[i]!\n    }\n    for (let i = 0; i < array2.length; i++) {\n        combinedArray[array1.length + i] = array2[i]!\n    }\n    return combinedArray\n}\n","import React from 'react';\nimport { createStore } from 'zustand/vanilla';\n\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity) {\n  const slice = React.useSyncExternalStore(\n    api.subscribe,\n    React.useCallback(() => selector(api.getState()), [api, selector]),\n    React.useCallback(() => selector(api.getInitialState()), [api, selector])\n  );\n  React.useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  const api = createStore(createState);\n  const useBoundStore = (selector) => useStore(api, selector);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = ((createState) => createState ? createImpl(createState) : createImpl);\n\nexport { create, useStore };\n","import { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n\treturn twMerge(clsx(inputs))\r\n}\r\n","export default {\n  xmlns: 'http://www.w3.org/2000/svg',\n  width: 24,\n  height: 24,\n  viewBox: '0 0 24 24',\n  fill: 'none',\n  stroke: 'currentColor',\n  strokeWidth: 2,\n  strokeLinecap: 'round',\n  strokeLinejoin: 'round',\n};\n","import { CamelToPascal } from './utility-types';\n\n/**\n * Converts string to kebab case\n *\n * @param {string} string\n * @returns {string} A kebabized string\n */\nexport const toKebabCase = (string: string) =>\n  string.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\n\n/**\n * Converts string to camel case\n *\n * @param {string} string\n * @returns {string} A camelized string\n */\nexport const toCamelCase = <T extends string>(string: T) =>\n  string.replace(/^([A-Z])|[\\s-_]+(\\w)/g, (match, p1, p2) =>\n    p2 ? p2.toUpperCase() : p1.toLowerCase(),\n  );\n\n/**\n * Converts string to pascal case\n *\n * @param {string} string\n * @returns {string} A pascalized string\n */\nexport const toPascalCase = <T extends string>(string: T): CamelToPascal<T> => {\n  const camelCase = toCamelCase(string);\n\n  return (camelCase.charAt(0).toUpperCase() + camelCase.slice(1)) as CamelToPascal<T>;\n};\n\n/**\n * Merges classes into a single string\n *\n * @param {array} classes\n * @returns {string} A string of classes\n */\nexport const mergeClasses = <ClassType = string | undefined | null>(...classes: ClassType[]) =>\n  classes\n    .filter((className, index, array) => {\n      return (\n        Boolean(className) &&\n        (className as string).trim() !== '' &&\n        array.indexOf(className) === index\n      );\n    })\n    .join(' ')\n    .trim();\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M18 6 6 18', key: '1bl5f8' }],\n  ['path', { d: 'm6 6 12 12', key: 'd8bk6v' }],\n];\n\n/**\n * @component @name X\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA2IDE4IiAvPgogIDxwYXRoIGQ9Im02IDYgMTIgMTIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst X = createLucideIcon('x', __iconNode);\n\nexport default X;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '4', key: '4exip2' }],\n  ['path', { d: 'M12 2v2', key: 'tus03m' }],\n  ['path', { d: 'M12 20v2', key: '1lh1kg' }],\n  ['path', { d: 'm4.93 4.93 1.41 1.41', key: '149t6j' }],\n  ['path', { d: 'm17.66 17.66 1.41 1.41', key: 'ptbguv' }],\n  ['path', { d: 'M2 12h2', key: '1t8f8n' }],\n  ['path', { d: 'M20 12h2', key: '1q8mjw' }],\n  ['path', { d: 'm6.34 17.66-1.41 1.41', key: '1m8zz5' }],\n  ['path', { d: 'm19.07 4.93-1.41 1.41', key: '1shlcs' }],\n];\n\n/**\n * @component @name Sun\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI0IiAvPgogIDxwYXRoIGQ9Ik0xMiAydjIiIC8+CiAgPHBhdGggZD0iTTEyIDIwdjIiIC8+CiAgPHBhdGggZD0ibTQuOTMgNC45MyAxLjQxIDEuNDEiIC8+CiAgPHBhdGggZD0ibTE3LjY2IDE3LjY2IDEuNDEgMS40MSIgLz4KICA8cGF0aCBkPSJNMiAxMmgyIiAvPgogIDxwYXRoIGQ9Ik0yMCAxMmgyIiAvPgogIDxwYXRoIGQ9Im02LjM0IDE3LjY2LTEuNDEgMS40MSIgLz4KICA8cGF0aCBkPSJtMTkuMDcgNC45My0xLjQxIDEuNDEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/sun\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Sun = createLucideIcon('sun', __iconNode);\n\nexport default Sun;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z', key: 'a7tn18' }],\n];\n\n/**\n * @component @name Moon\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgM2E2IDYgMCAwIDAgOSA5IDkgOSAwIDEgMS05LTlaIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/moon\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Moon = createLucideIcon('moon', __iconNode);\n\nexport default Moon;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20', key: '13o1zl' }],\n  ['path', { d: 'M2 12h20', key: '9i4pu4' }],\n];\n\n/**\n * @component @name Globe\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNMTIgMmExNC41IDE0LjUgMCAwIDAgMCAyMCAxNC41IDE0LjUgMCAwIDAgMC0yMCIgLz4KICA8cGF0aCBkPSJNMiAxMmgyMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/globe\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Globe = createLucideIcon('globe', __iconNode);\n\nexport default Globe;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['line', { x1: '4', x2: '20', y1: '12', y2: '12', key: '1e0a9i' }],\n  ['line', { x1: '4', x2: '20', y1: '6', y2: '6', key: '1owob3' }],\n  ['line', { x1: '4', x2: '20', y1: '18', y2: '18', key: 'yk5zj1' }],\n];\n\n/**\n * @component @name Menu\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8bGluZSB4MT0iNCIgeDI9IjIwIiB5MT0iMTIiIHkyPSIxMiIgLz4KICA8bGluZSB4MT0iNCIgeDI9IjIwIiB5MT0iNiIgeTI9IjYiIC8+CiAgPGxpbmUgeDE9IjQiIHgyPSIyMCIgeTE9IjE4IiB5Mj0iMTgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/menu\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Menu = createLucideIcon('menu', __iconNode);\n\nexport default Menu;\n","import { create } from \"zustand\";\r\nimport { persist } from \"zustand/middleware\";\r\n\r\ntype Language = \"uz\" | \"en\" | \"ru\";\r\n\r\ninterface LanguageState {\r\n  language: Language;\r\n  setLanguage: (language: Language) => void;\r\n  t: (key: string, fallback: string) => string;\r\n}\r\n\r\nexport const useLanguage = create<LanguageState>()(\r\n  persist(\r\n    (set, get) => ({\r\n      language: \"uz\",\r\n      setLanguage: (language) => set({ language }),\r\n      t: (key, fallback) => {\r\n        return fallback;\r\n      },\r\n    }),\r\n    {\r\n      name: \"language-storage\",\r\n    }\r\n  )\r\n);\r\n","import { createElement, forwardRef } from 'react';\nimport defaultAttributes from './defaultAttributes';\nimport { IconNode, LucideProps } from './types';\nimport { mergeClasses } from '@lucide/shared';\n\ninterface IconComponentProps extends LucideProps {\n  iconNode: IconNode;\n}\n\n/**\n * Lucide icon component\n *\n * @component Icon\n * @param {object} props\n * @param {string} props.color - The color of the icon\n * @param {number} props.size - The size of the icon\n * @param {number} props.strokeWidth - The stroke width of the icon\n * @param {boolean} props.absoluteStrokeWidth - Whether to use absolute stroke width\n * @param {string} props.className - The class name of the icon\n * @param {IconNode} props.children - The children of the icon\n * @param {IconNode} props.iconNode - The icon node of the icon\n *\n * @returns {ForwardRefExoticComponent} LucideIcon\n */\nconst Icon = forwardRef<SVGSVGElement, IconComponentProps>(\n  (\n    {\n      color = 'currentColor',\n      size = 24,\n      strokeWidth = 2,\n      absoluteStrokeWidth,\n      className = '',\n      children,\n      iconNode,\n      ...rest\n    },\n    ref,\n  ) => {\n    return createElement(\n      'svg',\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? (Number(strokeWidth) * 24) / Number(size) : strokeWidth,\n        className: mergeClasses('lucide', className),\n        ...rest,\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...(Array.isArray(children) ? children : [children]),\n      ],\n    );\n  },\n);\n\nexport default Icon;\n","import { createElement, forwardRef } from 'react';\nimport { mergeClasses, toKebabCase, toPascalCase } from '@lucide/shared';\nimport { IconNode, LucideProps } from './types';\nimport Icon from './Icon';\n\n/**\n * Create a Lucide icon component\n * @param {string} iconName\n * @param {array} iconNode\n * @returns {ForwardRefExoticComponent} LucideIcon\n */\nconst createLucideIcon = (iconName: string, iconNode: IconNode) => {\n  const Component = forwardRef<SVGSVGElement, LucideProps>(({ className, ...props }, ref) =>\n    createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(\n        `lucide-${toKebabCase(toPascalCase(iconName))}`,\n        `lucide-${iconName}`,\n        className,\n      ),\n      ...props,\n    }),\n  );\n\n  Component.displayName = toPascalCase(iconName);\n\n  return Component;\n};\n\nexport default createLucideIcon;\n","/**\n * Copyright 2022 Joe Bell. All rights reserved.\n *\n * This file is licensed to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with the\n * License. You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR REPRESENTATIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */ import { clsx } from \"clsx\";\nconst falsyToString = (value)=>typeof value === \"boolean\" ? `${value}` : value === 0 ? \"0\" : value;\nexport const cx = clsx;\nexport const cva = (base, config)=>(props)=>{\n        var _config_compoundVariants;\n        if ((config === null || config === void 0 ? void 0 : config.variants) == null) return cx(base, props === null || props === void 0 ? void 0 : props.class, props === null || props === void 0 ? void 0 : props.className);\n        const { variants, defaultVariants } = config;\n        const getVariantClassNames = Object.keys(variants).map((variant)=>{\n            const variantProp = props === null || props === void 0 ? void 0 : props[variant];\n            const defaultVariantProp = defaultVariants === null || defaultVariants === void 0 ? void 0 : defaultVariants[variant];\n            if (variantProp === null) return null;\n            const variantKey = falsyToString(variantProp) || falsyToString(defaultVariantProp);\n            return variants[variant][variantKey];\n        });\n        const propsWithoutUndefined = props && Object.entries(props).reduce((acc, param)=>{\n            let [key, value] = param;\n            if (value === undefined) {\n                return acc;\n            }\n            acc[key] = value;\n            return acc;\n        }, {});\n        const getCompoundVariantClassNames = config === null || config === void 0 ? void 0 : (_config_compoundVariants = config.compoundVariants) === null || _config_compoundVariants === void 0 ? void 0 : _config_compoundVariants.reduce((acc, param)=>{\n            let { class: cvClass, className: cvClassName, ...compoundVariantOptions } = param;\n            return Object.entries(compoundVariantOptions).every((param)=>{\n                let [key, value] = param;\n                return Array.isArray(value) ? value.includes({\n                    ...defaultVariants,\n                    ...propsWithoutUndefined\n                }[key]) : ({\n                    ...defaultVariants,\n                    ...propsWithoutUndefined\n                })[key] === value;\n            }) ? [\n                ...acc,\n                cvClass,\n                cvClassName\n            ] : acc;\n        }, []);\n        return cx(base, getVariantClassNames, getCompoundVariantClassNames, props === null || props === void 0 ? void 0 : props.class, props === null || props === void 0 ? void 0 : props.className);\n    };\n\n","import {\n    AnyClassGroupIds,\n    AnyConfig,\n    AnyThemeGroupIds,\n    ClassGroup,\n    ClassValidator,\n    Config,\n    ThemeGetter,\n    ThemeObject,\n} from './types'\nimport { concatArrays } from './utils'\n\nexport interface ClassPartObject {\n    nextPart: Map<string, ClassPartObject>\n    validators: ClassValidatorObject[] | null\n    classGroupId: AnyClassGroupIds | undefined // Always define optional props for consistent shape\n}\n\ninterface ClassValidatorObject {\n    classGroupId: AnyClassGroupIds\n    validator: ClassValidator\n}\n\n// Factory function ensures consistent object shapes\nconst createClassValidatorObject = (\n    classGroupId: AnyClassGroupIds,\n    validator: ClassValidator,\n): ClassValidatorObject => ({\n    classGroupId,\n    validator,\n})\n\n// Factory ensures consistent ClassPartObject shape\nconst createClassPartObject = (\n    nextPart: Map<string, ClassPartObject> = new Map(),\n    validators: ClassValidatorObject[] | null = null,\n    classGroupId?: AnyClassGroupIds,\n): ClassPartObject => ({\n    nextPart,\n    validators,\n    classGroupId,\n})\n\nconst CLASS_PART_SEPARATOR = '-'\n\nconst EMPTY_CONFLICTS: readonly AnyClassGroupIds[] = []\n// I use two dots here because one dot is used as prefix for class groups in plugins\nconst ARBITRARY_PROPERTY_PREFIX = 'arbitrary..'\n\nexport const createClassGroupUtils = (config: AnyConfig) => {\n    const classMap = createClassMap(config)\n    const { conflictingClassGroups, conflictingClassGroupModifiers } = config\n\n    const getClassGroupId = (className: string) => {\n        if (className.startsWith('[') && className.endsWith(']')) {\n            return getGroupIdForArbitraryProperty(className)\n        }\n\n        const classParts = className.split(CLASS_PART_SEPARATOR)\n        // Classes like `-inset-1` produce an empty string as first classPart. We assume that classes for negative values are used correctly and skip it.\n        const startIndex = classParts[0] === '' && classParts.length > 1 ? 1 : 0\n        return getGroupRecursive(classParts, startIndex, classMap)\n    }\n\n    const getConflictingClassGroupIds = (\n        classGroupId: AnyClassGroupIds,\n        hasPostfixModifier: boolean,\n    ): readonly AnyClassGroupIds[] => {\n        if (hasPostfixModifier) {\n            const modifierConflicts = conflictingClassGroupModifiers[classGroupId]\n            const baseConflicts = conflictingClassGroups[classGroupId]\n\n            if (modifierConflicts) {\n                if (baseConflicts) {\n                    // Merge base conflicts with modifier conflicts\n                    return concatArrays(baseConflicts, modifierConflicts)\n                }\n                // Only modifier conflicts\n                return modifierConflicts\n            }\n            // Fall back to without postfix if no modifier conflicts\n            return baseConflicts || EMPTY_CONFLICTS\n        }\n\n        return conflictingClassGroups[classGroupId] || EMPTY_CONFLICTS\n    }\n\n    return {\n        getClassGroupId,\n        getConflictingClassGroupIds,\n    }\n}\n\nconst getGroupRecursive = (\n    classParts: string[],\n    startIndex: number,\n    classPartObject: ClassPartObject,\n): AnyClassGroupIds | undefined => {\n    const classPathsLength = classParts.length - startIndex\n    if (classPathsLength === 0) {\n        return classPartObject.classGroupId\n    }\n\n    const currentClassPart = classParts[startIndex]!\n    const nextClassPartObject = classPartObject.nextPart.get(currentClassPart)\n\n    if (nextClassPartObject) {\n        const result = getGroupRecursive(classParts, startIndex + 1, nextClassPartObject)\n        if (result) return result\n    }\n\n    const validators = classPartObject.validators\n    if (validators === null) {\n        return undefined\n    }\n\n    // Build classRest string efficiently by joining from startIndex onwards\n    const classRest =\n        startIndex === 0\n            ? classParts.join(CLASS_PART_SEPARATOR)\n            : classParts.slice(startIndex).join(CLASS_PART_SEPARATOR)\n    const validatorsLength = validators.length\n\n    for (let i = 0; i < validatorsLength; i++) {\n        const validatorObj = validators[i]!\n        if (validatorObj.validator(classRest)) {\n            return validatorObj.classGroupId\n        }\n    }\n\n    return undefined\n}\n\n/**\n * Get the class group ID for an arbitrary property.\n *\n * @param className - The class name to get the group ID for. Is expected to be string starting with `[` and ending with `]`.\n */\nconst getGroupIdForArbitraryProperty = (className: string): AnyClassGroupIds | undefined =>\n    className.slice(1, -1).indexOf(':') === -1\n        ? undefined\n        : (() => {\n              const content = className.slice(1, -1)\n              const colonIndex = content.indexOf(':')\n              const property = content.slice(0, colonIndex)\n              return property ? ARBITRARY_PROPERTY_PREFIX + property : undefined\n          })()\n\n/**\n * Exported for testing only\n */\nexport const createClassMap = (config: Config<AnyClassGroupIds, AnyThemeGroupIds>) => {\n    const { theme, classGroups } = config\n    return processClassGroups(classGroups, theme)\n}\n\n// Split into separate functions to maintain monomorphic call sites\nconst processClassGroups = (\n    classGroups: Record<AnyClassGroupIds, ClassGroup<AnyThemeGroupIds>>,\n    theme: ThemeObject<AnyThemeGroupIds>,\n): ClassPartObject => {\n    const classMap = createClassPartObject()\n\n    for (const classGroupId in classGroups) {\n        const group = classGroups[classGroupId]!\n        processClassesRecursively(group, classMap, classGroupId, theme)\n    }\n\n    return classMap\n}\n\nconst processClassesRecursively = (\n    classGroup: ClassGroup<AnyThemeGroupIds>,\n    classPartObject: ClassPartObject,\n    classGroupId: AnyClassGroupIds,\n    theme: ThemeObject<AnyThemeGroupIds>,\n) => {\n    const len = classGroup.length\n    for (let i = 0; i < len; i++) {\n        const classDefinition = classGroup[i]!\n        processClassDefinition(classDefinition, classPartObject, classGroupId, theme)\n    }\n}\n\n// Split into separate functions for each type to maintain monomorphic call sites\nconst processClassDefinition = (\n    classDefinition: ClassGroup<AnyThemeGroupIds>[number],\n    classPartObject: ClassPartObject,\n    classGroupId: AnyClassGroupIds,\n    theme: ThemeObject<AnyThemeGroupIds>,\n) => {\n    if (typeof classDefinition === 'string') {\n        processStringDefinition(classDefinition, classPartObject, classGroupId)\n        return\n    }\n\n    if (typeof classDefinition === 'function') {\n        processFunctionDefinition(classDefinition, classPartObject, classGroupId, theme)\n        return\n    }\n\n    processObjectDefinition(\n        classDefinition as Record<string, ClassGroup<AnyThemeGroupIds>>,\n        classPartObject,\n        classGroupId,\n        theme,\n    )\n}\n\nconst processStringDefinition = (\n    classDefinition: string,\n    classPartObject: ClassPartObject,\n    classGroupId: AnyClassGroupIds,\n) => {\n    const classPartObjectToEdit =\n        classDefinition === '' ? classPartObject : getPart(classPartObject, classDefinition)\n    classPartObjectToEdit.classGroupId = classGroupId\n}\n\nconst processFunctionDefinition = (\n    classDefinition: Function,\n    classPartObject: ClassPartObject,\n    classGroupId: AnyClassGroupIds,\n    theme: ThemeObject<AnyThemeGroupIds>,\n) => {\n    if (isThemeGetter(classDefinition)) {\n        processClassesRecursively(classDefinition(theme), classPartObject, classGroupId, theme)\n        return\n    }\n\n    if (classPartObject.validators === null) {\n        classPartObject.validators = []\n    }\n    classPartObject.validators.push(\n        createClassValidatorObject(classGroupId, classDefinition as ClassValidator),\n    )\n}\n\nconst processObjectDefinition = (\n    classDefinition: Record<string, ClassGroup<AnyThemeGroupIds>>,\n    classPartObject: ClassPartObject,\n    classGroupId: AnyClassGroupIds,\n    theme: ThemeObject<AnyThemeGroupIds>,\n) => {\n    const entries = Object.entries(classDefinition)\n    const len = entries.length\n    for (let i = 0; i < len; i++) {\n        const [key, value] = entries[i]!\n        processClassesRecursively(value, getPart(classPartObject, key), classGroupId, theme)\n    }\n}\n\nconst getPart = (classPartObject: ClassPartObject, path: string): ClassPartObject => {\n    let current = classPartObject\n    const parts = path.split(CLASS_PART_SEPARATOR)\n    const len = parts.length\n\n    for (let i = 0; i < len; i++) {\n        const part = parts[i]!\n\n        let next = current.nextPart.get(part)\n        if (!next) {\n            next = createClassPartObject()\n            current.nextPart.set(part, next)\n        }\n        current = next\n    }\n\n    return current\n}\n\n// Type guard maintains monomorphic check\nconst isThemeGetter = (func: Function): func is ThemeGetter =>\n    'isThemeGetter' in func && (func as ThemeGetter).isThemeGetter === true\n","// Export is needed because TypeScript complains about an error otherwise:\n// Error: /tailwind-merge/src/config-utils.ts(8,17): semantic error TS4058: Return type of exported function has or is using name 'LruCache' from external module \"/tailwind-merge/src/lru-cache\" but cannot be named.\nexport interface LruCache<Key extends string, Value> {\n    get(key: Key): Value | undefined\n    set(key: Key, value: Value): void\n}\n\n// LRU cache implementation using plain objects for simplicity\nexport const createLruCache = <Key extends string, Value>(\n    maxCacheSize: number,\n): LruCache<Key, Value> => {\n    if (maxCacheSize < 1) {\n        return {\n            get: () => undefined,\n            set: () => {},\n        }\n    }\n\n    let cacheSize = 0\n    let cache: Record<Key, Value> = Object.create(null)\n    let previousCache: Record<Key, Value> = Object.create(null)\n\n    const update = (key: Key, value: Value) => {\n        cache[key] = value\n        cacheSize++\n\n        if (cacheSize > maxCacheSize) {\n            cacheSize = 0\n            previousCache = cache\n            cache = Object.create(null)\n        }\n    }\n\n    return {\n        get(key) {\n            let value = cache[key]\n\n            if (value !== undefined) {\n                return value\n            }\n            if ((value = previousCache[key]) !== undefined) {\n                update(key, value)\n                return value\n            }\n        },\n        set(key, value) {\n            if (key in cache) {\n                cache[key] = value\n            } else {\n                update(key, value)\n            }\n        },\n    }\n}\n","import { AnyConfig, ParsedClassName } from './types'\n\nexport const IMPORTANT_MODIFIER = '!'\n\nconst MODIFIER_SEPARATOR = ':'\nconst EMPTY_MODIFIERS: string[] = []\n\n// Pre-allocated result object shape for consistency\nconst createResultObject = (\n    modifiers: string[],\n    hasImportantModifier: boolean,\n    baseClassName: string,\n    maybePostfixModifierPosition?: number,\n    isExternal?: boolean,\n): ParsedClassName => ({\n    modifiers,\n    hasImportantModifier,\n    baseClassName,\n    maybePostfixModifierPosition,\n    isExternal,\n})\n\nexport const createParseClassName = (config: AnyConfig) => {\n    const { prefix, experimentalParseClassName } = config\n\n    /**\n     * Parse class name into parts.\n     *\n     * Inspired by `splitAtTopLevelOnly` used in Tailwind CSS\n     * @see https://github.com/tailwindlabs/tailwindcss/blob/v3.2.2/src/util/splitAtTopLevelOnly.js\n     */\n    let parseClassName = (className: string): ParsedClassName => {\n        // Use simple array with push for better performance\n        const modifiers: string[] = []\n\n        let bracketDepth = 0\n        let parenDepth = 0\n        let modifierStart = 0\n        let postfixModifierPosition: number | undefined\n\n        const len = className.length\n        for (let index = 0; index < len; index++) {\n            const currentCharacter = className[index]!\n\n            if (bracketDepth === 0 && parenDepth === 0) {\n                if (currentCharacter === MODIFIER_SEPARATOR) {\n                    modifiers.push(className.slice(modifierStart, index))\n                    modifierStart = index + 1\n                    continue\n                }\n\n                if (currentCharacter === '/') {\n                    postfixModifierPosition = index\n                    continue\n                }\n            }\n\n            if (currentCharacter === '[') bracketDepth++\n            else if (currentCharacter === ']') bracketDepth--\n            else if (currentCharacter === '(') parenDepth++\n            else if (currentCharacter === ')') parenDepth--\n        }\n\n        const baseClassNameWithImportantModifier =\n            modifiers.length === 0 ? className : className.slice(modifierStart)\n\n        // Inline important modifier check\n        let baseClassName = baseClassNameWithImportantModifier\n        let hasImportantModifier = false\n\n        if (baseClassNameWithImportantModifier.endsWith(IMPORTANT_MODIFIER)) {\n            baseClassName = baseClassNameWithImportantModifier.slice(0, -1)\n            hasImportantModifier = true\n        } else if (\n            /**\n             * In Tailwind CSS v3 the important modifier was at the start of the base class name. This is still supported for legacy reasons.\n             * @see https://github.com/dcastil/tailwind-merge/issues/513#issuecomment-2614029864\n             */\n            baseClassNameWithImportantModifier.startsWith(IMPORTANT_MODIFIER)\n        ) {\n            baseClassName = baseClassNameWithImportantModifier.slice(1)\n            hasImportantModifier = true\n        }\n\n        const maybePostfixModifierPosition =\n            postfixModifierPosition && postfixModifierPosition > modifierStart\n                ? postfixModifierPosition - modifierStart\n                : undefined\n\n        return createResultObject(\n            modifiers,\n            hasImportantModifier,\n            baseClassName,\n            maybePostfixModifierPosition,\n        )\n    }\n\n    if (prefix) {\n        const fullPrefix = prefix + MODIFIER_SEPARATOR\n        const parseClassNameOriginal = parseClassName\n        parseClassName = (className: string) =>\n            className.startsWith(fullPrefix)\n                ? parseClassNameOriginal(className.slice(fullPrefix.length))\n                : createResultObject(EMPTY_MODIFIERS, false, className, undefined, true)\n    }\n\n    if (experimentalParseClassName) {\n        const parseClassNameOriginal = parseClassName\n        parseClassName = (className: string) =>\n            experimentalParseClassName({ className, parseClassName: parseClassNameOriginal })\n    }\n\n    return parseClassName\n}\n","import { AnyConfig } from './types'\n\n/**\n * Sorts modifiers according to following schema:\n * - Predefined modifiers are sorted alphabetically\n * - When an arbitrary variant appears, it must be preserved which modifiers are before and after it\n */\nexport const createSortModifiers = (config: AnyConfig) => {\n    // Pre-compute weights for all known modifiers for O(1) comparison\n    const modifierWeights = new Map<string, number>()\n\n    // Assign weights to sensitive modifiers (highest priority, but preserve order)\n    config.orderSensitiveModifiers.forEach((mod, index) => {\n        modifierWeights.set(mod, 1000000 + index) // High weights for sensitive mods\n    })\n\n    return (modifiers: readonly string[]): string[] => {\n        const result: string[] = []\n        let currentSegment: string[] = []\n\n        // Process modifiers in one pass\n        for (let i = 0; i < modifiers.length; i++) {\n            const modifier = modifiers[i]!\n\n            // Check if modifier is sensitive (starts with '[' or in orderSensitiveModifiers)\n            const isArbitrary = modifier[0] === '['\n            const isOrderSensitive = modifierWeights.has(modifier)\n\n            if (isArbitrary || isOrderSensitive) {\n                // Sort and flush current segment alphabetically\n                if (currentSegment.length > 0) {\n                    currentSegment.sort()\n                    result.push(...currentSegment)\n                    currentSegment = []\n                }\n                result.push(modifier)\n            } else {\n                // Regular modifier - add to current segment for batch sorting\n                currentSegment.push(modifier)\n            }\n        }\n\n        // Sort and add any remaining segment items\n        if (currentSegment.length > 0) {\n            currentSegment.sort()\n            result.push(...currentSegment)\n        }\n\n        return result\n    }\n}\n","import { createClassGroupUtils } from './class-group-utils'\nimport { createLruCache } from './lru-cache'\nimport { createParseClassName } from './parse-class-name'\nimport { createSortModifiers } from './sort-modifiers'\nimport { AnyConfig } from './types'\n\nexport type ConfigUtils = ReturnType<typeof createConfigUtils>\n\nexport const createConfigUtils = (config: AnyConfig) => ({\n    cache: createLruCache<string, string>(config.cacheSize),\n    parseClassName: createParseClassName(config),\n    sortModifiers: createSortModifiers(config),\n    ...createClassGroupUtils(config),\n})\n","import { ConfigUtils } from './config-utils'\nimport { IMPORTANT_MODIFIER } from './parse-class-name'\n\nconst SPLIT_CLASSES_REGEX = /\\s+/\n\nexport const mergeClassList = (classList: string, configUtils: ConfigUtils) => {\n    const { parseClassName, getClassGroupId, getConflictingClassGroupIds, sortModifiers } =\n        configUtils\n\n    /**\n     * Set of classGroupIds in following format:\n     * `{importantModifier}{variantModifiers}{classGroupId}`\n     * @example 'float'\n     * @example 'hover:focus:bg-color'\n     * @example 'md:!pr'\n     */\n    const classGroupsInConflict: string[] = []\n    const classNames = classList.trim().split(SPLIT_CLASSES_REGEX)\n\n    let result = ''\n\n    for (let index = classNames.length - 1; index >= 0; index -= 1) {\n        const originalClassName = classNames[index]!\n\n        const {\n            isExternal,\n            modifiers,\n            hasImportantModifier,\n            baseClassName,\n            maybePostfixModifierPosition,\n        } = parseClassName(originalClassName)\n\n        if (isExternal) {\n            result = originalClassName + (result.length > 0 ? ' ' + result : result)\n            continue\n        }\n\n        let hasPostfixModifier = !!maybePostfixModifierPosition\n        let classGroupId = getClassGroupId(\n            hasPostfixModifier\n                ? baseClassName.substring(0, maybePostfixModifierPosition)\n                : baseClassName,\n        )\n\n        if (!classGroupId) {\n            if (!hasPostfixModifier) {\n                // Not a Tailwind class\n                result = originalClassName + (result.length > 0 ? ' ' + result : result)\n                continue\n            }\n\n            classGroupId = getClassGroupId(baseClassName)\n\n            if (!classGroupId) {\n                // Not a Tailwind class\n                result = originalClassName + (result.length > 0 ? ' ' + result : result)\n                continue\n            }\n\n            hasPostfixModifier = false\n        }\n\n        // Fast path: skip sorting for empty or single modifier\n        const variantModifier =\n            modifiers.length === 0\n                ? ''\n                : modifiers.length === 1\n                  ? modifiers[0]!\n                  : sortModifiers(modifiers).join(':')\n\n        const modifierId = hasImportantModifier\n            ? variantModifier + IMPORTANT_MODIFIER\n            : variantModifier\n\n        const classId = modifierId + classGroupId\n\n        if (classGroupsInConflict.indexOf(classId) > -1) {\n            // Tailwind class omitted due to conflict\n            continue\n        }\n\n        classGroupsInConflict.push(classId)\n\n        const conflictGroups = getConflictingClassGroupIds(classGroupId, hasPostfixModifier)\n        for (let i = 0; i < conflictGroups.length; ++i) {\n            const group = conflictGroups[i]!\n            classGroupsInConflict.push(modifierId + group)\n        }\n\n        // Tailwind class not in conflict\n        result = originalClassName + (result.length > 0 ? ' ' + result : result)\n    }\n\n    return result\n}\n","/**\n * The code in this file is copied from https://github.com/lukeed/clsx and modified to suit the needs of tailwind-merge better.\n *\n * Specifically:\n * - Runtime code from https://github.com/lukeed/clsx/blob/v1.2.1/src/index.js\n * - TypeScript types from https://github.com/lukeed/clsx/blob/v1.2.1/clsx.d.ts\n *\n * Original code has MIT license: Copyright (c) Luke Edwards <luke.edwards05@gmail.com> (lukeed.com)\n */\n\nexport type ClassNameValue = ClassNameArray | string | null | undefined | 0 | 0n | false\ntype ClassNameArray = ClassNameValue[]\n\nexport const twJoin = (...classLists: ClassNameValue[]): string => {\n    let index = 0\n    let argument: ClassNameValue\n    let resolvedValue: string\n    let string = ''\n\n    while (index < classLists.length) {\n        if ((argument = classLists[index++])) {\n            if ((resolvedValue = toValue(argument))) {\n                string && (string += ' ')\n                string += resolvedValue\n            }\n        }\n    }\n    return string\n}\n\nconst toValue = (mix: ClassNameArray | string): string => {\n    // Fast path for strings\n    if (typeof mix === 'string') {\n        return mix\n    }\n\n    let resolvedValue: string\n    let string = ''\n\n    for (let k = 0; k < mix.length; k++) {\n        if (mix[k]) {\n            if ((resolvedValue = toValue(mix[k] as ClassNameArray | string))) {\n                string && (string += ' ')\n                string += resolvedValue\n            }\n        }\n    }\n\n    return string\n}\n","import { createConfigUtils } from './config-utils'\nimport { mergeClassList } from './merge-classlist'\nimport { ClassNameValue, twJoin } from './tw-join'\nimport { AnyConfig } from './types'\n\ntype CreateConfigFirst = () => AnyConfig\ntype CreateConfigSubsequent = (config: AnyConfig) => AnyConfig\ntype TailwindMerge = (...classLists: ClassNameValue[]) => string\ntype ConfigUtils = ReturnType<typeof createConfigUtils>\n\nexport const createTailwindMerge = (\n    createConfigFirst: CreateConfigFirst,\n    ...createConfigRest: CreateConfigSubsequent[]\n): TailwindMerge => {\n    let configUtils: ConfigUtils\n    let cacheGet: ConfigUtils['cache']['get']\n    let cacheSet: ConfigUtils['cache']['set']\n    let functionToCall: (classList: string) => string\n\n    const initTailwindMerge = (classList: string) => {\n        const config = createConfigRest.reduce(\n            (previousConfig, createConfigCurrent) => createConfigCurrent(previousConfig),\n            createConfigFirst() as AnyConfig,\n        )\n\n        configUtils = createConfigUtils(config)\n        cacheGet = configUtils.cache.get\n        cacheSet = configUtils.cache.set\n        functionToCall = tailwindMerge\n\n        return tailwindMerge(classList)\n    }\n\n    const tailwindMerge = (classList: string) => {\n        const cachedResult = cacheGet(classList)\n\n        if (cachedResult) {\n            return cachedResult\n        }\n\n        const result = mergeClassList(classList, configUtils)\n        cacheSet(classList, result)\n\n        return result\n    }\n\n    functionToCall = initTailwindMerge\n\n    return (...args: ClassNameValue[]) => functionToCall(twJoin(...args))\n}\n","import { DefaultThemeGroupIds, NoInfer, ThemeGetter, ThemeObject } from './types'\n\nconst fallbackThemeArr: ThemeObject<DefaultThemeGroupIds>[DefaultThemeGroupIds] = []\n\nexport const fromTheme = <\n    AdditionalThemeGroupIds extends string = never,\n    DefaultThemeGroupIdsInner extends string = DefaultThemeGroupIds,\n>(\n    key: NoInfer<DefaultThemeGroupIdsInner | AdditionalThemeGroupIds>,\n): ThemeGetter => {\n    const themeGetter = (theme: ThemeObject<DefaultThemeGroupIdsInner | AdditionalThemeGroupIds>) =>\n        theme[key] || fallbackThemeArr\n\n    themeGetter.isThemeGetter = true as const\n\n    return themeGetter\n}\n","const arbitraryValueRegex = /^\\[(?:(\\w[\\w-]*):)?(.+)\\]$/i\nconst arbitraryVariableRegex = /^\\((?:(\\w[\\w-]*):)?(.+)\\)$/i\nconst fractionRegex = /^\\d+\\/\\d+$/\nconst tshirtUnitRegex = /^(\\d+(\\.\\d+)?)?(xs|sm|md|lg|xl)$/\nconst lengthUnitRegex =\n    /\\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\\b(calc|min|max|clamp)\\(.+\\)|^0$/\nconst colorFunctionRegex = /^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\\(.+\\)$/\n// Shadow always begins with x and y offset separated by underscore optionally prepended by inset\nconst shadowRegex = /^(inset_)?-?((\\d+)?\\.?(\\d+)[a-z]+|0)_-?((\\d+)?\\.?(\\d+)[a-z]+|0)/\nconst imageRegex =\n    /^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\\(.+\\)$/\n\nexport const isFraction = (value: string) => fractionRegex.test(value)\n\nexport const isNumber = (value: string) => !!value && !Number.isNaN(Number(value))\n\nexport const isInteger = (value: string) => !!value && Number.isInteger(Number(value))\n\nexport const isPercent = (value: string) => value.endsWith('%') && isNumber(value.slice(0, -1))\n\nexport const isTshirtSize = (value: string) => tshirtUnitRegex.test(value)\n\nexport const isAny = () => true\n\nconst isLengthOnly = (value: string) =>\n    // `colorFunctionRegex` check is necessary because color functions can have percentages in them which which would be incorrectly classified as lengths.\n    // For example, `hsl(0 0% 0%)` would be classified as a length without this check.\n    // I could also use lookbehind assertion in `lengthUnitRegex` but that isn't supported widely enough.\n    lengthUnitRegex.test(value) && !colorFunctionRegex.test(value)\n\nconst isNever = () => false\n\nconst isShadow = (value: string) => shadowRegex.test(value)\n\nconst isImage = (value: string) => imageRegex.test(value)\n\nexport const isAnyNonArbitrary = (value: string) =>\n    !isArbitraryValue(value) && !isArbitraryVariable(value)\n\nexport const isArbitrarySize = (value: string) => getIsArbitraryValue(value, isLabelSize, isNever)\n\nexport const isArbitraryValue = (value: string) => arbitraryValueRegex.test(value)\n\nexport const isArbitraryLength = (value: string) =>\n    getIsArbitraryValue(value, isLabelLength, isLengthOnly)\n\nexport const isArbitraryNumber = (value: string) =>\n    getIsArbitraryValue(value, isLabelNumber, isNumber)\n\nexport const isArbitraryPosition = (value: string) =>\n    getIsArbitraryValue(value, isLabelPosition, isNever)\n\nexport const isArbitraryImage = (value: string) => getIsArbitraryValue(value, isLabelImage, isImage)\n\nexport const isArbitraryShadow = (value: string) =>\n    getIsArbitraryValue(value, isLabelShadow, isShadow)\n\nexport const isArbitraryVariable = (value: string) => arbitraryVariableRegex.test(value)\n\nexport const isArbitraryVariableLength = (value: string) =>\n    getIsArbitraryVariable(value, isLabelLength)\n\nexport const isArbitraryVariableFamilyName = (value: string) =>\n    getIsArbitraryVariable(value, isLabelFamilyName)\n\nexport const isArbitraryVariablePosition = (value: string) =>\n    getIsArbitraryVariable(value, isLabelPosition)\n\nexport const isArbitraryVariableSize = (value: string) => getIsArbitraryVariable(value, isLabelSize)\n\nexport const isArbitraryVariableImage = (value: string) =>\n    getIsArbitraryVariable(value, isLabelImage)\n\nexport const isArbitraryVariableShadow = (value: string) =>\n    getIsArbitraryVariable(value, isLabelShadow, true)\n\n// Helpers\n\nconst getIsArbitraryValue = (\n    value: string,\n    testLabel: (label: string) => boolean,\n    testValue: (value: string) => boolean,\n) => {\n    const result = arbitraryValueRegex.exec(value)\n\n    if (result) {\n        if (result[1]) {\n            return testLabel(result[1])\n        }\n\n        return testValue(result[2]!)\n    }\n\n    return false\n}\n\nconst getIsArbitraryVariable = (\n    value: string,\n    testLabel: (label: string) => boolean,\n    shouldMatchNoLabel = false,\n) => {\n    const result = arbitraryVariableRegex.exec(value)\n\n    if (result) {\n        if (result[1]) {\n            return testLabel(result[1])\n        }\n        return shouldMatchNoLabel\n    }\n\n    return false\n}\n\n// Labels\n\nconst isLabelPosition = (label: string) => label === 'position' || label === 'percentage'\n\nconst isLabelImage = (label: string) => label === 'image' || label === 'url'\n\nconst isLabelSize = (label: string) => label === 'length' || label === 'size' || label === 'bg-size'\n\nconst isLabelLength = (label: string) => label === 'length'\n\nconst isLabelNumber = (label: string) => label === 'number'\n\nconst isLabelFamilyName = (label: string) => label === 'family-name'\n\nconst isLabelShadow = (label: string) => label === 'shadow'\n","import { fromTheme } from './from-theme'\nimport { Config, DefaultClassGroupIds, DefaultThemeGroupIds } from './types'\nimport {\n    isAny,\n    isAnyNonArbitrary,\n    isArbitraryImage,\n    isArbitraryLength,\n    isArbitraryNumber,\n    isArbitraryPosition,\n    isArbitraryShadow,\n    isArbitrarySize,\n    isArbitraryValue,\n    isArbitraryVariable,\n    isArbitraryVariableFamilyName,\n    isArbitraryVariableImage,\n    isArbitraryVariableLength,\n    isArbitraryVariablePosition,\n    isArbitraryVariableShadow,\n    isArbitraryVariableSize,\n    isFraction,\n    isInteger,\n    isNumber,\n    isPercent,\n    isTshirtSize,\n} from './validators'\n\nexport const getDefaultConfig = () => {\n    /**\n     * Theme getters for theme variable namespaces\n     * @see https://tailwindcss.com/docs/theme#theme-variable-namespaces\n     */\n    /***/\n\n    const themeColor = fromTheme('color')\n    const themeFont = fromTheme('font')\n    const themeText = fromTheme('text')\n    const themeFontWeight = fromTheme('font-weight')\n    const themeTracking = fromTheme('tracking')\n    const themeLeading = fromTheme('leading')\n    const themeBreakpoint = fromTheme('breakpoint')\n    const themeContainer = fromTheme('container')\n    const themeSpacing = fromTheme('spacing')\n    const themeRadius = fromTheme('radius')\n    const themeShadow = fromTheme('shadow')\n    const themeInsetShadow = fromTheme('inset-shadow')\n    const themeTextShadow = fromTheme('text-shadow')\n    const themeDropShadow = fromTheme('drop-shadow')\n    const themeBlur = fromTheme('blur')\n    const themePerspective = fromTheme('perspective')\n    const themeAspect = fromTheme('aspect')\n    const themeEase = fromTheme('ease')\n    const themeAnimate = fromTheme('animate')\n\n    /**\n     * Helpers to avoid repeating the same scales\n     *\n     * We use functions that create a new array every time they're called instead of static arrays.\n     * This ensures that users who modify any scale by mutating the array (e.g. with `array.push(element)`) don't accidentally mutate arrays in other parts of the config.\n     */\n    /***/\n\n    const scaleBreak = () =>\n        ['auto', 'avoid', 'all', 'avoid-page', 'page', 'left', 'right', 'column'] as const\n    const scalePosition = () =>\n        [\n            'center',\n            'top',\n            'bottom',\n            'left',\n            'right',\n            'top-left',\n            // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n            'left-top',\n            'top-right',\n            // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n            'right-top',\n            'bottom-right',\n            // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n            'right-bottom',\n            'bottom-left',\n            // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378\n            'left-bottom',\n        ] as const\n    const scalePositionWithArbitrary = () =>\n        [...scalePosition(), isArbitraryVariable, isArbitraryValue] as const\n    const scaleOverflow = () => ['auto', 'hidden', 'clip', 'visible', 'scroll'] as const\n    const scaleOverscroll = () => ['auto', 'contain', 'none'] as const\n    const scaleUnambiguousSpacing = () =>\n        [isArbitraryVariable, isArbitraryValue, themeSpacing] as const\n    const scaleInset = () => [isFraction, 'full', 'auto', ...scaleUnambiguousSpacing()] as const\n    const scaleGridTemplateColsRows = () =>\n        [isInteger, 'none', 'subgrid', isArbitraryVariable, isArbitraryValue] as const\n    const scaleGridColRowStartAndEnd = () =>\n        [\n            'auto',\n            { span: ['full', isInteger, isArbitraryVariable, isArbitraryValue] },\n            isInteger,\n            isArbitraryVariable,\n            isArbitraryValue,\n        ] as const\n    const scaleGridColRowStartOrEnd = () =>\n        [isInteger, 'auto', isArbitraryVariable, isArbitraryValue] as const\n    const scaleGridAutoColsRows = () =>\n        ['auto', 'min', 'max', 'fr', isArbitraryVariable, isArbitraryValue] as const\n    const scaleAlignPrimaryAxis = () =>\n        [\n            'start',\n            'end',\n            'center',\n            'between',\n            'around',\n            'evenly',\n            'stretch',\n            'baseline',\n            'center-safe',\n            'end-safe',\n        ] as const\n    const scaleAlignSecondaryAxis = () =>\n        ['start', 'end', 'center', 'stretch', 'center-safe', 'end-safe'] as const\n    const scaleMargin = () => ['auto', ...scaleUnambiguousSpacing()] as const\n    const scaleSizing = () =>\n        [\n            isFraction,\n            'auto',\n            'full',\n            'dvw',\n            'dvh',\n            'lvw',\n            'lvh',\n            'svw',\n            'svh',\n            'min',\n            'max',\n            'fit',\n            ...scaleUnambiguousSpacing(),\n        ] as const\n    const scaleColor = () => [themeColor, isArbitraryVariable, isArbitraryValue] as const\n    const scaleBgPosition = () =>\n        [\n            ...scalePosition(),\n            isArbitraryVariablePosition,\n            isArbitraryPosition,\n            { position: [isArbitraryVariable, isArbitraryValue] },\n        ] as const\n    const scaleBgRepeat = () => ['no-repeat', { repeat: ['', 'x', 'y', 'space', 'round'] }] as const\n    const scaleBgSize = () =>\n        [\n            'auto',\n            'cover',\n            'contain',\n            isArbitraryVariableSize,\n            isArbitrarySize,\n            { size: [isArbitraryVariable, isArbitraryValue] },\n        ] as const\n    const scaleGradientStopPosition = () =>\n        [isPercent, isArbitraryVariableLength, isArbitraryLength] as const\n    const scaleRadius = () =>\n        [\n            // Deprecated since Tailwind CSS v4.0.0\n            '',\n            'none',\n            'full',\n            themeRadius,\n            isArbitraryVariable,\n            isArbitraryValue,\n        ] as const\n    const scaleBorderWidth = () =>\n        ['', isNumber, isArbitraryVariableLength, isArbitraryLength] as const\n    const scaleLineStyle = () => ['solid', 'dashed', 'dotted', 'double'] as const\n    const scaleBlendMode = () =>\n        [\n            'normal',\n            'multiply',\n            'screen',\n            'overlay',\n            'darken',\n            'lighten',\n            'color-dodge',\n            'color-burn',\n            'hard-light',\n            'soft-light',\n            'difference',\n            'exclusion',\n            'hue',\n            'saturation',\n            'color',\n            'luminosity',\n        ] as const\n    const scaleMaskImagePosition = () =>\n        [isNumber, isPercent, isArbitraryVariablePosition, isArbitraryPosition] as const\n    const scaleBlur = () =>\n        [\n            // Deprecated since Tailwind CSS v4.0.0\n            '',\n            'none',\n            themeBlur,\n            isArbitraryVariable,\n            isArbitraryValue,\n        ] as const\n    const scaleRotate = () => ['none', isNumber, isArbitraryVariable, isArbitraryValue] as const\n    const scaleScale = () => ['none', isNumber, isArbitraryVariable, isArbitraryValue] as const\n    const scaleSkew = () => [isNumber, isArbitraryVariable, isArbitraryValue] as const\n    const scaleTranslate = () => [isFraction, 'full', ...scaleUnambiguousSpacing()] as const\n\n    return {\n        cacheSize: 500,\n        theme: {\n            animate: ['spin', 'ping', 'pulse', 'bounce'],\n            aspect: ['video'],\n            blur: [isTshirtSize],\n            breakpoint: [isTshirtSize],\n            color: [isAny],\n            container: [isTshirtSize],\n            'drop-shadow': [isTshirtSize],\n            ease: ['in', 'out', 'in-out'],\n            font: [isAnyNonArbitrary],\n            'font-weight': [\n                'thin',\n                'extralight',\n                'light',\n                'normal',\n                'medium',\n                'semibold',\n                'bold',\n                'extrabold',\n                'black',\n            ],\n            'inset-shadow': [isTshirtSize],\n            leading: ['none', 'tight', 'snug', 'normal', 'relaxed', 'loose'],\n            perspective: ['dramatic', 'near', 'normal', 'midrange', 'distant', 'none'],\n            radius: [isTshirtSize],\n            shadow: [isTshirtSize],\n            spacing: ['px', isNumber],\n            text: [isTshirtSize],\n            'text-shadow': [isTshirtSize],\n            tracking: ['tighter', 'tight', 'normal', 'wide', 'wider', 'widest'],\n        },\n        classGroups: {\n            // --------------\n            // --- Layout ---\n            // --------------\n\n            /**\n             * Aspect Ratio\n             * @see https://tailwindcss.com/docs/aspect-ratio\n             */\n            aspect: [\n                {\n                    aspect: [\n                        'auto',\n                        'square',\n                        isFraction,\n                        isArbitraryValue,\n                        isArbitraryVariable,\n                        themeAspect,\n                    ],\n                },\n            ],\n            /**\n             * Container\n             * @see https://tailwindcss.com/docs/container\n             * @deprecated since Tailwind CSS v4.0.0\n             */\n            container: ['container'],\n            /**\n             * Columns\n             * @see https://tailwindcss.com/docs/columns\n             */\n            columns: [\n                { columns: [isNumber, isArbitraryValue, isArbitraryVariable, themeContainer] },\n            ],\n            /**\n             * Break After\n             * @see https://tailwindcss.com/docs/break-after\n             */\n            'break-after': [{ 'break-after': scaleBreak() }],\n            /**\n             * Break Before\n             * @see https://tailwindcss.com/docs/break-before\n             */\n            'break-before': [{ 'break-before': scaleBreak() }],\n            /**\n             * Break Inside\n             * @see https://tailwindcss.com/docs/break-inside\n             */\n            'break-inside': [{ 'break-inside': ['auto', 'avoid', 'avoid-page', 'avoid-column'] }],\n            /**\n             * Box Decoration Break\n             * @see https://tailwindcss.com/docs/box-decoration-break\n             */\n            'box-decoration': [{ 'box-decoration': ['slice', 'clone'] }],\n            /**\n             * Box Sizing\n             * @see https://tailwindcss.com/docs/box-sizing\n             */\n            box: [{ box: ['border', 'content'] }],\n            /**\n             * Display\n             * @see https://tailwindcss.com/docs/display\n             */\n            display: [\n                'block',\n                'inline-block',\n                'inline',\n                'flex',\n                'inline-flex',\n                'table',\n                'inline-table',\n                'table-caption',\n                'table-cell',\n                'table-column',\n                'table-column-group',\n                'table-footer-group',\n                'table-header-group',\n                'table-row-group',\n                'table-row',\n                'flow-root',\n                'grid',\n                'inline-grid',\n                'contents',\n                'list-item',\n                'hidden',\n            ],\n            /**\n             * Screen Reader Only\n             * @see https://tailwindcss.com/docs/display#screen-reader-only\n             */\n            sr: ['sr-only', 'not-sr-only'],\n            /**\n             * Floats\n             * @see https://tailwindcss.com/docs/float\n             */\n            float: [{ float: ['right', 'left', 'none', 'start', 'end'] }],\n            /**\n             * Clear\n             * @see https://tailwindcss.com/docs/clear\n             */\n            clear: [{ clear: ['left', 'right', 'both', 'none', 'start', 'end'] }],\n            /**\n             * Isolation\n             * @see https://tailwindcss.com/docs/isolation\n             */\n            isolation: ['isolate', 'isolation-auto'],\n            /**\n             * Object Fit\n             * @see https://tailwindcss.com/docs/object-fit\n             */\n            'object-fit': [{ object: ['contain', 'cover', 'fill', 'none', 'scale-down'] }],\n            /**\n             * Object Position\n             * @see https://tailwindcss.com/docs/object-position\n             */\n            'object-position': [{ object: scalePositionWithArbitrary() }],\n            /**\n             * Overflow\n             * @see https://tailwindcss.com/docs/overflow\n             */\n            overflow: [{ overflow: scaleOverflow() }],\n            /**\n             * Overflow X\n             * @see https://tailwindcss.com/docs/overflow\n             */\n            'overflow-x': [{ 'overflow-x': scaleOverflow() }],\n            /**\n             * Overflow Y\n             * @see https://tailwindcss.com/docs/overflow\n             */\n            'overflow-y': [{ 'overflow-y': scaleOverflow() }],\n            /**\n             * Overscroll Behavior\n             * @see https://tailwindcss.com/docs/overscroll-behavior\n             */\n            overscroll: [{ overscroll: scaleOverscroll() }],\n            /**\n             * Overscroll Behavior X\n             * @see https://tailwindcss.com/docs/overscroll-behavior\n             */\n            'overscroll-x': [{ 'overscroll-x': scaleOverscroll() }],\n            /**\n             * Overscroll Behavior Y\n             * @see https://tailwindcss.com/docs/overscroll-behavior\n             */\n            'overscroll-y': [{ 'overscroll-y': scaleOverscroll() }],\n            /**\n             * Position\n             * @see https://tailwindcss.com/docs/position\n             */\n            position: ['static', 'fixed', 'absolute', 'relative', 'sticky'],\n            /**\n             * Top / Right / Bottom / Left\n             * @see https://tailwindcss.com/docs/top-right-bottom-left\n             */\n            inset: [{ inset: scaleInset() }],\n            /**\n             * Right / Left\n             * @see https://tailwindcss.com/docs/top-right-bottom-left\n             */\n            'inset-x': [{ 'inset-x': scaleInset() }],\n            /**\n             * Top / Bottom\n             * @see https://tailwindcss.com/docs/top-right-bottom-left\n             */\n            'inset-y': [{ 'inset-y': scaleInset() }],\n            /**\n             * Start\n             * @see https://tailwindcss.com/docs/top-right-bottom-left\n             */\n            start: [{ start: scaleInset() }],\n            /**\n             * End\n             * @see https://tailwindcss.com/docs/top-right-bottom-left\n             */\n            end: [{ end: scaleInset() }],\n            /**\n             * Top\n             * @see https://tailwindcss.com/docs/top-right-bottom-left\n             */\n            top: [{ top: scaleInset() }],\n            /**\n             * Right\n             * @see https://tailwindcss.com/docs/top-right-bottom-left\n             */\n            right: [{ right: scaleInset() }],\n            /**\n             * Bottom\n             * @see https://tailwindcss.com/docs/top-right-bottom-left\n             */\n            bottom: [{ bottom: scaleInset() }],\n            /**\n             * Left\n             * @see https://tailwindcss.com/docs/top-right-bottom-left\n             */\n            left: [{ left: scaleInset() }],\n            /**\n             * Visibility\n             * @see https://tailwindcss.com/docs/visibility\n             */\n            visibility: ['visible', 'invisible', 'collapse'],\n            /**\n             * Z-Index\n             * @see https://tailwindcss.com/docs/z-index\n             */\n            z: [{ z: [isInteger, 'auto', isArbitraryVariable, isArbitraryValue] }],\n\n            // ------------------------\n            // --- Flexbox and Grid ---\n            // ------------------------\n\n            /**\n             * Flex Basis\n             * @see https://tailwindcss.com/docs/flex-basis\n             */\n            basis: [\n                {\n                    basis: [\n                        isFraction,\n                        'full',\n                        'auto',\n                        themeContainer,\n                        ...scaleUnambiguousSpacing(),\n                    ],\n                },\n            ],\n            /**\n             * Flex Direction\n             * @see https://tailwindcss.com/docs/flex-direction\n             */\n            'flex-direction': [{ flex: ['row', 'row-reverse', 'col', 'col-reverse'] }],\n            /**\n             * Flex Wrap\n             * @see https://tailwindcss.com/docs/flex-wrap\n             */\n            'flex-wrap': [{ flex: ['nowrap', 'wrap', 'wrap-reverse'] }],\n            /**\n             * Flex\n             * @see https://tailwindcss.com/docs/flex\n             */\n            flex: [{ flex: [isNumber, isFraction, 'auto', 'initial', 'none', isArbitraryValue] }],\n            /**\n             * Flex Grow\n             * @see https://tailwindcss.com/docs/flex-grow\n             */\n            grow: [{ grow: ['', isNumber, isArbitraryVariable, isArbitraryValue] }],\n            /**\n             * Flex Shrink\n             * @see https://tailwindcss.com/docs/flex-shrink\n             */\n            shrink: [{ shrink: ['', isNumber, isArbitraryVariable, isArbitraryValue] }],\n            /**\n             * Order\n             * @see https://tailwindcss.com/docs/order\n             */\n            order: [\n                {\n                    order: [\n                        isInteger,\n                        'first',\n                        'last',\n                        'none',\n                        isArbitraryVariable,\n                        isArbitraryValue,\n                    ],\n                },\n            ],\n            /**\n             * Grid Template Columns\n             * @see https://tailwindcss.com/docs/grid-template-columns\n             */\n            'grid-cols': [{ 'grid-cols': scaleGridTemplateColsRows() }],\n            /**\n             * Grid Column Start / End\n             * @see https://tailwindcss.com/docs/grid-column\n             */\n            'col-start-end': [{ col: scaleGridColRowStartAndEnd() }],\n            /**\n             * Grid Column Start\n             * @see https://tailwindcss.com/docs/grid-column\n             */\n            'col-start': [{ 'col-start': scaleGridColRowStartOrEnd() }],\n            /**\n             * Grid Column End\n             * @see https://tailwindcss.com/docs/grid-column\n             */\n            'col-end': [{ 'col-end': scaleGridColRowStartOrEnd() }],\n            /**\n             * Grid Template Rows\n             * @see https://tailwindcss.com/docs/grid-template-rows\n             */\n            'grid-rows': [{ 'grid-rows': scaleGridTemplateColsRows() }],\n            /**\n             * Grid Row Start / End\n             * @see https://tailwindcss.com/docs/grid-row\n             */\n            'row-start-end': [{ row: scaleGridColRowStartAndEnd() }],\n            /**\n             * Grid Row Start\n             * @see https://tailwindcss.com/docs/grid-row\n             */\n            'row-start': [{ 'row-start': scaleGridColRowStartOrEnd() }],\n            /**\n             * Grid Row End\n             * @see https://tailwindcss.com/docs/grid-row\n             */\n            'row-end': [{ 'row-end': scaleGridColRowStartOrEnd() }],\n            /**\n             * Grid Auto Flow\n             * @see https://tailwindcss.com/docs/grid-auto-flow\n             */\n            'grid-flow': [{ 'grid-flow': ['row', 'col', 'dense', 'row-dense', 'col-dense'] }],\n            /**\n             * Grid Auto Columns\n             * @see https://tailwindcss.com/docs/grid-auto-columns\n             */\n            'auto-cols': [{ 'auto-cols': scaleGridAutoColsRows() }],\n            /**\n             * Grid Auto Rows\n             * @see https://tailwindcss.com/docs/grid-auto-rows\n             */\n            'auto-rows': [{ 'auto-rows': scaleGridAutoColsRows() }],\n            /**\n             * Gap\n             * @see https://tailwindcss.com/docs/gap\n             */\n            gap: [{ gap: scaleUnambiguousSpacing() }],\n            /**\n             * Gap X\n             * @see https://tailwindcss.com/docs/gap\n             */\n            'gap-x': [{ 'gap-x': scaleUnambiguousSpacing() }],\n            /**\n             * Gap Y\n             * @see https://tailwindcss.com/docs/gap\n             */\n            'gap-y': [{ 'gap-y': scaleUnambiguousSpacing() }],\n            /**\n             * Justify Content\n             * @see https://tailwindcss.com/docs/justify-content\n             */\n            'justify-content': [{ justify: [...scaleAlignPrimaryAxis(), 'normal'] }],\n            /**\n             * Justify Items\n             * @see https://tailwindcss.com/docs/justify-items\n             */\n            'justify-items': [{ 'justify-items': [...scaleAlignSecondaryAxis(), 'normal'] }],\n            /**\n             * Justify Self\n             * @see https://tailwindcss.com/docs/justify-self\n             */\n            'justify-self': [{ 'justify-self': ['auto', ...scaleAlignSecondaryAxis()] }],\n            /**\n             * Align Content\n             * @see https://tailwindcss.com/docs/align-content\n             */\n            'align-content': [{ content: ['normal', ...scaleAlignPrimaryAxis()] }],\n            /**\n             * Align Items\n             * @see https://tailwindcss.com/docs/align-items\n             */\n            'align-items': [{ items: [...scaleAlignSecondaryAxis(), { baseline: ['', 'last'] }] }],\n            /**\n             * Align Self\n             * @see https://tailwindcss.com/docs/align-self\n             */\n            'align-self': [\n                { self: ['auto', ...scaleAlignSecondaryAxis(), { baseline: ['', 'last'] }] },\n            ],\n            /**\n             * Place Content\n             * @see https://tailwindcss.com/docs/place-content\n             */\n            'place-content': [{ 'place-content': scaleAlignPrimaryAxis() }],\n            /**\n             * Place Items\n             * @see https://tailwindcss.com/docs/place-items\n             */\n            'place-items': [{ 'place-items': [...scaleAlignSecondaryAxis(), 'baseline'] }],\n            /**\n             * Place Self\n             * @see https://tailwindcss.com/docs/place-self\n             */\n            'place-self': [{ 'place-self': ['auto', ...scaleAlignSecondaryAxis()] }],\n            // Spacing\n            /**\n             * Padding\n             * @see https://tailwindcss.com/docs/padding\n             */\n            p: [{ p: scaleUnambiguousSpacing() }],\n            /**\n             * Padding X\n             * @see https://tailwindcss.com/docs/padding\n             */\n            px: [{ px: scaleUnambiguousSpacing() }],\n            /**\n             * Padding Y\n             * @see https://tailwindcss.com/docs/padding\n             */\n            py: [{ py: scaleUnambiguousSpacing() }],\n            /**\n             * Padding Start\n             * @see https://tailwindcss.com/docs/padding\n             */\n            ps: [{ ps: scaleUnambiguousSpacing() }],\n            /**\n             * Padding End\n             * @see https://tailwindcss.com/docs/padding\n             */\n            pe: [{ pe: scaleUnambiguousSpacing() }],\n            /**\n             * Padding Top\n             * @see https://tailwindcss.com/docs/padding\n             */\n            pt: [{ pt: scaleUnambiguousSpacing() }],\n            /**\n             * Padding Right\n             * @see https://tailwindcss.com/docs/padding\n             */\n            pr: [{ pr: scaleUnambiguousSpacing() }],\n            /**\n             * Padding Bottom\n             * @see https://tailwindcss.com/docs/padding\n             */\n            pb: [{ pb: scaleUnambiguousSpacing() }],\n            /**\n             * Padding Left\n             * @see https://tailwindcss.com/docs/padding\n             */\n            pl: [{ pl: scaleUnambiguousSpacing() }],\n            /**\n             * Margin\n             * @see https://tailwindcss.com/docs/margin\n             */\n            m: [{ m: scaleMargin() }],\n            /**\n             * Margin X\n             * @see https://tailwindcss.com/docs/margin\n             */\n            mx: [{ mx: scaleMargin() }],\n            /**\n             * Margin Y\n             * @see https://tailwindcss.com/docs/margin\n             */\n            my: [{ my: scaleMargin() }],\n            /**\n             * Margin Start\n             * @see https://tailwindcss.com/docs/margin\n             */\n            ms: [{ ms: scaleMargin() }],\n            /**\n             * Margin End\n             * @see https://tailwindcss.com/docs/margin\n             */\n            me: [{ me: scaleMargin() }],\n            /**\n             * Margin Top\n             * @see https://tailwindcss.com/docs/margin\n             */\n            mt: [{ mt: scaleMargin() }],\n            /**\n             * Margin Right\n             * @see https://tailwindcss.com/docs/margin\n             */\n            mr: [{ mr: scaleMargin() }],\n            /**\n             * Margin Bottom\n             * @see https://tailwindcss.com/docs/margin\n             */\n            mb: [{ mb: scaleMargin() }],\n            /**\n             * Margin Left\n             * @see https://tailwindcss.com/docs/margin\n             */\n            ml: [{ ml: scaleMargin() }],\n            /**\n             * Space Between X\n             * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n             */\n            'space-x': [{ 'space-x': scaleUnambiguousSpacing() }],\n            /**\n             * Space Between X Reverse\n             * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n             */\n            'space-x-reverse': ['space-x-reverse'],\n            /**\n             * Space Between Y\n             * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n             */\n            'space-y': [{ 'space-y': scaleUnambiguousSpacing() }],\n            /**\n             * Space Between Y Reverse\n             * @see https://tailwindcss.com/docs/margin#adding-space-between-children\n             */\n            'space-y-reverse': ['space-y-reverse'],\n\n            // --------------\n            // --- Sizing ---\n            // --------------\n\n            /**\n             * Size\n             * @see https://tailwindcss.com/docs/width#setting-both-width-and-height\n             */\n            size: [{ size: scaleSizing() }],\n            /**\n             * Width\n             * @see https://tailwindcss.com/docs/width\n             */\n            w: [{ w: [themeContainer, 'screen', ...scaleSizing()] }],\n            /**\n             * Min-Width\n             * @see https://tailwindcss.com/docs/min-width\n             */\n            'min-w': [\n                {\n                    'min-w': [\n                        themeContainer,\n                        'screen',\n                        /** Deprecated. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n                        'none',\n                        ...scaleSizing(),\n                    ],\n                },\n            ],\n            /**\n             * Max-Width\n             * @see https://tailwindcss.com/docs/max-width\n             */\n            'max-w': [\n                {\n                    'max-w': [\n                        themeContainer,\n                        'screen',\n                        'none',\n                        /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n                        'prose',\n                        /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n                        { screen: [themeBreakpoint] },\n                        ...scaleSizing(),\n                    ],\n                },\n            ],\n            /**\n             * Height\n             * @see https://tailwindcss.com/docs/height\n             */\n            h: [{ h: ['screen', 'lh', ...scaleSizing()] }],\n            /**\n             * Min-Height\n             * @see https://tailwindcss.com/docs/min-height\n             */\n            'min-h': [{ 'min-h': ['screen', 'lh', 'none', ...scaleSizing()] }],\n            /**\n             * Max-Height\n             * @see https://tailwindcss.com/docs/max-height\n             */\n            'max-h': [{ 'max-h': ['screen', 'lh', ...scaleSizing()] }],\n\n            // ------------------\n            // --- Typography ---\n            // ------------------\n\n            /**\n             * Font Size\n             * @see https://tailwindcss.com/docs/font-size\n             */\n            'font-size': [\n                { text: ['base', themeText, isArbitraryVariableLength, isArbitraryLength] },\n            ],\n            /**\n             * Font Smoothing\n             * @see https://tailwindcss.com/docs/font-smoothing\n             */\n            'font-smoothing': ['antialiased', 'subpixel-antialiased'],\n            /**\n             * Font Style\n             * @see https://tailwindcss.com/docs/font-style\n             */\n            'font-style': ['italic', 'not-italic'],\n            /**\n             * Font Weight\n             * @see https://tailwindcss.com/docs/font-weight\n             */\n            'font-weight': [{ font: [themeFontWeight, isArbitraryVariable, isArbitraryNumber] }],\n            /**\n             * Font Stretch\n             * @see https://tailwindcss.com/docs/font-stretch\n             */\n            'font-stretch': [\n                {\n                    'font-stretch': [\n                        'ultra-condensed',\n                        'extra-condensed',\n                        'condensed',\n                        'semi-condensed',\n                        'normal',\n                        'semi-expanded',\n                        'expanded',\n                        'extra-expanded',\n                        'ultra-expanded',\n                        isPercent,\n                        isArbitraryValue,\n                    ],\n                },\n            ],\n            /**\n             * Font Family\n             * @see https://tailwindcss.com/docs/font-family\n             */\n            'font-family': [{ font: [isArbitraryVariableFamilyName, isArbitraryValue, themeFont] }],\n            /**\n             * Font Variant Numeric\n             * @see https://tailwindcss.com/docs/font-variant-numeric\n             */\n            'fvn-normal': ['normal-nums'],\n            /**\n             * Font Variant Numeric\n             * @see https://tailwindcss.com/docs/font-variant-numeric\n             */\n            'fvn-ordinal': ['ordinal'],\n            /**\n             * Font Variant Numeric\n             * @see https://tailwindcss.com/docs/font-variant-numeric\n             */\n            'fvn-slashed-zero': ['slashed-zero'],\n            /**\n             * Font Variant Numeric\n             * @see https://tailwindcss.com/docs/font-variant-numeric\n             */\n            'fvn-figure': ['lining-nums', 'oldstyle-nums'],\n            /**\n             * Font Variant Numeric\n             * @see https://tailwindcss.com/docs/font-variant-numeric\n             */\n            'fvn-spacing': ['proportional-nums', 'tabular-nums'],\n            /**\n             * Font Variant Numeric\n             * @see https://tailwindcss.com/docs/font-variant-numeric\n             */\n            'fvn-fraction': ['diagonal-fractions', 'stacked-fractions'],\n            /**\n             * Letter Spacing\n             * @see https://tailwindcss.com/docs/letter-spacing\n             */\n            tracking: [{ tracking: [themeTracking, isArbitraryVariable, isArbitraryValue] }],\n            /**\n             * Line Clamp\n             * @see https://tailwindcss.com/docs/line-clamp\n             */\n            'line-clamp': [\n                { 'line-clamp': [isNumber, 'none', isArbitraryVariable, isArbitraryNumber] },\n            ],\n            /**\n             * Line Height\n             * @see https://tailwindcss.com/docs/line-height\n             */\n            leading: [\n                {\n                    leading: [\n                        /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */\n                        themeLeading,\n                        ...scaleUnambiguousSpacing(),\n                    ],\n                },\n            ],\n            /**\n             * List Style Image\n             * @see https://tailwindcss.com/docs/list-style-image\n             */\n            'list-image': [{ 'list-image': ['none', isArbitraryVariable, isArbitraryValue] }],\n            /**\n             * List Style Position\n             * @see https://tailwindcss.com/docs/list-style-position\n             */\n            'list-style-position': [{ list: ['inside', 'outside'] }],\n            /**\n             * List Style Type\n             * @see https://tailwindcss.com/docs/list-style-type\n             */\n            'list-style-type': [\n                { list: ['disc', 'decimal', 'none', isArbitraryVariable, isArbitraryValue] },\n            ],\n            /**\n             * Text Alignment\n             * @see https://tailwindcss.com/docs/text-align\n             */\n            'text-alignment': [{ text: ['left', 'center', 'right', 'justify', 'start', 'end'] }],\n            /**\n             * Placeholder Color\n             * @deprecated since Tailwind CSS v3.0.0\n             * @see https://v3.tailwindcss.com/docs/placeholder-color\n             */\n            'placeholder-color': [{ placeholder: scaleColor() }],\n            /**\n             * Text Color\n             * @see https://tailwindcss.com/docs/text-color\n             */\n            'text-color': [{ text: scaleColor() }],\n            /**\n             * Text Decoration\n             * @see https://tailwindcss.com/docs/text-decoration\n             */\n            'text-decoration': ['underline', 'overline', 'line-through', 'no-underline'],\n            /**\n             * Text Decoration Style\n             * @see https://tailwindcss.com/docs/text-decoration-style\n             */\n            'text-decoration-style': [{ decoration: [...scaleLineStyle(), 'wavy'] }],\n            /**\n             * Text Decoration Thickness\n             * @see https://tailwindcss.com/docs/text-decoration-thickness\n             */\n            'text-decoration-thickness': [\n                {\n                    decoration: [\n                        isNumber,\n                        'from-font',\n                        'auto',\n                        isArbitraryVariable,\n                        isArbitraryLength,\n                    ],\n                },\n            ],\n            /**\n             * Text Decoration Color\n             * @see https://tailwindcss.com/docs/text-decoration-color\n             */\n            'text-decoration-color': [{ decoration: scaleColor() }],\n            /**\n             * Text Underline Offset\n             * @see https://tailwindcss.com/docs/text-underline-offset\n             */\n            'underline-offset': [\n                { 'underline-offset': [isNumber, 'auto', isArbitraryVariable, isArbitraryValue] },\n            ],\n            /**\n             * Text Transform\n             * @see https://tailwindcss.com/docs/text-transform\n             */\n            'text-transform': ['uppercase', 'lowercase', 'capitalize', 'normal-case'],\n            /**\n             * Text Overflow\n             * @see https://tailwindcss.com/docs/text-overflow\n             */\n            'text-overflow': ['truncate', 'text-ellipsis', 'text-clip'],\n            /**\n             * Text Wrap\n             * @see https://tailwindcss.com/docs/text-wrap\n             */\n            'text-wrap': [{ text: ['wrap', 'nowrap', 'balance', 'pretty'] }],\n            /**\n             * Text Indent\n             * @see https://tailwindcss.com/docs/text-indent\n             */\n            indent: [{ indent: scaleUnambiguousSpacing() }],\n            /**\n             * Vertical Alignment\n             * @see https://tailwindcss.com/docs/vertical-align\n             */\n            'vertical-align': [\n                {\n                    align: [\n                        'baseline',\n                        'top',\n                        'middle',\n                        'bottom',\n                        'text-top',\n                        'text-bottom',\n                        'sub',\n                        'super',\n                        isArbitraryVariable,\n                        isArbitraryValue,\n                    ],\n                },\n            ],\n            /**\n             * Whitespace\n             * @see https://tailwindcss.com/docs/whitespace\n             */\n            whitespace: [\n                { whitespace: ['normal', 'nowrap', 'pre', 'pre-line', 'pre-wrap', 'break-spaces'] },\n            ],\n            /**\n             * Word Break\n             * @see https://tailwindcss.com/docs/word-break\n             */\n            break: [{ break: ['normal', 'words', 'all', 'keep'] }],\n            /**\n             * Overflow Wrap\n             * @see https://tailwindcss.com/docs/overflow-wrap\n             */\n            wrap: [{ wrap: ['break-word', 'anywhere', 'normal'] }],\n            /**\n             * Hyphens\n             * @see https://tailwindcss.com/docs/hyphens\n             */\n            hyphens: [{ hyphens: ['none', 'manual', 'auto'] }],\n            /**\n             * Content\n             * @see https://tailwindcss.com/docs/content\n             */\n            content: [{ content: ['none', isArbitraryVariable, isArbitraryValue] }],\n\n            // -------------------\n            // --- Backgrounds ---\n            // -------------------\n\n            /**\n             * Background Attachment\n             * @see https://tailwindcss.com/docs/background-attachment\n             */\n            'bg-attachment': [{ bg: ['fixed', 'local', 'scroll'] }],\n            /**\n             * Background Clip\n             * @see https://tailwindcss.com/docs/background-clip\n             */\n            'bg-clip': [{ 'bg-clip': ['border', 'padding', 'content', 'text'] }],\n            /**\n             * Background Origin\n             * @see https://tailwindcss.com/docs/background-origin\n             */\n            'bg-origin': [{ 'bg-origin': ['border', 'padding', 'content'] }],\n            /**\n             * Background Position\n             * @see https://tailwindcss.com/docs/background-position\n             */\n            'bg-position': [{ bg: scaleBgPosition() }],\n            /**\n             * Background Repeat\n             * @see https://tailwindcss.com/docs/background-repeat\n             */\n            'bg-repeat': [{ bg: scaleBgRepeat() }],\n            /**\n             * Background Size\n             * @see https://tailwindcss.com/docs/background-size\n             */\n            'bg-size': [{ bg: scaleBgSize() }],\n            /**\n             * Background Image\n             * @see https://tailwindcss.com/docs/background-image\n             */\n            'bg-image': [\n                {\n                    bg: [\n                        'none',\n                        {\n                            linear: [\n                                { to: ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'] },\n                                isInteger,\n                                isArbitraryVariable,\n                                isArbitraryValue,\n                            ],\n                            radial: ['', isArbitraryVariable, isArbitraryValue],\n                            conic: [isInteger, isArbitraryVariable, isArbitraryValue],\n                        },\n                        isArbitraryVariableImage,\n                        isArbitraryImage,\n                    ],\n                },\n            ],\n            /**\n             * Background Color\n             * @see https://tailwindcss.com/docs/background-color\n             */\n            'bg-color': [{ bg: scaleColor() }],\n            /**\n             * Gradient Color Stops From Position\n             * @see https://tailwindcss.com/docs/gradient-color-stops\n             */\n            'gradient-from-pos': [{ from: scaleGradientStopPosition() }],\n            /**\n             * Gradient Color Stops Via Position\n             * @see https://tailwindcss.com/docs/gradient-color-stops\n             */\n            'gradient-via-pos': [{ via: scaleGradientStopPosition() }],\n            /**\n             * Gradient Color Stops To Position\n             * @see https://tailwindcss.com/docs/gradient-color-stops\n             */\n            'gradient-to-pos': [{ to: scaleGradientStopPosition() }],\n            /**\n             * Gradient Color Stops From\n             * @see https://tailwindcss.com/docs/gradient-color-stops\n             */\n            'gradient-from': [{ from: scaleColor() }],\n            /**\n             * Gradient Color Stops Via\n             * @see https://tailwindcss.com/docs/gradient-color-stops\n             */\n            'gradient-via': [{ via: scaleColor() }],\n            /**\n             * Gradient Color Stops To\n             * @see https://tailwindcss.com/docs/gradient-color-stops\n             */\n            'gradient-to': [{ to: scaleColor() }],\n\n            // ---------------\n            // --- Borders ---\n            // ---------------\n\n            /**\n             * Border Radius\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            rounded: [{ rounded: scaleRadius() }],\n            /**\n             * Border Radius Start\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            'rounded-s': [{ 'rounded-s': scaleRadius() }],\n            /**\n             * Border Radius End\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            'rounded-e': [{ 'rounded-e': scaleRadius() }],\n            /**\n             * Border Radius Top\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            'rounded-t': [{ 'rounded-t': scaleRadius() }],\n            /**\n             * Border Radius Right\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            'rounded-r': [{ 'rounded-r': scaleRadius() }],\n            /**\n             * Border Radius Bottom\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            'rounded-b': [{ 'rounded-b': scaleRadius() }],\n            /**\n             * Border Radius Left\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            'rounded-l': [{ 'rounded-l': scaleRadius() }],\n            /**\n             * Border Radius Start Start\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            'rounded-ss': [{ 'rounded-ss': scaleRadius() }],\n            /**\n             * Border Radius Start End\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            'rounded-se': [{ 'rounded-se': scaleRadius() }],\n            /**\n             * Border Radius End End\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            'rounded-ee': [{ 'rounded-ee': scaleRadius() }],\n            /**\n             * Border Radius End Start\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            'rounded-es': [{ 'rounded-es': scaleRadius() }],\n            /**\n             * Border Radius Top Left\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            'rounded-tl': [{ 'rounded-tl': scaleRadius() }],\n            /**\n             * Border Radius Top Right\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            'rounded-tr': [{ 'rounded-tr': scaleRadius() }],\n            /**\n             * Border Radius Bottom Right\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            'rounded-br': [{ 'rounded-br': scaleRadius() }],\n            /**\n             * Border Radius Bottom Left\n             * @see https://tailwindcss.com/docs/border-radius\n             */\n            'rounded-bl': [{ 'rounded-bl': scaleRadius() }],\n            /**\n             * Border Width\n             * @see https://tailwindcss.com/docs/border-width\n             */\n            'border-w': [{ border: scaleBorderWidth() }],\n            /**\n             * Border Width X\n             * @see https://tailwindcss.com/docs/border-width\n             */\n            'border-w-x': [{ 'border-x': scaleBorderWidth() }],\n            /**\n             * Border Width Y\n             * @see https://tailwindcss.com/docs/border-width\n             */\n            'border-w-y': [{ 'border-y': scaleBorderWidth() }],\n            /**\n             * Border Width Start\n             * @see https://tailwindcss.com/docs/border-width\n             */\n            'border-w-s': [{ 'border-s': scaleBorderWidth() }],\n            /**\n             * Border Width End\n             * @see https://tailwindcss.com/docs/border-width\n             */\n            'border-w-e': [{ 'border-e': scaleBorderWidth() }],\n            /**\n             * Border Width Top\n             * @see https://tailwindcss.com/docs/border-width\n             */\n            'border-w-t': [{ 'border-t': scaleBorderWidth() }],\n            /**\n             * Border Width Right\n             * @see https://tailwindcss.com/docs/border-width\n             */\n            'border-w-r': [{ 'border-r': scaleBorderWidth() }],\n            /**\n             * Border Width Bottom\n             * @see https://tailwindcss.com/docs/border-width\n             */\n            'border-w-b': [{ 'border-b': scaleBorderWidth() }],\n            /**\n             * Border Width Left\n             * @see https://tailwindcss.com/docs/border-width\n             */\n            'border-w-l': [{ 'border-l': scaleBorderWidth() }],\n            /**\n             * Divide Width X\n             * @see https://tailwindcss.com/docs/border-width#between-children\n             */\n            'divide-x': [{ 'divide-x': scaleBorderWidth() }],\n            /**\n             * Divide Width X Reverse\n             * @see https://tailwindcss.com/docs/border-width#between-children\n             */\n            'divide-x-reverse': ['divide-x-reverse'],\n            /**\n             * Divide Width Y\n             * @see https://tailwindcss.com/docs/border-width#between-children\n             */\n            'divide-y': [{ 'divide-y': scaleBorderWidth() }],\n            /**\n             * Divide Width Y Reverse\n             * @see https://tailwindcss.com/docs/border-width#between-children\n             */\n            'divide-y-reverse': ['divide-y-reverse'],\n            /**\n             * Border Style\n             * @see https://tailwindcss.com/docs/border-style\n             */\n            'border-style': [{ border: [...scaleLineStyle(), 'hidden', 'none'] }],\n            /**\n             * Divide Style\n             * @see https://tailwindcss.com/docs/border-style#setting-the-divider-style\n             */\n            'divide-style': [{ divide: [...scaleLineStyle(), 'hidden', 'none'] }],\n            /**\n             * Border Color\n             * @see https://tailwindcss.com/docs/border-color\n             */\n            'border-color': [{ border: scaleColor() }],\n            /**\n             * Border Color X\n             * @see https://tailwindcss.com/docs/border-color\n             */\n            'border-color-x': [{ 'border-x': scaleColor() }],\n            /**\n             * Border Color Y\n             * @see https://tailwindcss.com/docs/border-color\n             */\n            'border-color-y': [{ 'border-y': scaleColor() }],\n            /**\n             * Border Color S\n             * @see https://tailwindcss.com/docs/border-color\n             */\n            'border-color-s': [{ 'border-s': scaleColor() }],\n            /**\n             * Border Color E\n             * @see https://tailwindcss.com/docs/border-color\n             */\n            'border-color-e': [{ 'border-e': scaleColor() }],\n            /**\n             * Border Color Top\n             * @see https://tailwindcss.com/docs/border-color\n             */\n            'border-color-t': [{ 'border-t': scaleColor() }],\n            /**\n             * Border Color Right\n             * @see https://tailwindcss.com/docs/border-color\n             */\n            'border-color-r': [{ 'border-r': scaleColor() }],\n            /**\n             * Border Color Bottom\n             * @see https://tailwindcss.com/docs/border-color\n             */\n            'border-color-b': [{ 'border-b': scaleColor() }],\n            /**\n             * Border Color Left\n             * @see https://tailwindcss.com/docs/border-color\n             */\n            'border-color-l': [{ 'border-l': scaleColor() }],\n            /**\n             * Divide Color\n             * @see https://tailwindcss.com/docs/divide-color\n             */\n            'divide-color': [{ divide: scaleColor() }],\n            /**\n             * Outline Style\n             * @see https://tailwindcss.com/docs/outline-style\n             */\n            'outline-style': [{ outline: [...scaleLineStyle(), 'none', 'hidden'] }],\n            /**\n             * Outline Offset\n             * @see https://tailwindcss.com/docs/outline-offset\n             */\n            'outline-offset': [\n                { 'outline-offset': [isNumber, isArbitraryVariable, isArbitraryValue] },\n            ],\n            /**\n             * Outline Width\n             * @see https://tailwindcss.com/docs/outline-width\n             */\n            'outline-w': [\n                { outline: ['', isNumber, isArbitraryVariableLength, isArbitraryLength] },\n            ],\n            /**\n             * Outline Color\n             * @see https://tailwindcss.com/docs/outline-color\n             */\n            'outline-color': [{ outline: scaleColor() }],\n\n            // ---------------\n            // --- Effects ---\n            // ---------------\n\n            /**\n             * Box Shadow\n             * @see https://tailwindcss.com/docs/box-shadow\n             */\n            shadow: [\n                {\n                    shadow: [\n                        // Deprecated since Tailwind CSS v4.0.0\n                        '',\n                        'none',\n                        themeShadow,\n                        isArbitraryVariableShadow,\n                        isArbitraryShadow,\n                    ],\n                },\n            ],\n            /**\n             * Box Shadow Color\n             * @see https://tailwindcss.com/docs/box-shadow#setting-the-shadow-color\n             */\n            'shadow-color': [{ shadow: scaleColor() }],\n            /**\n             * Inset Box Shadow\n             * @see https://tailwindcss.com/docs/box-shadow#adding-an-inset-shadow\n             */\n            'inset-shadow': [\n                {\n                    'inset-shadow': [\n                        'none',\n                        themeInsetShadow,\n                        isArbitraryVariableShadow,\n                        isArbitraryShadow,\n                    ],\n                },\n            ],\n            /**\n             * Inset Box Shadow Color\n             * @see https://tailwindcss.com/docs/box-shadow#setting-the-inset-shadow-color\n             */\n            'inset-shadow-color': [{ 'inset-shadow': scaleColor() }],\n            /**\n             * Ring Width\n             * @see https://tailwindcss.com/docs/box-shadow#adding-a-ring\n             */\n            'ring-w': [{ ring: scaleBorderWidth() }],\n            /**\n             * Ring Width Inset\n             * @see https://v3.tailwindcss.com/docs/ring-width#inset-rings\n             * @deprecated since Tailwind CSS v4.0.0\n             * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158\n             */\n            'ring-w-inset': ['ring-inset'],\n            /**\n             * Ring Color\n             * @see https://tailwindcss.com/docs/box-shadow#setting-the-ring-color\n             */\n            'ring-color': [{ ring: scaleColor() }],\n            /**\n             * Ring Offset Width\n             * @see https://v3.tailwindcss.com/docs/ring-offset-width\n             * @deprecated since Tailwind CSS v4.0.0\n             * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158\n             */\n            'ring-offset-w': [{ 'ring-offset': [isNumber, isArbitraryLength] }],\n            /**\n             * Ring Offset Color\n             * @see https://v3.tailwindcss.com/docs/ring-offset-color\n             * @deprecated since Tailwind CSS v4.0.0\n             * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158\n             */\n            'ring-offset-color': [{ 'ring-offset': scaleColor() }],\n            /**\n             * Inset Ring Width\n             * @see https://tailwindcss.com/docs/box-shadow#adding-an-inset-ring\n             */\n            'inset-ring-w': [{ 'inset-ring': scaleBorderWidth() }],\n            /**\n             * Inset Ring Color\n             * @see https://tailwindcss.com/docs/box-shadow#setting-the-inset-ring-color\n             */\n            'inset-ring-color': [{ 'inset-ring': scaleColor() }],\n            /**\n             * Text Shadow\n             * @see https://tailwindcss.com/docs/text-shadow\n             */\n            'text-shadow': [\n                {\n                    'text-shadow': [\n                        'none',\n                        themeTextShadow,\n                        isArbitraryVariableShadow,\n                        isArbitraryShadow,\n                    ],\n                },\n            ],\n            /**\n             * Text Shadow Color\n             * @see https://tailwindcss.com/docs/text-shadow#setting-the-shadow-color\n             */\n            'text-shadow-color': [{ 'text-shadow': scaleColor() }],\n            /**\n             * Opacity\n             * @see https://tailwindcss.com/docs/opacity\n             */\n            opacity: [{ opacity: [isNumber, isArbitraryVariable, isArbitraryValue] }],\n            /**\n             * Mix Blend Mode\n             * @see https://tailwindcss.com/docs/mix-blend-mode\n             */\n            'mix-blend': [{ 'mix-blend': [...scaleBlendMode(), 'plus-darker', 'plus-lighter'] }],\n            /**\n             * Background Blend Mode\n             * @see https://tailwindcss.com/docs/background-blend-mode\n             */\n            'bg-blend': [{ 'bg-blend': scaleBlendMode() }],\n            /**\n             * Mask Clip\n             * @see https://tailwindcss.com/docs/mask-clip\n             */\n            'mask-clip': [\n                { 'mask-clip': ['border', 'padding', 'content', 'fill', 'stroke', 'view'] },\n                'mask-no-clip',\n            ],\n            /**\n             * Mask Composite\n             * @see https://tailwindcss.com/docs/mask-composite\n             */\n            'mask-composite': [{ mask: ['add', 'subtract', 'intersect', 'exclude'] }],\n            /**\n             * Mask Image\n             * @see https://tailwindcss.com/docs/mask-image\n             */\n            'mask-image-linear-pos': [{ 'mask-linear': [isNumber] }],\n            'mask-image-linear-from-pos': [{ 'mask-linear-from': scaleMaskImagePosition() }],\n            'mask-image-linear-to-pos': [{ 'mask-linear-to': scaleMaskImagePosition() }],\n            'mask-image-linear-from-color': [{ 'mask-linear-from': scaleColor() }],\n            'mask-image-linear-to-color': [{ 'mask-linear-to': scaleColor() }],\n            'mask-image-t-from-pos': [{ 'mask-t-from': scaleMaskImagePosition() }],\n            'mask-image-t-to-pos': [{ 'mask-t-to': scaleMaskImagePosition() }],\n            'mask-image-t-from-color': [{ 'mask-t-from': scaleColor() }],\n            'mask-image-t-to-color': [{ 'mask-t-to': scaleColor() }],\n            'mask-image-r-from-pos': [{ 'mask-r-from': scaleMaskImagePosition() }],\n            'mask-image-r-to-pos': [{ 'mask-r-to': scaleMaskImagePosition() }],\n            'mask-image-r-from-color': [{ 'mask-r-from': scaleColor() }],\n            'mask-image-r-to-color': [{ 'mask-r-to': scaleColor() }],\n            'mask-image-b-from-pos': [{ 'mask-b-from': scaleMaskImagePosition() }],\n            'mask-image-b-to-pos': [{ 'mask-b-to': scaleMaskImagePosition() }],\n            'mask-image-b-from-color': [{ 'mask-b-from': scaleColor() }],\n            'mask-image-b-to-color': [{ 'mask-b-to': scaleColor() }],\n            'mask-image-l-from-pos': [{ 'mask-l-from': scaleMaskImagePosition() }],\n            'mask-image-l-to-pos': [{ 'mask-l-to': scaleMaskImagePosition() }],\n            'mask-image-l-from-color': [{ 'mask-l-from': scaleColor() }],\n            'mask-image-l-to-color': [{ 'mask-l-to': scaleColor() }],\n            'mask-image-x-from-pos': [{ 'mask-x-from': scaleMaskImagePosition() }],\n            'mask-image-x-to-pos': [{ 'mask-x-to': scaleMaskImagePosition() }],\n            'mask-image-x-from-color': [{ 'mask-x-from': scaleColor() }],\n            'mask-image-x-to-color': [{ 'mask-x-to': scaleColor() }],\n            'mask-image-y-from-pos': [{ 'mask-y-from': scaleMaskImagePosition() }],\n            'mask-image-y-to-pos': [{ 'mask-y-to': scaleMaskImagePosition() }],\n            'mask-image-y-from-color': [{ 'mask-y-from': scaleColor() }],\n            'mask-image-y-to-color': [{ 'mask-y-to': scaleColor() }],\n            'mask-image-radial': [{ 'mask-radial': [isArbitraryVariable, isArbitraryValue] }],\n            'mask-image-radial-from-pos': [{ 'mask-radial-from': scaleMaskImagePosition() }],\n            'mask-image-radial-to-pos': [{ 'mask-radial-to': scaleMaskImagePosition() }],\n            'mask-image-radial-from-color': [{ 'mask-radial-from': scaleColor() }],\n            'mask-image-radial-to-color': [{ 'mask-radial-to': scaleColor() }],\n            'mask-image-radial-shape': [{ 'mask-radial': ['circle', 'ellipse'] }],\n            'mask-image-radial-size': [\n                { 'mask-radial': [{ closest: ['side', 'corner'], farthest: ['side', 'corner'] }] },\n            ],\n            'mask-image-radial-pos': [{ 'mask-radial-at': scalePosition() }],\n            'mask-image-conic-pos': [{ 'mask-conic': [isNumber] }],\n            'mask-image-conic-from-pos': [{ 'mask-conic-from': scaleMaskImagePosition() }],\n            'mask-image-conic-to-pos': [{ 'mask-conic-to': scaleMaskImagePosition() }],\n            'mask-image-conic-from-color': [{ 'mask-conic-from': scaleColor() }],\n            'mask-image-conic-to-color': [{ 'mask-conic-to': scaleColor() }],\n            /**\n             * Mask Mode\n             * @see https://tailwindcss.com/docs/mask-mode\n             */\n            'mask-mode': [{ mask: ['alpha', 'luminance', 'match'] }],\n            /**\n             * Mask Origin\n             * @see https://tailwindcss.com/docs/mask-origin\n             */\n            'mask-origin': [\n                { 'mask-origin': ['border', 'padding', 'content', 'fill', 'stroke', 'view'] },\n            ],\n            /**\n             * Mask Position\n             * @see https://tailwindcss.com/docs/mask-position\n             */\n            'mask-position': [{ mask: scaleBgPosition() }],\n            /**\n             * Mask Repeat\n             * @see https://tailwindcss.com/docs/mask-repeat\n             */\n            'mask-repeat': [{ mask: scaleBgRepeat() }],\n            /**\n             * Mask Size\n             * @see https://tailwindcss.com/docs/mask-size\n             */\n            'mask-size': [{ mask: scaleBgSize() }],\n            /**\n             * Mask Type\n             * @see https://tailwindcss.com/docs/mask-type\n             */\n            'mask-type': [{ 'mask-type': ['alpha', 'luminance'] }],\n            /**\n             * Mask Image\n             * @see https://tailwindcss.com/docs/mask-image\n             */\n            'mask-image': [{ mask: ['none', isArbitraryVariable, isArbitraryValue] }],\n\n            // ---------------\n            // --- Filters ---\n            // ---------------\n\n            /**\n             * Filter\n             * @see https://tailwindcss.com/docs/filter\n             */\n            filter: [\n                {\n                    filter: [\n                        // Deprecated since Tailwind CSS v3.0.0\n                        '',\n                        'none',\n                        isArbitraryVariable,\n                        isArbitraryValue,\n                    ],\n                },\n            ],\n            /**\n             * Blur\n             * @see https://tailwindcss.com/docs/blur\n             */\n            blur: [{ blur: scaleBlur() }],\n            /**\n             * Brightness\n             * @see https://tailwindcss.com/docs/brightness\n             */\n            brightness: [{ brightness: [isNumber, isArbitraryVariable, isArbitraryValue] }],\n            /**\n             * Contrast\n             * @see https://tailwindcss.com/docs/contrast\n             */\n            contrast: [{ contrast: [isNumber, isArbitraryVariable, isArbitraryValue] }],\n            /**\n             * Drop Shadow\n             * @see https://tailwindcss.com/docs/drop-shadow\n             */\n            'drop-shadow': [\n                {\n                    'drop-shadow': [\n                        // Deprecated since Tailwind CSS v4.0.0\n                        '',\n                        'none',\n                        themeDropShadow,\n                        isArbitraryVariableShadow,\n                        isArbitraryShadow,\n                    ],\n                },\n            ],\n            /**\n             * Drop Shadow Color\n             * @see https://tailwindcss.com/docs/filter-drop-shadow#setting-the-shadow-color\n             */\n            'drop-shadow-color': [{ 'drop-shadow': scaleColor() }],\n            /**\n             * Grayscale\n             * @see https://tailwindcss.com/docs/grayscale\n             */\n            grayscale: [{ grayscale: ['', isNumber, isArbitraryVariable, isArbitraryValue] }],\n            /**\n             * Hue Rotate\n             * @see https://tailwindcss.com/docs/hue-rotate\n             */\n            'hue-rotate': [{ 'hue-rotate': [isNumber, isArbitraryVariable, isArbitraryValue] }],\n            /**\n             * Invert\n             * @see https://tailwindcss.com/docs/invert\n             */\n            invert: [{ invert: ['', isNumber, isArbitraryVariable, isArbitraryValue] }],\n            /**\n             * Saturate\n             * @see https://tailwindcss.com/docs/saturate\n             */\n            saturate: [{ saturate: [isNumber, isArbitraryVariable, isArbitraryValue] }],\n            /**\n             * Sepia\n             * @see https://tailwindcss.com/docs/sepia\n             */\n            sepia: [{ sepia: ['', isNumber, isArbitraryVariable, isArbitraryValue] }],\n            /**\n             * Backdrop Filter\n             * @see https://tailwindcss.com/docs/backdrop-filter\n             */\n            'backdrop-filter': [\n                {\n                    'backdrop-filter': [\n                        // Deprecated since Tailwind CSS v3.0.0\n                        '',\n                        'none',\n                        isArbitraryVariable,\n                        isArbitraryValue,\n                    ],\n                },\n            ],\n            /**\n             * Backdrop Blur\n             * @see https://tailwindcss.com/docs/backdrop-blur\n             */\n            'backdrop-blur': [{ 'backdrop-blur': scaleBlur() }],\n            /**\n             * Backdrop Brightness\n             * @see https://tailwindcss.com/docs/backdrop-brightness\n             */\n            'backdrop-brightness': [\n                { 'backdrop-brightness': [isNumber, isArbitraryVariable, isArbitraryValue] },\n            ],\n            /**\n             * Backdrop Contrast\n             * @see https://tailwindcss.com/docs/backdrop-contrast\n             */\n            'backdrop-contrast': [\n                { 'backdrop-contrast': [isNumber, isArbitraryVariable, isArbitraryValue] },\n            ],\n            /**\n             * Backdrop Grayscale\n             * @see https://tailwindcss.com/docs/backdrop-grayscale\n             */\n            'backdrop-grayscale': [\n                { 'backdrop-grayscale': ['', isNumber, isArbitraryVariable, isArbitraryValue] },\n            ],\n            /**\n             * Backdrop Hue Rotate\n             * @see https://tailwindcss.com/docs/backdrop-hue-rotate\n             */\n            'backdrop-hue-rotate': [\n                { 'backdrop-hue-rotate': [isNumber, isArbitraryVariable, isArbitraryValue] },\n            ],\n            /**\n             * Backdrop Invert\n             * @see https://tailwindcss.com/docs/backdrop-invert\n             */\n            'backdrop-invert': [\n                { 'backdrop-invert': ['', isNumber, isArbitraryVariable, isArbitraryValue] },\n            ],\n            /**\n             * Backdrop Opacity\n             * @see https://tailwindcss.com/docs/backdrop-opacity\n             */\n            'backdrop-opacity': [\n                { 'backdrop-opacity': [isNumber, isArbitraryVariable, isArbitraryValue] },\n            ],\n            /**\n             * Backdrop Saturate\n             * @see https://tailwindcss.com/docs/backdrop-saturate\n             */\n            'backdrop-saturate': [\n                { 'backdrop-saturate': [isNumber, isArbitraryVariable, isArbitraryValue] },\n            ],\n            /**\n             * Backdrop Sepia\n             * @see https://tailwindcss.com/docs/backdrop-sepia\n             */\n            'backdrop-sepia': [\n                { 'backdrop-sepia': ['', isNumber, isArbitraryVariable, isArbitraryValue] },\n            ],\n\n            // --------------\n            // --- Tables ---\n            // --------------\n\n            /**\n             * Border Collapse\n             * @see https://tailwindcss.com/docs/border-collapse\n             */\n            'border-collapse': [{ border: ['collapse', 'separate'] }],\n            /**\n             * Border Spacing\n             * @see https://tailwindcss.com/docs/border-spacing\n             */\n            'border-spacing': [{ 'border-spacing': scaleUnambiguousSpacing() }],\n            /**\n             * Border Spacing X\n             * @see https://tailwindcss.com/docs/border-spacing\n             */\n            'border-spacing-x': [{ 'border-spacing-x': scaleUnambiguousSpacing() }],\n            /**\n             * Border Spacing Y\n             * @see https://tailwindcss.com/docs/border-spacing\n             */\n            'border-spacing-y': [{ 'border-spacing-y': scaleUnambiguousSpacing() }],\n            /**\n             * Table Layout\n             * @see https://tailwindcss.com/docs/table-layout\n             */\n            'table-layout': [{ table: ['auto', 'fixed'] }],\n            /**\n             * Caption Side\n             * @see https://tailwindcss.com/docs/caption-side\n             */\n            caption: [{ caption: ['top', 'bottom'] }],\n\n            // ---------------------------------\n            // --- Transitions and Animation ---\n            // ---------------------------------\n\n            /**\n             * Transition Property\n             * @see https://tailwindcss.com/docs/transition-property\n             */\n            transition: [\n                {\n                    transition: [\n                        '',\n                        'all',\n                        'colors',\n                        'opacity',\n                        'shadow',\n                        'transform',\n                        'none',\n                        isArbitraryVariable,\n                        isArbitraryValue,\n                    ],\n                },\n            ],\n            /**\n             * Transition Behavior\n             * @see https://tailwindcss.com/docs/transition-behavior\n             */\n            'transition-behavior': [{ transition: ['normal', 'discrete'] }],\n            /**\n             * Transition Duration\n             * @see https://tailwindcss.com/docs/transition-duration\n             */\n            duration: [{ duration: [isNumber, 'initial', isArbitraryVariable, isArbitraryValue] }],\n            /**\n             * Transition Timing Function\n             * @see https://tailwindcss.com/docs/transition-timing-function\n             */\n            ease: [\n                { ease: ['linear', 'initial', themeEase, isArbitraryVariable, isArbitraryValue] },\n            ],\n            /**\n             * Transition Delay\n             * @see https://tailwindcss.com/docs/transition-delay\n             */\n            delay: [{ delay: [isNumber, isArbitraryVariable, isArbitraryValue] }],\n            /**\n             * Animation\n             * @see https://tailwindcss.com/docs/animation\n             */\n            animate: [{ animate: ['none', themeAnimate, isArbitraryVariable, isArbitraryValue] }],\n\n            // ------------------\n            // --- Transforms ---\n            // ------------------\n\n            /**\n             * Backface Visibility\n             * @see https://tailwindcss.com/docs/backface-visibility\n             */\n            backface: [{ backface: ['hidden', 'visible'] }],\n            /**\n             * Perspective\n             * @see https://tailwindcss.com/docs/perspective\n             */\n            perspective: [\n                { perspective: [themePerspective, isArbitraryVariable, isArbitraryValue] },\n            ],\n            /**\n             * Perspective Origin\n             * @see https://tailwindcss.com/docs/perspective-origin\n             */\n            'perspective-origin': [{ 'perspective-origin': scalePositionWithArbitrary() }],\n            /**\n             * Rotate\n             * @see https://tailwindcss.com/docs/rotate\n             */\n            rotate: [{ rotate: scaleRotate() }],\n            /**\n             * Rotate X\n             * @see https://tailwindcss.com/docs/rotate\n             */\n            'rotate-x': [{ 'rotate-x': scaleRotate() }],\n            /**\n             * Rotate Y\n             * @see https://tailwindcss.com/docs/rotate\n             */\n            'rotate-y': [{ 'rotate-y': scaleRotate() }],\n            /**\n             * Rotate Z\n             * @see https://tailwindcss.com/docs/rotate\n             */\n            'rotate-z': [{ 'rotate-z': scaleRotate() }],\n            /**\n             * Scale\n             * @see https://tailwindcss.com/docs/scale\n             */\n            scale: [{ scale: scaleScale() }],\n            /**\n             * Scale X\n             * @see https://tailwindcss.com/docs/scale\n             */\n            'scale-x': [{ 'scale-x': scaleScale() }],\n            /**\n             * Scale Y\n             * @see https://tailwindcss.com/docs/scale\n             */\n            'scale-y': [{ 'scale-y': scaleScale() }],\n            /**\n             * Scale Z\n             * @see https://tailwindcss.com/docs/scale\n             */\n            'scale-z': [{ 'scale-z': scaleScale() }],\n            /**\n             * Scale 3D\n             * @see https://tailwindcss.com/docs/scale\n             */\n            'scale-3d': ['scale-3d'],\n            /**\n             * Skew\n             * @see https://tailwindcss.com/docs/skew\n             */\n            skew: [{ skew: scaleSkew() }],\n            /**\n             * Skew X\n             * @see https://tailwindcss.com/docs/skew\n             */\n            'skew-x': [{ 'skew-x': scaleSkew() }],\n            /**\n             * Skew Y\n             * @see https://tailwindcss.com/docs/skew\n             */\n            'skew-y': [{ 'skew-y': scaleSkew() }],\n            /**\n             * Transform\n             * @see https://tailwindcss.com/docs/transform\n             */\n            transform: [\n                { transform: [isArbitraryVariable, isArbitraryValue, '', 'none', 'gpu', 'cpu'] },\n            ],\n            /**\n             * Transform Origin\n             * @see https://tailwindcss.com/docs/transform-origin\n             */\n            'transform-origin': [{ origin: scalePositionWithArbitrary() }],\n            /**\n             * Transform Style\n             * @see https://tailwindcss.com/docs/transform-style\n             */\n            'transform-style': [{ transform: ['3d', 'flat'] }],\n            /**\n             * Translate\n             * @see https://tailwindcss.com/docs/translate\n             */\n            translate: [{ translate: scaleTranslate() }],\n            /**\n             * Translate X\n             * @see https://tailwindcss.com/docs/translate\n             */\n            'translate-x': [{ 'translate-x': scaleTranslate() }],\n            /**\n             * Translate Y\n             * @see https://tailwindcss.com/docs/translate\n             */\n            'translate-y': [{ 'translate-y': scaleTranslate() }],\n            /**\n             * Translate Z\n             * @see https://tailwindcss.com/docs/translate\n             */\n            'translate-z': [{ 'translate-z': scaleTranslate() }],\n            /**\n             * Translate None\n             * @see https://tailwindcss.com/docs/translate\n             */\n            'translate-none': ['translate-none'],\n\n            // ---------------------\n            // --- Interactivity ---\n            // ---------------------\n\n            /**\n             * Accent Color\n             * @see https://tailwindcss.com/docs/accent-color\n             */\n            accent: [{ accent: scaleColor() }],\n            /**\n             * Appearance\n             * @see https://tailwindcss.com/docs/appearance\n             */\n            appearance: [{ appearance: ['none', 'auto'] }],\n            /**\n             * Caret Color\n             * @see https://tailwindcss.com/docs/just-in-time-mode#caret-color-utilities\n             */\n            'caret-color': [{ caret: scaleColor() }],\n            /**\n             * Color Scheme\n             * @see https://tailwindcss.com/docs/color-scheme\n             */\n            'color-scheme': [\n                { scheme: ['normal', 'dark', 'light', 'light-dark', 'only-dark', 'only-light'] },\n            ],\n            /**\n             * Cursor\n             * @see https://tailwindcss.com/docs/cursor\n             */\n            cursor: [\n                {\n                    cursor: [\n                        'auto',\n                        'default',\n                        'pointer',\n                        'wait',\n                        'text',\n                        'move',\n                        'help',\n                        'not-allowed',\n                        'none',\n                        'context-menu',\n                        'progress',\n                        'cell',\n                        'crosshair',\n                        'vertical-text',\n                        'alias',\n                        'copy',\n                        'no-drop',\n                        'grab',\n                        'grabbing',\n                        'all-scroll',\n                        'col-resize',\n                        'row-resize',\n                        'n-resize',\n                        'e-resize',\n                        's-resize',\n                        'w-resize',\n                        'ne-resize',\n                        'nw-resize',\n                        'se-resize',\n                        'sw-resize',\n                        'ew-resize',\n                        'ns-resize',\n                        'nesw-resize',\n                        'nwse-resize',\n                        'zoom-in',\n                        'zoom-out',\n                        isArbitraryVariable,\n                        isArbitraryValue,\n                    ],\n                },\n            ],\n            /**\n             * Field Sizing\n             * @see https://tailwindcss.com/docs/field-sizing\n             */\n            'field-sizing': [{ 'field-sizing': ['fixed', 'content'] }],\n            /**\n             * Pointer Events\n             * @see https://tailwindcss.com/docs/pointer-events\n             */\n            'pointer-events': [{ 'pointer-events': ['auto', 'none'] }],\n            /**\n             * Resize\n             * @see https://tailwindcss.com/docs/resize\n             */\n            resize: [{ resize: ['none', '', 'y', 'x'] }],\n            /**\n             * Scroll Behavior\n             * @see https://tailwindcss.com/docs/scroll-behavior\n             */\n            'scroll-behavior': [{ scroll: ['auto', 'smooth'] }],\n            /**\n             * Scroll Margin\n             * @see https://tailwindcss.com/docs/scroll-margin\n             */\n            'scroll-m': [{ 'scroll-m': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Margin X\n             * @see https://tailwindcss.com/docs/scroll-margin\n             */\n            'scroll-mx': [{ 'scroll-mx': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Margin Y\n             * @see https://tailwindcss.com/docs/scroll-margin\n             */\n            'scroll-my': [{ 'scroll-my': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Margin Start\n             * @see https://tailwindcss.com/docs/scroll-margin\n             */\n            'scroll-ms': [{ 'scroll-ms': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Margin End\n             * @see https://tailwindcss.com/docs/scroll-margin\n             */\n            'scroll-me': [{ 'scroll-me': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Margin Top\n             * @see https://tailwindcss.com/docs/scroll-margin\n             */\n            'scroll-mt': [{ 'scroll-mt': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Margin Right\n             * @see https://tailwindcss.com/docs/scroll-margin\n             */\n            'scroll-mr': [{ 'scroll-mr': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Margin Bottom\n             * @see https://tailwindcss.com/docs/scroll-margin\n             */\n            'scroll-mb': [{ 'scroll-mb': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Margin Left\n             * @see https://tailwindcss.com/docs/scroll-margin\n             */\n            'scroll-ml': [{ 'scroll-ml': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Padding\n             * @see https://tailwindcss.com/docs/scroll-padding\n             */\n            'scroll-p': [{ 'scroll-p': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Padding X\n             * @see https://tailwindcss.com/docs/scroll-padding\n             */\n            'scroll-px': [{ 'scroll-px': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Padding Y\n             * @see https://tailwindcss.com/docs/scroll-padding\n             */\n            'scroll-py': [{ 'scroll-py': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Padding Start\n             * @see https://tailwindcss.com/docs/scroll-padding\n             */\n            'scroll-ps': [{ 'scroll-ps': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Padding End\n             * @see https://tailwindcss.com/docs/scroll-padding\n             */\n            'scroll-pe': [{ 'scroll-pe': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Padding Top\n             * @see https://tailwindcss.com/docs/scroll-padding\n             */\n            'scroll-pt': [{ 'scroll-pt': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Padding Right\n             * @see https://tailwindcss.com/docs/scroll-padding\n             */\n            'scroll-pr': [{ 'scroll-pr': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Padding Bottom\n             * @see https://tailwindcss.com/docs/scroll-padding\n             */\n            'scroll-pb': [{ 'scroll-pb': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Padding Left\n             * @see https://tailwindcss.com/docs/scroll-padding\n             */\n            'scroll-pl': [{ 'scroll-pl': scaleUnambiguousSpacing() }],\n            /**\n             * Scroll Snap Align\n             * @see https://tailwindcss.com/docs/scroll-snap-align\n             */\n            'snap-align': [{ snap: ['start', 'end', 'center', 'align-none'] }],\n            /**\n             * Scroll Snap Stop\n             * @see https://tailwindcss.com/docs/scroll-snap-stop\n             */\n            'snap-stop': [{ snap: ['normal', 'always'] }],\n            /**\n             * Scroll Snap Type\n             * @see https://tailwindcss.com/docs/scroll-snap-type\n             */\n            'snap-type': [{ snap: ['none', 'x', 'y', 'both'] }],\n            /**\n             * Scroll Snap Type Strictness\n             * @see https://tailwindcss.com/docs/scroll-snap-type\n             */\n            'snap-strictness': [{ snap: ['mandatory', 'proximity'] }],\n            /**\n             * Touch Action\n             * @see https://tailwindcss.com/docs/touch-action\n             */\n            touch: [{ touch: ['auto', 'none', 'manipulation'] }],\n            /**\n             * Touch Action X\n             * @see https://tailwindcss.com/docs/touch-action\n             */\n            'touch-x': [{ 'touch-pan': ['x', 'left', 'right'] }],\n            /**\n             * Touch Action Y\n             * @see https://tailwindcss.com/docs/touch-action\n             */\n            'touch-y': [{ 'touch-pan': ['y', 'up', 'down'] }],\n            /**\n             * Touch Action Pinch Zoom\n             * @see https://tailwindcss.com/docs/touch-action\n             */\n            'touch-pz': ['touch-pinch-zoom'],\n            /**\n             * User Select\n             * @see https://tailwindcss.com/docs/user-select\n             */\n            select: [{ select: ['none', 'text', 'all', 'auto'] }],\n            /**\n             * Will Change\n             * @see https://tailwindcss.com/docs/will-change\n             */\n            'will-change': [\n                {\n                    'will-change': [\n                        'auto',\n                        'scroll',\n                        'contents',\n                        'transform',\n                        isArbitraryVariable,\n                        isArbitraryValue,\n                    ],\n                },\n            ],\n\n            // -----------\n            // --- SVG ---\n            // -----------\n\n            /**\n             * Fill\n             * @see https://tailwindcss.com/docs/fill\n             */\n            fill: [{ fill: ['none', ...scaleColor()] }],\n            /**\n             * Stroke Width\n             * @see https://tailwindcss.com/docs/stroke-width\n             */\n            'stroke-w': [\n                {\n                    stroke: [\n                        isNumber,\n                        isArbitraryVariableLength,\n                        isArbitraryLength,\n                        isArbitraryNumber,\n                    ],\n                },\n            ],\n            /**\n             * Stroke\n             * @see https://tailwindcss.com/docs/stroke\n             */\n            stroke: [{ stroke: ['none', ...scaleColor()] }],\n\n            // ---------------------\n            // --- Accessibility ---\n            // ---------------------\n\n            /**\n             * Forced Color Adjust\n             * @see https://tailwindcss.com/docs/forced-color-adjust\n             */\n            'forced-color-adjust': [{ 'forced-color-adjust': ['auto', 'none'] }],\n        },\n        conflictingClassGroups: {\n            overflow: ['overflow-x', 'overflow-y'],\n            overscroll: ['overscroll-x', 'overscroll-y'],\n            inset: ['inset-x', 'inset-y', 'start', 'end', 'top', 'right', 'bottom', 'left'],\n            'inset-x': ['right', 'left'],\n            'inset-y': ['top', 'bottom'],\n            flex: ['basis', 'grow', 'shrink'],\n            gap: ['gap-x', 'gap-y'],\n            p: ['px', 'py', 'ps', 'pe', 'pt', 'pr', 'pb', 'pl'],\n            px: ['pr', 'pl'],\n            py: ['pt', 'pb'],\n            m: ['mx', 'my', 'ms', 'me', 'mt', 'mr', 'mb', 'ml'],\n            mx: ['mr', 'ml'],\n            my: ['mt', 'mb'],\n            size: ['w', 'h'],\n            'font-size': ['leading'],\n            'fvn-normal': [\n                'fvn-ordinal',\n                'fvn-slashed-zero',\n                'fvn-figure',\n                'fvn-spacing',\n                'fvn-fraction',\n            ],\n            'fvn-ordinal': ['fvn-normal'],\n            'fvn-slashed-zero': ['fvn-normal'],\n            'fvn-figure': ['fvn-normal'],\n            'fvn-spacing': ['fvn-normal'],\n            'fvn-fraction': ['fvn-normal'],\n            'line-clamp': ['display', 'overflow'],\n            rounded: [\n                'rounded-s',\n                'rounded-e',\n                'rounded-t',\n                'rounded-r',\n                'rounded-b',\n                'rounded-l',\n                'rounded-ss',\n                'rounded-se',\n                'rounded-ee',\n                'rounded-es',\n                'rounded-tl',\n                'rounded-tr',\n                'rounded-br',\n                'rounded-bl',\n            ],\n            'rounded-s': ['rounded-ss', 'rounded-es'],\n            'rounded-e': ['rounded-se', 'rounded-ee'],\n            'rounded-t': ['rounded-tl', 'rounded-tr'],\n            'rounded-r': ['rounded-tr', 'rounded-br'],\n            'rounded-b': ['rounded-br', 'rounded-bl'],\n            'rounded-l': ['rounded-tl', 'rounded-bl'],\n            'border-spacing': ['border-spacing-x', 'border-spacing-y'],\n            'border-w': [\n                'border-w-x',\n                'border-w-y',\n                'border-w-s',\n                'border-w-e',\n                'border-w-t',\n                'border-w-r',\n                'border-w-b',\n                'border-w-l',\n            ],\n            'border-w-x': ['border-w-r', 'border-w-l'],\n            'border-w-y': ['border-w-t', 'border-w-b'],\n            'border-color': [\n                'border-color-x',\n                'border-color-y',\n                'border-color-s',\n                'border-color-e',\n                'border-color-t',\n                'border-color-r',\n                'border-color-b',\n                'border-color-l',\n            ],\n            'border-color-x': ['border-color-r', 'border-color-l'],\n            'border-color-y': ['border-color-t', 'border-color-b'],\n            translate: ['translate-x', 'translate-y', 'translate-none'],\n            'translate-none': ['translate', 'translate-x', 'translate-y', 'translate-z'],\n            'scroll-m': [\n                'scroll-mx',\n                'scroll-my',\n                'scroll-ms',\n                'scroll-me',\n                'scroll-mt',\n                'scroll-mr',\n                'scroll-mb',\n                'scroll-ml',\n            ],\n            'scroll-mx': ['scroll-mr', 'scroll-ml'],\n            'scroll-my': ['scroll-mt', 'scroll-mb'],\n            'scroll-p': [\n                'scroll-px',\n                'scroll-py',\n                'scroll-ps',\n                'scroll-pe',\n                'scroll-pt',\n                'scroll-pr',\n                'scroll-pb',\n                'scroll-pl',\n            ],\n            'scroll-px': ['scroll-pr', 'scroll-pl'],\n            'scroll-py': ['scroll-pt', 'scroll-pb'],\n            touch: ['touch-x', 'touch-y', 'touch-pz'],\n            'touch-x': ['touch'],\n            'touch-y': ['touch'],\n            'touch-pz': ['touch'],\n        },\n        conflictingClassGroupModifiers: {\n            'font-size': ['leading'],\n        },\n        orderSensitiveModifiers: [\n            '*',\n            '**',\n            'after',\n            'backdrop',\n            'before',\n            'details-content',\n            'file',\n            'first-letter',\n            'first-line',\n            'marker',\n            'placeholder',\n            'selection',\n        ],\n    } as const satisfies Config<DefaultClassGroupIds, DefaultThemeGroupIds>\n}\n","import { AnyConfig, ConfigExtension, NoInfer } from './types'\n\n/**\n * @param baseConfig Config where other config will be merged into. This object will be mutated.\n * @param configExtension Partial config to merge into the `baseConfig`.\n */\nexport const mergeConfigs = <ClassGroupIds extends string, ThemeGroupIds extends string = never>(\n    baseConfig: AnyConfig,\n    {\n        cacheSize,\n        prefix,\n        experimentalParseClassName,\n        extend = {},\n        override = {},\n    }: ConfigExtension<ClassGroupIds, ThemeGroupIds>,\n) => {\n    overrideProperty(baseConfig, 'cacheSize', cacheSize)\n    overrideProperty(baseConfig, 'prefix', prefix)\n    overrideProperty(baseConfig, 'experimentalParseClassName', experimentalParseClassName)\n\n    overrideConfigProperties(baseConfig.theme, override.theme)\n    overrideConfigProperties(baseConfig.classGroups, override.classGroups)\n    overrideConfigProperties(baseConfig.conflictingClassGroups, override.conflictingClassGroups)\n    overrideConfigProperties(\n        baseConfig.conflictingClassGroupModifiers,\n        override.conflictingClassGroupModifiers,\n    )\n    overrideProperty(baseConfig, 'orderSensitiveModifiers', override.orderSensitiveModifiers)\n\n    mergeConfigProperties(baseConfig.theme, extend.theme)\n    mergeConfigProperties(baseConfig.classGroups, extend.classGroups)\n    mergeConfigProperties(baseConfig.conflictingClassGroups, extend.conflictingClassGroups)\n    mergeConfigProperties(\n        baseConfig.conflictingClassGroupModifiers,\n        extend.conflictingClassGroupModifiers,\n    )\n    mergeArrayProperties(baseConfig, extend, 'orderSensitiveModifiers')\n\n    return baseConfig\n}\n\nconst overrideProperty = <T extends object, K extends keyof T>(\n    baseObject: T,\n    overrideKey: K,\n    overrideValue: T[K] | undefined,\n) => {\n    if (overrideValue !== undefined) {\n        baseObject[overrideKey] = overrideValue\n    }\n}\n\nconst overrideConfigProperties = (\n    baseObject: Partial<Record<string, readonly unknown[]>>,\n    overrideObject: Partial<Record<string, readonly unknown[]>> | undefined,\n) => {\n    if (overrideObject) {\n        for (const key in overrideObject) {\n            overrideProperty(baseObject, key, overrideObject[key])\n        }\n    }\n}\n\nconst mergeConfigProperties = (\n    baseObject: Partial<Record<string, readonly unknown[]>>,\n    mergeObject: Partial<Record<string, readonly unknown[]>> | undefined,\n) => {\n    if (mergeObject) {\n        for (const key in mergeObject) {\n            mergeArrayProperties(baseObject, mergeObject, key)\n        }\n    }\n}\n\nconst mergeArrayProperties = <Key extends string>(\n    baseObject: Partial<Record<NoInfer<Key>, readonly unknown[]>>,\n    mergeObject: Partial<Record<NoInfer<Key>, readonly unknown[]>>,\n    key: Key,\n) => {\n    const mergeValue = mergeObject[key]\n\n    if (mergeValue !== undefined) {\n        baseObject[key] = baseObject[key] ? baseObject[key].concat(mergeValue) : mergeValue\n    }\n}\n","import { createTailwindMerge } from './create-tailwind-merge'\nimport { getDefaultConfig } from './default-config'\nimport { mergeConfigs } from './merge-configs'\nimport { AnyConfig, ConfigExtension, DefaultClassGroupIds, DefaultThemeGroupIds } from './types'\n\ntype CreateConfigSubsequent = (config: AnyConfig) => AnyConfig\n\nexport const extendTailwindMerge = <\n    AdditionalClassGroupIds extends string = never,\n    AdditionalThemeGroupIds extends string = never,\n>(\n    configExtension:\n        | ConfigExtension<\n              DefaultClassGroupIds | AdditionalClassGroupIds,\n              DefaultThemeGroupIds | AdditionalThemeGroupIds\n          >\n        | CreateConfigSubsequent,\n    ...createConfig: CreateConfigSubsequent[]\n) =>\n    typeof configExtension === 'function'\n        ? createTailwindMerge(getDefaultConfig, configExtension, ...createConfig)\n        : createTailwindMerge(\n              () => mergeConfigs(getDefaultConfig(), configExtension),\n              ...createConfig,\n          )\n","import { createTailwindMerge } from './create-tailwind-merge'\nimport { getDefaultConfig } from './default-config'\n\nexport const twMerge = createTailwindMerge(getDefaultConfig)\n","'use client'\r\n\r\nimport { ThemeProvider } from '@/hooks/useTheme'\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query'\r\nimport { useState } from 'react'\r\n\r\nexport function Providers({ children }: { children: React.ReactNode }) {\r\n\tconst [queryClient] = useState(() => new QueryClient())\r\n\r\n\treturn (\r\n\t\t<QueryClientProvider client={queryClient}>\r\n\t\t\t<ThemeProvider>{children}</ThemeProvider>\r\n\t\t</QueryClientProvider>\r\n\t)\r\n}\r\n","// src/queryClient.ts\nimport {\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  noop,\n  partialMatchKey,\n  resolveStaleTime,\n  skipToken\n} from \"./utils.js\";\nimport { QueryCache } from \"./queryCache.js\";\nimport { MutationCache } from \"./mutationCache.js\";\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { infiniteQueryBehavior } from \"./infiniteQueryBehavior.js\";\nvar QueryClient = class {\n  #queryCache;\n  #mutationCache;\n  #defaultOptions;\n  #queryDefaults;\n  #mutationDefaults;\n  #mountCount;\n  #unsubscribeFocus;\n  #unsubscribeOnline;\n  constructor(config = {}) {\n    this.#queryCache = config.queryCache || new QueryCache();\n    this.#mutationCache = config.mutationCache || new MutationCache();\n    this.#defaultOptions = config.defaultOptions || {};\n    this.#queryDefaults = /* @__PURE__ */ new Map();\n    this.#mutationDefaults = /* @__PURE__ */ new Map();\n    this.#mountCount = 0;\n  }\n  mount() {\n    this.#mountCount++;\n    if (this.#mountCount !== 1) return;\n    this.#unsubscribeFocus = focusManager.subscribe(async (focused) => {\n      if (focused) {\n        await this.resumePausedMutations();\n        this.#queryCache.onFocus();\n      }\n    });\n    this.#unsubscribeOnline = onlineManager.subscribe(async (online) => {\n      if (online) {\n        await this.resumePausedMutations();\n        this.#queryCache.onOnline();\n      }\n    });\n  }\n  unmount() {\n    this.#mountCount--;\n    if (this.#mountCount !== 0) return;\n    this.#unsubscribeFocus?.();\n    this.#unsubscribeFocus = void 0;\n    this.#unsubscribeOnline?.();\n    this.#unsubscribeOnline = void 0;\n  }\n  isFetching(filters) {\n    return this.#queryCache.findAll({ ...filters, fetchStatus: \"fetching\" }).length;\n  }\n  isMutating(filters) {\n    return this.#mutationCache.findAll({ ...filters, status: \"pending\" }).length;\n  }\n  /**\n   * Imperative (non-reactive) way to retrieve data for a QueryKey.\n   * Should only be used in callbacks or functions where reading the latest data is necessary, e.g. for optimistic updates.\n   *\n   * Hint: Do not use this function inside a component, because it won't receive updates.\n   * Use `useQuery` to create a `QueryObserver` that subscribes to changes.\n   */\n  getQueryData(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state.data;\n  }\n  ensureQueryData(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    const query = this.#queryCache.build(this, defaultedOptions);\n    const cachedData = query.state.data;\n    if (cachedData === void 0) {\n      return this.fetchQuery(options);\n    }\n    if (options.revalidateIfStale && query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))) {\n      void this.prefetchQuery(defaultedOptions);\n    }\n    return Promise.resolve(cachedData);\n  }\n  getQueriesData(filters) {\n    return this.#queryCache.findAll(filters).map(({ queryKey, state }) => {\n      const data = state.data;\n      return [queryKey, data];\n    });\n  }\n  setQueryData(queryKey, updater, options) {\n    const defaultedOptions = this.defaultQueryOptions({ queryKey });\n    const query = this.#queryCache.get(\n      defaultedOptions.queryHash\n    );\n    const prevData = query?.state.data;\n    const data = functionalUpdate(updater, prevData);\n    if (data === void 0) {\n      return void 0;\n    }\n    return this.#queryCache.build(this, defaultedOptions).setData(data, { ...options, manual: true });\n  }\n  setQueriesData(filters, updater, options) {\n    return notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map(({ queryKey }) => [\n        queryKey,\n        this.setQueryData(queryKey, updater, options)\n      ])\n    );\n  }\n  getQueryState(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(\n      options.queryHash\n    )?.state;\n  }\n  removeQueries(filters) {\n    const queryCache = this.#queryCache;\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        queryCache.remove(query);\n      });\n    });\n  }\n  resetQueries(filters, options) {\n    const queryCache = this.#queryCache;\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        query.reset();\n      });\n      return this.refetchQueries(\n        {\n          type: \"active\",\n          ...filters\n        },\n        options\n      );\n    });\n  }\n  cancelQueries(filters, cancelOptions = {}) {\n    const defaultedCancelOptions = { revert: true, ...cancelOptions };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map((query) => query.cancel(defaultedCancelOptions))\n    );\n    return Promise.all(promises).then(noop).catch(noop);\n  }\n  invalidateQueries(filters, options = {}) {\n    return notifyManager.batch(() => {\n      this.#queryCache.findAll(filters).forEach((query) => {\n        query.invalidate();\n      });\n      if (filters?.refetchType === \"none\") {\n        return Promise.resolve();\n      }\n      return this.refetchQueries(\n        {\n          ...filters,\n          type: filters?.refetchType ?? filters?.type ?? \"active\"\n        },\n        options\n      );\n    });\n  }\n  refetchQueries(filters, options = {}) {\n    const fetchOptions = {\n      ...options,\n      cancelRefetch: options.cancelRefetch ?? true\n    };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).filter((query) => !query.isDisabled() && !query.isStatic()).map((query) => {\n        let promise = query.fetch(void 0, fetchOptions);\n        if (!fetchOptions.throwOnError) {\n          promise = promise.catch(noop);\n        }\n        return query.state.fetchStatus === \"paused\" ? Promise.resolve() : promise;\n      })\n    );\n    return Promise.all(promises).then(noop);\n  }\n  fetchQuery(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    if (defaultedOptions.retry === void 0) {\n      defaultedOptions.retry = false;\n    }\n    const query = this.#queryCache.build(this, defaultedOptions);\n    return query.isStaleByTime(\n      resolveStaleTime(defaultedOptions.staleTime, query)\n    ) ? query.fetch(defaultedOptions) : Promise.resolve(query.state.data);\n  }\n  prefetchQuery(options) {\n    return this.fetchQuery(options).then(noop).catch(noop);\n  }\n  fetchInfiniteQuery(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.fetchQuery(options);\n  }\n  prefetchInfiniteQuery(options) {\n    return this.fetchInfiniteQuery(options).then(noop).catch(noop);\n  }\n  ensureInfiniteQueryData(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.ensureQueryData(options);\n  }\n  resumePausedMutations() {\n    if (onlineManager.isOnline()) {\n      return this.#mutationCache.resumePausedMutations();\n    }\n    return Promise.resolve();\n  }\n  getQueryCache() {\n    return this.#queryCache;\n  }\n  getMutationCache() {\n    return this.#mutationCache;\n  }\n  getDefaultOptions() {\n    return this.#defaultOptions;\n  }\n  setDefaultOptions(options) {\n    this.#defaultOptions = options;\n  }\n  setQueryDefaults(queryKey, options) {\n    this.#queryDefaults.set(hashKey(queryKey), {\n      queryKey,\n      defaultOptions: options\n    });\n  }\n  getQueryDefaults(queryKey) {\n    const defaults = [...this.#queryDefaults.values()];\n    const result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(queryKey, queryDefault.queryKey)) {\n        Object.assign(result, queryDefault.defaultOptions);\n      }\n    });\n    return result;\n  }\n  setMutationDefaults(mutationKey, options) {\n    this.#mutationDefaults.set(hashKey(mutationKey), {\n      mutationKey,\n      defaultOptions: options\n    });\n  }\n  getMutationDefaults(mutationKey) {\n    const defaults = [...this.#mutationDefaults.values()];\n    const result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {\n        Object.assign(result, queryDefault.defaultOptions);\n      }\n    });\n    return result;\n  }\n  defaultQueryOptions(options) {\n    if (options._defaulted) {\n      return options;\n    }\n    const defaultedOptions = {\n      ...this.#defaultOptions.queries,\n      ...this.getQueryDefaults(options.queryKey),\n      ...options,\n      _defaulted: true\n    };\n    if (!defaultedOptions.queryHash) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(\n        defaultedOptions.queryKey,\n        defaultedOptions\n      );\n    }\n    if (defaultedOptions.refetchOnReconnect === void 0) {\n      defaultedOptions.refetchOnReconnect = defaultedOptions.networkMode !== \"always\";\n    }\n    if (defaultedOptions.throwOnError === void 0) {\n      defaultedOptions.throwOnError = !!defaultedOptions.suspense;\n    }\n    if (!defaultedOptions.networkMode && defaultedOptions.persister) {\n      defaultedOptions.networkMode = \"offlineFirst\";\n    }\n    if (defaultedOptions.queryFn === skipToken) {\n      defaultedOptions.enabled = false;\n    }\n    return defaultedOptions;\n  }\n  defaultMutationOptions(options) {\n    if (options?._defaulted) {\n      return options;\n    }\n    return {\n      ...this.#defaultOptions.mutations,\n      ...options?.mutationKey && this.getMutationDefaults(options.mutationKey),\n      ...options,\n      _defaulted: true\n    };\n  }\n  clear() {\n    this.#queryCache.clear();\n    this.#mutationCache.clear();\n  }\n};\nexport {\n  QueryClient\n};\n//# sourceMappingURL=queryClient.js.map","// src/infiniteQueryBehavior.ts\nimport { addToEnd, addToStart, ensureQueryFn } from \"./utils.js\";\nfunction infiniteQueryBehavior(pages) {\n  return {\n    onFetch: (context, query) => {\n      const options = context.options;\n      const direction = context.fetchOptions?.meta?.fetchMore?.direction;\n      const oldPages = context.state.data?.pages || [];\n      const oldPageParams = context.state.data?.pageParams || [];\n      let result = { pages: [], pageParams: [] };\n      let currentPage = 0;\n      const fetchFn = async () => {\n        let cancelled = false;\n        const addSignalProperty = (object) => {\n          Object.defineProperty(object, \"signal\", {\n            enumerable: true,\n            get: () => {\n              if (context.signal.aborted) {\n                cancelled = true;\n              } else {\n                context.signal.addEventListener(\"abort\", () => {\n                  cancelled = true;\n                });\n              }\n              return context.signal;\n            }\n          });\n        };\n        const queryFn = ensureQueryFn(context.options, context.fetchOptions);\n        const fetchPage = async (data, param, previous) => {\n          if (cancelled) {\n            return Promise.reject();\n          }\n          if (param == null && data.pages.length) {\n            return Promise.resolve(data);\n          }\n          const createQueryFnContext = () => {\n            const queryFnContext2 = {\n              client: context.client,\n              queryKey: context.queryKey,\n              pageParam: param,\n              direction: previous ? \"backward\" : \"forward\",\n              meta: context.options.meta\n            };\n            addSignalProperty(queryFnContext2);\n            return queryFnContext2;\n          };\n          const queryFnContext = createQueryFnContext();\n          const page = await queryFn(queryFnContext);\n          const { maxPages } = context.options;\n          const addTo = previous ? addToStart : addToEnd;\n          return {\n            pages: addTo(data.pages, page, maxPages),\n            pageParams: addTo(data.pageParams, param, maxPages)\n          };\n        };\n        if (direction && oldPages.length) {\n          const previous = direction === \"backward\";\n          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam;\n          const oldData = {\n            pages: oldPages,\n            pageParams: oldPageParams\n          };\n          const param = pageParamFn(options, oldData);\n          result = await fetchPage(oldData, param, previous);\n        } else {\n          const remainingPages = pages ?? oldPages.length;\n          do {\n            const param = currentPage === 0 ? oldPageParams[0] ?? options.initialPageParam : getNextPageParam(options, result);\n            if (currentPage > 0 && param == null) {\n              break;\n            }\n            result = await fetchPage(result, param);\n            currentPage++;\n          } while (currentPage < remainingPages);\n        }\n        return result;\n      };\n      if (context.options.persister) {\n        context.fetchFn = () => {\n          return context.options.persister?.(\n            fetchFn,\n            {\n              client: context.client,\n              queryKey: context.queryKey,\n              meta: context.options.meta,\n              signal: context.signal\n            },\n            query\n          );\n        };\n      } else {\n        context.fetchFn = fetchFn;\n      }\n    }\n  };\n}\nfunction getNextPageParam(options, { pages, pageParams }) {\n  const lastIndex = pages.length - 1;\n  return pages.length > 0 ? options.getNextPageParam(\n    pages[lastIndex],\n    pages,\n    pageParams[lastIndex],\n    pageParams\n  ) : void 0;\n}\nfunction getPreviousPageParam(options, { pages, pageParams }) {\n  return pages.length > 0 ? options.getPreviousPageParam?.(pages[0], pages, pageParams[0], pageParams) : void 0;\n}\nfunction hasNextPage(options, data) {\n  if (!data) return false;\n  return getNextPageParam(options, data) != null;\n}\nfunction hasPreviousPage(options, data) {\n  if (!data || !options.getPreviousPageParam) return false;\n  return getPreviousPageParam(options, data) != null;\n}\nexport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n};\n//# sourceMappingURL=infiniteQueryBehavior.js.map","// src/mutationCache.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Mutation } from \"./mutation.js\";\nimport { matchMutation, noop } from \"./utils.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar MutationCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#mutations = /* @__PURE__ */ new Set();\n    this.#scopes = /* @__PURE__ */ new Map();\n    this.#mutationId = 0;\n  }\n  #mutations;\n  #scopes;\n  #mutationId;\n  build(client, options, state) {\n    const mutation = new Mutation({\n      client,\n      mutationCache: this,\n      mutationId: ++this.#mutationId,\n      options: client.defaultMutationOptions(options),\n      state\n    });\n    this.add(mutation);\n    return mutation;\n  }\n  add(mutation) {\n    this.#mutations.add(mutation);\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const scopedMutations = this.#scopes.get(scope);\n      if (scopedMutations) {\n        scopedMutations.push(mutation);\n      } else {\n        this.#scopes.set(scope, [mutation]);\n      }\n    }\n    this.notify({ type: \"added\", mutation });\n  }\n  remove(mutation) {\n    if (this.#mutations.delete(mutation)) {\n      const scope = scopeFor(mutation);\n      if (typeof scope === \"string\") {\n        const scopedMutations = this.#scopes.get(scope);\n        if (scopedMutations) {\n          if (scopedMutations.length > 1) {\n            const index = scopedMutations.indexOf(mutation);\n            if (index !== -1) {\n              scopedMutations.splice(index, 1);\n            }\n          } else if (scopedMutations[0] === mutation) {\n            this.#scopes.delete(scope);\n          }\n        }\n      }\n    }\n    this.notify({ type: \"removed\", mutation });\n  }\n  canRun(mutation) {\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const mutationsWithSameScope = this.#scopes.get(scope);\n      const firstPendingMutation = mutationsWithSameScope?.find(\n        (m) => m.state.status === \"pending\"\n      );\n      return !firstPendingMutation || firstPendingMutation === mutation;\n    } else {\n      return true;\n    }\n  }\n  runNext(mutation) {\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const foundMutation = this.#scopes.get(scope)?.find((m) => m !== mutation && m.state.isPaused);\n      return foundMutation?.continue() ?? Promise.resolve();\n    } else {\n      return Promise.resolve();\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.#mutations.forEach((mutation) => {\n        this.notify({ type: \"removed\", mutation });\n      });\n      this.#mutations.clear();\n      this.#scopes.clear();\n    });\n  }\n  getAll() {\n    return Array.from(this.#mutations);\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (mutation) => matchMutation(defaultedFilters, mutation)\n    );\n  }\n  findAll(filters = {}) {\n    return this.getAll().filter((mutation) => matchMutation(filters, mutation));\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  resumePausedMutations() {\n    const pausedMutations = this.getAll().filter((x) => x.state.isPaused);\n    return notifyManager.batch(\n      () => Promise.all(\n        pausedMutations.map((mutation) => mutation.continue().catch(noop))\n      )\n    );\n  }\n};\nfunction scopeFor(mutation) {\n  return mutation.options.scope?.id;\n}\nexport {\n  MutationCache\n};\n//# sourceMappingURL=mutationCache.js.map","// src/queryCache.ts\nimport { hashQueryKeyByOptions, matchQuery } from \"./utils.js\";\nimport { Query } from \"./query.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar QueryCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#queries = /* @__PURE__ */ new Map();\n  }\n  #queries;\n  build(client, options, state) {\n    const queryKey = options.queryKey;\n    const queryHash = options.queryHash ?? hashQueryKeyByOptions(queryKey, options);\n    let query = this.get(queryHash);\n    if (!query) {\n      query = new Query({\n        client,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n    return query;\n  }\n  add(query) {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query);\n      this.notify({\n        type: \"added\",\n        query\n      });\n    }\n  }\n  remove(query) {\n    const queryInMap = this.#queries.get(query.queryHash);\n    if (queryInMap) {\n      query.destroy();\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash);\n      }\n      this.notify({ type: \"removed\", query });\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query);\n      });\n    });\n  }\n  get(queryHash) {\n    return this.#queries.get(queryHash);\n  }\n  getAll() {\n    return [...this.#queries.values()];\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (query) => matchQuery(defaultedFilters, query)\n    );\n  }\n  findAll(filters = {}) {\n    const queries = this.getAll();\n    return Object.keys(filters).length > 0 ? queries.filter((query) => matchQuery(filters, query)) : queries;\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  onFocus() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus();\n      });\n    });\n  }\n  onOnline() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline();\n      });\n    });\n  }\n};\nexport {\n  QueryCache\n};\n//# sourceMappingURL=queryCache.js.map"],"names":["node","duration","event","Root","BailoutToCSR","reason","children","window","BailoutToCSRError","encodeURIPath","file","split","map","p","encodeURIComponent","join","PreloadChunks","moduleIds","workStore","workAsyncStorage","getStore","undefined","allFiles","reactLoadableManifest","manifest","key","chunks","files","push","length","dplId","process","env","NEXT_DEPLOYMENT_ID","chunk","href","assetPrefix","isCss","endsWith","link","precedence","rel","as","nonce","preload","fetchPriority","convertModule","mod","hasDefault","default","defaultOptions","loader","Promise","resolve","loading","ssr","Loadable","options","opts","Lazy","lazy","then","Loading","LoadableComponent","props","fallbackElement","isLoading","pastDelay","error","hasSuspenseBoundary","Wrap","Suspense","Fragment","wrapProps","fallback","modules","displayName","dynamic","dynamicOptions","loadableOptions","mergedOptions","loadableGenerated","module","exports","require","vendored","HeadManagerContext","setAttributesFromProps","DOMAttributeNames","acceptCharset","className","htmlFor","httpEquiv","noModule","ignoreProps","isBooleanScriptAttribute","attr","includes","el","value","Object","entries","hasOwnProperty","toLowerCase","tagName","setAttribute","String","removeAttribute","cancelIdleCallback","requestIdleCallback","self","bind","cb","start","Date","now","setTimeout","didTimeout","timeRemaining","Math","max","id","clearTimeout","handleClientScriptLoad","initScriptLoader","ScriptCache","Map","LoadCache","Set","insertStylesheets","stylesheets","ReactDOM","preinit","forEach","stylesheet","head","document","createElement","type","appendChild","loadScript","src","onLoad","onReady","dangerouslySetInnerHTML","strategy","onError","cacheKey","has","add","get","afterLoad","loadPromise","reject","addEventListener","e","call","catch","innerHTML","__html","textContent","Array","isArray","set","body","loadLazyScript","readyState","addBeforeInteractiveToCache","scripts","querySelectorAll","script","getAttribute","scriptLoaderItems","Script","restProps","updateScripts","getIsSsr","appDir","useContext","hasOnReadyEffectCalled","useRef","useEffect","current","hasLoadScriptEffectCalled","concat","styleSrc","JSON","stringify","integrity","crossOrigin","defineProperty","loggedMessages: Set<string>","assign","searchParamsToUrlQuery","urlQueryToSearchParams","searchParams","query","existing","stringifyUrlQueryParam","param","isNaN","URLSearchParams","item","append","target","searchParamsList","keys","delete","formatUrl","formatWithValidation","urlObjectKeys","slashedProtocols","urlObj","auth","hostname","protocol","pathname","hash","host","replace","indexOf","port","querystring","search","slashes","test","url","NODE_ENV","console","warn","useMergedRef","refA","refB","cleanupA","cleanupB","useCallback","cleanupFnA","cleanupFnB","applyRef","cleanup","DecodeError","MiddlewareNotFoundError","MissingStaticPage","NormalizeError","PageNotFoundError","SP","ST","WEB_VITALS","execOnce","getDisplayName","getLocationOrigin","getURL","isAbsoluteUrl","isResSent","loadGetInitialProps","normalizeRepeatedSlashes","stringifyError","fn","used","result","args","ABSOLUTE_URL_REGEX","location","origin","substring","Component","name","res","finished","headersSent","urlParts","urlNoQuery","slice","App","ctx","prototype","getInitialProps","message","Error","pageProps","performance","every","method","constructor","page","code","stack","parsePath","path","hashIndex","queryIndex","hasQuery","addPathPrefix","prefix","startsWith","removeTrailingSlash","route","normalizePathTrailingSlash","__NEXT_MANUAL_TRAILING_SLASH","__NEXT_TRAILING_SLASH","addBasePath","basePath","__NEXT_ROUTER_BASEPATH","required","__NEXT_MANUAL_CLIENT_BASE_PATH","warnOnce","_","warnings","msg","FetchStrategy","NavigationResultTag","PrefetchPriority","createCacheKey","originalHref","nextUrl","originalUrl","URL","HasLoadingBoundary","matchSegment","existingSegment","segment","ACTION_HEADER","FLIGHT_HEADERS","NEXT_ACTION_NOT_FOUND_HEADER","NEXT_DID_POSTPONE_HEADER","NEXT_HMR_REFRESH_HASH_COOKIE","NEXT_HMR_REFRESH_HEADER","NEXT_HTML_REQUEST_ID_HEADER","NEXT_IS_PRERENDER_HEADER","NEXT_REQUEST_ID_HEADER","NEXT_REWRITTEN_PATH_HEADER","NEXT_REWRITTEN_QUERY_HEADER","NEXT_ROUTER_PREFETCH_HEADER","NEXT_ROUTER_SEGMENT_PREFETCH_HEADER","NEXT_ROUTER_STALE_TIME_HEADER","NEXT_ROUTER_STATE_TREE_HEADER","NEXT_RSC_UNION_QUERY","NEXT_URL","RSC_CONTENT_TYPE_HEADER","RSC_HEADER","HEAD_REQUEST_KEY","ROOT_SEGMENT_REQUEST_KEY","appendSegmentRequestKeyPart","convertSegmentPathToStaticExportFilename","createSegmentRequestKeyPart","PAGE_SEGMENT_KEY","safeName","encodeToFilesystemAndURLSafeString","paramType","encodedName","parentRequestKey","parallelRouteKey","childRequestKeyPart","slotKey","simpleParamValueRegex","base64url","btoa","segmentPath","doesStaticSegmentAppearInURL","getCacheKeyForDynamicParam","getParamValueFromCacheKey","getRenderedPathname","getRenderedSearch","parseDynamicParamFromURLPart","urlSearchParamsToParsedUrlQuery","urlToUrlWithoutFlightMarker","response","rewrittenQuery","headers","rewrittenPath","pathnameParts","partIndex","s","i","DEFAULT_SEGMENT_KEY","paramValue","renderedSearch","pageSegmentWithSearchParams","addSearchParamsIfPageSegment","fromEntries","urlWithoutFlightParameters","__NEXT_CONFIG_OUTPUT","paramCacheKey","isCatchAll","createHrefFromUrl","includeHash","createInitialRSCPayloadFromFallbackPrerender","getFlightDataPartsFromPath","getNextFlightSegmentPath","normalizeFlightData","prepareFlightRouterStateForRequest","flightDataPath","flightDataPathLength","tree","seedData","isHeadPartial","pathToSegment","isRootRender","fallbackInitialRSCPayload","renderedPathname","canonicalUrl","originalFlightDataPath","f","originalFlightRouterState","b","c","q","fillInFallbackFlightRouterState","m","G","S","flightRouterState","filter","index","fillInFallbackFlightRouterStateImpl","pathnamePartsIndex","originalSegment","newSegment","doesAppearInURL","paramName","childPathnamePartsIndex","newChildren","childFlightRouterState","newState","flightSegmentPath","flightData","isHmrRefresh","stripClientOnlyDataFromFlightRouterState","parallelRoutes","_url","refreshMarker","isRootLayout","hasLoadingBoundary","cleanedSegment","stripSearchParamsFromPageSegment","cleanedParallelRoutes","childState","shouldPreserveRefreshMarker","Boolean","getAppBuildId","setAppBuildId","globalBuildId","buildId","djb2Hash","hexHash","str","char","charCodeAt","toString","computeCacheBustingSearchParam","prefetchHeader","segmentPrefetchHeader","stateTreeHeader","nextUrlHeader","setCacheBustingSearchParam","setCacheBustingSearchParamWithHash","uniqueCacheKey","existingSearch","rawQuery","pairs","pair","createFetch","createFromNextReadableStream","fetchServerResponse","createFromReadableStream","createFromReadableStreamBrowser","createFromFetch","createFromFetchBrowser","createDebugChannel","__NEXT_REACT_DEBUG_CHANNEL","doMpaNavigation","isPageUnloading","prefetchKind","PrefetchKind","AUTO","TEMPORARY","isLegacyPPR","__NEXT_PPR","__NEXT_CACHE_COMPONENTS","shouldImmediatelyDecode","responseUrl","redirected","contentType","interception","postponed","staleTimeHeaderSeconds","staleTime","parseInt","isFlightResponse","ok","TURBOPACK","waitForWebpackRuntimeHotUpdate","flightResponsePromise","flightResponse","flightStream","createUnclosingPrefetchStream","normalizedFlightData","couldBeIntercepted","prerendered","debugInfo","_debugInfo","err","signal","__NEXT_TEST_MODE","__next_r","crypto","getRandomValues","Uint32Array","fetchOptions","credentials","priority","fetchUrl","fetchPromise","fetch","createFromNextFetch","browserResponse","__NEXT_CLIENT_VALIDATE_RSC_REQUEST_HEADERS","MAX_REDIRECTS","n","rscResponse","status","requestHeaders","callServer","findSourceMapURL","debugChannel","promiseForResponse","originalFlightStream","reader","getReader","ReadableStream","pull","controller","done","read","enqueue","deleteFromLru","lruPut","updateLruSize","didScheduleCleanup","lruSize","maxLruSize","prev","next","size","ensureCleanupIsScheduled","tail","newNodeSize","prevNodeSize","deleted","requestCleanupCallback","ninetyPercentMax","deleteFromCacheMap","Fallback","createCacheMap","getFromCacheMap","isValueExpired","setInCacheMap","setSizeInCacheMap","Revalidation","cacheMap","parent","getOrInitialize","isRevalidation","entry","remainingKeys","previousKey","existingEntry","newEntry","currentCacheVersion","rootEntry","getEntryWithFallbackImpl","staleAt","version","lazilyEvictIfNeeded","deleteMapEntry","fallbackEntry","setMapEntryValue","dropRef","emptyEntry","fillEmptyReference","oldEntry","ref","fullEntry","parentMap","revalidatingEntry","appendLayoutVaryPath","clonePageVaryPathWithNewSearchParams","finalizeLayoutVaryPath","finalizeMetadataVaryPath","finalizePageVaryPath","getFulfilledRouteVaryPath","getRouteVaryPath","getSegmentVaryPathForRequest","varyPath","parentPath","varyPathPart","requestKey","layoutVaryPath","pageVaryPath","pageRequestKey","fetchStrategy","originalVaryPath","isPage","doesVaryOnSearchParams","Full","PPRRuntime","searchParamsVaryPath","pathParamsVaryPath","patchedVaryPath","newSearch","clonedVaryPath","ensureLeadingSlash","normalizeAppPath","normalizeRscURL","reduce","segments","isGroupSegment","INTERCEPTION_ROUTE_MARKERS","extractInterceptionRouteInformation","isInterceptionRouteAppPath","find","interceptingRoute","marker","interceptedRoute","splitInterceptingRoute","computeChangedPath","extractPathFromFlightRouterState","getSelectedParams","removeLeadingSlash","segmentToPathname","normalizeSegments","acc","some","childrenPath","childPath","computeChangedPathImpl","treeA","treeB","segmentA","parallelRoutesA","segmentB","parallelRoutesB","normalizedSegmentA","normalizedSegmentB","parallelRouterKey","changedPath","currentTree","params","parallelRoute","values","isDynamicParameter","segmentValue","handleMutable","isNotUndefined","state","mutable","shouldScroll","previousNextUrl","patchedTree","pushRef","pendingPush","mpaNavigation","preserveCustomHistoryState","focusAndScrollRef","apply","scrollableSegments","onlyHashChange","hashFragment","decodeURIComponent","segmentPaths","cache","collectedDebugInfo","createRouterCacheKey","withoutSearchParameters","isNavigatingToNewRootLayout","nextTree","currentTreeSegment","nextTreeSegment","currentTreeChild","nextTreeChild","abortTask","listenForDynamicRequest","startPPRNavigation","updateCacheNodeOnPopstateRestoration","MPA_NAVIGATION_TASK","dynamicRequestTree","navigatedAt","oldUrl","oldCacheNode","oldRouterState","newRouterState","prefetchData","prefetchHead","isPrefetchHeadPartial","isSamePageNavigation","scrollableSegmentsResult","updateCacheNodeOnNavigation","didFindRootLayout","oldRouterStateChildren","newRouterStateChildren","prefetchDataChildren","oldParallelRoutes","prefetchParallelRoutes","patchedRouterStateChildren","taskChildren","needsDynamicRequest","dynamicRequestTreeChildren","newRouterStateChild","oldRouterStateChild","oldSegmentMapChild","prefetchDataChild","newSegmentChild","newSegmentPathChild","newSegmentKeyChild","oldSegmentChild","oldCacheNodeChild","taskChild","reuseActiveSegmentInDefaultSlot","beginRenderingNewRouteTree","newCacheNodeChild","newSegmentMapChild","taskChildRoute","dynamicRequestTreeChild","newCacheNode","lazyData","rsc","prefetchRsc","patchRouterStateWithNewChildren","existingCacheNode","possiblyPartialPrefetchHead","createCacheNodeOnNavigation","routerState","routerStateChildren","isLeafSegment","cacheNodeNavigatedAt","DYNAMIC_STALETIME_MS","isPrefetchRscPartial","spawnPendingTask","existingCacheNodeChildren","cacheNodeChildren","routerStateChild","existingSegmentMapChild","segmentChild","segmentPathChild","segmentKeyChild","existingCacheNodeChild","baseRouterState","clone","newTask","createPendingCacheNode","reusedRouterState","oldRefreshMarker","task","responsePromise","serverRouterState","dynamicData","dynamicHead","writeDynamicDataIntoPendingTask","rootTask","taskSegment","finishTaskUsingDynamicDataPayload","taskNode","finishPendingCacheNode","serverChildren","dynamicDataChildren","serverRouterStateChild","dynamicDataChild","maybePrefetchRsc","createDeferredRsc","cacheNode","taskState","serverState","taskStateChildren","serverStateChildren","dataChildren","taskStateChild","serverStateChild","dataChild","segmentMapChild","taskSegmentChild","taskSegmentKeyChild","cacheNodeChild","abortPendingCacheNode","dynamicSegmentData","isDeferredRsc","dynamicLoading","newParallelRoutes","shouldUsePrefetch","DEFERRED","Symbol","tag","pendingRsc","rej","responseDebugInfo","fulfilledRsc","rejectedRsc","navigate","currentUrl","currentCacheNode","currentFlightRouterState","accumulation","readRouteCacheEntry","EntryStatus","Fulfilled","snapshot","readRenderSnapshotFromCache","prefetchFlightRouterState","prefetchSeedData","headSnapshot","readHeadSnapshotFromCache","isPartial","newCanonicalUrl","navigateUsingPrefetchedRouteTree","Rejected","optimisticRoute","requestOptimisticRouteCacheEntry","newRenderedSearch","Async","data","navigateDynamicallyWithNoPrefetch","promiseForDynamicServerResponse","navigationTaskToResult","NoOp","MPA","Success","childRouterStates","childSeedDatas","slots","childTree","childResult","segmentEntry","readSegmentCacheEntry","Pending","promiseForFulfilledEntry","waitForSegmentCacheEntry","Empty","hasRuntimePrefetch","metadata","newUrl","debugInfoFromResponse","simulatePrefetchTreeUsingDynamicTreePatch","hasDynamicHoles","baseTree","treePatch","canMutateInPlace","simulatePrefetchTreeUsingDynamicTreePatchImpl","patch","updatedParallelRouteKey","baseChildren","childBaseRouterState","STATIC_STALETIME_MS","generateSegmentsFromPatch","handleExternalUrl","navigateReducer","Number","__NEXT_CLIENT_ROUTER_DYNAMIC_STALETIME","getStaleTimeMs","__NEXT_CLIENT_ROUTER_STATIC_STALETIME","flightRouterPatch","childSegment","handleNavigationResult","asyncResult","action","isExternalUrl","navigateType","getElementById","navigateUsingSegmentCache","DOC_PREFETCH_RANGE_HEADER_VALUE","doesExportedHtmlMatchBuildId","insertBuildIdComment","DOCTYPE_PREFIX","MAX_BUILD_ID_LENGTH","escapeBuildId","truncated","originalHtml","partialHtmlDocument","canNewFetchStrategyProvideMoreContent","convertRouteTreeToFlightRouterState","createDetachedSegmentCacheEntry","fetchRouteOnCacheMiss","fetchSegmentOnCacheMiss","fetchSegmentPrefetchesUsingDynamicRequest","getCurrentCacheVersion","overwriteRevalidatingSegmentCacheEntry","pingInvalidationListeners","readOrCreateRevalidatingSegmentEntry","readOrCreateRouteCacheEntry","readOrCreateSegmentCacheEntry","revalidateEntireCache","upgradeToPendingSegment","upsertSegmentEntry","staleTimeSeconds","isOutputExportMode","MetadataOnlyRequestTree","routeCacheMap","segmentCacheMap","invalidationListeners","startRevalidationCooldown","pingVisibleLinks","attachInvalidationListener","onInvalidate","notifyInvalidationListener","reportError","tasks","isPrefetchTaskDirty","readRevalidatingSegmentCacheEntry","pendingEntry","promiseWithResolvers","promise","createPromiseWithResolvers","blockedTasks","isPPREnabled","Infinity","requestedUrl","requestedSearch","urlWithoutSearchParams","routeWithNoSearchParams","createPrefetchRequestKey","canonicalUrlForRouteWithNoSearchParams","optimisticCanonicalSearch","optimisticRenderedSearch","optimisticUrl","optimisticCanonicalUrl","optimisticRouteTree","createOptimisticRouteTree","optimisticMetadataTree","optimisticEntry","clonedSlots","originalSlots","varyPathForRequest","candidateEntry","rejectedEntry","PPR","pingBlockedTasks","pingPrefetchTask","fulfillRouteCacheEntry","metadataVaryPath","SubtreeHasNoLoadingBoundary","fulfilledEntry","fulfillSegmentCacheEntry","segmentCacheEntry","rejectRouteCacheEntry","rejectSegmentCacheEntry","convertRootTreePrefetchToRouteTree","rootTree","rootSegment","convertTreePrefetchToRouteTree","prefetch","partialVaryPath","prefetchSlots","childPrefetch","childParamName","childParamType","childServerSentParamKey","paramKey","childDoesAppearInURL","childPartialVaryPath","childParamValue","childParamKey","childRequestKey","SegmentHasLoadingBoundary","convertRootFlightRouterStateToRouteTree","convertFlightRouterStateToRouteTree","parentPartialVaryPath","childRouterState","routeTree","urlAfterRedirects","htmlResponse","Range","partialHtml","text","fetchPrefetchResponse","addSegmentPathToUrlInOutputExportMode","varyHeader","closed","routeIsPPREnabled","prefetchStream","createPrefetchResponseStream","onResponseSizeUpdate","serverData","staleTimeMs","writeDynamicTreeResponseIntoCache","LoadingBoundary","fulfilledVaryPath","routeKey","normalizedRequestKey","requestUrl","spawnedEntries","rejectSegmentEntriesIfStillPending","fulfilledEntries","totalBytesReceivedSoFar","averageSize","isResponsePartial","rp","writeDynamicRenderResponseIntoCache","normalizedFlightDataResult","flightDatas","writeSeedDataIntoCache","fulfillEntrySpawnedByRuntimePrefetch","entriesOwnedByCurrentTask","seedDataChildren","childSeedData","ownedEntry","possiblyNewEntry","onStreamClose","totalByteLength","byteLength","staticUrl","routeDir","staticExportFilename","currentStrategy","newStrategy","cancelPrefetchTask","reschedulePrefetchTask","schedulePrefetchTask","scheduleMicrotask","queueMicrotask","taskHeap","inProgressRequests","sortIdCounter","didScheduleMicrotask","mostRecentlyHoveredLink","REVALIDATION_COOLDOWN_MS","revalidationCooldownTimeoutHandle","ensureWorkIsScheduled","treeAtTimeOfPrefetch","cacheVersion","phase","hasBackgroundWork","spawnedRuntimePrefetches","sortId","isCanceled","_heapIndex","trackMostRecentlyHoveredLink","heapPush","heapDelete","Intent","heapResift","Background","Default","processQueueInMicrotask","hasNetworkBandwidth","spawnPrefetchSubtask","prefetchSubtask","onPrefetchConnectionClosed","heapPeek","exitStatus","pingRoute","heapPop","background","pingRootRouteTree","keyWithoutSearch","routeWithoutSearch","pingStaticHead","pingSharedPartOfCacheComponentsTree","pingRuntimeHead","requestTree","pingRuntimePrefetches","diffRouteTreeAgainstCurrent","pingStaticSegmentData","pingRouteTreeAndIncludeDynamicData","oldTree","newTree","oldTreeChildren","newTreeChildren","newTreeChild","newTreeChildSegment","oldTreeChild","oldTreeChildSegment","childExitStatus","doesCurrentSegmentMatchCachedSegment","pingNewPartOfCacheComponentsTree","requestTreeChildren","requestTreeChild","subtreeHasLoadingBoundary","pingPPRDisabledRouteTreeUpToLoadingBoundary","refetchMarkerContext","refetchMarker","segmentHasLoadingBoundary","isInsideRefetchingParent","spawnedSegment","pingFullSegmentRevalidation","pingPPRSegmentRevalidation","revalidatingSegment","upsertSegmentOnCompletion","pendingSegment","nonEmptyRevalidatingSegment","emptySegment","noop","fulfilled","currentSegment","cachedSegment","compareQueuePriority","a","priorityDiff","phaseDiff","heap","heapSiftUp","first","last","pop","heapSiftDown","parentIndex","halfLength","leftIndex","left","rightIndex","right","IDLE_LINK_STATUS","PENDING_LINK_STATUS","mountFormInstance","mountLinkInstance","onLinkVisibilityChanged","onNavigationIntent","setLinkForCurrentNavigation","unmountLinkForCurrentNavigation","unmountPrefetchableInstance","linkForMostRecentNavigation","pending","startTransition","setOptimisticLinkStatus","prefetchable","WeakMap","prefetchableAndVisible","observer","IntersectionObserver","handleIntersect","rootMargin","observeVisibility","element","instance","existingInstance","observe","coercePrefetchableUrl","createPrefetchURL","reportErrorFn","router","prefetchEnabled","prefetchURL","isVisible","prefetchTask","prefetchHref","unobserve","intersectionRatio","rescheduleLinkPrefetch","unstable_upgradeToDynamicPrefetch","__NEXT_DYNAMIC_ON_HOVER","existingPrefetchTask","getCurrentAppRouterState","appRouterState","scheduleSegmentPrefetchTask","pathHasPrefix","hasBasePath","isLocalURL","locationOrigin","resolved","errorOnce","errors","LinkComponent","useLinkStatus","isModifiedEvent","eventTarget","currentTarget","metaKey","ctrlKey","shiftKey","altKey","nativeEvent","which","linkClicked","linkInstanceRef","scroll","onNavigate","nodeName","isAnchorNodeName","toUpperCase","hasAttribute","preventDefault","isDefaultPrevented","dispatchNavigateAction","React","formatStringOrUrl","urlObjOrString","linkStatus","useOptimistic","hrefProp","asProp","childrenProp","prefetchProp","passHref","shallow","onClick","onMouseEnter","onMouseEnterProp","onTouchStart","onTouchStartProp","legacyBehavior","forwardedRef","unstable_dynamicOnHover","AppRouterContext","getFetchStrategyFromPrefetchProp","createPropError","expected","actual","requiredPropsGuard","requiredProps","optionalPropsGuard","optionalProps","valType","locale","hasDynamicSegment","useMemo","resolvedHref","child","$$typeof","for","Children","only","childRef","observeLinkVisibilityOnMount","mergedRef","childProps","defaultPrevented","upgradeToDynamicPrefetch","__NEXT_LINK_NO_TOUCH_START","cloneElement","LinkStatusContext","Provider","createContext","concatArrays","array2","combinedArray","array1","createClassValidatorObject","classGroupId","validator","createClassPartObject","nextPart","validators","conflictingClassGroups","conflictingClassGroupModifiers","getGroupIdForArbitraryProperty","classParts","CLASS_PART_SEPARATOR","startIndex","getGroupRecursive","classMap","getConflictingClassGroupIds","hasPostfixModifier","modifierConflicts","baseConflicts","EMPTY_CONFLICTS","getClassGroupId","classPartObject","classPathsLength","currentClassPart","nextClassPartObject","classRest","validatorsLength","validatorObj","content","colonIndex","property","ARBITRARY_PROPERTY_PREFIX","createClassMap","config","theme","classGroups","processClassGroups","group","processClassesRecursively","classGroup","len","classDefinition","processClassDefinition","processFunctionDefinition","processObjectDefinition","processStringDefinition","classPartObjectToEdit","getPart","isThemeGetter","parts","part","func","createLruCache","maxCacheSize","cacheSize","create","previousCache","update","IMPORTANT_MODIFIER","MODIFIER_SEPARATOR","EMPTY_MODIFIERS","createResultObject","modifiers","hasImportantModifier","baseClassName","maybePostfixModifierPosition","isExternal","experimentalParseClassName","parseClassName","bracketDepth","parenDepth","postfixModifierPosition","currentCharacter","modifierStart","baseClassNameWithImportantModifier","fullPrefix","parseClassNameOriginal","createSortModifiers","modifierWeights","orderSensitiveModifiers","modifier","isArbitrary","isOrderSensitive","sort","createParseClassName","sortModifiers","createClassGroupUtils","mergeClassList","classList","configUtils","classGroupsInConflict","trim","SPLIT_CLASSES_REGEX","classNames","originalClassName","modifierId","variantModifier","classId","conflictGroups","twJoin","classLists","argument","resolvedValue","string","toValue","mix","k","createTailwindMerge","createConfigRest","cacheSet","functionToCall","initTailwindMerge","previousConfig","createConfigCurrent","createConfigFirst","createConfigUtils","tailwindMerge","cachedResult","cacheGet","fallbackThemeArr","fromTheme","themeGetter","arbitraryValueRegex","arbitraryVariableRegex","fractionRegex","tshirtUnitRegex","lengthUnitRegex","colorFunctionRegex","shadowRegex","imageRegex","isFraction","isNumber","isInteger","isPercent","isTshirtSize","isAny","isLengthOnly","isNever","isShadow","isImage","isAnyNonArbitrary","isArbitraryValue","isArbitraryVariable","isArbitrarySize","getIsArbitraryValue","isLabelSize","isArbitraryLength","isLabelLength","isArbitraryNumber","isLabelNumber","isArbitraryPosition","isLabelPosition","isArbitraryImage","isLabelImage","isArbitraryShadow","isLabelShadow","isArbitraryVariableLength","getIsArbitraryVariable","isArbitraryVariableFamilyName","isLabelFamilyName","isArbitraryVariablePosition","isArbitraryVariableSize","isArbitraryVariableImage","isArbitraryVariableShadow","testLabel","testValue","exec","shouldMatchNoLabel","label","getDefaultConfig","themeColor","themeFont","themeText","themeFontWeight","themeTracking","themeLeading","themeBreakpoint","themeContainer","themeSpacing","themeRadius","themeShadow","themeInsetShadow","themeTextShadow","themeDropShadow","themeBlur","themePerspective","themeAspect","themeEase","themeAnimate","scaleBreak","scalePosition","scalePositionWithArbitrary","scaleOverflow","scaleOverscroll","scaleUnambiguousSpacing","scaleInset","scaleGridTemplateColsRows","scaleGridColRowStartAndEnd","span","scaleGridColRowStartOrEnd","scaleGridAutoColsRows","scaleAlignPrimaryAxis","scaleAlignSecondaryAxis","scaleMargin","scaleSizing","scaleColor","scaleBgPosition","position","scaleBgRepeat","repeat","scaleBgSize","scaleGradientStopPosition","scaleRadius","scaleBorderWidth","scaleLineStyle","scaleBlendMode","scaleMaskImagePosition","scaleBlur","scaleRotate","scaleScale","scaleSkew","scaleTranslate","animate","aspect","blur","breakpoint","color","container","ease","font","leading","perspective","radius","shadow","spacing","tracking","columns","box","display","sr","float","clear","isolation","object","overflow","overscroll","inset","end","top","bottom","visibility","z","basis","flex","grow","shrink","order","col","row","gap","justify","items","baseline","px","py","ps","pe","pt","pr","pb","pl","mx","my","ms","me","mt","mr","mb","ml","w","screen","h","list","placeholder","decoration","indent","align","whitespace","break","wrap","hyphens","bg","linear","to","radial","conic","from","via","rounded","border","divide","outline","ring","opacity","mask","closest","farthest","brightness","contrast","grayscale","invert","saturate","sepia","table","caption","transition","delay","backface","rotate","scale","skew","transform","translate","accent","appearance","caret","scheme","cursor","resize","snap","touch","select","fill","stroke","mergeConfigs","baseConfig","extend","override","overrideProperty","overrideConfigProperties","mergeConfigProperties","mergeArrayProperties","baseObject","overrideKey","overrideValue","overrideObject","mergeObject","mergeValue","extendTailwindMerge","configExtension","createConfig","twMerge"],"mappings":"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","ignoreList":[0,1,2,3,4,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,84,85,86,89,90,92,93,94,95,96,97,98,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,118,119,120,121]}